/*! @maplat/tin v0.6.1 | Kohei Otsuka, Code for History | license: Apache 2.0 */!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=122)}([function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"e",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return c});function r(t,e,n){if(!c(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&l(r),i&&f(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!u(t[0])||!u(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!u(o[0][0])||!u(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!u(t[0][1])||!u(t[0][1]))throw new Error("coordinates must contain numbers");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){if(!c(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&l(n),r&&f(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function u(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function c(t){return!!t&&t.constructor===Object}function l(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!u(t))throw new Error("bbox must only contain numbers")})}function f(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return s});var r=n(0);function i(t){if(!t)throw new Error("obj is required");var e=o(t);if(e.length>1&&Object(r.c)(e[0])&&Object(r.c)(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function o(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return function t(e){if(e.length>1&&Object(r.c)(e[0])&&Object(r.c)(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")}(e),e;throw new Error("No valid coordinates")}function a(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function s(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}},function(t,e,n){var r=n(4),i=n(36).f,o=n(14),a=n(21),s=n(52),u=n(70),c=n(74);t.exports=function(t,e){var n,l,f,p,h,d=t.target,g=t.global,y=t.stat;if(n=g?r:y?r[d]||s(d,{}):(r[d]||{}).prototype)for(l in e){if(p=e[l],f=t.noTargetGet?(h=i(n,l))&&h.value:n[l],!c(g?l:d+(y?".":"#")+l,t.forced)&&void 0!==f){if(typeof p==typeof f)continue;u(p,f)}(t.sham||f&&f.sham)&&o(p,"sham",!0),a(n,l,p,t)}}},function(t,e,n){var r=n(4),i=n(29),o=n(53),a=n(75),s=r.Symbol,u=i("wks");t.exports=function(t){return u[t]||(u[t]=a&&s[t]||(a?s:o)("Symbol."+t))}},function(t,e,n){(function(e){var n="object",r=function(t){return t&&t.Math==Math&&t};t.exports=r(typeof globalThis==n&&globalThis)||r(typeof window==n&&window)||r(typeof self==n&&self)||r(typeof e==n&&e)||Function("return this")()}).call(this,n(35))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"c",function(){return u});var r=n(0);function i(t,e,n){if(null!==t)for(var r,o,a,s,u,c,l,f,p=0,h=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,m=g?t.features.length:1,v=0;v<m;v++){u=(f=!!(l=g?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var _=0;_<u;_++){var b=0,x=0;if(null!==(s=f?l.geometries[_]:l)){c=s.coordinates;var S=s.type;switch(p=!n||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":e(c,h,v,b,x),h++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++)e(c[r],h,v,b,x),h++,"MultiPoint"===S&&b++;"LineString"===S&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-p;o++)e(c[r][o],h,v,b,x),h++;"MultiLineString"===S&&b++,"Polygon"===S&&x++}"Polygon"===S&&b++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for("MultiPolygon"===S&&(x=0),o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-p;a++)e(c[r][o][a],h,v,b,x),h++;x++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)i(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function a(t,e){var n,r,i,o,a,s,u,c,l,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,c=h?t.features[n].properties:d?t.properties:{},l=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,c,l,f);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,c,l,f);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,c,l,f);p++}}function s(t,e,n){var r=n;return a(t,function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)}),r}function u(t,e){a(t,function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void e(Object(r.a)(t,i,{bbox:o,id:a}),n,0)}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach(function(t,o){var a={type:s,coordinates:t};e(Object(r.a)(a,i),n,o)})})}},function(t,e,n){var r=n(8);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?Rt:t.color}function s(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function l(t){return null===t?null:t.right}function f(){this.root_=null,this.size_=0}function p(){}function h(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var m=function(){};m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var x=function(){},S=function(){},w=function(){},E=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},I={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};E.prototype.setOrdinate=function(t,e){switch(t){case E.X:this.x=e;break;case E.Y:this.y=e;break;case E.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},E.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!m.equalsWithTolerance(this.x,e.x,n)&&!!m.equalsWithTolerance(this.y,e.y,n)}},E.prototype.getOrdinate=function(t){switch(t){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.z}throw new v("Invalid ordinate index: "+t)},E.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},E.prototype.equals=function(t){return t instanceof E&&this.equals2D(t)},E.prototype.equalInZ=function(t,e){return m.equalsWithTolerance(this.z,t.z,e)},E.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},E.prototype.clone=function(){},E.prototype.copy=function(){return new E(this)},E.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},E.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},E.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},E.prototype.hashCode=function(){var t=17;return 37*(t=37*t+E.hashCode(this.x))+E.hashCode(this.y)},E.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},E.prototype.interfaces_=function(){return[x,S,e]},E.prototype.getClass=function(){return E},E.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},I.DimensionalComparator.get=function(){return C},I.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},I.NULL_ORDINATE.get=function(){return _.NaN},I.X.get=function(){return 0},I.Y.get=function(){return 1},I.Z.get=function(){return 2},Object.defineProperties(E,I);var C=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};C.prototype.compare=function(t,e){var n=t,r=e,i=C.compare(n.x,r.x);if(0!==i)return i;var o=C.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:C.compare(n.z,r.z)},C.prototype.interfaces_=function(){return[w]},C.prototype.getClass=function(){return C},C.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var P=function(){};P.prototype.create=function(){},P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P};var N=function(){},A={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};N.prototype.interfaces_=function(){return[]},N.prototype.getClass=function(){return N},N.toLocationSymbol=function(t){switch(t){case N.EXTERIOR:return"e";case N.BOUNDARY:return"b";case N.INTERIOR:return"i";case N.NONE:return"-"}throw new v("Unknown location value: "+t)},A.INTERIOR.get=function(){return 0},A.BOUNDARY.get=function(){return 1},A.EXTERIOR.get=function(){return 2},A.NONE.get=function(){return-1},Object.defineProperties(N,A);var T=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},O=function(){},M={LOG_10:{configurable:!0}};O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.log10=function(t){var e=Math.log(t);return _.isInfinite(e)?e:_.isNaN(e)?e:e/O.LOG_10},O.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},O.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},O.wrap=function(t,e){return t<0?e- -t%e:t%e},O.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},O.average=function(t,e){return(t+e)/2},M.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(O,M);var L=function(t){this.str=t};L.prototype.append=function(t){this.str+=t},L.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},L.prototype.toString=function(t){return this.str};var R=function(t){this.value=t};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var D=function(){};D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()};var F=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},k={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};F.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},F.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=F.magnitude(n._hi),i=F.TEN.pow(r);(n=n.divide(i)).gt(F.TEN)?(n=n.divide(F.TEN),r+=1):n.lt(F.ONE)&&(n=n.multiply(F.TEN),r-=1);for(var o=r+1,a=new L,s=F.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,f=0;c>9?(l=!0,f="9"):f="0"+c,a.append(f),n=n.subtract(F.valueOf(c)).multiply(F.TEN),l&&n.selfAdd(F.TEN);var p=!0,h=F.magnitude(n._hi);if(h<0&&Math.abs(h)>=s-u&&(p=!1),!p)break}return e[0]=r,a.toString()},F.prototype.sqr=function(){return this.multiply(this)},F.prototype.doubleValue=function(){return this._hi+this._lo},F.prototype.subtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},F.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},F.prototype.isZero=function(){return 0===this._hi&&0===this._lo},F.prototype.selfSubtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},F.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},F.prototype.min=function(t){return this.le(t)?this:t},F.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,f=null;return u=this._hi/n,f=(i=(c=F.SPLIT*u)-(i=c-u))*(a=(f=F.SPLIT*n)-(a=f-n))-(l=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,f=u+(c=(this._hi-l-f+this._lo-u*r)/n),this._hi=f,this._lo=u-f+c,this}},F.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},F.prototype.divide=function(){if(arguments[0]instanceof F){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=F.SPLIT*o)-(e=a-o)),u=e*(r=(u=F.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new F(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return _.isNaN(c)?F.createNaN():F.copy(this).selfDivide(c,0)}},F.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},F.prototype.pow=function(t){if(0===t)return F.valueOf(1);var e=new F(this),n=F.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},F.prototype.ceil=function(){if(this.isNaN())return F.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new F(t,e)},F.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},F.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},F.prototype.setValue=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},F.prototype.max=function(t){return this.ge(t)?this:t},F.prototype.sqrt=function(){if(this.isZero())return F.valueOf(0);if(this.isNegative())return F.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=F.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},F.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,f=null,p=null,h=null,d=null,g=null,y=null;h=this._hi+u,f=this._lo+c,d=h-(g=h-this._hi),p=f-(y=f-this._lo);var m=(l=h+(g=(d=u-g+(this._hi-d))+f))+(g=(p=c-y+(this._lo-p))+(g+(h-l))),v=g+(l-m);return this._hi=m,this._lo=v,this}},F.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=F.SPLIT*this._hi)-this._hi,c=F.SPLIT*n,i=u-i,o=this._hi-i,a=c-n;var l=(u=this._hi*n)+(c=i*(a=c-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),f=c+(i=u-l);return this._hi=l,this._lo=f,this}},F.prototype.selfSqr=function(){return this.selfMultiply(this)},F.prototype.floor=function(){if(this.isNaN())return F.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new F(t,e)},F.prototype.negate=function(){return this.isNaN()?this:new F(-this._hi,-this._lo)},F.prototype.clone=function(){},F.prototype.multiply=function(){if(arguments[0]instanceof F){var t=arguments[0];return t.isNaN()?F.createNaN():F.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?F.createNaN():F.copy(this).selfMultiply(e,0)}},F.prototype.isNaN=function(){return _.isNaN(this._hi)},F.prototype.intValue=function(){return Math.trunc(this._hi)},F.prototype.toString=function(){var t=F.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},F.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+F.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+F.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},F.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=F.SPLIT*n)-(i=a-n)),o=(s=F.SPLIT*this._hi)-this._hi;var u=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new F(u,n-u+a)},F.prototype.toSciNotation=function(){if(this.isZero())return F.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=F.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},F.prototype.abs=function(){return this.isNaN()?F.NaN:this.isNegative()?this.negate():new F(this)},F.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},F.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},F.prototype.add=function(){if(arguments[0]instanceof F){var t=arguments[0];return F.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return F.copy(this).selfAdd(e)}},F.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof F){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},F.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},F.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},F.prototype.trunc=function(){return this.isNaN()?F.NaN:this.isPositive()?this.floor():this.ceil()},F.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},F.prototype.interfaces_=function(){return[e,x,S]},F.prototype.getClass=function(){return F},F.sqr=function(t){return F.valueOf(t).selfMultiply(t)},F.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return F.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new F(e)}},F.sqrt=function(t){return F.valueOf(t).sqrt()},F.parse=function(t){for(var e=0,n=t.length;D.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new F,a=0,s=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,D.isDigit(c)){var l=c-"0";o.selfMultiply(F.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(e);try{u=R.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var p=o,h=a-s-u;if(0===h)p=o;else if(h>0){var d=F.TEN.pow(h);p=o.divide(d)}else if(h<0){var g=F.TEN.pow(-h);p=o.multiply(g)}return r?p.negate():p},F.createNaN=function(){return new F(_.NaN,_.NaN)},F.copy=function(t){return new F(t)},F.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},F.stringOfChar=function(t,e){for(var n=new L,r=0;r<e;r++)n.append(t);return n.toString()},k.PI.get=function(){return new F(3.141592653589793,12246467991473532e-32)},k.TWO_PI.get=function(){return new F(6.283185307179586,24492935982947064e-32)},k.PI_2.get=function(){return new F(1.5707963267948966,6123233995736766e-32)},k.E.get=function(){return new F(2.718281828459045,14456468917292502e-32)},k.NaN.get=function(){return new F(_.NaN,_.NaN)},k.EPS.get=function(){return 123259516440783e-46},k.SPLIT.get=function(){return 134217729},k.MAX_PRINT_DIGITS.get=function(){return 32},k.TEN.get=function(){return F.valueOf(10)},k.ONE.get=function(){return F.valueOf(1)},k.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},k.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(F,k);var B=function(){},j={DP_SAFE_EPSILON:{configurable:!0}};B.prototype.interfaces_=function(){return[]},B.prototype.getClass=function(){return B},B.orientationIndex=function(t,e,n){var r=B.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=F.valueOf(e.x).selfAdd(-t.x),o=F.valueOf(e.y).selfAdd(-t.y),a=F.valueOf(n.x).selfAdd(-e.x),s=F.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},B.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},B.intersection=function(t,e,n,r){var i=F.valueOf(r.y).selfSubtract(n.y).selfMultiply(F.valueOf(e.x).selfSubtract(t.x)),o=F.valueOf(r.x).selfSubtract(n.x).selfMultiply(F.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=F.valueOf(r.x).selfSubtract(n.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),u=F.valueOf(r.y).selfSubtract(n.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=F.valueOf(t.x).selfAdd(F.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=F.valueOf(e.x).selfSubtract(t.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),p=F.valueOf(e.y).selfSubtract(t.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),h=f.subtract(p).selfDivide(a).doubleValue(),d=F.valueOf(n.y).selfAdd(F.valueOf(r.y).selfSubtract(n.y).selfMultiply(h)).doubleValue();return new E(l,d)},B.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return B.signum(a);r=i+o}else{if(!(i<0))return B.signum(a);if(o>=0)return B.signum(a);r=-i-o}var s=B.DP_SAFE_EPSILON*r;return a>=s||-a>=s?B.signum(a):2},B.signum=function(t){return t>0?1:t<0?-1:0},j.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(B,j);var G=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[S]},G.prototype.getClass=function(){return G},Object.defineProperties(G,U);var q=function(){},z=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(q),V=function(){};V.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},V.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var f=arguments[0],p=arguments[1],h=arguments[2],d=arguments[3],g=f.y-p.y,y=p.x-f.x,m=f.x*p.y-p.x*f.y,v=h.y-d.y,_=d.x-h.x,b=h.x*d.y-d.x*h.y;this.x=y*b-_*m,this.y=v*m-g*b,this.w=g*_-v*y}};Y.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new z;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new z;return t},Y.prototype.getCoordinate=function(){var t=new E;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-s*o,f=(o*c-u*a)/l,p=(s*a-i*c)/l;if(_.isNaN(f)||_.isInfinite(f)||_.isNaN(p)||_.isInfinite(p))throw new z;return new E(f,p)};var X=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof E){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},J={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new X;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new X(e,r,n,i)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof E){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},X.prototype.centre=function(){return this.isNull()?null:new E((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+E.hashCode(this._minx))+E.hashCode(this._maxx))+E.hashCode(this._miny))+E.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[x,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u||l<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),c>u||l<s))}},J.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,J);var H={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},W=function(t){this.geometryFactory=t||new me};W.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=H.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=H.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},W.prototype.write=function(t){return this.extractGeometry(t)},W.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!$[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+$[e].apply(this,[t])+")"};var $={coordinate:function(t){return t.x+" "+t.y},point:function(t){return $.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+$.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+$.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(H.spaces);return this.geometryFactory.createPoint(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(H.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(H.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(H.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(H.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Z=function(t){this.parser=new W(t)};Z.prototype.write=function(t){return this.parser.write(t)},Z.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new E,this._intPt[1]=new E,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new L;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Z.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Z.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,X.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Y.intersection(t,n,r,i)}catch(a){if(!(a instanceof z))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new E(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=B.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);V.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&V.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new E(t),o=new E(e),a=new E(n),s=new E(r),u=new E;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=X.intersects(e,n,r),a=X.intersects(e,n,i),s=X.intersects(r,i,e),u=X.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,f=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,h=((o>c?o:c)+(s<f?s:f))/2,d=((a>l?a:l)+(u<p?u:p))/2;i.x=h,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!X.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),u=st.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new E(r):0===a?this._intPt[0]=new E(i):0===s?this._intPt[0]=new E(e):0===u&&(this._intPt[0]=new E(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==N.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?N.BOUNDARY:this._crossingCount%2==1?N.INTERIOR:N.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof E&&T(arguments[1],G)){for(var t=arguments[0],e=arguments[1],n=new at(t),r=new E,i=new E,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof E&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new at(a),c=1;c<s.length;c++){var l=s[c],f=s[c-1];if(u.countSegment(l,f),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return B.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(T(arguments[0],G)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new E,c=new E,l=new E;a.getCoordinate(0,c),a.getCoordinate(1,l);var f=c.x;l.x-=f;for(var p=0,h=1;h<s-1;h++)u.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(h+1,l),l.x-=f,p+=c.x*(u.y-l.y);return p/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(X.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?O.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==N.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new E;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,c=s-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=s,o=u}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],c=t[s];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=st.computeOrientation(u,n,c);return 0===l?u.x>c.x:l>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var lt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ft={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};lt.prototype.isGeometryCollection=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION},lt.prototype.getFactory=function(){return this._factory},lt.prototype.getGeometryN=function(t){return this},lt.prototype.getArea=function(){return 0},lt.prototype.isRectangle=function(){return!1},lt.prototype.equals=function(){if(arguments[0]instanceof lt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof lt))return!1;var n=e;return this.equalsExact(n)}},lt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},lt.prototype.geometryChanged=function(){this.apply(lt.geometryChangedFilter)},lt.prototype.geometryChangedAction=function(){this._envelope=null},lt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},lt.prototype.getLength=function(){return 0},lt.prototype.getNumGeometries=function(){return 1},lt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},lt.prototype.getUserData=function(){return this._userData},lt.prototype.getSRID=function(){return this._SRID},lt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},lt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},lt.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},lt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},lt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},lt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},lt.prototype.setSRID=function(t){this._SRID=t},lt.prototype.setUserData=function(t){this._userData=t},lt.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},lt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},lt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===lt.SORTINDEX_MULTIPOINT||this.getSortIndex()===lt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===lt.SORTINDEX_MULTIPOLYGON},lt.prototype.interfaces_=function(){return[S,x,e]},lt.prototype.getClass=function(){return lt},lt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},lt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ft.serialVersionUID.get=function(){return 0x799ea46522854c00},ft.SORTINDEX_POINT.get=function(){return 0},ft.SORTINDEX_MULTIPOINT.get=function(){return 1},ft.SORTINDEX_LINESTRING.get=function(){return 2},ft.SORTINDEX_LINEARRING.get=function(){return 3},ft.SORTINDEX_MULTILINESTRING.get=function(){return 4},ft.SORTINDEX_POLYGON.get=function(){return 5},ft.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ft.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ft.geometryChangedFilter.get=function(){return pt},Object.defineProperties(lt,ft);var pt=function(){};pt.interfaces_=function(){return[ct]},pt.filter=function(t){t.geometryChangedAction()};var ht=function(){};ht.prototype.filter=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return mt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>0},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var wt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Et(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(St),Et=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),It=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof E&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],u);else for(var l=s.length-1;l>=0;l--)this.add(s[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof E){var f=arguments[0],p=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(f>0&&this.get(f-1).equals2D(p))return null;if(f<h&&this.get(f).equals2D(p))return null}}t.prototype.add.call(this,f,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=arguments[3],v=1;y>m&&(v=-1);for(var _=y;_!==m;_+=v)this.add(d[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new E(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(wt),Ct=function(){},Pt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Pt.ForwardComparator.get=function(){return Nt},Pt.BidirectionalComparator.get=function(){return At},Pt.coordArrayType.get=function(){return new Array(0).fill(null)},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct},Ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ct.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Ct.indexOf(r,e)<0)return r}return null},Ct.scroll=function(t,e){var n=Ct.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);V.arraycopy(t,n,r,0,t.length-n),V.arraycopy(t,0,r,t.length-n,n),V.arraycopy(r,0,t,0,t.length)},Ct.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Ct.intersection=function(t,e){for(var n=new It,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Ct.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ct.removeRepeatedPoints=function(t){return Ct.hasRepeatedPoints(t)?new It(t,!1).toCoordinateArray():t},Ct.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Ct.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Ct.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new E(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new E(r[i+u])},Ct.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Ct.envelope=function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ct.toCoordinateArray=function(t){return t.toArray(Ct.coordArrayType)},Ct.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ct.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ct.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Ct.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Ct.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ct.extract=function(t,e,n){e=O.clamp(e,0,t.length);var r=(n=O.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Ct,Pt);var Nt=function(){};Nt.prototype.compare=function(t,e){return Ct.compare(t,e)},Nt.prototype.interfaces_=function(){return[w]},Nt.prototype.getClass=function(){return Nt};var At=function(){};At.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Ct.compare(n,r);return Ct.isEqualReversed(n,r)?0:i},At.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Ct.increasingDirection(n),o=Ct.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},At.prototype.interfaces_=function(){return[w]},At.prototype.getClass=function(){return At};var Tt=function(){};Tt.prototype.get=function(){},Tt.prototype.put=function(){},Tt.prototype.size=function(){},Tt.prototype.values=function(){},Tt.prototype.entrySet=function(){};var Ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Tt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Mt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Lt(this)},e}(o),Lt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(xt),Rt=0;(f.prototype=new Ot).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},f.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},f.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===c(s(s(t)))){var e=l(s(s(t)));1===a(e)?(u(s(t),Rt),u(e,Rt),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),Rt),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=c(s(s(t)));1===a(n)?(u(s(t),Rt),u(n,Rt),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),Rt),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Rt},f.prototype.values=function(){var t=new wt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=f.successor(e));)t.add(e.value);return t},f.prototype.entrySet=function(){var t=new Mt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=f.successor(e));)t.add(e);return t},f.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},f.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},f.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},f.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},f.prototype.size=function(){return this.size_};var Dt=function(){};Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},p.prototype=new o,(h.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},h.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},h.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},h.prototype.remove=function(t){throw new i},h.prototype.size=function(){return this.array_.length},h.prototype.isEmpty=function(){return 0===this.array_.length},h.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},h.prototype.iterator=function(){return new Ft(this)};var Ft=function(t){this.treeSet_=t,this.position_=0};Ft.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Ft.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ft.prototype.remove=function(){throw new i};var kt=function(){};kt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},kt.asList=function(t){for(var e=new wt,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Bt=function(){},jt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};jt.P.get=function(){return 0},jt.L.get=function(){return 1},jt.A.get=function(){return 2},jt.FALSE.get=function(){return-1},jt.TRUE.get=function(){return-2},jt.DONTCARE.get=function(){return-3},jt.SYM_FALSE.get=function(){return"F"},jt.SYM_TRUE.get=function(){return"T"},jt.SYM_DONTCARE.get=function(){return"*"},jt.SYM_P.get=function(){return"0"},jt.SYM_L.get=function(){return"1"},jt.SYM_A.get=function(){return"2"},Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt},Bt.toDimensionSymbol=function(t){switch(t){case Bt.FALSE:return Bt.SYM_FALSE;case Bt.TRUE:return Bt.SYM_TRUE;case Bt.DONTCARE:return Bt.SYM_DONTCARE;case Bt.P:return Bt.SYM_P;case Bt.L:return Bt.SYM_L;case Bt.A:return Bt.SYM_A}throw new v("Unknown dimension value: "+t)},Bt.toDimensionValue=function(t){switch(D.toUpperCase(t)){case Bt.SYM_FALSE:return Bt.FALSE;case Bt.SYM_TRUE:return Bt.TRUE;case Bt.SYM_DONTCARE:return Bt.DONTCARE;case Bt.SYM_P:return Bt.P;case Bt.SYM_L:return Bt.L;case Bt.SYM_A:return Bt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(Bt,jt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var qt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();kt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Bt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Bt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new h(kt.asList(this._geometries)),n=new h(kt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,a=this.getNumGeometries(),s=o.getNumGeometries(),u=0;u<a&&u<s;){var c=this.getGeometryN(u),l=o.getGeometryN(u),f=c.compareToSameClass(l,i);if(0!==f)return f;u++}return u<a?1:u<s?-1:0}},e.prototype.apply=function(){if(T(arguments[0],ht))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(T(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],Gt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(T(arguments[0],ct)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(lt),zt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Bt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(qt),Vt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Vt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Vt.prototype.getBoundary=function(){return this._geom instanceof Wt?this.boundaryLineString(this._geom):this._geom instanceof zt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Vt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Vt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Vt.prototype.computeBoundaryCoordinates=function(t){var e=new wt;this._endpointMap=new f;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Ct.toCoordinateArray(e)},Vt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Vt(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Vt(e,n).getBoundary()}};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Xt=function(){},Jt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Xt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Xt.split=function(t,e){for(var n=e.length,r=new wt,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Jt.NEWLINE.get=function(){return V.getProperty("line.separator")},Jt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xt,Jt);var Ht=function(){};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Ht.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Ht.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||_.isNaN(a)&&_.isNaN(s)))return!1}return!0},Ht.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Ht.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Ht.copy(e,i-1,r,o,1);return r},Ht.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Ht.swap(t,r,e-r)},Ht.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Ht.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Ht.copyCoord(t,e+o,n,r+o)},Ht.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new L;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Xt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Ht.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ht.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:Ht.createClosedRing(t,e,n+1)},Ht.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Ht.copy(e,0,r,0,i);for(var o=i;o<n;o++)Ht.copy(e,0,r,o,1);return r};var Wt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ht.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Bt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(T(arguments[0],ht))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(T(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else T(arguments[0],Gt)?arguments[0].filter(this):T(arguments[0],ct)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(lt),$t=function(){};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Bt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(T(arguments[0],ht)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(T(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else T(arguments[0],Gt)?arguments[0].filter(this):T(arguments[0],ct)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(lt),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Qt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o==(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);kt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);V.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Ct.minCoordinate(e.getCoordinates());Ct.scroll(r,i),V.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&Ct.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,a=this._shell,s=o._shell,u=a.compareToSameClass(s,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),l=o.getNumInteriorRing(),f=0;f<c&&f<l;){var p=this.getInteriorRingN(f),h=o.getInteriorRingN(f),d=p.compareToSameClass(h,i);if(0!==d)return d;f++}return f<c?1:f<l?-1:0}},e.prototype.apply=function(t){if(T(t,ht)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(T(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(T(t,Gt))t.filter(this);else if(T(t,ct)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(lt),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Bt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(qt),ee=function(t){function e(e,n){e instanceof E&&n instanceof me&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Bt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Wt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new wt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(qt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof qt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Kt?e.edit(t,this._factory):t instanceof Wt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new wt,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===zt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new wt,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Wt?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Wt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new E}else if(T(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new E}},ce={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return _.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new E(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new L(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[G,e]},ue.prototype.getClass=function(){return ue},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,ce);var le=function(){},fe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};le.prototype.readResolve=function(){return le.instance()},le.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ue(t)}if(T(arguments[0],G)){var e=arguments[0];return new ue(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new ue(n):new ue(n,r)}},le.prototype.interfaces_=function(){return[P,e]},le.prototype.getClass=function(){return le},le.instance=function(){return le.instanceObject},fe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fe.instanceObject.get=function(){return new le},Object.defineProperties(le,fe);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new wt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Mt;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Tt),he=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};he.prototype.equals=function(t){if(!(t instanceof he))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},he.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new R(n).compareTo(new R(r))},he.prototype.getScale=function(){return this._scale},he.prototype.isFloating=function(){return this._modelType===he.FLOATING||this._modelType===he.FLOATING_SINGLE},he.prototype.getType=function(){return this._modelType},he.prototype.toString=function(){var t="UNKNOWN";return this._modelType===he.FLOATING?t="Floating":this._modelType===he.FLOATING_SINGLE?t="Floating-Single":this._modelType===he.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},he.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)?t:this._modelType===he.FLOATING_SINGLE?t:this._modelType===he.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof E){var e=arguments[0];if(this._modelType===he.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},he.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===he.FLOATING?t=16:this._modelType===he.FLOATING_SINGLE?t=6:this._modelType===he.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},he.prototype.setScale=function(t){this._scale=Math.abs(t)},he.prototype.interfaces_=function(){return[e,x]},he.prototype.getClass=function(){return he},he.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(he,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,ye),he.Type=ge,he.FIXED=new ge("FIXED"),he.FLOATING=new ge("FLOATING"),he.FLOATING_SINGLE=new ge("FLOATING SINGLE");var me=function t(){this._precisionModel=new he,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?T(arguments[0],P)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof he&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new E(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new E(t.getMinX(),t.getMinY()),new E(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new E(t.getMinX(),t.getMinY()),new E(t.getMinX(),t.getMaxY()),new E(t.getMaxX(),t.getMaxY()),new E(t.getMaxX(),t.getMinY()),new E(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new Wt(this.getCoordinateSequenceFactory().create(t),this):T(t,G)?new Wt(t,this):void 0:new Wt(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){if(0===arguments.length)return new zt(null,this);if(1===arguments.length){var t=arguments[0];return new zt(t,this)}},me.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(me.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Qt)return this.createMultiPolygon(me.toPolygonArray(t));if(s instanceof Wt)return this.createMultiLineString(me.toLineStringArray(t));if(s instanceof Kt)return this.createMultiPoint(me.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(T(arguments[0],G)){var e=arguments[0];return new Kt(e,this)}}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(T(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new Qt(r,i,this)}},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){if(0===arguments.length)return new qt(null,this);if(1===arguments.length){var t=arguments[0];return new qt(t,this)}},me.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(T(arguments[0],G)){var e=arguments[0];return new ee(e,this)}}},me.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ne(null,this);if(1===arguments.length){var t=arguments[0];return new ne(t,this)}},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new te(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(T(arguments[0],G)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Ht.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return le.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,ve);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new me};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?xe[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xe[n].apply(this,[e.geometries]):xe[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Se[e])throw new Error("Geometry is not supported");return Se[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!xe[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new E(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new E(t[0],t[1]),new E(t[2],t[1]),new E(t[2],t[3]),new E(t[0],t[3]),new E(t[0],t[1])])},Point:function(t){var e=new E(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=xe.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(xe.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Se={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Se.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Se.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Se.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Se.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Se.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Se.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Se.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Se[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},we=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};we.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===he.FIXED&&this.reducePrecision(e),e},we.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ee=function(){this.parser=new be(this.geometryFactory)};Ee.prototype.write=function(t){return this.parser.write(t)};var Ie=function(){},Ce={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie},Ie.opposite=function(t){return t===Ie.LEFT?Ie.RIGHT:t===Ie.RIGHT?Ie.LEFT:t},Ce.ON.get=function(){return 0},Ce.LEFT.get=function(){return 1},Ce.RIGHT.get=function(){return 2},Object.defineProperties(Ie,Ce),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new St).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Pe=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Pe.prototype.getCoordinate=function(){return this._minCoord},Pe.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Pe.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Pe.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ie.LEFT;return n[e].y<n[e+1].y&&(r=Ie.RIGHT),r},Pe.prototype.getEdge=function(){return this._orientedDe},Pe.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Pe.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Pe.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ie.LEFT&&(this._orientedDe=this._minDe.getSym())},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe};var Ne=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new E(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Ae=function(){this.array_=[]};Ae.prototype.addLast=function(t){this.array_.push(t)},Ae.prototype.removeFirst=function(){return this.array_.shift()},Ae.prototype.isEmpty=function(){return 0===this.array_.length};var Te=function(){this._finder=null,this._dirEdgeList=new wt,this._nodes=new wt,this._rightMostCoord=null,this._env=null,this._finder=new Pe};Te.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Te.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Te.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ne("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Te.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ie.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Te.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Te.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ie.RIGHT)>=1&&e.getDepth(Ie.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Te.prototype.computeDepths=function(t){var e=new Mt,n=new Ae,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Te.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Te.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Te.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Te.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ie.LEFT,t.getDepth(Ie.RIGHT)),e.setDepth(Ie.RIGHT,t.getDepth(Ie.LEFT))},Te.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Te.prototype.getNodes=function(){return this._nodes},Te.prototype.getDirectedEdges=function(){return this._dirEdgeList},Te.prototype.interfaces_=function(){return[x]},Te.prototype.getClass=function(){return Te};var Oe=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ie.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ie.ON]=o,this.location[Ie.LEFT]=a,this.location[Ie.RIGHT]=s}};Oe.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Oe.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==N.NONE)return!1;return!0},Oe.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===N.NONE&&(this.location[e]=t)},Oe.prototype.isLine=function(){return 1===this.location.length},Oe.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ie.ON]=this.location[Ie.ON],e[Ie.LEFT]=N.NONE,e[Ie.RIGHT]=N.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===N.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Oe.prototype.getLocations=function(){return this.location},Oe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ie.LEFT];this.location[Ie.LEFT]=this.location[Ie.RIGHT],this.location[Ie.RIGHT]=t},Oe.prototype.toString=function(){var t=new L;return this.location.length>1&&t.append(N.toLocationSymbol(this.location[Ie.LEFT])),t.append(N.toLocationSymbol(this.location[Ie.ON])),this.location.length>1&&t.append(N.toLocationSymbol(this.location[Ie.RIGHT])),t.toString()},Oe.prototype.setLocations=function(t,e,n){this.location[Ie.ON]=t,this.location[Ie.LEFT]=e,this.location[Ie.RIGHT]=n},Oe.prototype.get=function(t){return t<this.location.length?this.location[t]:N.NONE},Oe.prototype.isArea=function(){return this.location.length>1},Oe.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===N.NONE)return!0;return!1},Oe.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ie.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Oe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(N.NONE)},Oe.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Oe.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Me=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Oe(e),this.elt[1]=new Oe(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Oe(n.elt[0]),this.elt[1]=new Oe(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Oe(N.NONE),this.elt[1]=new Oe(N.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Oe(o,a,s),this.elt[1]=new Oe(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],f=arguments[3];this.elt[0]=new Oe(N.NONE,N.NONE,N.NONE),this.elt[1]=new Oe(N.NONE,N.NONE,N.NONE),this.elt[u].setLocations(c,l,f)}};Me.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Me.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Me.prototype.isNull=function(t){return this.elt[t].isNull()},Me.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Me.prototype.isLine=function(t){return this.elt[t].isLine()},Me.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Oe(t.elt[e]):this.elt[e].merge(t.elt[e])},Me.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Me.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ie.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Me.prototype.toString=function(){var t=new L;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Me.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Me.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Me.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ie.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Me.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Me.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Me.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Oe(this.elt[t].location[0]))},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.toLineLabel=function(t){for(var e=new Me(N.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Le=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new wt,this._pts=new wt,this._label=new Me(N.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new wt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Le.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Le.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Le.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ne("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ne("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Le.prototype.getLinearRing=function(){return this._ring},Le.prototype.getCoordinate=function(t){return this._pts.get(t)},Le.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Le.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Le.prototype.isHole=function(){return this._isHole},Le.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Le.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Le.prototype.addHole=function(t){this._holes.add(t)},Le.prototype.isShell=function(){return null===this._shell},Le.prototype.getLabel=function(){return this._label},Le.prototype.getEdges=function(){return this._edges},Le.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Le.prototype.getShell=function(){return this._shell},Le.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Ie.RIGHT);if(r===N.NONE)return null;if(this._label.getLocation(n)===N.NONE)return this._label.setLocation(n,r),null}},Le.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Le.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le};var Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Le),De=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new wt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Re(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Le),Fe=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Fe.prototype.setVisited=function(t){this._isVisited=t},Fe.prototype.setInResult=function(t){this._isInResult=t},Fe.prototype.isCovered=function(){return this._isCovered},Fe.prototype.isCoveredSet=function(){return this._isCoveredSet},Fe.prototype.setLabel=function(t){this._label=t},Fe.prototype.getLabel=function(){return this._label},Fe.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fe.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Fe.prototype.isInResult=function(){return this._isInResult},Fe.prototype.isVisited=function(){return this._isVisited},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var ke=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Me(0,N.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=N.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==N.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Me(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Me)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===N.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=N.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case N.BOUNDARY:n=N.INTERIOR;break;case N.INTERIOR:default:n=N.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fe),Be=function(){this.nodeMap=new f,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Be.prototype.find=function(t){return this.nodeMap.get(t)},Be.prototype.addNode=function(){if(arguments[0]instanceof E){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ke){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Be.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Be.prototype.iterator=function(){return this.nodeMap.values().iterator()},Be.prototype.values=function(){return this.nodeMap.values()},Be.prototype.getBoundaryNodes=function(t){for(var e=new wt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===N.BOUNDARY&&e.add(r)}return e},Be.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be};var je=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je},je.isNorthern=function(t){return t===je.NE||t===je.NW},je.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},je.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},je.isInHalfPlane=function(t,e){return e===je.SE?t===je.SE||t===je.SW:t===e||t===e+1},je.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?je.NE:je.SE:e>=0?je.NW:je.SW}if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?je.NE:je.SE:r.y>=n.y?je.NW:je.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(je,Ge);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=je.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[x]},Ue.prototype.getClass=function(){return Ue};var qe=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Me(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ne("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ie.LEFT)===N.INTERIOR&&this._label.getLocation(e,Ie.RIGHT)===N.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ie.LEFT]+"/"+this._depth[Ie.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,N.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,N.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ie.LEFT&&(r=-1);var i=Ie.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===N.EXTERIOR&&e===N.INTERIOR?1:t===N.INTERIOR&&e===N.EXTERIOR?-1:0},e}(Ue),ze=function(){};ze.prototype.createNode=function(t){return new ke(t,null)},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Ve=function(){if(this._edges=new wt,this._nodes=null,this._edgeEndList=new wt,0===arguments.length)this._nodes=new Be(new ze);else if(1===arguments.length){var t=arguments[0];this._nodes=new Be(t)}};Ve.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ve.prototype.find=function(t){return this._nodes.find(t)},Ve.prototype.addNode=function(){if(arguments[0]instanceof ke){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof E){var e=arguments[0];return this._nodes.addNode(e)}},Ve.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ve.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ve.prototype.debugPrintln=function(t){V.out.println(t)},Ve.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===N.BOUNDARY},Ve.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ve.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&je.quadrant(t,e)===je.quadrant(n,r)},Ve.prototype.getEdgeEnds=function(){return this._edgeEndList},Ve.prototype.debugPrint=function(t){V.out.print(t)},Ve.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ve.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ve.prototype.insertEdge=function(t){this._edges.add(t)},Ve.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ve.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new qe(n,!0),i=new qe(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ve.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ve.prototype.getNodes=function(){return this._nodes.values()},Ve.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new wt;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ye.prototype.computePolygons=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ne("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new wt,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new De(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var f=!1;l.contains(r)&&st.isPointInRing(i,c.getCoordinates())&&(f=!0),f&&(null===o||a.contains(l))&&(o=u)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ve.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new wt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){};Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Je=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Je.prototype.getItem=function(){return this._item},Je.prototype.getBounds=function(){return this._bounds},Je.prototype.interfaces_=function(){return[Xe,e]},Je.prototype.getClass=function(){return Je};var He=function(){this._size=null,this._items=null,this._size=0,this._items=new wt,this._items.add(null)};He.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},He.prototype.size=function(){return this._size},He.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},He.prototype.clear=function(){this._size=0,this._items.clear()},He.prototype.isEmpty=function(){return 0===this._size},He.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var We=function(){};We.prototype.visitItem=function(t){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var $e=function(){};$e.prototype.insert=function(t,e){},$e.prototype.remove=function(t,e){},$e.prototype.query=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ke=function(){if(this._childBoundables=new wt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ze={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[Xe,e]},Ke.prototype.getClass=function(){return Ke},Ze.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Ze);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?kt.sort(n,e):kt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new wt;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new wt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof Je&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Je&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new wt:t}if(1===arguments.length){for(var e=arguments[0],n=new wt,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ke){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Je?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Je(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new wt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ke?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof Je),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new wt;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(T(arguments[2],We)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),u=0;u<s.size();u++){var c=s.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Ke?this.query(i,c,a):c instanceof Je?a.visitItem(c.getItem()):et.shouldNeverReachHere())}else if(T(arguments[2],St)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var l=arguments[0],f=arguments[1],p=arguments[2],h=f.getChildBoundables(),d=0;d<h.size();d++){var g=h.get(d);this.getIntersectsOp().intersects(g.getBounds(),l)&&(g instanceof Ke?this.query(l,g,p):g instanceof Je?p.add(g.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ke&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new wt;n.add(this.createNode(e));var r=new wt(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new wt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new wt;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(T(arguments[2],We)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(T(arguments[2],St)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new wt(t);Qe.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(T(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&T(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=null,l=new He;for(l.add(s);!l.isEmpty()&&u>0;){var f=l.poll(),p=f.getDistance();if(p>=u)break;f.isLeaves()?(u=p,c=f):f.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[0],d=arguments[1],g=arguments[2],y=new Je(h,d),m=new tn(this.getRoot(),y,g);return this.nearestNeighbour(m)[0]}},n.prototype.interfaces_=function(){return[$e,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new E(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[x]},cn.prototype.getClass=function(){return cn};var ln=function(){this._nodeMap=new f,this._edge=null;var t=arguments[0];this._edge=t};ln.prototype.getSplitCoordinates=function(){var t=new It;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},ln.prototype.addCollapsedNodes=function(){var t=new wt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},ln.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ln.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new R(e+1))}},ln.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new E(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new E(e.coord))},ln.prototype.iterator=function(){return this._nodeMap.values().iterator()},ln.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},ln.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},ln.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new R(e[0])),r=i}},ln.prototype.getEdge=function(){return this._edge},ln.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ln.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new E(e.coord)),new dn(o,this._edge.getData())},ln.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},ln.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln};var fn=function(){};fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn},fn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof E&&arguments[1]instanceof E){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new v("Cannot compute the octant for two identical points "+i);return fn.octant(a,s)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var hn=function(){};hn.prototype.addIntersection=function(t,e){},hn.prototype.interfaces_=function(){return[pn]},hn.prototype.getClass=function(){return hn};var dn=function(){this._nodeList=new ln(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:fn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new E(n.getIntersection(i));this.addIntersection(o,r)}},dn.prototype.toString=function(){return Z.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[hn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new wt;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new E,this.p1=new E;else if(1===arguments.length){var t=arguments[0];this.p0=new E(t.p0),this.p1=new E(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new E(e,n),this.p1=new E(r,i)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof E){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof E){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new E(t);var e=this.projectionFactor(t),n=new E;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gn(a,s)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof z))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new E(n-u,r+s)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof E){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new E;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[x,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new E((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var mn=function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new gn,this._overlapSeg2=new gn};mn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new X(t,e)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),f=Math.trunc((r+i)/2);t<l&&(r<f&&this.computeOverlapsInternal(t,l,n,r,f,o),f<i&&this.computeOverlapsInternal(t,l,n,f,i,o)),l<e&&(r<f&&this.computeOverlapsInternal(l,e,n,r,f,o),f<i&&this.computeOverlapsInternal(l,e,n,f,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new wt;n.add(new R(e));do{var r=_n.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=je.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||je.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new wt,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new vn(e,i[o],i[o+1],n);r.add(a)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var Sn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new wt,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new wn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return wn},Object.defineProperties(e,n),e}(xn),wn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mn),En=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},In={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};En.prototype.getEndCapStyle=function(){return this._endCapStyle},En.prototype.isSingleSided=function(){return this._isSingleSided},En.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=En.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=En.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==En.JOIN_ROUND&&(this._quadrantSegments=En.DEFAULT_QUADRANT_SEGMENTS)},En.prototype.getJoinStyle=function(){return this._joinStyle},En.prototype.setJoinStyle=function(t){this._joinStyle=t},En.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},En.prototype.getSimplifyFactor=function(){return this._simplifyFactor},En.prototype.getQuadrantSegments=function(){return this._quadrantSegments},En.prototype.setEndCapStyle=function(t){this._endCapStyle=t},En.prototype.getMitreLimit=function(){return this._mitreLimit},En.prototype.setMitreLimit=function(t){this._mitreLimit=t},En.prototype.setSingleSided=function(t){this._isSingleSided=t},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En},En.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},In.CAP_ROUND.get=function(){return 1},In.CAP_FLAT.get=function(){return 2},In.CAP_SQUARE.get=function(){return 3},In.JOIN_ROUND.get=function(){return 1},In.JOIN_MITRE.get=function(){return 2},In.JOIN_BEVEL.get=function(){return 3},In.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},In.DEFAULT_MITRE_LIMIT.get=function(){return 5},In.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(En,In);var Cn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Pn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Cn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Cn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Cn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Cn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},Cn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Cn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Cn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Cn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Cn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Cn.DELETE;)e++;return e},Cn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},Cn.prototype.collapseLine=function(){for(var t=new It,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Cn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.simplify=function(t,e){return new Cn(t).simplify(e)},Pn.INIT.get=function(){return 0},Pn.DELETE.get=function(){return 1},Pn.KEEP.get=function(){return 1},Pn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Cn,Pn);var Nn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new wt},An={COORDINATE_ARRAY_TYPE:{configurable:!0}};Nn.prototype.getCoordinates=function(){return this._ptList.toArray(Nn.COORDINATE_ARRAY_TYPE)},Nn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Nn.prototype.addPt=function(t){var e=new E(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Nn.prototype.revere=function(){},Nn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Nn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Nn.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},Nn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new E(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Nn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},An.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Nn,An);var Tn=function(){},On={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.toDegrees=function(t){return 180*t/Math.PI},Tn.normalize=function(t){for(;t>Math.PI;)t-=Tn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Tn.PI_TIMES_2;return t},Tn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Tn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Tn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Tn.interiorAngle=function(t,e,n){var r=Tn.angle(e,t),i=Tn.angle(e,n);return Math.abs(i-r)},Tn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Tn.PI_TIMES_2;t>=Tn.PI_TIMES_2&&(t=0)}else{for(;t>=Tn.PI_TIMES_2;)t-=Tn.PI_TIMES_2;t<0&&(t=0)}return t},Tn.angleBetween=function(t,e,n){var r=Tn.angle(e,t),i=Tn.angle(e,n);return Tn.diff(r,i)},Tn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Tn.toRadians=function(t){return t*Math.PI/180},Tn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Tn.COUNTERCLOCKWISE:n<0?Tn.CLOCKWISE:Tn.NONE},Tn.angleBetweenOriented=function(t,e,n){var r=Tn.angle(e,t),i=Tn.angle(e,n)-r;return i<=-Math.PI?i+Tn.PI_TIMES_2:i>Math.PI?i-Tn.PI_TIMES_2:i},On.PI_TIMES_2.get=function(){return 2*Math.PI},On.PI_OVER_2.get=function(){return Math.PI/2},On.PI_OVER_4.get=function(){return Math.PI/4},On.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},On.CLOCKWISE.get=function(){return st.CLOCKWISE},On.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Tn,On);var Mn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===En.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Ln={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Mn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Ie.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Ie.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Mn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Ie.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Ie.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case En.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case En.CAP_SQUARE:var u=new E;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new E(r.p1.x+u.x,r.p1.y+u.y),l=new E(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Mn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Mn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof z))throw t;o=new E(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Mn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===st.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},Mn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===En.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===En.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Mn.prototype.createSquare=function(t){this._segList.addPt(new E(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new E(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Mn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Mn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Mn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Mn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Mn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Tn.angle(i,this._seg0.p0),a=Tn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Tn.normalize(o+a),u=Tn.normalize(s+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(a)),f=i.x+c*Math.cos(u),p=i.y+c*Math.sin(u),h=new E(f,p),d=new gn(i,h),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===Ie.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Mn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ie.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Mn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new E;c<a;){var f=e+o*c;l.x=t.x+i*Math.cos(f),l.y=t.y+i*Math.sin(f),this._segList.addPt(l),c+=u}},Mn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new E((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new E((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Mn.prototype.createCircle=function(t){var e=new E(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Mn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Mn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Nn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Mn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===En.JOIN_BEVEL||this._bufParams.getJoinStyle()===En.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Mn.prototype.closeRing=function(){this._segList.closeRing()},Mn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Ln.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ln.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ln.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ln.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Mn,Ln);var Rn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Ct.reverse(o),o},Rn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ie.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Cn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ie.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},Rn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ie.RIGHT&&(r=-r);var i=Cn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Rn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Cn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ie.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Cn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ie.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Rn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:e.createCircle(t);break;case En.CAP_SQUARE:e.createSquare(t)}},Rn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Rn.prototype.getBufferParameters=function(){return this._bufParams},Rn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Rn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Rn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ie.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Cn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ie.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},Rn.prototype.getSegGen=function(t){return new Mn(this._precisionModel,this._bufParams,t)},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new E(t[n]);return e};var Dn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new st;var t=arguments[0];this._subgraphs=t},Fn={DepthSegment:{configurable:!0}};Dn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new wt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(T(arguments[2],St)&&arguments[0]instanceof E&&arguments[1]instanceof qe){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var l=a.getDepth(Ie.LEFT);this._seg.p0.equals(u[c])||(l=a.getDepth(Ie.RIGHT));var f=new kn(this._seg,l);s.add(f)}}else if(T(arguments[2],St)&&arguments[0]instanceof E&&T(arguments[1],St))for(var p=arguments[0],h=arguments[1],d=arguments[2],g=h.iterator();g.hasNext();){var y=g.next();y.isForward()&&this.findStabbedSegments(p,y,d)}},Dn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Fn.DepthSegment.get=function(){return kn},Object.defineProperties(Dn,Fn);var kn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};kn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},kn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},kn.prototype.toString=function(){return this._upwardSeg.toString()},kn.prototype.interfaces_=function(){return[x]},kn.prototype.getClass=function(){return kn};var Bn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Bn.prototype.area=function(){return Bn.area(this.p0,this.p1,this.p2)},Bn.prototype.signedArea=function(){return Bn.signedArea(this.p0,this.p1,this.p2)},Bn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return Bn.interpolateZ(t,this.p0,this.p1,this.p2)},Bn.prototype.longestSideLength=function(){return Bn.longestSideLength(this.p0,this.p1,this.p2)},Bn.prototype.isAcute=function(){return Bn.isAcute(this.p0,this.p1,this.p2)},Bn.prototype.circumcentre=function(){return Bn.circumcentre(this.p0,this.p1,this.p2)},Bn.prototype.area3D=function(){return Bn.area3D(this.p0,this.p1,this.p2)},Bn.prototype.centroid=function(){return Bn.centroid(this.p0,this.p1,this.p2)},Bn.prototype.inCentre=function(){return Bn.inCentre(this.p0,this.p1,this.p2)},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Bn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Bn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Bn.det=function(t,e,n,r){return t*r-e*n},Bn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,c=r.y-o,l=a*c-s*u,f=t.x-i,p=t.y-o,h=(c*f-s*p)/l,d=(-u*f+a*p)/l;return e.z+h*(n.z-e.z)+d*(r.z-e.z)},Bn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Bn.isAcute=function(t,e,n){return!!Tn.isAcute(t,e,n)&&!!Tn.isAcute(e,n,t)&&!!Tn.isAcute(n,t,e)},Bn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,c=2*Bn.det(o,a,s,u),l=Bn.det(a,o*o+a*a,u,s*s+u*u),f=Bn.det(o,o*o+a*a,s,s*s+u*u);return new E(r-l/c,i+f/c)},Bn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Y(t.x+n/2,t.y+r/2,1),o=new Y(t.x-r+n/2,t.y+n+r/2,1);return new Y(i,o)},Bn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new E(t.x+i*o,t.y+i*a)},Bn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,c=i*u-o*s,l=o*a-r*u,f=r*s-i*a,p=c*c+l*l+f*f;return Math.sqrt(p)/2},Bn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new E(r,i)},Bn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new E(s,u)};var jn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new wt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};jn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,N.EXTERIOR,N.INTERIOR)},jn.prototype.addPolygon=function(t){var e=this._distance,n=Ie.LEFT;this._distance<0&&(e=-this._distance,n=Ie.RIGHT);var r=t.getExteriorRing(),i=Ct.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,N.EXTERIOR,N.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Ct.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ie.opposite(n),N.INTERIOR,N.EXTERIOR)}},jn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Bn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},jn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ct.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,N.EXTERIOR,N.INTERIOR)},jn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Me(0,N.BOUNDARY,e,n));this._curveList.add(r)},jn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},jn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Ie.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},jn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Wt?this.addLineString(t):t instanceof Kt?this.addPoint(t):t instanceof te?this.addCollection(t):t instanceof zt?this.addCollection(t):t instanceof ne?this.addCollection(t):t instanceof qt&&this.addCollection(t)},jn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},jn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof qt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[xt]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof qt)};var qn=function(){this._geom=null;var t=arguments[0];this._geom=t};qn.prototype.locate=function(t){return qn.locate(t,this._geom)},qn.prototype.interfaces_=function(){return[Gn]},qn.prototype.getClass=function(){return qn},qn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},qn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!qn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(qn.isPointInRing(t,i))return!1}return!0},qn.containsPoint=function(t,e){if(e instanceof Qt)return qn.containsPointInPolygon(t,e);if(e instanceof qt)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e&&qn.containsPoint(t,r))return!0}return!1},qn.locate=function(t,e){return e.isEmpty()?N.EXTERIOR:qn.containsPoint(t,e)?N.INTERIOR:N.EXTERIOR};var zn=function(){this._edgeMap=new f,this._edgeList=null,this._ptInAreaLocation=[N.NONE,N.NONE]};zn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},zn.prototype.propagateSideLabels=function(t){for(var e=N.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ie.LEFT)!==N.NONE&&(e=r.getLocation(t,Ie.LEFT))}if(e===N.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ie.ON)===N.NONE&&s.setLocation(t,Ie.ON,i),s.isArea(t)){var u=s.getLocation(t,Ie.LEFT),c=s.getLocation(t,Ie.RIGHT);if(c!==N.NONE){if(c!==i)throw new Ne("side location conflict",a.getCoordinate());u===N.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,Ie.LEFT)===N.NONE,"found single null side"),s.setLocation(t,Ie.RIGHT,i),s.setLocation(t,Ie.LEFT,i)}}},zn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},zn.prototype.print=function(t){V.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},zn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},zn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ie.LEFT);et.isTrue(r!==N.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ie.LEFT),u=a.getLocation(t,Ie.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},zn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},zn.prototype.iterator=function(){return this.getEdges().iterator()},zn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new wt(this._edgeMap.values())),this._edgeList},zn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===N.NONE&&(this._ptInAreaLocation[t]=qn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},zn.prototype.toString=function(){var t=new L;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},zn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},zn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===N.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=N.NONE;if(e[u])c=N.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},zn.prototype.getDegree=function(){return this._edgeMap.size()},zn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn};var Vn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ne("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return je.isNorthern(i)&&je.isNorthern(o)?n:je.isNorthern(i)||je.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){V.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new wt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ie.LEFT),r=t.getDepth(Ie.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ne("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=o;u<a;u++){var c=this._edgeList.get(u);c.setEdgeDepths(Ie.RIGHT,s),s=c.getDepth(Ie.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=N.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=N.INTERIOR;break}if(r.isInResult()){t=N.EXTERIOR;break}}}if(t===N.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===N.INTERIOR):(a.isInResult()&&(i=N.EXTERIOR),s.isInResult()&&(i=N.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Me(N.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==N.INTERIOR&&o!==N.BOUNDARY||this._label.setLocation(i,N.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zn),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new ke(t,new Vn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ze),Xn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xn.prototype.compareTo=function(t){var e=t;return Xn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Xn.prototype.interfaces_=function(){return[x]},Xn.prototype.getClass=function(){return Xn},Xn.orientation=function(t){return 1===Ct.increasingDirection(t)},Xn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var f=(u+=i)===a,p=(c+=o)===s;if(f&&!p)return-1;if(!f&&p)return 1;if(f&&p)return 0}};var Jn=function(){this._edges=new wt,this._ocaMap=new f};Jn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Jn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Jn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Jn.prototype.iterator=function(){return this._edges.iterator()},Jn.prototype.getEdges=function(){return this._edges},Jn.prototype.get=function(t){return this._edges.get(t)},Jn.prototype.findEqualEdge=function(t){var e=new Xn(t.getCoordinates());return this._ocaMap.get(e)},Jn.prototype.add=function(t){this._edges.add(t);var e=new Xn(t.getCoordinates());this._ocaMap.put(e,t)},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var Hn=function(){};Hn.prototype.processIntersections=function(t,e,n,r){},Hn.prototype.isDone=function(){},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Wn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Wn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Wn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Wn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Wn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Wn.prototype.getLineIntersector=function(){return this._li},Wn.prototype.hasProperIntersection=function(){return this._hasProper},Wn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Wn.prototype.hasIntersection=function(){return this._hasIntersection},Wn.prototype.isDone=function(){return!1},Wn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Wn.prototype.interfaces_=function(){return[Hn]},Wn.prototype.getClass=function(){return Wn},Wn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var $n=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new E(t),this.segmentIndex=e,this.dist=n};$n.prototype.getSegmentIndex=function(){return this.segmentIndex},$n.prototype.getCoordinate=function(){return this.coord},$n.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},$n.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},$n.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},$n.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},$n.prototype.getDistance=function(){return this.dist},$n.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},$n.prototype.interfaces_=function(){return[x]},$n.prototype.getClass=function(){return $n};var Kn=function(){this._nodeMap=new f,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Me(this.edge._label))},Kn.prototype.add=function(t,e,n){var r=new $n(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Zn=function(){};Zn.prototype.getChainStartIndices=function(t){var e=0,n=new wt;n.add(new R(e));do{var r=this.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return Zn.toIntArray(n)},Zn.prototype.findChainEnd=function(t,e){for(var n=je.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&je.quadrant(t[r-1],t[r])===n;)r++;return r-1},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Zn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],f=this.pts[o],p=a.pts[s],h=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,f),this.env2.init(p,h),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,c),g<u&&this.computeIntersectsForChain(i,d,a,g,u,c)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,c),g<u&&this.computeIntersectsForChain(d,o,a,g,u,c))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ie.RIGHT]-this._depth[t][Ie.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?N.EXTERIOR:N.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==N.EXTERIOR&&r!==N.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===N.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===N.EXTERIOR?0:t===N.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Me.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new E(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new L;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ie.ON),e.getLocation(1,Ie.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ie.LEFT),e.getLocation(1,Ie.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ie.RIGHT),e.getLocation(1,Ie.RIGHT),2))},e}(Fe),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Jn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new wt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Dn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new wt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Te;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Sn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Wn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Rn(n,this._bufParams),i=new jn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ve(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ye(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Me(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ie.LEFT),n=t.getLocation(0,Ie.RIGHT);return e===N.INTERIOR&&n===N.EXTERIOR?1:e===N.EXTERIOR&&n===N.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new me,n=new wt;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(T(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&V.out.println(n)}},ir.prototype.scale=function(){if(T(arguments[0],bt)){for(var t=arguments[0],e=new wt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new E(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Ct.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],f=arguments[1],p=arguments[2],h=arguments[3];if(l===p&&f===h)return null;var d=l.getCoordinates()[f],g=l.getCoordinates()[f+1],y=p.getCoordinates()[h],m=p.getCoordinates()[h+1];if(this._li.computeIntersection(d,g,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,m)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+m)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new me},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new E(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new E,this._p1Scaled=new E),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new E(this._maxx,this._maxy),this._corner[1]=new E(this._minx,this._maxy),this._corner[2]=new E(this._minx,this._miny),this._corner[3]=new E(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ur);var cr=function(){this.tempEnv1=new X,this.selectedSegment=new gn};cr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var lr=function(){this._index=null;var t=arguments[0];this._index=t},fr={HotPixelSnapAction:{configurable:!0}};lr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[We]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},fr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(lr,fr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cr),hr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new wt};hr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},hr.prototype.isDone=function(){return!1},hr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},hr.prototype.interfaces_=function(){return[Hn]},hr.prototype.getClass=function(){return hr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof q))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new hr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(T(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Sn,this._pointSnapper=new lr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new En,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new he(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ne))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new he(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===he.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new gr(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new gr(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof En&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=arguments[2];return new gr(a,u).getResultGeometry(s)}}else if(4===arguments.length){var c=arguments[0],l=arguments[1],f=arguments[2],p=arguments[3],h=new gr(c);return h.setQuadrantSegments(f),h.setEndCapStyle(p),h.getResultGeometry(l)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=O.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yr.CAP_ROUND.get=function(){return En.CAP_ROUND},yr.CAP_BUTT.get=function(){return En.CAP_FLAT},yr.CAP_FLAT.get=function(){return En.CAP_FLAT},yr.CAP_SQUARE.get=function(){return En.CAP_SQUARE},yr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,yr);var mr=function(){this._pt=[new E,new E],this._distance=_.NaN,this._isNull=!0};mr.prototype.getCoordinates=function(){return this._pt},mr.prototype.getCoordinate=function(t){return this._pt[t]},mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},mr.prototype.getDistance=function(){return this._distance},mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr};var vr=function(){};vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.computeDistance=function(){if(arguments[2]instanceof mr&&arguments[0]instanceof Wt&&arguments[1]instanceof E)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new gn,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof mr&&arguments[0]instanceof Qt&&arguments[1]instanceof E){var s=arguments[0],u=arguments[1],c=arguments[2];vr.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)vr.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof mr&&arguments[0]instanceof lt&&arguments[1]instanceof E){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof Wt)vr.computeDistance(f,p,h);else if(f instanceof Qt)vr.computeDistance(f,p,h);else if(f instanceof qt)for(var d=f,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);vr.computeDistance(y,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof mr&&arguments[0]instanceof gn&&arguments[1]instanceof E){var m=arguments[0],v=arguments[1],_=arguments[2],b=m.closestPoint(v);_.setMinimum(b,v)}};var _r=function(t){this._maxPtDist=new mr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new Sr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return xr},br.MaxMidpointDistanceFilter.get=function(){return Sr},Object.defineProperties(_r,br);var xr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};xr.prototype.filter=function(t){this._minPtDist.initialize(),vr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[ht]},xr.prototype.getClass=function(){return xr};var Sr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};Sr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new E((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),vr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Sr.prototype.isDone=function(){return!1},Sr.prototype.isGeometryChanged=function(){return!1},Sr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Sr.prototype.interfaces_=function(){return[Ut]},Sr.prototype.getClass=function(){return Sr};var wr=function(t){this._comps=t||null};wr.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},wr.prototype.interfaces_=function(){return[Gt]},wr.prototype.getClass=function(){return wr},wr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return wr.getPolygons(t,new wt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof qt&&e.apply(new wr(n)),n}};var Er=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Er.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Wt&&this._lines.add(t)},Er.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Er.prototype.interfaces_=function(){return[ct]},Er.prototype.getClass=function(){return Er},Er.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Er.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Er.getLines(e,n))}},Er.getLines=function(){if(1===arguments.length){var t=arguments[0];return Er.getLines(t,!1)}if(2===arguments.length){if(T(arguments[0],bt)&&T(arguments[1],bt)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Er.getLines(i,n)}return n}if(arguments[0]instanceof lt&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new wt;return o.apply(new Er(s,a)),s}if(arguments[0]instanceof lt&&T(arguments[1],bt)){var u=arguments[0],c=arguments[1];return u instanceof Wt?c.add(u):u.apply(new Er(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&T(arguments[0],bt)&&T(arguments[1],bt)){for(var l=arguments[0],f=arguments[1],p=arguments[2],h=l.iterator();h.hasNext();){var d=h.next();Er.getLines(d,f,p)}return f}if("boolean"==typeof arguments[2]&&arguments[0]instanceof lt&&T(arguments[1],bt)){var g=arguments[0],y=arguments[1],m=arguments[2];return g.apply(new Er(y,m)),y}}};var Ir=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Ir.prototype.locateInternal=function(){if(arguments[0]instanceof E&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return N.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===N.EXTERIOR)return N.EXTERIOR;if(r===N.BOUNDARY)return N.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===N.INTERIOR)return N.EXTERIOR;if(a===N.BOUNDARY)return N.BOUNDARY}return N.INTERIOR}if(arguments[0]instanceof E&&arguments[1]instanceof Wt){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return N.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?st.isOnLine(s,c)?N.INTERIOR:N.EXTERIOR:N.BOUNDARY}if(arguments[0]instanceof E&&arguments[1]instanceof Kt){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?N.INTERIOR:N.EXTERIOR}},Ir.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):N.EXTERIOR},Ir.prototype.intersects=function(t,e){return this.locate(t,e)!==N.EXTERIOR},Ir.prototype.updateLocationInfo=function(t){t===N.INTERIOR&&(this._isIn=!0),t===N.BOUNDARY&&this._numBoundaries++},Ir.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Wt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof zt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof qt)for(var u=new Un(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Ir.prototype.locate=function(t,e){return e.isEmpty()?N.EXTERIOR:e instanceof Wt?this.locateInternal(t,e):e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?N.BOUNDARY:this._numBoundaries>0||this._isIn?N.INTERIOR:N.EXTERIOR)},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var Cr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Pr={INSIDE_AREA:{configurable:!0}};Cr.prototype.isInsideArea=function(){return this._segIndex===Cr.INSIDE_AREA},Cr.prototype.getCoordinate=function(){return this._pt},Cr.prototype.getGeometryComponent=function(){return this._component},Cr.prototype.getSegmentIndex=function(){return this._segIndex},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Pr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Cr,Pr);var Nr=function(t){this._pts=t||null};Nr.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Nr.prototype.interfaces_=function(){return[Gt]},Nr.prototype.getClass=function(){return Nr},Nr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Qe.singletonList(t):Nr.getPoints(t,new wt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof qt&&e.apply(new Nr(n)),n}};var Ar=function(){this._locations=null;var t=arguments[0];this._locations=t};Ar.prototype.filter=function(t){(t instanceof Kt||t instanceof Wt||t instanceof Qt)&&this._locations.add(new Cr(t,0,t.getCoordinate()))},Ar.prototype.interfaces_=function(){return[Gt]},Ar.prototype.getClass=function(){return Ar},Ar.getLocations=function(t){var e=new wt;return t.apply(new Ar(e)),e};var Tr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ir,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Tr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=wr.getPolygons(this._geom[e]);if(i.size()>0){var o=Ar.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&T(arguments[0],St)&&T(arguments[1],St)){for(var a=arguments[0],s=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var l=a.get(c),f=0;f<s.size();f++)if(this.computeContainmentDistance(l,s.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Cr&&arguments[1]instanceof Qt){var p=arguments[0],h=arguments[1],d=arguments[2],g=p.getCoordinate();if(N.EXTERIOR!==this._ptLocator.locate(g,h))return this._minDistance=0,d[0]=p,d[1]=new Cr(h,g),null}},Tr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Tr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Er.getLines(this._geom[0]),n=Er.getLines(this._geom[1]),r=Nr.getPoints(this._geom[0]),i=Nr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Tr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Tr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Tr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Tr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Wt&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new Cr(t,o,s),n[1]=new Cr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Wt&&arguments[1]instanceof Wt){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),p=c.getCoordinates(),h=0;h<f.length-1;h++)for(var d=0;d<p.length-1;d++){var g=st.distanceLineLine(f[h],f[h+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(f[h],f[h+1]),m=new gn(p[d],p[d+1]),v=y.closestPoints(m);l[0]=new Cr(u,h,v[0]),l[1]=new Cr(c,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Tr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Cr(i,0,i.getCoordinate()),n[1]=new Cr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Tr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Tr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Tr.distance=function(t,e){return new Tr(t,e).distance()},Tr.isWithinDistance=function(t,e,n){return new Tr(t,e,n).distance()<=n},Tr.nearestPoints=function(t,e){return new Tr(t,e).nearestPoints()};var Or=function(){this._pt=[new E,new E],this._distance=_.NaN,this._isNull=!0};Or.prototype.getCoordinates=function(){return this._pt},Or.prototype.getCoordinate=function(t){return this._pt[t]},Or.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Or.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Or.prototype.toString=function(){return Z.toLineString(this._pt[0],this._pt[1])},Or.prototype.getDistance=function(){return this._distance},Or.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or};var Mr=function(){};Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.computeDistance=function(){if(arguments[2]instanceof Or&&arguments[0]instanceof Wt&&arguments[1]instanceof E)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Or&&arguments[0]instanceof Qt&&arguments[1]instanceof E){var s=arguments[0],u=arguments[1],c=arguments[2];Mr.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Mr.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Or&&arguments[0]instanceof lt&&arguments[1]instanceof E){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof Wt)Mr.computeDistance(f,p,h);else if(f instanceof Qt)Mr.computeDistance(f,p,h);else if(f instanceof qt)for(var d=f,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Mr.computeDistance(y,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof Or&&arguments[0]instanceof gn&&arguments[1]instanceof E){var m=arguments[0],v=arguments[1],_=arguments[2],b=m.closestPoint(v);_.setMinimum(b,v)}};var Lr=function(){this._g0=null,this._g1=null,this._ptDist=new Or,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Rr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Lr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Lr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Lr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Lr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Lr.prototype.computeOrientedDistance=function(t,e,n){var r=new Dr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Fr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Lr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Lr(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Lr(n,r);return o.setDensifyFraction(i),o.distance()}},Rr.MaxPointDistanceFilter.get=function(){return Dr},Rr.MaxDensifiedByFractionDistanceFilter.get=function(){return Fr},Object.defineProperties(Lr,Rr);var Dr=function(){this._maxPtDist=new Or,this._minPtDist=new Or,this._euclideanDist=new Mr,this._geom=null;var t=arguments[0];this._geom=t};Dr.prototype.filter=function(t){this._minPtDist.initialize(),Mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Dr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dr.prototype.interfaces_=function(){return[ht]},Dr.prototype.getClass=function(){return Dr};var Fr=function(){this._maxPtDist=new Or,this._minPtDist=new Or,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Fr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,c=new E(s,u);this._minPtDist.initialize(),Mr.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Fr.prototype.isDone=function(){return!1},Fr.prototype.isGeometryChanged=function(){return!1},Fr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fr.prototype.interfaces_=function(){return[Ut]},Fr.prototype.getClass=function(){return Fr};var kr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Br={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};kr.prototype.checkMaximumDistance=function(t,e,n){var r=new Lr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Z.toLineString(i[0],i[1])+")"}},kr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=kr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),kr.VERBOSE&&V.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},kr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof qt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},kr.prototype.getErrorIndicator=function(){return this._errorIndicator},kr.prototype.checkMinimumDistance=function(t,e,n){var r=new Tr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Z.toLineString(i[0],i[1])+" )"}},kr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},kr.prototype.getErrorLocation=function(){return this._errorLocation},kr.prototype.getPolygonLines=function(t){for(var e=new wt,n=new Er(e),r=wr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},kr.prototype.getErrorMessage=function(){return this._errMsg},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},Br.VERBOSE.get=function(){return!1},Br.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(kr,Br);var jr=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};jr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},jr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*jr.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new X(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},jr.prototype.checkDistance=function(){var t=new kr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},jr.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},jr.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},jr.prototype.getErrorIndicator=function(){return this._errorIndicator},jr.prototype.getErrorLocation=function(){return this._errorLocation},jr.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},jr.prototype.report=function(t){if(!jr.VERBOSE)return null;V.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},jr.prototype.getErrorMessage=function(){return this._errorMsg},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},jr.isValidMsg=function(t,e,n){var r=new jr(t,e,n);return r.isValid()?null:r.getErrorMessage()},jr.isValid=function(t,e,n){return!!new jr(t,e,n).isValid()},Gr.VERBOSE.get=function(){return!1},Gr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jr,Gr);var Ur=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ur.prototype.getCoordinates=function(){return this._pts},Ur.prototype.size=function(){return this._pts.length},Ur.prototype.getCoordinate=function(t){return this._pts[t]},Ur.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ur.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:fn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ur.prototype.setData=function(t){this._data=t},Ur.prototype.getData=function(){return this._data},Ur.prototype.toString=function(){return Z.toLineString(new ue(this._pts))},Ur.prototype.interfaces_=function(){return[pn]},Ur.prototype.getClass=function(){return Ur};var qr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new wt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};qr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},qr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},qr.prototype.getIntersectionSegments=function(){return this._intSegments},qr.prototype.count=function(){return this._intersectionCount},qr.prototype.getIntersections=function(){return this._intersections},qr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},qr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},qr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},qr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},qr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},qr.prototype.interfaces_=function(){return[Hn]},qr.prototype.getClass=function(){return qr},qr.createAllIntersectionsFinder=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e},qr.createAnyIntersectionFinder=function(t){return new qr(t)},qr.createIntersectionCounter=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var zr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};zr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},zr.prototype.getIntersections=function(){return this._segInt.getIntersections()},zr.prototype.isValid=function(){return this.execute(),this._isValid},zr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new qr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Sn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},zr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ne(this.getErrorMessage(),this._segInt.getInteriorIntersection())},zr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Z.toLineString(t[0],t[1])+" and "+Z.toLineString(t[2],t[3])},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.computeIntersections=function(t){var e=new zr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Vr=function t(){this._nv=null;var e=arguments[0];this._nv=new zr(t.toSegmentStrings(e))};Vr.prototype.checkValid=function(){this._nv.checkValid()},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.toSegmentStrings=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ur(r.getCoordinates(),r))}return e},Vr.checkValid=function(t){new Vr(t).checkValid()};var Yr=function(t){this._mapOp=t};Yr.prototype.map=function(t){for(var e=new wt,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.map=function(t,e){return new Yr(e).map(t)};var Xr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new wt,this._resultLineList=new wt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Xr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Xr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Xr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ci.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Xr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Xr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Xr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Xr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ci.isResultOfOp(r,e)&&e===Ci.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Jr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new wt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Jr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Jr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ci.INTERSECTION)){var r=n.getLabel();Ci.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Jr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr};var Hr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new wt,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new wt;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Hr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hr.prototype.getInputGeometry=function(){return this._inputGeom},Hr.prototype.transformMultiLineString=function(t,e){for(var n=new wt,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformMultiPoint=function(t,e){for(var n=new wt,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformMultiPolygon=function(t,e){for(var n=new wt,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.copy=function(t){return t.copy()},Hr.prototype.transformGeometryCollection=function(t,e){for(var n=new wt,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(n)):this._factory.buildGeometry(n)},Hr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Wt)return this.transformLineString(t,null);if(t instanceof zt)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof qt)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},Hr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Wr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Wt&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Wr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new E(o)),0===r&&this._isClosed&&t.set(t.size()-1,new E(o)))}},Wr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Wr.prototype.snapTo=function(t){var e=new It(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Wr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new E(i),!1)}},Wr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Wr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var $r=function(t){this._srcGeom=t||null},Kr={SNAP_PRECISION_FACTOR:{configurable:!0}};$r.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Zr(e,n).transform(this._srcGeom)},$r.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Zr(t,n,!0).transform(this._srcGeom),i=r;return e&&T(i,Zt)&&(i=r.buffer(0)),i},$r.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},$r.prototype.extractTargetCoordinates=function(t){for(var e=new h,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},$r.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.snap=function(t,e,n){var r=new Array(2).fill(null),i=new $r(t);r[0]=i.snapTo(e,n);var o=new $r(e);return r[1]=o.snapTo(r[0],n),r},$r.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=$r.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===he.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min($r.computeOverlaySnapTolerance(i),$r.computeOverlaySnapTolerance(o))}},$r.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*$r.SNAP_PRECISION_FACTOR},$r.snapToSelf=function(t,e,n){return new $r(t).snapToSelf(e,n)},Kr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties($r,Kr);var Zr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Wr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new E(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new E(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ht]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ut]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new $r(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ci.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||V.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=$r.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return $r.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ci.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ci.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ci.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ci.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ci.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ci.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ci.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ci.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ci.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[x]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var li=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};li.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(li.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},li.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},li.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},li.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},li.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},li.prototype.hasProperIntersection=function(){return this._hasProper},li.prototype.hasIntersection=function(){return this._hasIntersection},li.prototype.isDone=function(){return this._isDone},li.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},li.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},li.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fi=function(t){function e(){t.call(this),this.events=new wt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof li&&T(arguments[0],St)&&T(arguments[1],St)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&T(arguments[0],St)&&arguments[1]instanceof li){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),pi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},hi={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return Z.toLineString(new E(this._min,0),new E(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},hi.NodeComparator.get=function(){return di},Object.defineProperties(pi,hi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[w]},di.prototype.getClass=function(){return di};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),yi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),mi=function(){this._leaves=new wt,this._root=null,this._level=0};mi.prototype.buildTree=function(){Qe.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new wt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},mi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},mi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},mi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},mi.prototype.printNode=function(t){V.out.println(Z.toLineString(new E(t._min,this._level),new E(t._max,this._level)))},mi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},mi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yi(t.get(n),t.get(n+1));e.add(i)}}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi};var vi=function(){this._items=new wt};vi.prototype.visitItem=function(t){this._items.add(t)},vi.prototype.getItems=function(){return this._items},vi.prototype.interfaces_=function(){return[We]},vi.prototype.getClass=function(){return vi};var _i=function(){this._index=null;var t=arguments[0];if(!T(t,Zt))throw new v("Argument must be Polygonal");this._index=new Si(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new at(t),n=new xi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[Gn]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return xi},bi.IntervalIndexedGeometry.get=function(){return Si},Object.defineProperties(_i,bi);var xi=function(){this._counter=null;var t=arguments[0];this._counter=t};xi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xi.prototype.interfaces_=function(){return[We]},xi.prototype.getClass=function(){return xi};var Si=function(){this._index=new mi;var t=arguments[0];this.init(t)};Si.prototype.init=function(t){for(var e=Er.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Si.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Si.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var wi=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ir,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;N.NONE,r.getLocation(t,Ie.ON)===N.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new li(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,u=r||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new li(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,N.INTERIOR)}else if(arguments[0]instanceof E){var e=arguments[0];this.insertPoint(this._argIndex,e,N.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),N.EXTERIOR,N.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,N.INTERIOR,N.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],N.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],N.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ct.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Me(this._argIndex,N.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===N.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Ct.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Me(this._argIndex,N.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],N.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Me(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new fi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof Wt)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof zt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof qt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return T(this._parentGeom,Zt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?N.BOUNDARY:N.INTERIOR},e}(Ve),Ei=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new wi(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wi(0,e,r),this._arg[1]=new wi(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wi(0,i,a),this._arg[1]=new wi(1,o,a)}};Ei.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ei.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var Ii=function(){};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.map=function(){if(arguments[0]instanceof lt&&T(arguments[1],Ii.MapOp)){for(var t=arguments[0],e=arguments[1],n=new wt,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(T(arguments[0],bt)&&T(arguments[1],Ii.MapOp)){for(var o=arguments[0],a=arguments[1],s=new wt,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Ii.MapOp=function(){};var Ci=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ir,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Jn,this._resultPolyList=new wt,this._resultLineList=new wt,this._resultPointList=new wt,this._graph=new Ve(new Yn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new wt;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==N.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new wt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new wt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Xr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Jr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ie.RIGHT),i.getLocation(1,Ie.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ie.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ie.LEFT,r.getLocation(i,Ie.LEFT)),et.isTrue(!r.isNull(i,Ie.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ie.RIGHT,r.getLocation(i,Ie.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ei);Ci.overlayOp=function(t,e,n){return new Ci(t,e).getResultGeometry(n)},Ci.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ci.createEmptyResult(Ci.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yr.map(t,{interfaces_:function(){return[Ii.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.INTERSECTION)},Ci.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ci.createEmptyResult(Ci.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.SYMDIFFERENCE)},Ci.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ci.INTERSECTION:o=Math.min(r,i);break;case Ci.UNION:o=Math.max(r,i);break;case Ci.DIFFERENCE:o=r;break;case Ci.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ci.createEmptyResult=function(t,e,n,r){var i=null;switch(Ci.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ci.difference=function(t,e){return t.isEmpty()?Ci.createEmptyResult(Ci.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.DIFFERENCE))},Ci.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ci.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===N.BOUNDARY&&(i=N.INTERIOR),o===N.BOUNDARY&&(o=N.INTERIOR),a){case Ci.INTERSECTION:return i===N.INTERIOR&&o===N.INTERIOR;case Ci.UNION:return i===N.INTERIOR||o===N.INTERIOR;case Ci.DIFFERENCE:return i===N.INTERIOR&&o!==N.INTERIOR;case Ci.SYMDIFFERENCE:return i===N.INTERIOR&&o!==N.INTERIOR||i!==N.INTERIOR&&o===N.INTERIOR}return!1}},Ci.INTERSECTION=1,Ci.UNION=2,Ci.DIFFERENCE=3,Ci.SYMDIFFERENCE=4;var Pi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ir,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Pi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Pi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?N.BOUNDARY:this._ptLocator.locate(t,this._g)},Pi.prototype.extractLinework=function(t){var e=new Ni;t.apply(e);var n=e.getLinework(),r=me.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi};var Ni=function(){this._linework=null,this._linework=new wt};Ni.prototype.getLinework=function(){return this._linework},Ni.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ni.prototype.interfaces_=function(){return[Gt]},Ni.prototype.getClass=function(){return Ni};var Ai=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ai.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ai.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ai.prototype.getPoints=function(t){for(var e=new wt,n=Er.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ai.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var f=new E(c-u,l+s);r.add(f)}if(this._doRight){var p=new E(c+u,l-s);r.add(p)}},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai};var Ti=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new wt;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Pi(this._geom[0],this._boundaryDistanceTolerance),new Pi(this._geom[1],this._boundaryDistanceTolerance),new Pi(this._geom[2],this._boundaryDistanceTolerance)]},Oi={TOLERANCE:{configurable:!0}};Ti.prototype.reportResult=function(t,e,n){V.out.println("Overlay result invalid - A:"+N.toLocationSymbol(e[0])+" B:"+N.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+N.toLocationSymbol(e[2]))},Ti.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ti.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ti.hasLocation(this._location,N.BOUNDARY)||this.isValidResult(r,this._location)}},Ti.prototype.addTestPts=function(t){var e=new Ai(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ti.prototype.isValidResult=function(t,e){var n=Ci.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===N.INTERIOR);return r||this.reportResult(t,e,n),r},Ti.prototype.getInvalidLocation=function(){return this._invalidLocation},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ti.computeBoundaryDistanceTolerance=function(t,e){return Math.min($r.computeSizeBasedSnapTolerance(t),$r.computeSizeBasedSnapTolerance(e))},Ti.isValid=function(t,e,n,r){return new Ti(t,e,r).isValid(n)},Oi.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ti,Oi);var Mi=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Mi.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Mi.prototype.combine=function(){for(var t=new wt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.combine=function(){if(1===arguments.length){var t=arguments[0];return new Mi(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Mi(Mi.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new Mi(Mi.createList(r,i,o)).combine()}},Mi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Mi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new wt;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new wt;return a.add(r),a.add(i),a.add(o),a}};var Li=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new wt)},Ri={STRTREE_NODE_CAPACITY:{configurable:!0}};Li.prototype.reduceToGeometries=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var r=n.next(),i=null;T(r,St)?i=this.unionTree(r):r instanceof lt&&(i=r),e.add(i)}return e},Li.prototype.extractByEnvelope=function(t,e,n){for(var r=new wt,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Li.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Mi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Li.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Li.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Li.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Li.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Li.getGeometry(e,n),Li.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Li.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Li.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Li.prototype.unionActual=function(t,e){return Li.restrictToPolygons(t.union(e))},Li.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Li.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new wt,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Mi.combine(r)},Li.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.restrictToPolygons=function(t){if(T(t,Zt))return t;var e=wr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},Li.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Li.union=function(t){return new Li(t).union()},Ri.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Li,Ri);var Di=function(){};Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ci.createEmptyResult(Ci.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.UNION)},t.GeoJSONReader=we,t.GeoJSONWriter=Ee,t.OverlayOp=Ci,t.UnionOp=Di,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){(function(r){var i,o;!function(){var a=Math.abs,s=Math.floor,u=Math.sin,c=Math.cos,l=Math.tan,f=Math.asin,p=Math.acos,h=Math.atan,d=Math.atan2,g=Math.sqrt,y=Math.pow,m=Math.exp,v=Math.log,_=Math.hypot,b=Math.sinh,x=Math.cosh,S=Math.min,w=Math.max,E=1/0,I=Math.PI,C=57.29577951308232,P=.017453292519943295,N=6378137,A=.0066943799901413165,T=I/4,O=I/2,M=1.5*I,L=2*I,R=2/I,D=0,F=1,k=2,B=3,j=4,G=-45,U=-47,q=1e-10,z={last_errno:0,debug_level:0,logger:null},V=["no arguments in initialization list","no options found in 'init' file","invalid init= string","projection not named","unknown projection id","effective eccentricity = 1","unknown unit conversion id","invalid boolean param argument","unknown elliptical parameter name","reciprocal flattening (1/f) = 0","|radius reference latitude| > 90","squared eccentricity < 0","major axis or radius = 0 or not given","latitude or longitude exceeded limits","invalid x or y","improperly formed DMS value","non-convergent inverse meridional dist","non-convergent inverse phi2","acos/asin: |arg| >1+1e-14","tolerance condition error","conic lat_1 = -lat_2","lat_1 >= 90","lat_1 = 0","lat_ts >= 90","no distance between control points","projection not selected to be rotated","W <= 0 or M <= 0","lsat not in 1-5 range","path not in range","h <= 0","k <= 0","lat_0 = 0 or 90 or alpha = 90","lat_1=lat_2 or lat_1=0 or lat_2=90","elliptical usage required","invalid UTM zone number","arg(s) out of range for Tcheby eval","failed to find projection to be rotated","failed to load datum shift file","both n & m must be spec'd and > 0","n <= 0, n > 1 or not specified","lat_1 or lat_2 not specified","|lat_1| == |lat_2|","lat_0 is pi/2 from mean lat","unparseable coordinate system definition","geocentric transformation missing z or ellps","unknown prime meridian conversion id","illegal axis orientation combination","point not within available datum shift grids","invalid sweep axis, choose x or y"];function Y(){var t=z.last_errno;t&&(t>0||!function(t){return X.indexOf(t)>-1}(t))&&K(t)}var X=[-14,-15,-17,-18,-19,-20,-27,-48];function J(t){z.last_errno=t}function H(){J(-20)}function W(){J(-20)}function $(t){K(t)}function K(t){J(t),Z()}function Z(t,e){var n;throw e||(e={}),e.code||(e.code=z.last_errno||0),t||(n=e.code,t=V[~n]||"unknown error"),z.last_errno=0,new Q(t,e)}function Q(t,e){var n=new Error(t);return n.name="ProjError",Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function tt(t){return et(t)*P}function et(t){var e=/(-?[0-9.]+)d?([0-9.]*)'?([0-9.]*)"?([nsew]?)$/i.exec(t),n=NaN;return e&&(n=+(e[1]||"0")+ +(e[2]||"0")/60+ +(e[3]||"0")/3600,/[ws]/i.test(e[4])&&(n=-n)),isNaN(n)&&K(-16),n}function nt(t){return rt(t)}function rt(t){return parseFloat(t)}function it(t,e){var n,r,i=e[0],o=t[e.substr(1)],a=void 0!==o;return"t"==i?n=a:a?(r=o.param,o.used=!0,"i"==i?n=parseInt(r):"d"==i?n=nt(r):"r"==i?n=tt(r):"s"==i?n=String(r):"b"==i&&("T"==r||"t"==r||!0===r?n=!0:"F"==r||"f"==r?n=!1:(J(-8),n=!1))):n={i:0,b:!1,d:0,r:0,s:""}[i],void 0===n&&Z("invalid request to pj_param, fatal"),n}function ot(t){for(var e,n=/\+([a-z][a-z0-9_]*(?:=[^\s]*)?)/gi,r={};e=n.exec(t);)at(r,e[1]);return r}function at(t,e){var n,r,i=e.split("=");1==i.length?(n=e,r=!0):(n=i[0],r=e.substr(i[0].length+1)),t[n]={used:!1,param:r}}var st={};function ut(t,e,n,r){st[e]={init:t,name:n,description:r}}function ct(t){return!t||t.is_latlong}function lt(t){var e=!1,n="";return"datum"in t.params?(e=!0,n+=ft(t,"datum")):"ellps"in t.params?n+=ft(t,"ellps"):"a"in t.params?(n+=ft(t,"a"),"b"in t.params?n+=ft(t,"b"):"es"in t.params?n+=ft(t,"es"):"f"in t.params?n+=ft(t,"f"):n+=" +es="+t.es):$(-13),e||(n+=ft(t,"towgs84"),n+=ft(t,"nadgrids")),n+=ft(t,"R"),n+=ft(t,"R_A"),n+=ft(t,"R_V"),n+=ft(t,"R_a"),n+=ft(t,"R_lat_a"),n+=ft(t,"R_lat_g"),n+=ft(t,"pm")}function ft(t,e){var n="";return e in t.params&&(n=" +"+e,!0!==t.params[e].param&&(n+="="+it(t.params,"s"+e))),n}var pt=[["WGS84","towgs84=0,0,0","WGS84","WGS_1984"],["GGRS87","towgs84=-199.87,74.79,246.62","GRS80","Greek_Geodetic_Reference_System_1987"],["NAD83","towgs84=0,0,0","GRS80","North_American_Datum_1983"],["NAD27","nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat","clrk66","North_American_Datum_1927"],["potsdam","towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7","bessel","Potsdam Rauenberg 1950 DHDN"],["carthage","towgs84=-263.0,6.0,431.0","clrk80ign","Carthage 1934 Tunisia"],["hermannskogel","towgs84=577.326,90.129,463.919,5.137,1.474,5.297,2.4232","bessel","Hermannskogel"],["ire65","towgs84=482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15","mod_airy","Ireland 1965"],["nzgd49","towgs84=59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993","intl","New Zealand Geodetic Datum 1949"],["OSGB36","towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894","airy","OSGB 1936"],[null,null,null,null]],ht=[["greenwich","0dE"],["lisbon","9d07'54.862\"W"],["paris","2d20'14.025\"E"],["bogota","74d04'51.3\"W"],["madrid","3d41'16.58\"W"],["rome","12d27'8.4\"E"],["bern","7d26'22.5\"E"],["jakarta","106d48'27.79\"E"],["ferro","17d40'W"],["brussels","4d22'4.71\"E"],["stockholm","18d3'29.8\"E"],["athens","23d42'58.815\"E"],["oslo","10d43'22.5\"E"],[null,null]];function dt(t){var e=pt.reduce(function(e,n){return n[0]===t?n:e},null);return e?{id:e[0],defn:e[1],ellipse_id:e[2],name:e[3]}:null}var gt=[["MERIT","a=6378137.0","rf=298.257","MERIT 1983"],["SGS85","a=6378136.0","rf=298.257","Soviet Geodetic System 85"],["GRS80","a=6378137.0","rf=298.257222101","GRS 1980(IUGG, 1980)"],["IAU76","a=6378140.0","rf=298.257","IAU 1976"],["airy","a=6377563.396","b=6356256.910","Airy 1830"],["APL4.9","a=6378137.0","rf=298.25","Appl. Physics. 1965"],["NWL9D","a=6378145.0","rf=298.25","Naval Weapons Lab., 1965"],["mod_airy","a=6377340.189","b=6356034.446","Modified Airy"],["andrae","a=6377104.43","rf=300.0","Andrae 1876 (Den., Iclnd.)"],["aust_SA","a=6378160.0","rf=298.25","Australian Natl & S. Amer. 1969"],["GRS67","a=6378160.0","rf=298.2471674270","GRS 67(IUGG 1967)"],["bessel","a=6377397.155","rf=299.1528128","Bessel 1841"],["bess_nam","a=6377483.865","rf=299.1528128","Bessel 1841 (Namibia)"],["clrk66","a=6378206.4","b=6356583.8","Clarke 1866"],["clrk80","a=6378249.145","rf=293.4663","Clarke 1880 mod."],["clrk80ign","a=6378249.2","rf=293.4660212936269","Clarke 1880 (IGN)."],["CPM","a=6375738.7","rf=334.29","Comm. des Poids et Mesures 1799"],["delmbr","a=6376428","rf=311.5","Delambre 1810 (Belgium)"],["engelis","a=6378136.05","rf=298.2566","Engelis 1985"],["evrst30","a=6377276.345","rf=300.8017","Everest 1830"],["evrst48","a=6377304.063","rf=300.8017","Everest 1948"],["evrst56","a=6377301.243","rf=300.8017","Everest 1956"],["evrst69","a=6377295.664","rf=300.8017","Everest 1969"],["evrstSS","a=6377298.556","rf=300.8017","Everest (Sabah & Sarawak)"],["fschr60","a=6378166","rf=298.3","Fischer (Mercury Datum) 1960"],["fschr60m","a=6378155","rf=298.3","Modified Fischer 1960"],["fschr68","a=6378150","rf=298.3","Fischer 1968"],["helmert","a=6378200","rf=298.3","Helmert 1906"],["hough","a=6378270.0","rf=297","Hough"],["intl","a=6378388.0","rf=297","International 1909 (Hayford)"],["krass","a=6378245.0","rf=298.3","Krasovsky 1940"],["kaula","a=6378163","rf=298.24","Kaula 1961"],["lerch","a=6378139","rf=298.257","Lerch 1979"],["mprts","a=6397300","rf=191","Maupertius 1738"],["new_intl","a=6378157.5","b=6356772.2","New International 1967"],["plessis","a=6376523","b=6355863","Plessis 1817 (France)"],["SEasia","a=6378155.0","b=6356773.3205","Southeast Asia"],["walbeck","a=6376896.0","b=6355834.8467","Walbeck"],["WGS60","a=6378165.0","rf=298.3","WGS 60"],["WGS66","a=6378145.0","rf=298.25","WGS 66"],["WGS72","a=6378135.0","rf=298.26","WGS 72"],["WGS84","a=6378137.0","rf=298.257223563","WGS 84"],["sphere","a=6370997.0","b=6370997.0","Normal Sphere (r=6370997)"],[null,null,null,null]];function yt(t){var e=gt.reduce(function(e,n){return n[0]===t?n:e},null);return e?{id:e[0],major:e[1],ell:e[2],name:e[3]}:null}var mt=[["km","1000","Kilometer"],["m","1","Meter"],["dm","1/10","Decimeter"],["cm","1/100","Centimeter"],["mm","1/1000","Millimeter"],["kmi","1852.0","International Nautical Mile"],["in","0.0254","International Inch"],["ft","0.3048","International Foot"],["yd","0.9144","International Yard"],["mi","1609.344","International Statute Mile"],["fath","1.8288","International Fathom"],["ch","20.1168","International Chain"],["link","0.201168","International Link"],["us-in","1/39.37","U.S. Surveyor's Inch"],["us-ft","0.304800609601219","U.S. Surveyor's Foot"],["us-yd","0.914401828803658","U.S. Surveyor's Yard"],["us-ch","20.11684023368047","U.S. Surveyor's Chain"],["us-mi","1609.347218694437","U.S. Surveyor's Statute Mile"],["ind-yd","0.91439523","Indian Yard"],["ind-ft","0.30479841","Indian Foot"],["ind-ch","20.11669506","Indian Chain"],[null,null,null]];function vt(t){var e=mt.reduce(function(e,n){return t===n[0]?n:e},null);return e?{id:e[0],to_meter:e[1],name:e[2]}:null}var _t={};var bt={};function xt(t){return bt[t]||null}function St(t){var e,i,o,a,s,u,c,l,f=t.split(":"),p=f[0],h=f[1];return h&&p||$(-3),(e=xt(p=p.toLowerCase()))||(i=p,a=n(12),s=n(47),u=s.join(s.dirname(r),"../nad"),c=s.join(u,i.toUpperCase()),l=s.join(u,i.toLowerCase()),a.existsSync(c)?o=a.readFileSync(c,"utf8"):a.existsSync(l)?o=a.readFileSync(l,"utf8"):Z("unable to read from 'init' file named "+i),e=o,bt[p]=e),e?function(t,e){var n,r,i="",o="";(n=t.indexOf("<"+e+">"))>-1&&((r=t.lastIndexOf("#",n))>-1&&(o=t.substring(r+1,n).trim(),/\n/.test(o)&&(o="")),i=(i=(i=" "+(i=(i=(i=(i=(i=t.substr(n+e.length+2)).substr(0,i.indexOf("<"))).replace(/#.*/g,"")).replace(/[\s]+/g," ")).replace(/\+title=[^+]*[^ +]/g,function(t){return t.replace(/ /g,"\t")}))).replace(/ (?=[a-z])/gi," +")).replace(/\t/g," ").trim());return i?{opts:i,comment:o}:null}(e,h):null}function wt(t){var e,n,r=ot(t),i={params:r,is_latlong:!1,is_geocent:!1,is_long_wrap_set:!1,long_wrap_center:0,axis:"enu",gridlist:null,gridlist_count:0,vgridlist_geoid:null,vgridlist_geoid_count:0};return Object.keys(r).length||$(-1),it(r,"tinit")&&function(t,e){var n=(r=e,_t[r.toLowerCase()]||null);var r;n||(n=St(e),function(t,e){_t[t.toLowerCase()]=e}(e,n));n||$(-2);Et(t,n.opts)}(r,it(r,"sinit")),(e=it(r,"sproj"))||$(-4),(n=st[e])||$(-5),it(r,"bno_defs")||function(t,e){Et(t,"+ellps=WGS84")}(i.params),function(t){var e,n,r,i,o=t.datum_params=[0,0,0,0,0,0,0];t.datum_type=D,(e=it(t.params,"sdatum"))&&((n=dt(e))||$(-9),n.ellipse_id&&at(t.params,"ellps="+n.ellipse_id),n.defn&&at(t.params,n.defn)),(r=it(t.params,"snadgrids"))&&"@null"!=r&&Z("+nadgrids is not implemented"),it(t.params,"scatalog")&&Z("+catalog is not implemented"),(i=it(t.params,"stowgs84"))&&(i.split(",").forEach(function(t,e){o[e]=nt(t)||0}),0!=o[3]||0!=o[4]||0!=o[5]||0!=o[6]?(t.datum_type=k,o[3]*=484813681109536e-20,o[4]*=484813681109536e-20,o[5]*=484813681109536e-20,o[6]=o[6]/1e6+1):t.datum_type=F)}(i),function(t){var e,n,r,i,o,s=.16666666666666666,c=t.params,l=0,f=0;it(c,"tR")?l=it(c,"dR"):((e=it(c,"sellps"))&&((n=yt(e))||$(-9),at(c,n.major),at(c,n.ell)),l=it(c,"da"),it(c,"tes")?f=it(c,"des"):it(c,"te")?f=(r=it(c,"de"))*r:it(c,"trf")?((r=it(c,"drf"))||$(-10),f=(r=1/r)*(2-r)):it(c,"tf")?f=(r=it(c,"df"))*(2-r):it(c,"tb")&&(f=1-(i=it(c,"db"))*i/(l*l)),i||(i=l*g(1-f)),it(c,"bR_A")?(l*=1-f*(s+f*(.04722222222222222+.022156084656084655*f)),f=0):it(c,"bR_V")?l*=1-f*(s+f*(.06944444444444445+.04243827160493827*f)):it(c,"bR_a")?(l=.5*(l+i),f=0):it(c,"bR_g")?(l=g(l*i),f=0):it(c,"bR_h")?(l+i===0&&$(-20),l=2*l*i/(l+i),f=0):(o=it(c,"tR_lat_a")||it(c,"tR_lat_g"))&&(r=u(it(c,o?"rR_lat_a":"rR_lat_g")),a(r)>O&&$(-11),r=1-f*r*r,l*=o?.5*(1-f+r)/(r*g(r)):g(1-f)/r,f=0)),f<0&&$(-12),l<=0&&$(-13),t.es=f,t.a=l}(i),i.a_orig=i.a,i.es_orig=i.es,i.e=g(i.es),i.ra=1/i.a,i.one_es=1-i.es,i.one_es||$(-6),i.rone_es=1/i.one_es,function(t){return t.datum_type==F&&t.datum_params[0]==t.datum_params[1]==t.datum_params[2]===0&&6378137==t.a&&Math.abs(t.es-.00669437999)<5e-11}(i)&&(i.datum_type=j),i.geoc=!!i.es&&it(r,"bgeoc"),i.over=it(r,"bover"),i.has_geoid_vgrids=it(r,"tgeoidgrids"),i.has_geoid_vgrids&&it(r,"sgeoidgrids"),i.is_long_wrap_set=it(r,"tlon_wrap"),i.is_long_wrap_set&&(i.long_wrap_center=it(r,"rlon_wrap"),a(i.long_wrap_center)<10*L==!1&&$(-14)),it(r,"saxis")&&function(t){var e=it(t.params,"saxis");3!=e.length&&$(U);-1!="ewnsud".indexOf(e[0])&&-1!="ewnsud".indexOf(e[1])&&-1!="ewnsud".indexOf(e[2])||$(U);t.axis=e}(i),i.lam0=it(r,"rlon_0"),i.phi0=it(r,"rlat_0"),i.x0=it(r,"dx_0"),i.y0=it(r,"dy_0"),it(r,"tk_0")?i.k0=it(r,"dk_0"):it(r,"tk")?i.k0=it(r,"dk"):i.k0=1,i.k0<=0&&$(-31),function(t){var e,n,r,i=t.params;(e=it(i,"sunits"))&&((r=vt(e))||$(-7),n=r.to_meter);n||(n=it(i,"sto_meter"))?(t.to_meter=It(n),t.fr_meter=1/t.to_meter):t.to_meter=t.fr_meter=1;n=null,(e=it(i,"svunits"))&&((r=vt(e))||$(-7),n=r.to_meter);n||it(i,"svto_meter")?(t.vto_meter=It(n),t.vfr_meter=1/t.vto_meter):(t.vto_meter=t.to_meter,t.vfr_meter=t.fr_meter)}(i),function(t){var e,n,r,i=t.params;(e=it(i,"spm"))?(o=e,a=ht.reduce(function(t,e){return e[0]===o?e:t},null),n=a?{id:a[0],definition:a[1]}:null,r=tt(n?n.definition:e),isNaN(r)&&$(-46),t.from_greenwich=r):t.from_greenwich=0;var o,a}(i),n.init(i),i}function Et(t,e){var n=ot(e),r=["datum","ellps","a","b","rf","f"].reduce(function(e,n){return e||n in t},!1);Object.keys(n).forEach(function(e){e in t||"ellps"==e&&r||(t[e]=n[e])})}function It(t){var e=t.split("/"),n=rt(e[0]);return e.length>1&&(n/=rt(e[1])),n}var Ct=0,Pt=1,Nt=4,At=8,Tt=16;function Ot(t,e){var n=Ct,r=t*t,i=e*e;return t<=0&&(n|=Nt),e<=0&&(n|=At),t<e&&(n|=Tt),n?null:{a:t,b:e,a2:r,b2:i,e2:(r-i)/r,ep2:(r-i)/i}}function Mt(t,e,n,r,i){var o,a,s,l,f=Ct,p=n[e],h=r[e],d=i[e];return h<-O&&h>-1.001*O?h=-O:h>O&&h<1.001*O?h=O:(h<-O||h>O)&&(f|=Pt),f||(p>I&&(p-=2*I),a=u(h),l=c(h),s=a*a,o=t.a/g(1-t.e2*s),n[e]=(o+d)*l*c(p),r[e]=(o+d)*l*u(p),i[e]=(o*(1-t.e2)+d)*a),f}function Lt(t,e,n,r,i){var o,s,u,c,l,f,p,y,m,v,_,b,x,S,w,E,I=n[e],C=r[e],P=i[e];if(c=g(I*I+C*C),l=g(I*I+C*C+P*P),c/t.a<1e-12){if(s=0,l/t.a<1e-12)return n[e]=0,r[e]=O,i[e]=-t.b,0}else s=d(C,I);f=P/l,p=c/l,y=1/g(1-t.e2*(2-t.e2)*p*p),_=p*(1-t.e2)*y,b=f*y,E=0;do{E++,u=c*_+P*b-(m=t.a/g(1-t.e2*b*b))*(1-t.e2*b*b),v=t.e2*m/(m+u),w=(S=f*(y=1/g(1-v*(2-v)*p*p)))*_-(x=p*(1-v)*y)*b,_=x,b=S}while(w*w>1e-24&&E<30);o=h(S/a(x)),n[e]=s,r[e]=o,i[e]=u}function Rt(t,e,n){var r=n.length>2,i=[n[0]],o=[n[1]],a=[r?n[2]:0];t.is_latlong&&(i[0]*=P,o[0]*=P),z.last_errno=0,Dt(t,e,i,o,a),(z.last_errno||i[0]==E)&&Z(null,{point:n}),e.is_latlong&&(i[0]*=C,o[0]*=C),n[0]=i[0],n[1]=o[0],r&&(n[2]=a[0])}function Dt(t,e,n,r,i){var o,a,s=n.length,u={},c={};if("enu"!=t.axis&&Ft(t.axis,!1,n,r,i),1!=t.vto_meter&&i)for(o=0;o<s;o++)i[o]*=t.vto_meter;if(t.is_geocent){if(i||$(G),1!=t.to_meter)for(o=0;o<s;o++)n[o]!=E&&(n[o]*=t.to_meter,r[o]*=t.to_meter);kt(t.a_orig,t.es_orig,n,r,i)}else if(!t.is_latlong)if(t.inv3d||t.inv||Z("source projection not invertible"),t.inv3d)Z("inverse 3d transformations not supported");else for(o=0;o<s;o++)c.x=n[o],c.y=r[o],a=Ut(c,t),n[o]=a.lam,r[o]=a.phi,Y();if(0!==t.from_greenwich)for(o=0;o<s;o++)n[o]!=E&&(n[o]+=t.from_greenwich);if(t.has_geoid_vgrids&&i&&Z("vgrid transformation not supported"),function(t,e,n,r,i){var o,a,s,u,c=n.length;if(t.datum_type==D||e.datum_type==D)return;if(function(t,e){if(t.datum_type!=e.datum_type)return!1;if(t.a_orig!=e.a_orig||Math.abs(t.es_orig-e.es_orig)>5e-11)return!1;if(t.datum_type==F)return t.datum_params[0]==e.datum_params[0]&&t.datum_params[1]==e.datum_params[1]&&t.datum_params[2]==e.datum_params[2];if(t.datum_type==k)return t.datum_params[0]==e.datum_params[0]&&t.datum_params[1]==e.datum_params[1]&&t.datum_params[2]==e.datum_params[2]&&t.datum_params[3]==e.datum_params[3]&&t.datum_params[4]==e.datum_params[4]&&t.datum_params[5]==e.datum_params[5]&&t.datum_params[6]==e.datum_params[6];if(t.datum_type==B)return it(t.params,"snadgrids")==it(e.params,"snadgrids");return!0}(t,e))return;o=t.a_orig,a=t.es_orig,s=e.a_orig,u=e.es_orig,i||(i=new Float64Array(c),!0);t.datum_type==B&&(Z("gridshift not implemented"),o=N,a=A);e.datum_type==B&&(s=N,u=A);a==u&&o==s&&t.datum_type!=F&&t.datum_type!=k&&e.datum_type!=F&&e.datum_type!=k||(Bt(o,a,n,r,i),t.datum_type!=F&&t.datum_type!=k||function(t,e,n,r){var i,o,a,s,u,c,l,f,p=e.length,h=t.datum_params,d=h[0],g=h[1],y=h[2];if(t.datum_type==F)for(f=0;f<p;f++)e[f]!=E&&(e[f]+=d,n[f]+=g,r[f]+=y);else if(t.datum_type==k)for(s=h[3],u=h[4],c=h[5],l=h[6],f=0;f<p;f++)e[f]!=E&&(i=l*(e[f]-c*n[f]+u*r[f])+d,o=l*(c*e[f]+n[f]-s*r[f])+g,a=l*(-u*e[f]+s*n[f]+r[f])+y,e[f]=i,n[f]=o,r[f]=a)}(t,n,r,i),e.datum_type!=F&&e.datum_type!=k||function(t,e,n,r){var i,o,a,s,u,c,l,f,p=e.length,h=t.datum_params,d=h[0],g=h[1],y=h[2];if(t.datum_type==F)for(f=0;f<p;f++)e[f]!=E&&(e[f]-=d,n[f]-=g,r[f]-=y);else if(t.datum_type==k)for(s=h[3],u=h[4],c=h[5],l=h[6],f=0;f<p;f++)e[f]!=E&&(i=(e[f]-d)/l,o=(n[f]-g)/l,a=(r[f]-y)/l,e[f]=i+c*o-u*a,n[f]=-c*i+o+s*a,r[f]=u*i-s*o+a)}(e,n,r,i),kt(s,u,n,r,i),e.datum_type==B&&pj_apply_gridshift_2(e,1,n,r,i))}(t,e,n,r,i),e.has_geoid_vgrids&&i&&Z("vgrid transformation not supported"),0!==e.from_greenwich)for(o=0;o<s;o++)n[o]!=E&&(n[o]-=e.from_greenwich);if(e.is_geocent){if(i||$(G),Bt(e.a_orig,e.es_orig,n,r,i),1!=e.fr_meter)for(o=0;o<s;o++)n[o]!=E&&(n[o]*=e.fr_meter,r[o]*=e.fr_meter)}else if(e.is_latlong){if(e.is_latlong&&e.is_long_wrap_set)for(o=0;o<s;o++)if(n[o]!=E){for(;n[o]<e.long_wrap_center-I;)n[o]+=L;for(;n[o]>e.long_wrap_center+I;)n[o]-=L}}else if(e.fwd3d)Z("3d transformation not supported");else for(o=0;o<s;o++)u.lam=n[o],u.phi=r[o],a=Gt(u,e),n[o]=a.x,r[o]=a.y,Y();if(1!=e.vto_meter&&i)for(o=0;o<s;o++)i[o]*=e.vfr_meter;return"enu"!=e.axis&&Ft(e.axis,!0,n,r,i),1==s?z.last_errno:0}function Ft(t,e,n,r,i){var o,a,s,u,c,l,f=n.length,p=0;if(e){for(s=0;s<f;s++)if(o=n[s],a=r[s],o!=E)for(i&&(p=i[s]),u=0;u<3;u++)if(2!=u||i)switch(l=0==u?n:1==u?r:i,t[u]){case"e":l[s]=o;break;case"w":l[s]=-o;break;case"n":l[s]=a;break;case"s":l[s]=-a;break;case"u":l[s]=p;break;case"d":l[s]=-p;break;default:$(U)}}else for(s=0;s<f;s++)if(o=n[s],a=r[s],o!=E)for(i&&(p=i[s]),u=0;u<3;u++)switch(c=0==u?o:1==u?a:p,t[u]){case"e":n[s]=c;break;case"w":n[s]=-c;break;case"n":r[s]=c;break;case"s":r[s]=-c;break;case"u":i&&(i[s]=c);break;case"d":i&&(i[s]=-c);break;default:$(U)}}function kt(t,e,n,r,i){var o,a,s=n.length;for((a=Ot(t,0==e?t:t*g(1-e)))||$(G),o=0;o<s;o++)n[o]!=E&&Lt(a,o,n,r,i)}function Bt(t,e,n,r,i){var o,a,s=n.length;for((a=Ot(t,0===e?t:t*g(1-e)))||$(G),o=0;o<s;o++)n[o]!=E&&Mt(a,o,n,r,i)&&(n[o]=r[o]=E)}function jt(t){return a(t)>3.14159265359&&(t+=3.141592653589793,t-=6.283185307179586*s(t/6.283185307179586),t-=3.141592653589793),t}function Gt(t,e){var n={x:0,y:0},r=a(t.phi)-O;return r<=1e-12&&a(t.lam)<=10?(z.last_errno=0,a(r)<=1e-12?t.phi=t.phi<0?-O:O:e.geoc&&(t.phi=h(e.rone_es*l(t.phi))),t.lam-=e.lam0,e.over||(t.lam=jt(t.lam)),e.fwd?(e.fwd(t,n),n.x=e.fr_meter*(e.a*n.x+e.x0),n.y=e.fr_meter*(e.a*n.y+e.y0)):n.x=n.y=E):J(-14),!z.last_errno&&isFinite(n.x)&&isFinite(n.y)||(n.x=n.y=E),n}function Ut(t,e){var n={lam:0,phi:0};return t.x<E&&t.y<E?(z.last_errno=0,e.inv?(t.x=(t.x*e.to_meter-e.x0)*e.ra,t.y=(t.y*e.to_meter-e.y0)*e.ra,e.inv(t,n),n.lam+=e.lam0,e.over||(n.lam=jt(n.lam)),e.geoc&&a(a(n.phi)-O)>1e-12&&(n.phi=h(e.one_es*l(n.phi)))):n.lam=n.phi=E):J(-15),!z.last_errno&&isFinite(n.lam)&&isFinite(n.phi)||(n.lam=n.phi=E),n}function qt(t,e,n,r){var i,o,a;for((t<0||t>=9)&&(t=3),i=1,a=0;a<t;a++)i*=10;return o=3600*i,function(a){var u,c,l,f,p="",h="",d="";return a===E||isNaN(a)?"":(a<0?(a=-a,(l=r||"")||(p="-")):l=n||"",c=(a=s(a*o+.5))/i%60,u=(a=s(a/(60*i)))%60,f=s(a/60)+"d",d=c.toFixed(t),d=(c=parseFloat(d))?(e?d:String(c))+'"':"",(c||u)&&2==(h=String(u)+"'").length&&e&&(h="0"+h),p+f+h+d+l)}}function zt(t,e,n){var r,i,o,a,s,u;return"string"!=typeof t?Gn:("string"!=typeof e?(i="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",o=t,r=e):(i=t,o=e,r=n),u=Vt(a=wt(i),s=wt(o)),r?u(r):{forward:u,inverse:Vt(s,a)})}function Vt(t,e){return function(n){var r=Array.isArray(n);return n=r?n.concat():[n.x,n.y],Rt(t,e,n),r||(n={x:n[0],y:n[1]}),n}}zt.WGS84="+proj=longlat +datum=WGS84",zt.toPoint=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};var Yt=[],Xt=[];function Jt(t){return"string"==typeof t}function Ht(t){var e=Wt(t,Yt);return e||Qt("unsupported projection: "+function(t){return $t(t)||"[unknown]"}(t)),e}function Wt(t,e){for(var n=0;n<e.length;n++)if(e[n][0](t))return e[n][1];return null}function $t(t){return it(t.params,"sproj")}function Kt(t){return t.replace(/[-_ \/]+/g,"_").toLowerCase()}function Zt(t){var e;return Array.isArray(t)?e=t:t&&t.length>0&&(e=t.split(",")),e}function Qt(t){throw new Error(t)}function te(t){return{to_meter:t.UNIT[1]}}function ee(t){return["Meter",t.to_meter||1]}function ne(t,e){var n,r,i=t.DATUM,o=i.SPHEROID,a=function(t){var e,n={northamerican1983:"NAD83",newzealand1949:"nzgd49"},r=re(t.NAME);if(r in n)return n[r];for(var i=0;i<pt.length&&(re((e=pt[i])[3])!=r&&re(e[0])!=r);i++);return e?e[0]:null}(i),s=function(t){var e,n={international1924:"intl"},r=re(t[0]);if(r in n)return n[r];if(/^grs1980/.test(r))return"GRS80";if("sphere"==r)return null;for(var i=0;i<gt.length&&(re((e=gt[i])[3])!=r&&re(e[0])!=r);i++);return e?e[0]:null}(o),u=e&&e.aux_sphere,c=o[1],l=o[2];return ie(t.UNIT,"degree"),u?n="+a="+o[1]:a?n="+datum="+a:s?n="+ellps="+s:(n="+a="+c,l>0&&(n+=" +rf="+l)),!i.TOWGS84||u||a||(n+=" +towgs84="+i.TOWGS84.join(",")),((r=t.PRIMEM?t.PRIMEM[1]:0)>0||r<0)&&(n+=" +pm="+r),n}function re(t){return(t||"").replace(/^(GCS|D)_/i,"").replace(/[ _]/g,"").toLowerCase()}function ie(t,e){t&&t[0].toLowerCase()!=e&&Qt("unexpected geographic units: "+geogcs.UNIT[0])}function oe(t){return function(t){var e=Wt(t,Xt);return e||Qt("unsupported WKT definition: "+(t.NAME||"[unknown]")),e}(t)(t)}function ae(t){return function(){return"+proj="+t}}function se(t){return function(e){var n,r;return[t.PROJECTION(e),t.PARAMETER(e),t.GEOGCS?t.GEOGCS(e):ne(e.GEOGCS),(n=te(e),r="",1!=n.to_meter?r="+to_meter="+n.to_meter:$e||(r="+units=m"),r),"+no_defs"].filter(function(t){return!!t}).join(" ")}}function ue(t){return{NAME:fe(t),DATUM:ce(t),PRIMEM:["Greenwich",0],UNIT:["degree",.017453292519943295]}}function ce(t){var e={NAME:he(t),SPHEROID:le(t)},n=it(t.params,"stowgs84");return/[1-9]/.test(n)&&(e.TOWGS84=n),e}function le(t){var e;return e=it(t.params,"trf")?it(t.params,"drf"):t.es?1/(1-Math.sqrt(1-t.es)):0,[pe(t),t.a,e]}function fe(t){var e;return ct(t)&&(e=ve(t)),e||(e=de(t),e=/^[a-z]+$/.test(e)?e[0].toUpperCase()+e.substr(1):e.toUpperCase()),e||"UNK"}function pe(t){var e=yt(function(t){var e,n=de(t),r=n?dt(n):null;e=r?r.ellipse_id:it(t.params,"sellps");return e||""}(t));return e?e.name:"Unknown ellipsoid"}function he(t){var e=dt(de(t));return e&&e.name||"Unknown datum"}function de(t){return it(t.params,"sdatum")}function ge(t){return Ht(t)(t)}function ye(t,e){return me({PROJECTION:t,PARAMETER:Ue(e)})}function me(t){return function(e){var n={GEOGCS:t.GEOGCS&&t.GEOGCS(e)||ue(e),PROJECTION:Jt(t.PROJECTION)?t.PROJECTION:t.PROJECTION(e),PARAMETER:t.PARAMETER(e),UNIT:ee(e)};return n.NAME=t.NAME&&t.NAME(e,n)||function(t,e){return ve(t)||e.GEOGCS.NAME+" / "+e.PROJECTION}(e,n),{PROJCS:n}}}function ve(t){var e;return it(t.params,"tinit")&&(e=St(it(t.params,"sinit"))),e?e.comment:""}function _e(t,e,n){we(xe(e),function(t,e){return se({PROJECTION:ae(t),PARAMETER:Ge(e)})}(t,n))}function be(t,e,n){Ee(Se(t),ye(e,n))}function xe(t){var e=Zt(t).map(Kt);return function(t){var n=t.PROJECTION[0];return e.indexOf(Kt(n))>-1}}function Se(t){return function(e){var n=$t(e);return n&&n==t}}function we(t,e){"function"!=typeof t&&Qt("Missing WKT parser test"),"function"!=typeof e&&Qt("Missing WKT parse function"),Xt.push([t,e])}function Ee(t,e){"function"!=typeof t&&Qt("Missing WKT maker test"),"function"!=typeof e&&Qt("Missing WKT maker function"),Yt.push([t,e])}we(function(t){return Ie.test(Kt(t.NAME))},function(t){return se({PROJECTION:ae("utm"),PARAMETER:function(t){var e=Ie.exec(Kt(t.NAME)),n="+zone="+e[1];"S"==e[2]&&(n+=" +south");return n}})(t)}),we(function(t){return Ce.test(Kt(t.NAME))},function(t){return se({PROJECTION:ae("ups"),PARAMETER:function(t){return"south"==Ce.exec(Kt(t.NAME))[1].toLowerCase()?"+south":""}})(t)}),Ee(Se("utm"),function(t){return me({NAME:Pe,PROJECTION:function(){return"Transverse_Mercator"},PARAMETER:Ae})(t)}),Ee(Se("ups"),function(t){return me({NAME:Ne,PROJECTION:function(){return"Polar_Stereographic"},PARAMETER:Te})(t)});var Ie=/UTM_zone_([0-9]{1,2})(N|S)/i,Ce=/UPS_(North|South)/i;function Pe(t,e){return e.GEOGCS.NAME+" / UTM zone "+it(t.params,"szone")+(it(t.params,"tsouth")?"S":"N")}function Ne(t,e){return e.GEOGCS.NAME+" / UPS "+(it(t.params,"tsouth")?"South":"North")}function Ae(t){return[["latitude_of_origin",0],["central_meridian",180*t.lam0/I],["scale_factor",t.k0],["false_easting",t.x0],["false_northing",t.y0]]}function Te(t){return[["latitude_of_origin",-90],["central_meridian",0],["scale_factor",.994],["false_easting",2e6],["false_northing",2e6]]}function Oe(t){return it(t.params,"tlat_ts")&&0!=it(t.params,"dlat_ts")}function Me(t){return 0===t.es&&6378137==t.a}we(xe("Mercator_2SP,Mercator_1SP,Mercator,Mercator_Auxiliary_Sphere"),se({GEOGCS:function(t){var e=function(t){return/(Web_Mercator|Pseudo_Mercator)/i.test(Kt(t.NAME))}(t)?{aux_sphere:!0}:null;return ne(t.GEOGCS,e)},PROJECTION:ae("merc"),PARAMETER:function(t){return Ge(function(t){var e=Be(t,"standard_parallel_1");return e&&0!=e[1]}(t)?"lat_ts,lat_0b":"lat_tsb,lat_ts")(t)}})),Ee(Se("merc"),me({GEOGCS:function(t){if(Me(t))return ue(wt("+proj=longlat +datum=WGS84"));return null},PROJECTION:function(t){return Oe(t)?"Mercator_2SP":"Mercator_1SP"},PARAMETER:function(t){return Ue(Oe(t)?"lat_ts,lat_0b":"lat_tsb")(t)},NAME:function(t){return Me(t)?"WGS 84 / Pseudo-Mercator":null}}));var Le=[["x_0","false_easting","m"],["y_0","false_northing","m"],["k_0","scale_factor","f"],["lat_0","latitude_of_center"],["lon_0","central_meridian"]],Re={lat_0b:["lat_0","latitude_of_origin"],lat_0c:["lat_0",null],lat_0d:["lat_0","standard_parallel_1"],lat_1:["lat_1","standard_parallel_1"],lat_1b:["lat_1","latitude_of_point_1"],lat_1c:["lat_1","latitude_of_origin"],lat_2:["lat_2","standard_parallel_2"],lat_2b:["lat_2","latitude_of_point_2"],lat_ts:["lat_ts","standard_parallel_1"],lat_tsb:["lat_ts","latitude_of_origin"],lonc:["lonc","central_meridian"],lon_1:["lon_1","longitude_of_point_1"],lon_2:["lon_2","longitude_of_point_2"],alpha:["alpha","azimuth"],gamma:["gamma","rectified_grid_angle"],h:["h","height","f"]},De={longitude_of_center:"central_meridian",latitude_of_origin:"latitude_of_center",latitude_of_center:"latitude_of_origin",longitude_of_1st_point:"longitude_of_point_1",longitude_of_2nd_point:"longitude_of_point_2",latitude_of_1st_point:"latitude_of_point_1",latitude_of_2nd_point:"latitude_of_point_2",k:"k_0"};function Fe(t,e,n){for(var r=0;r<n.length;r++)if(n[r][e]===t)return n[r];return null}function ke(t,e,n){var r=null;return!(r=Fe(t=t.toLowerCase(),e,n))&&t in De&&(r=Fe(De[t],e,n)),r}function Be(t,e){for(var n,r=t.PARAMETER||[],i=0;i<r.length;i++)if(e===(n=r[i][0].toLowerCase())||e===De[n])return r[i];return null}function je(t){var e=null;return t&&(e=Zt(t).reduce(function(t,e){var n=Re[e];return n||Qt("missing parameter rule: "+e),t.push(n),t},[])),(e||[]).concat(Le)}function Ge(t){return function(e){var n=[],r=je(t),i=te(e);return(e.PARAMETER||[]).forEach(function(t){var e,o,a=ke(t[0],1,r);a?(e=function(t,e,n){var r=t[0];if("m"==t[2]&&(e*=n.to_meter),!$e||!("x_0,y_0,lat_0,lon_0".indexOf(r)>-1&&0===e||"k_0"==r&&1==e))return"+"+r+"="+e}(a,t[1],i))&&n.push(e):(o="unhandled parameter: "+t[0],console.error("[wkt] "+o))}),n.join(" ")}}function Ue(t){return function(e){var n=[],r=je(t);return Object.keys(e.params).forEach(function(t){var i,o=ke(t,0,r);o&&o[1]&&(i=it(e.params,"s"+t),n.push(function(t,e,n){var r,i=t[2];return r="m"==i?parseFloat(e)/n:"f"==i?parseFloat(e):et(e),[t[1],r]}(o,i,e.to_meter)))}),n}}function qe(t){return!("lat_1"in t.params&&"lat_2"in t.params)}function ze(t){return"omerc"==$t(t)&&("alpha"in t.params||"gamma"in t.params)}function Ve(t){return ze(t)&&("no_uoff"in t.params||"no_off"in t.params)}function Ye(t){return it(t.params,"tlat_ts")}function Xe(t){var e=JSON.stringify(function t(e,n){var r,i=[];n=n||0;(function(t){return Object.keys(t).sort(function(t,e){return Je(t)-Je(e)})})(e).forEach(function(o){var a=e[o];!function(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}(a)?"NAME"==o?i.push(Jt(a)?a:a[0]):"PARAMETER"==o||"AXIS"==o?a.forEach(function(t){i.push([o].concat(t))}):Jt(a)?i.push([o,a]):Array.isArray(a)?i.push([o].concat(a)):((r={})[o]=a,Qt("Incorrectly formatted WKT element: "+JSON.stringify(r))):i.push([o].concat(t(a,n+1)))});0===n&&1==i.length&&(i=i[0]);return i}(t));return e=(e=e.replace(/\["([A-Z0-9]+)",/g,"$1[")).replace(/"(EAST|NORTH|SOUTH|WEST)"/g,"$1")}function Je(t){return"NAME,PROJCS,GEOGCS,GEOCCS,DATUM,SPHEROID,PRIMEM,PROJECTION,PARAMETER,UNIT,AXIS".indexOf(t)+1||999}function He(t){var e={};return We(t).forEach(function(t){!function t(e,n){var r,i=e[0];if("GEOGCS"==i||"GEOCCS"==i||"PROJCS"==i||"DATUM"==i||"VERTCS"==i)for(n[i]={NAME:e[1]},r=2;r<e.length;r++){if(!Array.isArray(e[r]))throw Qt("WKT parse error");t(e[r],n[i])}else"AXIS"==i||"PARAMETER"==i?(i in n==!1&&(n[i]=[]),n[i].push(e.slice(1))):n[i]=e.slice(1);return n}(t,e)}),e}function We(t){var e;t="["+(t=(t=(t=t.replace(/""/g,'\\"')).replace(/([A-Z0-9]+)\[/g,'["$1",')).replace(/, *([a-zA-Z]+) *(?=[,\]])/g,',"$1"'))+"]";try{e=JSON.parse(t)}catch(t){Qt("unparsable WKT format")}return e}we(xe("Lambert_Conformal_Conic,Lambert_Conformal_Conic_1SP,Lambert_Conformal_Conic_2SP"),se({PROJECTION:ae("lcc"),PARAMETER:function(t){return Ge(function(t){return!Be(t,"standard_parallel_2")}(t)?"lat_1c":"lat_0b,lat_1,lat_2")(t)}})),Ee(Se("lcc"),me({PROJECTION:function(t){return qe(t)?"Lambert_Conformal_Conic_1SP":"Lambert_Conformal_Conic_2SP"},PARAMETER:function(t){return Ue(qe(t)?"lat_1c,lat_0c":"lat_0b,lat_1,lat_2")(t)}})),we(xe("Hotine_Oblique_Mercator,Hotine_Oblique_Mercator_Azimuth_Natural_Origin"),se({PROJECTION:ae("omerc"),PARAMETER:function(t){return Ge("alpha,gamma,lonc")(t)+" +no_uoff"}})),Ee(Ve,ye("Hotine_Oblique_Mercator","alpha,gamma,lonc")),_e("omerc","Oblique_Mercator,Hotine_Oblique_Mercator_Azimuth_Center","alpha,gamma,lonc"),Ee(function(t){return ze(t)&&!Ve(t)},ye("Oblique_Mercator","alpha,gamma,lonc")),_e("omerc","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","lat_1b,lat_2b,lon_1,lon_2"),Ee(function(t){return"omerc"==$t(t)&&"lat_2"in t.params&&"lon_2"in t.params},ye("Hotine_Oblique_Mercator_Two_Point_Natural_Origin","lat_1b,lat_2b,lon_1,lon_2")),we(xe("Stereographic,Polar_Stereographic,Stereographic_North_Pole,Stereographic_South_Pole"),se({PROJECTION:ae("stere"),PARAMETER:function(t){var e=Ge("lat_ts,lat_tsb")(t),n=/lat_ts=([^ ]+)/.exec(e);n&&-1==e.indexOf("lat_0=")&&(e="+lat_0="+(parseFloat(n[1])<0?-90:90)+" "+e);return e}})),Ee(Se("stere"),me({PROJECTION:function(t){return Ye(t)?"Polar_Stereographic":"Stereographic"},PARAMETER:function(t){return Ye(t)?Ue("lat_tsb,lat_0c")(t):Ue("lat_0b")(t)}})),be("vandg","VanDerGrinten"),we(xe("VanDerGrinten,Van_der_Grinten_I"),se({PROJECTION:ae("vandg"),PARAMETER:function(t){var e=Ge("")(t);return e&&(e+=" "),e+"+R_A"}})),[["aitoff","Aitoff","lat1"],["aea","Albers_Conic_Equal_Area,Albers","lat_1,lat_2"],["aeqd","Azimuthal_Equidistant"],["bonne","Bonne","lat_1"],["cass","Cassini_Soldner,Cassini"],["cea","Cylindrical_Equal_Area","lat_ts"],["eck1","Eckert_I"],["eck2","Eckert_II"],["eck3","Eckert_III"],["eck4","Eckert_IV"],["eck5","Eckert_V"],["eck6","Eckert_VI"],["eqdc","Equidistant_Conic","lat_1,lat_2"],["eqc","Plate_Carree,Equirectangular,Equidistant_Cylindrical","lat_ts"],["gall","Gall_Stereographic"],["gnom","Gnomonic"],["laea","Lambert_Azimuthal_Equal_Area"],["loxim","Loximuthal","lat_1"],["mill","Miller_Cylindrical"],["moll","Mollweide"],["nsper","Vertical_Near_Side_Perspective","h"],["nzmg","New_Zealand_Map_Grid","lat_0b"],["ortho","Orthographic","lat_0b"],["poly","Polyconic"],["robin","Robinson"],["sinu","Sinusoidal"],["sterea","Oblique_Stereographic,Double_Stereographic"],["tmerc","Transverse_Mercator,Gauss_Kruger","lat_0b"],["tpeqd","Two_Point_Equidistant","lat_1b,lat_2b,lon_1,lon_2"],["wag1","Wagner_I"],["wag2","Wagner_II"],["wag3","Wagner_III","lat_ts"],["wag4","Wagner_IV"],["wag5","Wagner_V"],["wag6","Wagner_VI"],["wag7","Wagner_VII"],["wink1","Winkel_I","lat_ts"],["wink2","Winkel_II"],["wintri","Winkel_Tripel","lat_1"]].forEach(function(t){var e=t[2]||null;_e(t[0],t[1],e),be(t[0],t[1].split(",")[0],e)});var $e=!0;var Ke,Ze,Qe={};function tn(t,e,n){var r;return e>=1e-7?n*(t/(1-(r=e*t)*r)-.5/e*v((1-r)/(1+r))):t+t}function en(t,e,n){return e/g(1-n*t*t)}function nn(t,e,n){var r,i,o,s,l,p,h,y,m,b,x,S,w,I;t.fwd=function(e,n){var r,a=e.lam;(r=o-(h?i*tn(u(e.phi),t.e,t.one_es):l*u(e.phi)))<0&&H();r=s*g(r),n.x=r*u(a*=i),n.y=p-r*c(a)},t.inv=function(e,n){var g=e.x,y=p-e.y,m=_(g,y);0!=m?(i<0&&(m=-m,g=-g,y=-y),n.phi=m/s,h?(n.phi=(o-n.phi*n.phi)/i,a(r-a(n.phi))>1e-7?(n.phi=function(t,e,n){var r,i,o,s,l,p,h;if(r=f(.5*t),e<1e-7)return r;h=15;do{i=u(r),o=c(r),p=.5*(l=1-(s=e*i)*s)*l/o*(t/n-i/l+.5/e*v((1-s)/(1+s))),r+=p}while(a(p)>1e-10&&--h);return h?r:E}(n.phi,t.e,t.one_es))==E&&W():n.phi=n.phi<0?-O:O):a(n.phi=(o-n.phi*n.phi)/l)<=1?n.phi=f(n.phi):n.phi=n.phi<0?-O:O,n.lam=d(g,y)/i):(n.lam=0,n.phi=i>0?O:-O)},a(e+n)<q&&K(-21),i=m=u(e),y=c(e),b=a(e-n)>=q,(h=t.es>0)?(rn(t.es),I=en(m,y,t.es),w=tn(m,t.e,t.one_es),b&&(S=en(m=u(n),y=c(n),t.es),x=tn(m,t.e,t.one_es),i=(I*I-S*S)/(x-w)),r=1-.5*t.one_es*v((1-t.e)/(1+t.e))/t.e,p=(s=1/i)*g((o=I*I+i*w)-i*tn(u(t.phi0),t.e,t.one_es))):(b&&(i=.5*(i+u(n))),p=(s=1/i)*g((o=y*y+(l=i+i)*m)-l*u(t.phi0)))}function rn(t){var e,n=.01068115234375,r=[];return r[0]=1-t*(.25+t*(.046875+t*(.01953125+t*n))),r[1]=t*(.75-t*(.046875+t*(.01953125+t*n))),r[2]=(e=t*t)*(.46875-t*(.013020833333333334+.007120768229166667*t)),r[3]=(e*=t)*(.3645833333333333-.005696614583333333*t),r[4]=e*t*.3076171875,r}function on(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function an(t,e,n){var r,i,o,s=1/(1-e);o=t;for(var l=10;l>0;--l)if(i=1-e*(r=u(o))*r,o-=i=(on(o,r,c(o),n)-t)*(i*g(i))*s,a(i)<1e-11)return o;return J(z),o}function sn(t){var e=a(t);return e>=1?(e>1.00000000000001&&J(-19),t<0?-O:O):f(t)}function un(t){var e=a(t);return e>=1?(e>1.00000000000001&&J(-19),t<0?I:0):p(t)}function cn(t){return t<=0?0:g(t)}function ln(t,e){return a(t)<1e-50&&a(e)<1e-50?0:d(t,e)}function fn(t){var e=t.opaque||{mode:0};t.inv=function(t,n){var r,i,o,s,l,f,h,d,g,m,v,_,b,x,S,w,E,C=0;if(a(t.x)<1e-12&&a(t.y)<1e-12)return n.phi=0,void(n.lam=0);n.phi=t.y,n.lam=t.x;do{r=0;do{for(_=u(.5*n.lam),S=c(.5*n.lam),b=u(n.phi),x=c(n.phi),o=1-(i=x*S)*i,i=p(i)/y(o,1.5),s=2*i*o*x*_,l=i*o*b,f=2*(_*S*b*x/o-i*b*_),h=x*x*_*_/o+i*x*S*b*b,d=b*b*S/o+i*_*_*x,g=.5*(b*x*_/o-i*b*x*x*_*S),e.mode&&(s=.5*(s+n.lam*e.cosphi1),l=.5*(l+n.phi),f*=.5,h=.5*(h+e.cosphi1),d=.5*(d+1),g*=.5),s-=t.x,l-=t.y,v=(l*f-s*d)/(m=f*g-d*h),m=(s*g-l*h)/m;v>I;)v-=I;for(;v<-I;)v+=I;n.phi-=m,n.lam-=v}while((a(m)>1e-12||a(v)>1e-12)&&r++<10);n.phi>O&&(n.phi-=2*(n.phi-O)),n.phi<-O&&(n.phi-=2*(n.phi+O)),a(a(n.phi)-O)<1e-12&&!e.mode&&(n.lam=0),(i=p(c(n.phi)*c(o=.5*n.lam)))?(w=2*i*c(n.phi)*u(o)*(E=1/u(i)),E*=i*u(n.phi)):w=E=0,e.mode&&(w=.5*(w+n.lam*e.cosphi1),E=.5*(E+n.phi))}while((a(t.x-w)>1e-12||a(t.y-E)>1e-12)&&C++<20)},t.fwd=function(t,n){var r,i;(i=p(c(t.phi)*c(r=.5*t.lam)))?(n.x=2*i*c(t.phi)*u(r)*(n.y=1/u(i)),n.y*=i*u(t.phi)):n.x=n.y=0;e.mode&&(n.x=.5*(n.x+t.lam*e.cosphi1),n.y=.5*(n.y+t.phi))},t.es=0}function pn(t,e,n){t.es=0,t.fwd=function(t,r){var i,o;r.y=e?O*u(t.phi):t.phi,(i=a(t.lam))>=1e-10?(n&&i>=O?r.x=g(2.4674011002723395-t.phi*t.phi+1e-10)+i-O:(o=.5*(2.4674011002723395/i+i),r.x=i-o+g(o*o-r.y*r.y)),t.lam<0&&(r.x=-r.x)):r.x=0}}function hn(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.01677689594356261*e,n}function dn(t,e){var n=t+t;return t+e[0]*u(n)+e[1]*u(n+n)+e[2]*u(n+n+n)}function gn(t,e){t.es=0,t.fwd=function(t,n){n.y=e.C_y*t.phi,n.x=e.C_x*t.lam*(e.A+cn(1-e.B*t.phi*t.phi))},t.inv=function(t,n){n.phi=t.y/e.C_y,n.lam=t.x/(e.C_x*(e.A+cn(1-e.B*n.phi*n.phi)))}}function yn(t){var e,n,r,i,o,s,f=[],p=[],y=[],m=[];function S(t,e){for(var n,r=2*c(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*u(2*e)}function w(t,e,n){for(var r,i,o=u(e),a=c(e),s=b(n),l=x(n),f=2*a*l,p=-2*o*s,h=t.length-1,d=t[h],g=0,y=0,m=0;--h>=0;)r=y,i=g,d=f*(y=d)-r-p*(g=m)+t[h],m=p*y-i+f*g;return[(f=o*l)*d-(p=a*s)*m,f*m+p*d]}t.es<=0&&K(-34),o=i=(r=t.es/(1+g(1-t.es)))/(2-r),f[0]=i*(2+i*(-2/3+i*(i*(116/45+i*(26/45+i*(-2854/675)))-2))),p[0]=i*(i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))-2),o*=i,f[1]=o*(7/3+i*(i*(-227/45+i*(2704/315+i*(2323/945)))-1.6)),p[1]=o*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),o*=i,f[2]=o*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),p[2]=o*(-26/15+i*(34/21+i*(1.6+i*(-12686/2835)))),o*=i,f[3]=o*(4279/630+i*(-332/35+i*(-399572/14175))),p[3]=o*(1237/630+i*(i*(-24832/14175)-2.4)),o*=i,f[4]=o*(4174/315+i*(-144838/6237)),p[4]=o*(-734/315+i*(109598/31185)),o*=i,f[5]=o*(601676/22275),p[5]=o*(444337/155925),o=i*i,e=t.k0/(1+i)*(1+o*(.25+o*(1/64+o/256))),y[0]=i*(i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))-.5),m[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),y[1]=o*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),m[1]=o*(13/48+i*(i*(557/1440+i*(281/630+i*(-1983433/1935360)))-.6)),o*=i,y[2]=o*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),m[2]=o*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),o*=i,y[3]=o*(-4397/161280+i*(11/504+i*(830251/7257600))),m[3]=o*(49561/161280+i*(-179/168+i*(6601661/7257600))),o*=i,y[4]=o*(-4583/161280+i*(108847/3991680)),m[4]=o*(34729/80640+i*(-3418889/1995840)),o*=i,y[5]=-.03233083094085698*o,m[5]=.6650675310896665*o,s=S(p,t.phi0),n=-e*(s+function(t,e){var n,r=2*c(e),i=t.length-1,o=t[i],a=0;for(;--i>=0;)n=r*o-a+t[i],a=o,o=n;return u(e)*n}(m,2*s)),t.fwd=function(t,r){var i,o,s,f,h,g=t.phi,y=t.lam;g=S(p,g),i=u(g),o=c(g),f=u(y),s=c(y),g=d(i,s*o),y=d(f*o,_(i,o*s)),y=function(t){var e=a(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*v(e)/n}(e*(1+e/(_(1,e)+1))),t<0?-e:e}(l(y)),h=w(m,2*g,2*y),g+=h[0],y+=h[1],a(y)<=2.623395162778?(r.y=e*g+n,r.x=e*y):r.x=r.y=E},t.inv=function(t,r){var i,o,s,l,p,g=t.y,m=t.x;g=(g-n)/e,a(m/=e)<=2.623395162778?(p=w(y,2*g,2*m),g+=p[0],m+=p[1],m=h(b(m)),i=u(g),o=c(g),l=u(m),s=c(m),m=d(l,s*o),g=d(i*s,_(l,s*o)),r.phi=S(f,g),r.lam=m):r.phi=r.lam=E}}function mn(t){var e;t.es?(e=rn(t.es),t.fwd=function(n,r){var i,o;r.y=on(n.phi,i=u(n.phi),o=c(n.phi),e),r.x=n.lam*o/g(1-t.es*i*i)},t.inv=function(n,r){var i=a(r.phi=an(n.y,t.es,e));i<O?(i=u(r.phi),r.lam=n.x*g(1-t.es*i*i)/c(r.phi)):i-q<O?r.lam=0:W()}):vn(t,0,1)}function vn(t,e,n){var r,i,o=8,s=1e-7;r=(i=g((e+1)/n))/(e+1),t.es=0,t.fwd=function(t,l){var f,p,h;if(e){for(f=n*u(t.phi),h=o;h&&(t.phi-=p=(e*t.phi+u(t.phi)-f)/(e+c(t.phi)),!(a(p)<s));--h);h||H()}else t.phi=1!=n?sn(n*u(t.phi)):t.phi;l.x=r*t.lam*(e+c(t.phi)),l.y=i*t.phi},t.inv=function(t,o){t.y/=i,o.phi=e?sn((e*t.y+u(t.y))/n):1!=n?sn(u(t.y)/n):t.y,o.lam=t.x/(r*(e+c(t.y)))}}function _n(t){xn(t,bn(t,O))}function bn(t,e){var n=u(e),r=e+e,i=g(L*n/(r+u(r)));return{C_x:2*i/I,C_y:i/n,C_p:r+u(r)}}function xn(t,e){var n=10,r=1e-7;t.fwd=function(t,i){var o,s,l;for(o=e.C_p*u(t.phi),l=n;l&&(t.phi-=s=(t.phi+u(t.phi)-o)/(1+c(t.phi)),!(a(s)<r));--l);l?t.phi*=.5:t.phi=t.phi<0?-O:O;i.x=e.C_x*t.lam*c(t.phi),i.y=e.C_y*u(t.phi)},t.inv=function(t,n){n.phi=sn(t.y/e.C_y),n.lam=t.x/(e.C_x*c(n.phi)),a(n.lam)-I<q?(n.phi+=n.phi,n.phi=sn((n.phi+u(n.phi))/e.C_p)):n.lam=n.phi=E},t.es=0}function Sn(t,e){var n,r,i,o,c,l=[[0,-1],[1,0]],p=[[-1,0],[0,-1]],h=[[0,1],[-1,0]],d=[[[1,0],[0,1]],l,p,h,h,p,l],m=1e-15;function v(t,e){var n=t.lam,r=t.phi,i=f(2/3);if(a(r)<=i)e.x=n,e.y=3*I/8*u(r);else{var o,c=g(3*(1-a(u(r)))),l=s(2*n/I+2);l>=4&&(l=3),o=-3*T+O*l,e.x=o+(n-o)*c,e.y=b(r)*T*(2-c)}}function _(t,e){var n=t.x,r=t.y,i=T;if(a(r)<=i)e.lam=n,e.phi=f(8*r/(3*I));else if(a(r)<O){var o,u,c=s(2*n/I+2);c>=4&&(c=3),o=-3*T+O*c,u=2-4*a(r)/I,e.lam=o+(n-o)/u,e.phi=b(r)*f(1-y(u,2)/3)}else e.lam=-I,e.phi=b(r)*O}function b(t){return t>0?1:t<0?-1:0}function x(t){switch(t){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case-1:return 4;case-2:return 5;case-3:return 6}return 0}function C(t,e){return function(t,e,n){var r,i,o,a,s,u=0,c=t.length;for(s=0;s<c;s++)if(e==t[s][0]&&n==t[s][1])return!0;for(r=t[0][0],i=t[0][1],s=1;s<c;s++)o=t[s%c][0],a=t[s%c][1],n>S(i,a)&&n<=w(i,a)&&e<=w(r,o)&&i!=a&&(r==o||e<=(n-i)*(o-r)/(a-i)+r)&&u++,r=o,i=a;return u%2!=0}(c,t,e)}function P(t,e,n){if(n)return dn(e,o);var r=tn(u(e),t.e,1-t.es)/i;return a(r)>1&&(r=b(r)),f(r)}function N(t,e,n,r){var i,o,a,s,u=0,c=function(t,e,n,r,i){var o,a={};if(a.x=t,a.y=e,i){if(e>T)a.region="north",a.x=-3*T+n*O,a.y=O,t-=n*O;else{if(!(e<-T))return a.region="equatorial",a.cn=0,a;a.region="south",a.x=-3*T+r*O,a.y=-O,t-=r*O}"north"==a.region?a.cn=e>=-t-T-m&&e<t+5*T-m?(n+1)%4:e>-t-T+m&&e>=t+5*T-m?(n+2)%4:e<=-t-T+m&&e>t+5*T+m?(n+3)%4:n:"south"==a.region&&(a.cn=e<=t+T+m&&e>-t-5*T+m?(r+1)%4:e<t+T-m&&e<=-t-5*T+m?(r+2)%4:e>=t+T-m&&e<-t-5*T-m?(r+3)%4:r)}else{if(e>T)a.region="north",o=O;else{if(!(e<-T))return a.region="equatorial",a.cn=0,a;a.region="south",o=-O}t<-O?(a.cn=0,a.x=-3*T,a.y=o):t>=-O&&t<0?(a.cn=1,a.x=-T,a.y=o):t>=0&&t<O?(a.cn=2,a.x=T,a.y=o):(a.cn=3,a.x=3*T,a.y=o)}return a}(t.x,t.y,e,n,r);if("equatorial"==c.region)return t.x=c.x,void(t.y=c.y);i=[t.x,t.y],o=[c.x,c.y],r?"north"==c.region?(u=e,s=d[x(-1*(c.cn-u))]):(u=n,s=d[x(c.cn-u)]):"north"==c.region?(u=e,s=d[x(c.cn-u)]):(u=n,s=d[x(-1*(c.cn-u))]),a=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(function(t,e){var n,r,i=[0,0];for(n=0;n<2;n++)for(r=0;r<2;r++)i[n]+=t[n][r]*e[r];return i}(s,function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,o)),[-3*T+(r?c.cn:0)*O,O]),t.x=a[0],t.y=a[1]}e?(n=it(t.params,"inorth_square"),r=it(t.params,"isouth_square"),(n<0||n>3)&&K(-47),(r<0||r>3)&&K(-47),c=[[-I-m,T+m],[n*O-I-m,T+m],[n*O-I-m,3*T+m],[(n+1)*O-I+m,3*T+m],[(n+1)*O-I+m,T+m],[I+m,T+m],[I+m,-T-m],[(r+1)*O-I+m,-T-m],[(r+1)*O-I+m,-3*T-m],[r*O-I-m,-3*T-m],[r*O-I-m,-T-m],[-I-m,-T-m]],0!=t.es?(o=hn(t.es),i=tn(1,t.e,t.one_es),t.a=t.a*g(.5*i),t.ra=1/t.a,t.fwd=function(e,i){return e.phi=P(t,e.phi,0),v(e,i),N(i,n,r,0)},t.inv=function(e,i){if(!C(e.x,e.y))return i.lam=E,i.phi=E,void J(-15);N(e,n,r,1),_(e,i),i.phi=P(t,i.phi,1)}):(t.fwd=function(t,e){v(t,e),N(e,n,r,0)},t.inv=function(t,e){if(!C(t.x,t.y))return e.lam=E,e.phi=E,void J(-15);N(t,n,r,1),_(t,e)})):(c=[[-I-m,T],[-3*T,O+m],[-O,T+m],[-T,O+m],[0,T+m],[T,O+m],[O,T+m],[3*T,O+m],[I+m,T],[I+m,-T],[3*T,-O-m],[O,-T-m],[T,-O-m],[0,-T-m],[-T,-O-m],[-O,-T-m],[-3*T,-O-m],[-I-m,-T]],0!=t.es?(o=hn(t.es),i=tn(1,t.e,t.one_es),t.a=t.a*g(.5*i),t.ra=1/t.a,t.fwd=function(e,n){e.phi=P(t,e.phi,0),v(e,n)},t.inv=function(e,n){if(!C(e.x,e.y))return n.lam=E,n.phi=E,void J(-15);_(e,n),n.phi=P(t,n.phi,1)}):(t.fwd=function(t,e){v(t,e)},t.inv=function(t,e){if(!C(t.x,t.y))return e.lam=E,e.phi=E,void J(-15);_(t,e)}))}function wn(t){t.x0=0,t.y0=0,t.is_latlong=!0,t.fwd=function(e,n){n.x=e.lam/t.a,n.y=e.phi/t.a},t.inv=function(e,n){n.lam=e.x*t.a,n.phi=e.y*t.a}}function En(t,e,n){return e*=n,l(.5*(O-t))/y((1-e)/(1+e),.5*n)}function In(t,e){var n,r,i=.5*e,o=O-2*h(t),s=15;do{n=e*u(o),o+=r=O-2*h(t*y((1-n)/(1+n),i))-o}while(a(r)>1e-10&&--s);return s<=0&&J(-18),o}function Cn(t,e){var n,r,i,o=e.length-1;for(r=e[o][0],i=e[o][1];--o>=0;)n=r,r=e[o][0]+t.r*n-t.i*i,i=e[o][1]+t.r*i+t.i*n;return{r:t.r*r-t.i*i,i:t.r*i+t.i*r}}function Pn(t,e,n){var r,i,o,a,s,u=!0,c=e.length-1;for(i=a=e[c][0],r=o=e[c][1];--c>=0;)u?u=!1:(a=i+t.r*(s=a)-t.i*o,o=r+t.r*o+t.i*s),i=e[c][0]+t.r*(s=i)-t.i*r,r=e[c][1]+t.r*r+t.i*s;return n.r=i+t.r*a-t.i*o,n.i=r+t.r*o+t.i*a,{r:t.r*i-t.i*r,i:t.r*r+t.i*i}}function Nn(t,e){var n,r,i,o,s=1e-12;0!=t.es?(n=t.e*u(t.phi0),r=2*h(l(.5*(O+t.phi0))*y((1-n)/(1+n),.5*t.e))-O):r=t.phi0,o=u(r),i=c(r),t.inv=function(n,r){var f,p,g,m,v,b,x,S={},w={},I={},C=0,P=0,N=0,A=0;for(S.r=n.x,S.i=n.y,f=20;f&&((p=Pn(S,e,w)).r-=n.x,p.i-=n.y,g=w.r*w.r+w.i*w.i,I.r=-(p.r*w.r+p.i*w.i)/g,I.i=-(p.i*w.r-p.r*w.i)/g,S.r+=I.r,S.i+=I.i,!(a(I.r)+a(I.i)<=s));--f);if(f){if(C=_(S.r,S.i),m=2*h(.5*C),P=u(m),N=c(m),r.lam=t.lam0,a(C)<=s)return r.lam=0,void(r.phi=t.phi0);for(v=sn(N*o+S.i*P*i/C),A=v,f=20;f&&(b=t.e*u(A),x=2*h(l(.5*(O+v))*y((1+b)/(1-b),.5*t.e))-O-A,A+=x,!(a(x)<=s));--f);}f?(r.phi=A,r.lam=d(S.r*P,C*i*N-S.i*o*P)):r.lam=r.phi=E},t.fwd=function(n,r){var a,s,f,p,d,g,m,v={};a=u(n.lam),s=c(n.lam),f=t.e*u(n.phi),p=2*h(l(.5*(O+n.phi))*y((1-f)/(1+f),.5*t.e))-O,d=u(p),g=c(p),m=2/(1+o*d+i*g*s),v.r=m*g*a,v.i=m*(i*d-o*g*s),v=Cn(v,e),r.x=v.r,r.y=v.i}}function An(t,e,n,r){var i,o,s,l,p,h,y,m,v,b,x,S,w=0,E=1,I=2,C=3,P=!isNaN(n)&&!isNaN(r);e<=0&&K(-30),P&&(v=c(r),b=u(r),S=c(n),x=u(n)),a(a(t.phi0)-O)<q?i=t.phi0<0?E:w:a(t.phi0)<q?i=I:(i=C,o=u(t.phi0),s=c(t.phi0)),h=e/t.a,p=1/(l=1+h),y=(l+1)*(m=1/h),t.fwd=function(t,e){var n,r,a,f,d;switch(a=u(t.phi),r=c(t.phi),n=c(t.lam),i){case C:e.y=o*a+s*r*n;break;case I:e.y=r*n;break;case E:e.y=-a;break;case w:e.y=a}e.y<p&&H();switch(e.y=h/(l-e.y),e.x=e.y*r*u(t.lam),i){case C:e.y*=s*a-o*r*n;break;case I:e.y*=a;break;case w:n=-n;case E:e.y*=r*n}P&&(f=e.y*v+e.x*b,d=1/(f*x*m+S),e.x=(e.x*v-e.y*b)*S*d,e.y=f*d)},t.inv=function(e,n){var r,c,p,m,N,A;P&&(A=1/(h-e.y*x),m=h*e.x*A,N=h*e.y*S*A,e.x=m*v+N*b,e.y=N*v-m*b);r=_(e.x,e.y),(p=1-r*r*y)<0&&W();if(p=(l-g(p))/(h/r+r/h),c=g(1-p*p),a(r)<=q)n.lam=0,n.phi=t.phi0;else{switch(i){case C:n.phi=f(c*o+e.y*p*s/r),e.y=(c-o*u(n.phi))*r,e.x*=p*s;break;case I:n.phi=f(e.y*p/r),e.y=c*r,e.x*=p;break;case w:n.phi=f(c),e.y=-e.y;break;case E:n.phi=-f(c)}n.lam=d(e.x,e.y)}},t.es=0}function Tn(t,e){var n=.79788456,r=.1013211836*(e?2:4);t.es=0,t.fwd=function(t,e){e.x=n*t.lam*(1-r*t.phi*t.phi),e.y=n*t.phi},t.inv=function(t,e){e.phi=t.y/n,e.lam=t.x/(n*(1-r*e.phi*e.phi))}}function On(t,e,n){t.es=0,t.fwd=function(t,r){t.phi=sn(.883883476*u(t.phi)),r.x=e*t.lam*c(t.phi),r.x/=c(t.phi*=.333333333333333),r.y=n*u(t.phi)},t.inv=function(t,r){r.phi=sn(t.y/n),r.lam=t.x*c(r.phi)/e,r.phi*=3,r.lam/=c(r.phi),r.phi=sn(1.13137085*u(r.phi))}}function Mn(t,e){var n=e?1.5:2,r=e?.5:1,i=1.01346,o=1.2158542;t.es=0,t.fwd=function(t,e){e.x=i*t.lam*(n-r*g(1+o*t.phi*t.phi)),e.y=i*t.phi},t.inv=function(t,e){e.phi=t.y/i,e.lam=t.x/(i*(n-r*g(1+o*e.phi*e.phi)))}}function Ln(t,e){var n,r,i,o,s,c=1e-10,l=10,f=1.732050807568877;e?(i=.44329,o=.80404,n=6,r=5.61125,s=3):(i=1.01346,o=.9191,n=4,r=2.147143718212938,s=2),t.es=0,t.fwd=function(t,e){var p,h,d,y;for(p=r*u(t.phi),t.phi*=1.10265779,y=l;y&&(h=g(1+t.phi*t.phi),t.phi-=d=((n-h)*t.phi-v(t.phi+h)-p)/(n-2*h),!(a(d)<c));--y);y||(t.phi=p<0?-f:f);e.x=i*t.lam*(s-g(1+t.phi*t.phi)),e.y=o*t.phi},t.inv=function(t,e){var a;e.phi=t.y/o,a=g(1+e.phi*e.phi),e.lam=t.x/(i*(s-a)),e.phi=sn(((n-a)*e.phi-v(e.phi+a))/r)}}function Rn(t){return function(e){!function(t,e){var n,r,i,o,s,f,p,y,m,v;it(t.params,"tlat_1")&&it(t.params,"tlat_2")?(i=it(t.params,"rlat_1"),o=it(t.params,"rlat_2"),y=.5*(o+i),(a(n=.5*(o-i))<1e-10||a(y)<1e-10)&&K(-42)):K(-41);switch(e){case"TISSOT":s=u(y),r=c(n),p=g(((f=s/r+r/s)-2*u(t.phi0))/s);break;case"MURD1":f=u(n)/(n*l(y))+y,p=f-t.phi0,s=u(y);break;case"MURD2":f=(r=g(c(n)))/l(y),p=f+l(y-t.phi0),s=u(y)*r;break;case"MURD3":f=n/(l(y)*l(n))+y,p=f-t.phi0,s=u(y)*u(n)*l(n)/(n*n);break;case"EULER":s=u(y)*u(n)/n,f=(n*=.5)/(l(n)*l(y))+y,p=f-t.phi0;break;case"PCONIC":s=u(y),v=c(n),m=1/l(y),a(n=t.phi0-y)-1e-10>=O&&K(-43),p=v*(m-l(n));break;case"VITK1":s=(r=l(n))*u(y)/n,f=n/(r*l(y))+y,p=f-t.phi0}t.inv=function(t,n){var r;switch(r=_(t.x,t.y=p-t.y),s<0&&(r=-r,t.x=-t.x,t.y=-t.y),n.lam=d(t.x,t.y)/s,e){case"PCONIC":n.phi=h(m-r/v)+y;break;case"MURD2":n.phi=y-h(r-f);break;default:n.phi=f-r}},t.fwd=function(t,n){var r;switch(e){case"MURD2":r=f+l(y-t.phi);break;case"PCONIC":r=v*(m-l(t.phi-y));break;default:r=f-t.phi}n.x=r*u(t.lam*=s),n.y=p-r*c(t.lam)},t.es=0}(e,t)}}function Dn(t,e){var n,r,i,o,s,p,m,v,b=1e-10,x=1e-8,S=8,w=1e-10,E=0,I=1,C=2,P=3;if(v=a((r=a(t.phi0))-O)<b?t.phi0<0?E:I:r>b?C:P,e=a(e),t.es){switch(v){case I:case E:a(e-O)<b?m=2*t.k0/g(y(1+t.e,1+t.e)*y(1-t.e,1-t.e)):(m=c(e)/En(e,r=u(e),t.e),r*=t.e,m/=g(1-r*r));break;case P:case C:r=u(t.phi0),n=2*h(N(t.phi0,r,t.e))-O,r*=t.e,m=2*t.k0*c(t.phi0)/g(1-r*r),s=u(n),p=c(n)}t.fwd=function(e,n){var r,i,o,a,l,f=0,d=0;r=c(e.lam),i=u(e.lam),l=u(e.phi),(v==C||v==P)&&(f=u(o=2*h(N(e.phi,l,t.e))-O),d=c(o));switch(v){case C:a=m/(p*(1+s*f+p*d*r)),n.y=a*(p*f-s*d*r),n.x=a*d;break;case P:a=m/(1+d*r),n.y=a*f,n.x=a*d;break;case E:e.phi=-e.phi,r=-r,l=-l;case I:n.x=m*En(e.phi,l,t.e),n.y=-n.x*r}n.x=n.x*i},t.inv=function(e,n){n.phi;var r,i,o,g,b=0,x=0,N=0,A=0;switch(o=_(e.x,e.y),v){case C:case P:r=c(b=2*d(o*p,m)),i=u(b),x=f(0==o?r*s:r*s+e.y*i*p/o),b=l(.5*(O+x)),e.x*=i,e.y=o*p*r-e.y*s*i,A=O,N=.5*t.e;break;case I:e.y=-e.y;case E:x=O-2*h(b=-o/m),A=-O,N=-.5*t.e}for(g=0;g<S;g++,x=n.phi)if(i=t.e*u(x),n.phi=2*h(b*y((1+i)/(1-i),N))-A,a(x-n.phi)<w)return v==E&&(n.phi=-n.phi),void(n.lam=0==e.x&&0==e.y?0:d(e.x,e.y));W()}}else{switch(v){case C:i=u(t.phi0),o=c(t.phi0);case P:m=2*t.k0;break;case E:case I:m=a(e-O)>=b?c(e)/l(T-.5*e):2*t.k0}t.fwd=function(t,e){var n=t.phi,r=u(n),s=c(n),f=c(t.lam),p=u(t.lam);switch(v){case P:case C:e.y=v==P?1+s*f:1+i*r+o*s*f,e.y<=b&&H(),e.x=(e.y=m/e.y)*s*p,e.y*=v==P?r:o*r-i*s*f;break;case I:f=-f,n=-n;case E:a(n-O)<x&&H(),e.x=p*(e.y=m*l(T+.5*n)),e.y*=f}},t.inv=function(e,n){var r,s,l,p;switch(l=u(r=2*h((s=_(e.x,e.y))/m)),p=c(r),n.lam=0,v){case P:a(s)<=b?n.phi=0:n.phi=f(e.y*l/s),0==p&&0==e.x||(n.lam=d(e.x*l,p*s));break;case C:a(s)<=b?n.phi=t.phi0:n.phi=f(p*i+e.y*l*o/s),0==(r=p-i*u(n.phi))&&0==e.x||(n.lam=d(e.x*l*o,r*s));break;case I:e.y=-e.y;case E:a(s)<=b?n.phi=t.phi0:n.phi=f(v==E?-p:p),n.lam=0==e.x&&0==e.y?0:d(e.x,e.y)}}}function N(t,e,n){return e*=n,l(.5*(O+t))*y((1-e)/(1+e),.5*n)}}function Fn(t,e){return y((1-t)/(1+t),e)}function kn(t,e,n,r){var i=n/e,o=e,a=1/n;t.inv=function(t,e){var n;t.y/=o,n=c(e.phi=r?h(t.y):sn(t.y)),e.phi/=a,e.lam=t.x/(i*c(e.phi)),r?e.lam/=n*n:e.lam*=n},t.fwd=function(t,e){var n;e.x=i*t.lam*c(t.phi),e.y=o,t.phi*=a,n=c(t.phi),r?(e.x*=n*n,e.y*=l(t.phi)):(e.x/=n,e.y*=u(t.phi))},t.es=0}function Bn(t,e){var n=.8773826753,r=1.139753528477/e;t.es=0,t.fwd=function(t,i){var o=sn(e*u(t.phi));i.x=n*t.lam*c(o),i.y=r*o},t.inv=function(t,i){t.y/=r,i.phi=sn(u(t.y)/e),i.lam=t.x/(n*c(t.y))}}function jn(t,e){var n=1e-10;t.fwd=function(t,r){var i,o,s,u;s=a(R*t.phi),u=(u=1-s*s)<0?0:g(u);a(t.lam)<n?(r.x=0,r.y=I*(t.phi<0?-s:s)/(1+u)):(o=.5*a(I/t.lam-t.lam/I),e?(i=s/(1+u),r.x=I*(g(o*o+1-i*i)-o),r.y=I*i):(i=(u*g(1+o*o)-o*u*u)/(1+o*o*s*s),r.x=I*i,r.y=I*g(1-i*(i+2*o)+n)),t.lam<0&&(r.x=-r.x),t.phi<0&&(r.y=-r.y))},t.es=0}Qe.Constants={},Qe.Math={},Qe.Accumulator={},(Ke=Qe.Constants).WGS84={a:6378137,f:1/298.257223563},Ke.version={major:1,minor:48,patch:0},Ke.version_string="1.48",(Ze=Qe.Math).digits=53,Ze.epsilon=Math.pow(.5,Ze.digits-1),Ze.degree=Math.PI/180,Ze.sq=function(t){return t*t},Ze.hypot=function(t,e){var n,r;return t=Math.abs(t),e=Math.abs(e),n=Math.max(t,e),r=Math.min(t,e)/(n||1),n*Math.sqrt(1+r*r)},Ze.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},Ze.log1p=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n},Ze.atanh=function(t){var e=Math.abs(t);return e=Ze.log1p(2*e/(1-e))/2,t<0?-e:e},Ze.copysign=function(t,e){return Math.abs(t)*(e<0||0===e&&1/e<0?-1:1)},Ze.sum=function(t,e){var n=t+e,r=n-e,i=n-r;return{s:n,t:-((r-=t)+(i-=e))}},Ze.polyval=function(t,e,n,r){for(var i=t<0?0:e[n++];--t>=0;)i=i*r+e[n++];return i},Ze.AngRound=function(t){if(0===t)return t;var e=1/16,n=Math.abs(t);return n=n<e?e-(e-n):n,t<0?-n:n},Ze.AngNormalize=function(t){return(t%=360)<=-180?t+360:t<=180?t:t-360},Ze.LatFix=function(t){return Math.abs(t)>90?Number.NaN:t},Ze.AngDiff=function(t,e){var n=Ze.sum(Ze.AngNormalize(-t),Ze.AngNormalize(e)),r=Ze.AngNormalize(n.s),i=n.t;return Ze.sum(180===r&&i>0?-180:r,i)},Ze.sincosd=function(t){var e,n,r,i,o,a;switch(e=t%360,e-=90*(n=Math.floor(e/90+.5)),e*=this.degree,r=Math.sin(e),i=Math.cos(e),3&n){case 0:o=r,a=i;break;case 1:o=i,a=-r;break;case 2:o=-r,a=-i;break;default:o=-i,a=r}return t&&(o+=0,a+=0),{s:o,c:a}},Ze.atan2d=function(t,e){var n,r,i=0;switch(Math.abs(t)>Math.abs(e)&&(n=e,e=t,t=n,i=2),e<0&&(e=-e,++i),r=Math.atan2(t,e)/this.degree,i){case 1:r=(t>=0?180:-180)-r;break;case 2:r=90-r;break;case 3:r=-90+r}return r},function(t,e){t.Accumulator=function(t){this.Set(t)},t.Accumulator.prototype.Set=function(e){e||(e=0),e.constructor===t.Accumulator?(this._s=e._s,this._t=e._t):(this._s=e,this._t=0)},t.Accumulator.prototype.Add=function(t){var n=e.sum(t,this._t),r=e.sum(n.s,this._s);n=n.t,this._s=r.s,this._t=r.t,0===this._s?this._s=n:this._t+=n},t.Accumulator.prototype.Sum=function(e){var n;return e?((n=new t.Accumulator(this)).Add(e),n._s):this._s},t.Accumulator.prototype.Negate=function(){this._s*=-1,this._t*=-1}}(Qe.Accumulator,Qe.Math),Qe.Geodesic={},Qe.GeodesicLine={},Qe.PolygonArea={},function(t,e,n,r,i){var o,a,s,u,c,l,f,p,h,d,g,y=20+r.digits+10,m=r.epsilon,v=200*m,_=Math.sqrt(m),b=m*v,x=1e3*_;t.tiny_=Math.sqrt(Number.MIN_VALUE),t.nC1_=6,t.nC1p_=6,t.nC2_=6,t.nC3_=6,t.nC4_=6,o=t.nC3_*(t.nC3_-1)/2,a=t.nC4_*(t.nC4_+1)/2,t.CAP_C1=1,t.CAP_C1p=2,t.CAP_C2=4,t.CAP_C3=8,t.CAP_C4=16,t.NONE=0,t.ARC=64,t.LATITUDE=128,t.LONGITUDE=256|t.CAP_C3,t.AZIMUTH=512,t.DISTANCE=1024|t.CAP_C1,t.STANDARD=t.LATITUDE|t.LONGITUDE|t.AZIMUTH|t.DISTANCE,t.DISTANCE_IN=2048|t.CAP_C1|t.CAP_C1p,t.REDUCEDLENGTH=4096|t.CAP_C1|t.CAP_C2,t.GEODESICSCALE=8192|t.CAP_C1|t.CAP_C2,t.AREA=16384|t.CAP_C4,t.ALL=32671,t.LONG_UNROLL=32768,t.OUT_MASK=32640|t.LONG_UNROLL,t.SinCosSeries=function(t,e,n,r){var i=r.length,o=i-(t?1:0),a=2*(n-e)*(n+e),s=1&o?r[--i]:0,u=0;for(o=Math.floor(o/2);o--;)s=a*(u=a*s-u+r[--i])-s+r[--i];return t?2*e*n*s:n*(s-u)},s=function(t,e){var n,i,o,a,s,u,c,l,f,p,h,d,g=r.sq(t),y=r.sq(e),m=(g+y-1)/6;return 0===y&&m<=0?n=0:(u=m,(s=(i=g*y/4)*(i+2*(a=m*(o=r.sq(m)))))>=0?(c=i+a,c+=c<0?-Math.sqrt(s):Math.sqrt(s),u+=(l=r.cbrt(c))+(0!==l?o/l:0)):(f=Math.atan2(Math.sqrt(-s),-(i+a)),u+=2*m*Math.cos(f/3)),p=Math.sqrt(r.sq(u)+y),d=((h=u<0?y/(p-u):u+p)-y)/(2*p),n=h/(Math.sqrt(h+r.sq(d))+d)),n},u=[1,4,64,0,256],t.A1m1f=function(t){var e=Math.floor(3);return(r.polyval(e,u,0,r.sq(t))/u[e+1]+t)/(1-t)},c=[-1,6,-16,32,-9,64,-128,2048,9,-16,768,3,-5,512,-7,1280,-7,2048],t.C1f=function(e,n){var i,o,a=r.sq(e),s=e,u=0;for(i=1;i<=t.nC1_;++i)o=Math.floor((t.nC1_-i)/2),n[i]=s*r.polyval(o,c,u,a)/c[u+o+1],u+=o+2,s*=e},l=[205,-432,768,1536,4005,-4736,3840,12288,-225,116,384,-7173,2695,7680,3467,7680,38081,61440],t.C1pf=function(e,n){var i,o,a=r.sq(e),s=e,u=0;for(i=1;i<=t.nC1p_;++i)o=Math.floor((t.nC1p_-i)/2),n[i]=s*r.polyval(o,l,u,a)/l[u+o+1],u+=o+2,s*=e},f=[-11,-28,-192,0,256],t.A2m1f=function(t){var e=Math.floor(3);return(r.polyval(e,f,0,r.sq(t))/f[e+1]-t)/(1+t)},p=[1,2,16,32,35,64,384,2048,15,80,768,7,35,512,63,1280,77,2048],t.C2f=function(e,n){var i,o,a=r.sq(e),s=e,u=0;for(i=1;i<=t.nC2_;++i)o=Math.floor((t.nC2_-i)/2),n[i]=s*r.polyval(o,p,u,a)/p[u+o+1],u+=o+2,s*=e},t.Geodesic=function(t,e){if(this.a=t,this.f=e,this._f1=1-this.f,this._e2=this.f*(2-this.f),this._ep2=this._e2/r.sq(this._f1),this._n=this.f/(2-this.f),this._b=this.a*this._f1,this._c2=(r.sq(this.a)+r.sq(this._b)*(0===this._e2?1:(this._e2>0?r.atanh(Math.sqrt(this._e2)):Math.atan(Math.sqrt(-this._e2)))/Math.sqrt(Math.abs(this._e2))))/2,this._etol2=.1*_/Math.sqrt(Math.max(.001,Math.abs(this.f))*Math.min(1,1-this.f/2)/2),!(isFinite(this.a)&&this.a>0))throw new Error("Equatorial radius is not positive");if(!(isFinite(this._b)&&this._b>0))throw new Error("Polar semi-axis is not positive");this._A3x=new Array(6),this._C3x=new Array(o),this._C4x=new Array(a),this.A3coeff(),this.C3coeff(),this.C4coeff()},h=[-3,128,-2,-3,64,-1,-3,-1,16,3,-1,-2,8,1,-1,2,1,1],t.Geodesic.prototype.A3coeff=function(){var t,e,n=0,i=0;for(t=5;t>=0;--t)e=Math.min(6-t-1,t),this._A3x[i++]=r.polyval(e,h,n,this._n)/h[n+e+1],n+=e+2},d=[3,128,2,5,128,-1,3,3,64,-1,0,1,8,-1,1,4,5,256,1,3,128,-3,-2,3,64,1,-3,2,32,7,512,-10,9,384,5,-9,5,192,7,512,-14,7,512,21,2560],t.Geodesic.prototype.C3coeff=function(){var e,n,i,o=0,a=0;for(e=1;e<t.nC3_;++e)for(n=t.nC3_-1;n>=e;--n)i=Math.min(t.nC3_-n-1,n),this._C3x[a++]=r.polyval(i,d,o,this._n)/d[o+i+1],o+=i+2},g=[97,15015,1088,156,45045,-224,-4784,1573,45045,-10656,14144,-4576,-858,45045,64,624,-4576,6864,-3003,15015,100,208,572,3432,-12012,30030,45045,1,9009,-2944,468,135135,5792,1040,-1287,135135,5952,-11648,9152,-2574,135135,-64,-624,4576,-6864,3003,135135,8,10725,1856,-936,225225,-8448,4992,-1144,225225,-1440,4160,-4576,1716,225225,-136,63063,1024,-208,105105,3584,-3328,1144,315315,-128,135135,-2560,832,405405,128,99099],t.Geodesic.prototype.C4coeff=function(){var e,n,i,o=0,a=0;for(e=0;e<t.nC4_;++e)for(n=t.nC4_-1;n>=e;--n)i=t.nC4_-n-1,this._C4x[a++]=r.polyval(i,g,o,this._n)/g[o+i+1],o+=i+2},t.Geodesic.prototype.A3f=function(t){return r.polyval(5,this._A3x,0,t)},t.Geodesic.prototype.C3f=function(e,n){var i,o,a=1,s=0;for(i=1;i<t.nC3_;++i)o=t.nC3_-i-1,a*=e,n[i]=a*r.polyval(o,this._C3x,s,e),s+=o+1},t.Geodesic.prototype.C4f=function(e,n){var i,o,a=1,s=0;for(i=0;i<t.nC4_;++i)o=t.nC4_-i-1,n[i]=a*r.polyval(o,this._C4x,s,e),s+=o+1,a*=e},t.Geodesic.prototype.Lengths=function(e,n,r,i,o,a,s,u,c,l,f,p,h){var d,g,y,m,v={},_=0,b=0,x=0,S=0;if((f&=t.OUT_MASK)&(t.DISTANCE|t.REDUCEDLENGTH|t.GEODESICSCALE)&&(x=t.A1m1f(e),t.C1f(e,p),f&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(S=t.A2m1f(e),t.C2f(e,h),_=x-S,S=1+S),x=1+x),f&t.DISTANCE)d=t.SinCosSeries(!0,a,s,p)-t.SinCosSeries(!0,r,i,p),v.s12b=x*(n+d),f&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(b=_*n+(x*d-S*(t.SinCosSeries(!0,a,s,h)-t.SinCosSeries(!0,r,i,h))));else if(f&(t.REDUCEDLENGTH|t.GEODESICSCALE)){for(g=1;g<=t.nC2_;++g)h[g]=x*p[g]-S*h[g];b=_*n+(t.SinCosSeries(!0,a,s,h)-t.SinCosSeries(!0,r,i,h))}return f&t.REDUCEDLENGTH&&(v.m0=_,v.m12b=u*(i*a)-o*(r*s)-i*s*b),f&t.GEODESICSCALE&&(y=i*s+r*a,m=this._ep2*(c-l)*(c+l)/(o+u),v.M12=y+(m*a-s*b)*r/o,v.M21=y-(m*r-i*b)*a/u),v},t.Geodesic.prototype.InverseStart=function(e,n,i,o,a,u,c,l,f,p,h){var d,g,y,m,_,b,S,w,E,I,C,P,N,A,T,O,M,L,R,D,F={},k=o*n-a*e,B=a*n+o*e;return F.sig12=-1,d=o*n,d+=a*e,(g=B>=0&&k<.5&&a*c<.5)?(m=r.sq(e+o),m/=m+r.sq(n+a),F.dnm=Math.sqrt(1+this._ep2*m),y=c/(this._f1*F.dnm),_=Math.sin(y),b=Math.cos(y)):(_=l,b=f),F.salp1=a*_,F.calp1=b>=0?k+a*e*r.sq(_)/(1+b):d-a*e*r.sq(_)/(1-b),w=r.hypot(F.salp1,F.calp1),E=e*o+n*a*b,g&&w<this._etol2?(F.salp2=n*_,F.calp2=k-n*o*(b>=0?r.sq(_)/(1+b):1-b),S=r.hypot(F.salp2,F.calp2),F.salp2/=S,F.calp2/=S,F.sig12=Math.atan2(w,E)):Math.abs(this._n)>.1||E>=0||w>=6*Math.abs(this._n)*Math.PI*r.sq(n)||(D=Math.atan2(-l,-f),this.f>=0?(A=(N=r.sq(e)*this._ep2)/(2*(1+Math.sqrt(1+N))+N),I=D/(P=this.f*n*this.A3f(A)*Math.PI),C=d/(P*n)):(T=a*n-o*e,O=Math.atan2(d,T),C=c/(P=((I=(M=this.Lengths(this._n,Math.PI+O,e,-n,i,o,a,u,n,a,t.REDUCEDLENGTH,p,h)).m12b/(n*a*M.m0*Math.PI)-1)<-.01?d/I:-this.f*r.sq(n)*Math.PI)/n)),C>-v&&I>-1-x?this.f>=0?(F.salp1=Math.min(1,-I),F.calp1=-Math.sqrt(1-r.sq(F.salp1))):(F.calp1=Math.max(I>-v?0:-1,I),F.salp1=Math.sqrt(1-r.sq(F.calp1))):(L=s(I,C),R=P*(this.f>=0?-I*L/(1+L):-C*(1+L)/L),_=Math.sin(R),b=-Math.cos(R),F.salp1=a*_,F.calp1=d-a*e*r.sq(_)/(1-b))),F.salp1<=0?(F.salp1=1,F.calp1=0):(S=r.hypot(F.salp1,F.calp1),F.salp1/=S,F.calp1/=S),F},t.Geodesic.prototype.Lambda12=function(e,n,i,o,a,s,u,c,l,f,p,h,d,g){var y,m,v,_,b,x,S,w,E,I,C,P,N,A={};return 0===e&&0===c&&(c=-t.tiny_),m=u*n,v=r.hypot(c,u*e),A.ssig1=e,_=m*e,A.csig1=b=c*n,y=r.hypot(A.ssig1,A.csig1),A.ssig1/=y,A.csig1/=y,A.salp2=a!==n?m/a:u,A.calp2=a!==n||Math.abs(o)!==-e?Math.sqrt(r.sq(c*n)+(n<-e?(a-n)*(n+a):(e-o)*(e+o)))/a:Math.abs(c),A.ssig2=o,x=m*o,A.csig2=S=A.calp2*a,y=r.hypot(A.ssig2,A.csig2),A.ssig2/=y,A.csig2/=y,A.sig12=Math.atan2(Math.max(0,A.csig1*A.ssig2-A.ssig1*A.csig2),A.csig1*A.csig2+A.ssig1*A.ssig2),w=Math.max(0,b*x-_*S),E=b*S+_*x,C=Math.atan2(w*f-E*l,E*f+w*l),P=r.sq(v)*this._ep2,A.eps=P/(2*(1+Math.sqrt(1+P))+P),this.C3f(A.eps,g),I=t.SinCosSeries(!0,A.ssig2,A.csig2,g)-t.SinCosSeries(!0,A.ssig1,A.csig1,g),A.domg12=-this.f*this.A3f(A.eps)*m*(A.sig12+I),A.lam12=C+A.domg12,p&&(0===A.calp2?A.dlam12=-2*this._f1*i/e:(N=this.Lengths(A.eps,A.sig12,A.ssig1,A.csig1,i,A.ssig2,A.csig2,s,n,a,t.REDUCEDLENGTH,h,d),A.dlam12=N.m12b,A.dlam12*=this._f1/(A.calp2*a))),A},t.Geodesic.prototype.Inverse=function(e,n,i,o,a){var s,u;return a||(a=t.STANDARD),a===t.LONG_UNROLL&&(a|=t.STANDARD),a&=t.OUT_MASK,u=(s=this.InverseInt(e,n,i,o,a)).vals,a&t.AZIMUTH&&(u.azi1=r.atan2d(s.salp1,s.calp1),u.azi2=r.atan2d(s.salp2,s.calp2)),u},t.Geodesic.prototype.InverseInt=function(e,n,i,o,a){var s,u,c,l,f,p,h,d,g,v,_,x,S,w,E,I,C,P,N,A,T,O,M,L,R,D,F,k,B,j,G,U,q,z,V,Y,X,J,H,W,$,K,Z,Q,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ft,pt,ht,dt,gt,yt,mt,vt,_t,bt,xt={};if(xt.lat1=e=r.LatFix(e),xt.lat2=i=r.LatFix(i),e=r.AngRound(e),i=r.AngRound(i),u=(s=r.AngDiff(n,o)).t,s=s.s,a&t.LONG_UNROLL?(xt.lon1=n,xt.lon2=n+s+u):(xt.lon1=r.AngNormalize(n),xt.lon2=r.AngNormalize(o)),s=(c=s>=0?1:-1)*r.AngRound(s),u=r.AngRound(180-s-c*u),E=s*r.degree,I=(l=r.sincosd(s>90?u:s)).s,C=(s>90?-1:1)*l.c,(f=Math.abs(e)<Math.abs(i)?-1:1)<0&&(c*=-1,l=e,e=i,i=l),e*=p=e<0?1:-1,i*=p,l=r.sincosd(e),h=this._f1*l.s,d=l.c,h/=l=r.hypot(h,d),d/=l,d=Math.max(t.tiny_,d),l=r.sincosd(i),g=this._f1*l.s,v=l.c,g/=l=r.hypot(g,v),v/=l,v=Math.max(t.tiny_,v),d<-h?v===d&&(g=g<0?h:-h):Math.abs(g)===-h&&(v=d),S=Math.sqrt(1+this._ep2*r.sq(h)),w=Math.sqrt(1+this._ep2*r.sq(g)),M=new Array(t.nC1_+1),L=new Array(t.nC2_+1),R=new Array(t.nC3_),(D=-90===e||0===I)&&(A=I,O=0,k=h,B=(N=C)*d,j=g,G=(T=1)*v,P=Math.atan2(Math.max(0,B*j-k*G),B*G+k*j),_=(F=this.Lengths(this._n,P,k,B,S,j,G,w,d,v,a|t.DISTANCE|t.REDUCEDLENGTH,M,L)).s12b,x=F.m12b,0!=(a&t.GEODESICSCALE)&&(xt.M12=F.M12,xt.M21=F.M21),P<1||x>=0?(P<3*t.tiny_&&(P=x=_=0),x*=this._b,_*=this._b,xt.a12=P/r.degree):D=!1),pt=2,!D&&0===h&&(this.f<=0||u>=180*this.f))N=T=0,A=O=1,_=this.a*E,P=q=E/this._f1,x=this._b*Math.sin(P),a&t.GEODESICSCALE&&(xt.M12=xt.M21=Math.cos(P)),xt.a12=s/this._f1;else if(!D)if(P=(F=this.InverseStart(h,d,S,g,v,w,E,I,C,M,L)).sig12,A=F.salp1,N=F.calp1,P>=0)O=F.salp2,T=F.calp2,z=F.dnm,_=P*this._b*z,x=r.sq(z)*this._b*Math.sin(P/z),a&t.GEODESICSCALE&&(xt.M12=xt.M21=Math.cos(P/z)),xt.a12=P/r.degree,q=E/(this._f1*z);else{for(V=0,Y=t.tiny_,X=1,J=t.tiny_,H=-1,W=!1,$=!1;V<y&&(K=(F=this.Lambda12(h,d,S,g,v,w,A,N,I,C,V<20,M,L,R)).lam12,O=F.salp2,T=F.calp2,P=F.sig12,k=F.ssig1,B=F.csig1,j=F.ssig2,G=F.csig2,U=F.eps,dt=F.domg12,Z=F.dlam12,!$&&Math.abs(K)>=(W?8:1)*m);++V)K>0&&(V<20||N/A>H/J)?(J=A,H=N):K<0&&(V<20||N/A<X/Y)&&(Y=A,X=N),V<20&&Z>0&&(Q=-K/Z,tt=Math.sin(Q),(nt=A*(et=Math.cos(Q))+N*tt)>0&&Math.abs(Q)<Math.PI)?(N=N*et-A*tt,A=nt,A/=l=r.hypot(A,N),N/=l,W=Math.abs(K)<=16*m):(A=(Y+J)/2,N=(X+H)/2,A/=l=r.hypot(A,N),N/=l,W=!1,$=Math.abs(Y-A)+(X-N)<b||Math.abs(A-J)+(N-H)<b);rt=a|(a&(t.REDUCEDLENGTH|t.GEODESICSCALE)?t.DISTANCE:t.NONE),_=(F=this.Lengths(U,P,k,B,S,j,G,w,d,v,rt,M,L)).s12b,x=F.m12b,0!=(a&t.GEODESICSCALE)&&(xt.M12=F.M12,xt.M21=F.M21),x*=this._b,_*=this._b,xt.a12=P/r.degree,a&t.AREA&&(_t=Math.sin(dt),pt=I*(bt=Math.cos(dt))-C*_t,ht=C*bt+I*_t)}return a&t.DISTANCE&&(xt.s12=0+_),a&t.REDUCEDLENGTH&&(xt.m12=0+x),a&t.AREA&&(it=A*d,0!==(ot=r.hypot(N,A*h))&&0!==it?(k=h,B=N*d,j=g,G=T*v,U=(st=r.sq(ot)*this._ep2)/(2*(1+Math.sqrt(1+st))+st),ut=r.sq(this.a)*ot*it*this._e2,k/=l=r.hypot(k,B),B/=l,j/=l=r.hypot(j,G),G/=l,ct=new Array(t.nC4_),this.C4f(U,ct),lt=t.SinCosSeries(!1,k,B,ct),ft=t.SinCosSeries(!1,j,G,ct),xt.S12=ut*(ft-lt)):xt.S12=0,!D&&pt>1&&(pt=Math.sin(q),ht=Math.cos(q)),!D&&ht>-.7071&&g-h<1.75?(dt=1+ht,gt=1+d,yt=1+v,at=2*Math.atan2(pt*(h*yt+g*gt),dt*(h*g+gt*yt))):(vt=T*N+O*A,0===(mt=O*N-T*A)&&vt<0&&(mt=t.tiny_*N,vt=-1),at=Math.atan2(mt,vt)),xt.S12+=this._c2*at,xt.S12*=f*c*p,xt.S12+=0),f<0&&(l=A,A=O,O=l,l=N,N=T,T=l,a&t.GEODESICSCALE&&(l=xt.M12,xt.M12=xt.M21,xt.M21=l)),{vals:xt,salp1:A*=f*c,calp1:N*=f*p,salp2:O*=f*c,calp2:T*=f*p}},t.Geodesic.prototype.GenDirect=function(n,r,i,o,a,s){return s?s===t.LONG_UNROLL&&(s|=t.STANDARD):s=t.STANDARD,o||(s|=t.DISTANCE_IN),new e.GeodesicLine(this,n,r,i,s).GenPosition(o,a,s)},t.Geodesic.prototype.Direct=function(t,e,n,r,i){return this.GenDirect(t,e,n,!1,r,i)},t.Geodesic.prototype.ArcDirect=function(t,e,n,r,i){return this.GenDirect(t,e,n,!0,r,i)},t.Geodesic.prototype.Line=function(t,n,r,i){return new e.GeodesicLine(this,t,n,r,i)},t.Geodesic.prototype.DirectLine=function(t,e,n,r,i){return this.GenDirectLine(t,e,n,!1,r,i)},t.Geodesic.prototype.ArcDirectLine=function(t,e,n,r,i){return this.GenDirectLine(t,e,n,!0,r,i)},t.Geodesic.prototype.GenDirectLine=function(n,r,i,o,a,s){var u;return s||(s=t.STANDARD|t.DISTANCE_IN),o||(s|=t.DISTANCE_IN),(u=new e.GeodesicLine(this,n,r,i,s)).GenSetDistance(o,a),u},t.Geodesic.prototype.InverseLine=function(n,i,o,a,s){var u,c,l;return s||(s=t.STANDARD|t.DISTANCE_IN),u=this.InverseInt(n,i,o,a,t.ARC),l=r.atan2d(u.salp1,u.calp1),s&t.OUT_MASK&t.DISTANCE_IN&&(s|=t.DISTANCE),(c=new e.GeodesicLine(this,n,i,l,s,u.salp1,u.calp1)).SetArc(u.vals.a12),c},t.Geodesic.prototype.Polygon=function(t){return new n.PolygonArea(this,t)},t.WGS84=new t.Geodesic(i.WGS84.a,i.WGS84.f)}(Qe.Geodesic,Qe.GeodesicLine,Qe.PolygonArea,Qe.Math,Qe.Constants),function(t,e,n){e.GeodesicLine=function(e,r,i,o,a,s,u){var c,l,f,p,h,d;a||(a=t.STANDARD|t.DISTANCE_IN),this.a=e.a,this.f=e.f,this._b=e._b,this._c2=e._c2,this._f1=e._f1,this.caps=a|t.LATITUDE|t.AZIMUTH|t.LONG_UNROLL,this.lat1=n.LatFix(r),this.lon1=i,void 0===s||void 0===u?(this.azi1=n.AngNormalize(o),c=n.sincosd(n.AngRound(this.azi1)),this.salp1=c.s,this.calp1=c.c):(this.azi1=o,this.salp1=s,this.calp1=u),c=n.sincosd(n.AngRound(this.lat1)),f=this._f1*c.s,l=c.c,f/=c=n.hypot(f,l),l/=c,l=Math.max(t.tiny_,l),this._dn1=Math.sqrt(1+e._ep2*n.sq(f)),this._salp0=this.salp1*l,this._calp0=n.hypot(this.calp1,this.salp1*f),this._ssig1=f,this._somg1=this._salp0*f,this._csig1=this._comg1=0!==f||0!==this.calp1?l*this.calp1:1,c=n.hypot(this._ssig1,this._csig1),this._ssig1/=c,this._csig1/=c,this._k2=n.sq(this._calp0)*e._ep2,p=this._k2/(2*(1+Math.sqrt(1+this._k2))+this._k2),this.caps&t.CAP_C1&&(this._A1m1=t.A1m1f(p),this._C1a=new Array(t.nC1_+1),t.C1f(p,this._C1a),this._B11=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C1a),h=Math.sin(this._B11),d=Math.cos(this._B11),this._stau1=this._ssig1*d+this._csig1*h,this._ctau1=this._csig1*d-this._ssig1*h),this.caps&t.CAP_C1p&&(this._C1pa=new Array(t.nC1p_+1),t.C1pf(p,this._C1pa)),this.caps&t.CAP_C2&&(this._A2m1=t.A2m1f(p),this._C2a=new Array(t.nC2_+1),t.C2f(p,this._C2a),this._B21=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C2a)),this.caps&t.CAP_C3&&(this._C3a=new Array(t.nC3_),e.C3f(p,this._C3a),this._A3c=-this.f*this._salp0*e.A3f(p),this._B31=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C3a)),this.caps&t.CAP_C4&&(this._C4a=new Array(t.nC4_),e.C4f(p,this._C4a),this._A4=n.sq(this.a)*this._calp0*this._salp0*e._e2,this._B41=t.SinCosSeries(!1,this._ssig1,this._csig1,this._C4a)),this.a13=this.s13=Number.NaN},e.GeodesicLine.prototype.GenPosition=function(e,r,i){var o,a,s,u,c,l,f,p,h,d,g,y,m,v,_,b,x,S,w,E,I,C,P,N,A,T,O={};return i?i===t.LONG_UNROLL&&(i|=t.STANDARD):i=t.STANDARD,i&=this.caps&t.OUT_MASK,O.lat1=this.lat1,O.azi1=this.azi1,O.lon1=i&t.LONG_UNROLL?this.lon1:n.AngNormalize(this.lon1),e?O.a12=r:O.s12=r,e||this.caps&t.DISTANCE_IN&t.OUT_MASK?(u=0,c=0,e?(o=r*n.degree,a=(P=n.sincosd(r)).s,s=P.c):(p=r/(this._b*(1+this._A1m1)),h=Math.sin(p),d=Math.cos(p),o=p-((u=-t.SinCosSeries(!0,this._stau1*d+this._ctau1*h,this._ctau1*d-this._stau1*h,this._C1pa))-this._B11),a=Math.sin(o),s=Math.cos(o),Math.abs(this.f)>.01&&(l=this._ssig1*s+this._csig1*a,f=this._csig1*s-this._ssig1*a,u=t.SinCosSeries(!0,l,f,this._C1a),o-=((1+this._A1m1)*(o+(u-this._B11))-r/this._b)/Math.sqrt(1+this._k2*n.sq(l)),a=Math.sin(o),s=Math.cos(o))),l=this._ssig1*s+this._csig1*a,f=this._csig1*s-this._ssig1*a,w=Math.sqrt(1+this._k2*n.sq(l)),i&(t.DISTANCE|t.REDUCEDLENGTH|t.GEODESICSCALE)&&((e||Math.abs(this.f)>.01)&&(u=t.SinCosSeries(!0,l,f,this._C1a)),c=(1+this._A1m1)*(u-this._B11)),m=this._calp0*l,0===(v=n.hypot(this._salp0,this._calp0*f))&&(v=f=t.tiny_),x=this._salp0,S=this._calp0*f,e&&i&t.DISTANCE&&(O.s12=this._b*((1+this._A1m1)*o+c)),i&t.LONGITUDE&&(_=this._salp0*l,b=f,y=n.copysign(1,this._salp0),g=((i&t.LONG_UNROLL?y*(o-(Math.atan2(l,f)-Math.atan2(this._ssig1,this._csig1))+(Math.atan2(y*_,b)-Math.atan2(y*this._somg1,this._comg1))):Math.atan2(_*this._comg1-b*this._somg1,b*this._comg1+_*this._somg1))+this._A3c*(o+(t.SinCosSeries(!0,l,f,this._C3a)-this._B31)))/n.degree,O.lon2=i&t.LONG_UNROLL?this.lon1+g:n.AngNormalize(n.AngNormalize(this.lon1)+n.AngNormalize(g))),i&t.LATITUDE&&(O.lat2=n.atan2d(m,this._f1*v)),i&t.AZIMUTH&&(O.azi2=n.atan2d(x,S)),i&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(E=t.SinCosSeries(!0,l,f,this._C2a),I=(1+this._A2m1)*(E-this._B21),C=(this._A1m1-this._A2m1)*o+(c-I),i&t.REDUCEDLENGTH&&(O.m12=this._b*(w*(this._csig1*l)-this._dn1*(this._ssig1*f)-this._csig1*f*C)),i&t.GEODESICSCALE&&(P=this._k2*(l-this._ssig1)*(l+this._ssig1)/(this._dn1+w),O.M12=s+(P*l-f*C)*this._ssig1/this._dn1,O.M21=s-(P*this._ssig1-this._csig1*C)*l/w)),i&t.AREA&&(N=t.SinCosSeries(!1,l,f,this._C4a),0===this._calp0||0===this._salp0?(A=x*this.calp1-S*this.salp1,T=S*this.calp1+x*this.salp1):(A=this._calp0*this._salp0*(s<=0?this._csig1*(1-s)+a*this._ssig1:a*(this._csig1*a/(1+s)+this._ssig1)),T=n.sq(this._salp0)+n.sq(this._calp0)*this._csig1*f),O.S12=this._c2*Math.atan2(A,T)+this._A4*(N-this._B41)),e||(O.a12=o/n.degree),O):(O.a12=Number.NaN,O)},e.GeodesicLine.prototype.Position=function(t,e){return this.GenPosition(!1,t,e)},e.GeodesicLine.prototype.ArcPosition=function(t,e){return this.GenPosition(!0,t,e)},e.GeodesicLine.prototype.GenSetDistance=function(t,e){t?this.SetArc(e):this.SetDistance(e)},e.GeodesicLine.prototype.SetDistance=function(e){var n;this.s13=e,n=this.GenPosition(!1,this.s13,t.ARC),this.a13=0+n.a12},e.GeodesicLine.prototype.SetArc=function(e){var n;this.a13=e,n=this.GenPosition(!0,this.a13,t.DISTANCE),this.s13=0+n.s12}}(Qe.Geodesic,Qe.GeodesicLine,Qe.Math),function(t,e,n,r){var i,o;i=function(t,e){var r;return t=n.AngNormalize(t),e=n.AngNormalize(e),r=n.AngDiff(t,e).s,t<=0&&e>0&&r>0?1:e<=0&&t>0&&r<0?-1:0},o=function(t,e){return((e%=720)>=0&&e<360||e<-360?0:1)-((t%=720)>=0&&t<360||t<-360?0:1)},t.PolygonArea=function(t,n){this._geod=t,this.a=this._geod.a,this.f=this._geod.f,this._area0=4*Math.PI*t._c2,this.polyline=n||!1,this._mask=e.LATITUDE|e.LONGITUDE|e.DISTANCE|(this.polyline?e.NONE:e.AREA|e.LONG_UNROLL),this.polyline||(this._areasum=new r.Accumulator(0)),this._perimetersum=new r.Accumulator(0),this.Clear()},t.PolygonArea.prototype.Clear=function(){this.num=0,this._crossings=0,this.polyline||this._areasum.Set(0),this._perimetersum.Set(0),this._lat0=this._lon0=this.lat=this.lon=Number.NaN},t.PolygonArea.prototype.AddPoint=function(t,e){var n;0===this.num?(this._lat0=this.lat=t,this._lon0=this.lon=e):(n=this._geod.Inverse(this.lat,this.lon,t,e,this._mask),this._perimetersum.Add(n.s12),this.polyline||(this._areasum.Add(n.S12),this._crossings+=i(this.lon,e)),this.lat=t,this.lon=e),++this.num},t.PolygonArea.prototype.AddEdge=function(t,e){var n;this.num&&(n=this._geod.Direct(this.lat,this.lon,t,e,this._mask),this._perimetersum.Add(e),this.polyline||(this._areasum.Add(n.S12),this._crossings+=o(this.lon,n.lon2)),this.lat=n.lat2,this.lon=n.lon2),++this.num},t.PolygonArea.prototype.Compute=function(t,e){var n,o,a={number:this.num};return this.num<2?(a.perimeter=0,this.polyline||(a.area=0),a):this.polyline?(a.perimeter=this._perimetersum.Sum(),a):(n=this._geod.Inverse(this.lat,this.lon,this._lat0,this._lon0,this._mask),a.perimeter=this._perimetersum.Sum(n.s12),(o=new r.Accumulator(this._areasum)).Add(n.S12),1&this._crossings+i(this.lon,this._lon0)&&o.Add((o.Sum()<0?1:-1)*this._area0/2),t||o.Negate(),e?o.Sum()>this._area0/2?o.Add(-this._area0):o.Sum()<=-this._area0/2&&o.Add(+this._area0):o.Sum()>=this._area0?o.Add(-this._area0):o<0&&o.Add(-this._area0),a.area=o.Sum(),a)},t.PolygonArea.prototype.TestPoint=function(t,e,n,r){var o,a,s,u,c={number:this.num+1};if(0===this.num)return c.perimeter=0,this.polyline||(c.area=0),c;for(c.perimeter=this._perimetersum.Sum(),a=this.polyline?0:this._areasum.Sum(),s=this._crossings,u=0;u<(this.polyline?1:2);++u)o=this._geod.Inverse(0===u?this.lat:t,0===u?this.lon:e,0!==u?this._lat0:t,0!==u?this._lon0:e,this._mask),c.perimeter+=o.s12,this.polyline||(a+=o.S12,s+=i(0===u?this.lon:e,0!==u?this._lon0:e));return this.polyline?c:(1&s&&(a+=(a<0?1:-1)*this._area0/2),n||(a*=-1),r?a>this._area0/2?a-=this._area0:a<=-this._area0/2&&(a+=this._area0):a>=this._area0?a-=this._area0:a<0&&(a+=this._area0),c.area=a,c)},t.PolygonArea.prototype.TestEdge=function(t,e,n,r){var a,s,u,c={number:this.num?this.num+1:0};return 0===this.num?c:(c.perimeter=this._perimetersum.Sum()+e,this.polyline?c:(s=this._areasum.Sum(),u=this._crossings,s+=(a=this._geod.Direct(this.lat,this.lon,t,e,this._mask)).S12,u+=o(this.lon,a.lon2),a=this._geod.Inverse(a.lat2,a.lon2,this._lat0,this._lon0,this._mask),c.perimeter+=a.s12,s+=a.S12,1&(u+=i(a.lon2,this._lon0))&&(s+=(s<0?1:-1)*this._area0/2),n||(s*=-1),r?s>this._area0/2?s-=this._area0:s<=-this._area0/2&&(s+=this._area0):s>=this._area0?s-=this._area0:s<0&&(s+=this._area0),c.area=s,c))}}(Qe.PolygonArea,Qe.Geodesic,Qe.Math,Qe.Accumulator),ut(function(t){var e=it(t.params,"rlat_1"),n=it(t.params,"rlat_2");nn(t,e,n)},"aea","Albers Equal Area","\n\tConic Sph&Ell\n\tlat_1= lat_2="),ut(function(t){var e=it(t.params,"rlat_1"),n=it(t.params,"bsouth")?-O:O;nn(t,e,n)},"leac","Lambert Equal Area Conic","\n\tConic, Sph&Ell\n\tlat_1= south"),ut(function(t){var e,n,r,i,o,s,f,h=1e-10,y=1e-14,m=0,v=1,b=2,x=3;t.phi0=it(t.params,"rlat_0"),a(a(t.phi0)-O)<h?(o=t.phi0<0?v:m,e=t.phi0<0?-1:1,n=0):a(t.phi0)<h?(o=b,e=0,n=1):(o=x,e=u(t.phi0),n=c(t.phi0));if(t.es)if(f=new Qe.Geodesic.Geodesic(t.a,t.es/(1+g(t.one_es))),s=rn(t.es),it(t.params,"bguam"))r=on(t.phi0,e,n,s),t.inv=function(e,n){var i,o,a;for(i=.5*e.x*e.x,n.phi=t.phi0,a=0;a<3;++a)o=t.e*u(n.phi),n.phi=an(r+e.y-i*l(n.phi)*(o=g(1-o*o)),t.es,s);n.lam=e.x*o/c(n.phi)},t.fwd=function(e,n){var i,o,a;i=c(e.phi),o=u(e.phi),a=1/g(1-t.es*o*o),n.x=e.lam*i*a,n.y=on(e.phi,o,i,s)-r+.5*e.lam*e.lam*i*o*a};else{switch(o){case m:i=on(O,1,0,s);break;case v:i=on(-O,-1,0,s);break;case b:case x:t.inv=w,t.fwd=S,1/g(1-t.es*e*e),e*(t.e/g(t.one_es)),n}t.inv=w,t.fwd=S}else t.inv=function(r,i){var a,s,l,f=r.x,p=r.y;if((s=_(f,p))>I)s-h>I&&W(),s=I;else if(s<h)return i.phi=t.phi0,void(i.lam=0);o==x||o==b?(l=u(s),a=c(s),o==b?(i.phi=sn(p*l/s),f*=l,p=a*s):(i.phi=sn(a*e+p*l*n/s),p=(a-e*u(i.phi))*s,f*=l*n),i.lam=0==p?0:d(f,p)):o==m?(i.phi=O-s,i.lam=d(f,-p)):(i.phi=s-O,i.lam=d(f,p))},t.fwd=function(t,r){var i,s,l;switch(l=u(t.phi),s=c(t.phi),i=c(t.lam),o){case b:case x:r.y=o==b?s*i:e*l+n*s*i,a(a(r.y)-1)<y?r.y<0?H():r.x=r.y=0:(r.y=p(r.y),r.y/=u(r.y),r.x=r.y*s*u(t.lam),r.y*=o==b?l:n*l-e*s*i);break;case m:t.phi=-t.phi,i=-i;case v:a(t.phi-O)<h&&H(),r.x=(r.y=O+t.phi)*u(t.lam),r.y*=i}};function S(e,n){var r,l,p,d,g,y,_,S,w,E,I;switch(r=c(e.lam),l=c(e.phi),p=u(e.phi),o){case m:r=-r;case v:n.x=(d=a(i-on(e.phi,p,l,s)))*u(e.lam),n.y=d*r;break;case b:case x:if(a(e.lam)<h&&a(e.phi-t.phi0)<h){n.x=n.y=0;break}S=t.phi0/P,_=t.lam0/P,E=e.phi/P,w=(e.lam+t.lam0)/P,g=(I=f.Inverse(S,_,E,w,f.AZIMUTH)).azi1*P,y=I.s12,n.x=y*u(g)/t.a,n.y=y*c(g)/t.a}}function w(e,n){var r,a,u,c,l,p,y,v;if((r=_(e.x,e.y))<h)return n.phi=t.phi0,n.lam=0,n;o==x||o==b?(c=e.x*t.a,l=e.y*t.a,p=t.phi0/P,y=t.lam0/P,a=d(c,l)/P,u=g(c*c+l*l),v=f.Direct(p,y,a,u,f.STANDARD),n.phi=v.lat2*P,n.lam=v.lon2*P,n.lam-=t.lam0):(n.phi=an(o==m?i-r:i+r,t.es,s),n.lam=d(e.x,o==m?-e.y:e.y))}},"aeqd","Azimuthal Equidistant","\n\tAzi, Sph&Ell\n\tlat_0 guam"),ut(function(t){var e,n,r,i,o,s,f=1e-10,p=0,h=1,d=2,g=3;t.es=0,t.fwd=function(t,s){var y,m,_,b,x,S,w,E;switch(y=u(t.lam),m=c(t.lam),i){case d:case g:b=u(t.phi),_=c(t.phi),E=_*m,i==g&&(E=e*b+n*E),!o&&E<-f&&H(),w=a(S=1-E)>f?-v(x=.5*(1+E))/S-r/x:.5-r,s.x=w*_*y,s.y=i==g?w*(n*b-e*_*m):w*b;break;case h:case p:t.phi=a(p_halfpi-t.phi),!o&&t.phi-f>O&&H(),(t.phi*=.5)>f?(x=l(t.phi),w=-2*(v(c(t.phi))/x+x*r),s.x=w*y,s.y=w*m,i==p&&(s.y=-s.y)):s.x=s.y=0}},o=it(t.params,"bno_cut"),s=.5*(O-it(t.params,"rlat_b")),a(s)<f?r=-.5:(r=1/l(s),r*=r*v(c(s)));a(a(t.phi0)-O)<f?t.phi0<0?(p_halfpi=-O,i=h):(p_halfpi=O,i=p):a(t.phi0)<f?i=d:(i=g,e=u(t.phi0),n=c(t.phi0))},"airy","Airy","\n\tMisc Sph, no inv.\n\tno_cut lat_b="),ut(function(t){var e=t.opaque={mode:1};it(t.params,"tlat_1")?0===(e.cosphi1=c(it(t.params,"rlat_1")))&&K(-22):e.cosphi1=.6366197723675814;fn(t)},"wintri","Winkel Tripel","\n\tMisc Sph\n\tlat_1"),ut(fn,"aitoff","Aitoff","\n\tMisc Sph"),ut(function(t){t.fwd=function(t,e){var n,r,i,o,a,s,f,p=t.lam;n=l(.5*t.phi),i=1+(r=g(1-n*n))*c(p*=.5),o=u(p)*r/i,s=n/i,e.x=4/3*o*(3+(a=o*o)-3*(f=s*s)),e.y=4/3*s*(3+3*a-f)},t.es=0},"august","August Epicycloidal","\n\tMisc Sph, no inv."),ut(function(t){pn(t,!1,!1)},"apian","Apian Globular I","\n\tMisc Sph, no inv."),ut(function(t){pn(t,!1,!0)},"ortel","Ortelius Oval","\n\tMisc Sph, no inv."),ut(function(t){pn(t,!0,!1)},"bacon","Bacon Globular","\n\tMisc Sph, no inv."),ut(function(t){var e,n,r,i;t.es=0,t.fwd=function(t,o){var a,s,l,p,h,y;return t.lam+=-16.5*P,s=c(t.phi),l=c(t.lam)*s,p=u(t.lam)*s,y=(h=u(t.phi))*e+l*n,t.lam=d(p*r-y*i,l*e-h*n),y=y*r+p*i,t.phi=f(y),t.lam=jt(t.lam),t.lam+t.phi<-1.4&&(a=(t.lam-t.phi+1.6)*(t.lam+t.phi+1.4)/8,t.lam+=a,t.phi-=.8*a*u(t.phi+I/2)),s=c(t.phi),a=g(2/(1+s*c(t.lam/2))),o.x=1.68*a*s*u(t.lam/2),o.y=a*u(t.phi),a=(1-c(t.lam*t.phi))/12,o.y<0&&(o.x*=1+a),o.y>0&&(o.x*=1+a/1.5*o.x*o.x),o},t.lam0=0,t.phi0=-42*P,e=c(t.phi0),n=u(t.phi0),r=1,i=0},"bertin1953","Bertin 1953","\n\tMisc Sph no inv."),ut(function(t){var e=20,n=1e-7,r=g(2),i=2.00276,o=1.11072,s=.49931;t.fwd=function(t,l){var f,p,h,d;if(f=t.phi,a(a(t.phi)-O)<n)l.x=0;else{for(h=u(f)*I,d=e;d&&(f-=p=(f+u(f)-h)/(1+c(f)),!(a(p)<n));--d);f*=.5,l.x=i*t.lam/(1/c(t.phi)+o/c(f))}l.y=s*(t.phi+r*u(f))},t.es=0},"boggs","Boggs Eumorphic","\n\tPCyl., no inv., Sph."),ut(function(t){var e,n,r,i,o,s,f=1e-10;e=it(t.params,"rlat_1"),a(e)<f&&K(-23);t.es?(o=rn(t.es),i=on(e,r=u(e),s=c(e),o),r=s/(g(1-t.es*r*r)*r),t.inv=function(e,n){var s,l;l=_(e.x,e.y=r-e.y),n.phi=an(r+i-l,t.es,o),(s=a(n.phi))<O?(s=u(n.phi),n.lam=l*d(e.x,e.y)*g(1-t.es*s*s)/c(n.phi)):a(s-O)<=f?n.lam=0:W()},t.fwd=function(e,n){var a,s,l;a=r+i-on(e.phi,s=u(e.phi),l=c(e.phi),o),s=l*e.lam/(a*g(1-t.es*s*s)),n.x=a*u(s),n.y=r-a*c(s)}):(n=a(e)+f>=O?0:1/l(e),t.inv=function(t,r){var i=_(t.x,t.y=n-t.y);r.phi=n+e-i,a(r.phi)>O&&W();a(a(r.phi)-O)<=f?r.lam=0:r.lam=i*d(t.x,t.y)/c(r.phi)},t.fwd=function(t,r){var i,o;o=n+e-t.phi,a(o)>f?(r.x=o*u(i=t.lam*c(t.phi)/o),r.y=n-o*c(i)):r.x=r.y=0})},"bonne","Bonne (Werner lat_1=90)","\n\tConic Sph&Ell\n\tlat_1="),ut(function(t){var e,n,r=.16666666666666666,i=.008333333333333333,o=.041666666666666664,a=.3333333333333333,s=.06666666666666667;t.es?(n=rn(t.es),e=on(t.phi0,u(t.phi0),c(t.phi0),n),t.fwd=function(a,s){var f,p,h,d,y,m;s.y=on(a.phi,f=u(a.phi),d=c(a.phi),n),f=1/g(1-t.es*f*f),m=l(a.phi),p=m*m,h=a.lam*d,d*=t.es*d/(1-t.es),y=h*h,s.x=f*h*(1-y*p*(r-(8-p+8*d)*y*i)),s.y-=e-f*m*y*(.5+(5-p+6*d)*y*o)},t.inv=function(r,i){var f,p,h,d,y,m,v;v=an(e+r.y,t.es,n),m=l(v),p=m*m,f=u(v),h=1/(1-t.es*f*f),f=g(h),h*=(1-t.es)*f,d=r.x/f,y=d*d,i.phi=v-f*m/h*y*(.5-(1+3*p)*y*o),i.lam=d*(1+p*y*((1+3*p)*y*s-a))/c(v)}):(t.fwd=function(e,n){n.x=f(c(e.phi)*u(e.lam)),n.y=d(l(e.phi),c(e.lam))-t.phi0},t.inv=function(e,n){var r=e.y+t.phi0;n.phi=f(u(r)*c(e.x)),n.lam=d(l(e.x),c(r))})},"cass","Cassini","\n\tCyl, Sph&Ell"),ut(function(t){var e,n,r=0;it(t.params,"tlat_ts")&&(t.k0=c(r=it(t.params,"rlat_ts")),t.k0<0&&K(-24));t.es?(r=u(r),t.k0/=g(1-t.es*r*r),t.e=g(t.es),(n=hn(t.es))||e_error_0(),e=tn(1,t.e,t.one_es),t.fwd=function(e,n){n.x=t.k0*e.lam,n.y=.5*tn(u(e.phi),t.e,t.one_es)/t.k0},t.inv=function(r,i){i.phi=dn(f(2*r.y*t.k0/e),n),i.lam=r.x/t.k0}):(t.fwd=function(e,n){n.x=t.k0*e.lam,n.y=u(e.phi)/t.k0},t.inv=function(e,n){var r,i=e.x,o=e.y;(r=a(o*=t.k0))-q<=1?(n.phi=r>=1?o<0?-O:O:f(o),n.lam=i/t.k0):W()})},"cea","Equal Area Cylindrical","\n\tCyl, Sph&Ell\n\tlat_ts="),ut(function(t){var e,n,r,i,o,s,l,f=1/3,p=1e-9,h=[];for(s=0;s<3;++s)h[s]={p:{}},h[s].phi=it(t.params,"rlat_"+(s+1)),h[s].lam=it(t.params,"rlon_"+(s+1)),h[s].lam=jt(h[s].lam-t.lam0),h[s].cosphi=c(h[s].phi),h[s].sinphi=u(h[s].phi);for(s=0;s<3;++s)l=2==s?0:s+1,h[s].v=y(h[l].phi-h[s].phi,h[s].cosphi,h[s].sinphi,h[l].cosphi,h[l].sinphi,h[l].lam-h[s].lam),h[s].v.r||K(-25);function y(t,e,n,r,i,o){var s,l,f,h={};return s=c(o),a(t)>1||a(o)>1?h.r=un(cs1*i+e*r*s):(l=u(.5*t),f=u(.5*o),h.r=2*sn(g(l*l+e*r*f*f))),a(h.r)>p?h.Az=d(r*u(o),e*i-n*r*s):h.r=h.Az=0,h}function m(t,e,n){return un(.5*(t*t+e*e-n*n)/(t*e))}r=m(h[0].v.r,h[2].v.r,h[1].v.r),i=m(h[0].v.r,h[1].v.r,h[2].v.r),o=I-r,n=2*(h[0].p.y=h[1].p.y=h[2].v.r*u(r)),h[2].p.y=0,h[0].p.x=-(h[1].p.x=.5*h[0].v.r),e=h[2].p.x=h[0].p.x+h[2].v.r*c(r),t.es=0,t.fwd=function(t,r){var a,s,l,p,d,g,v,_=[];for(a=u(t.phi),s=c(t.phi),p=0;p<3&&(_[p]=y(t.phi-h[p].phi,h[p].cosphi,h[p].sinphi,s,a,t.lam-h[p].lam),_[p].r);++p)_[p].Az=jt(_[p].Az-h[p].v.Az);if(p<3)g=h[p].p.x,v=h[p].p.y;else{for(g=e,v=n,p=0;p<3;++p)d=2==p?0:p+1,l=m(h[p].v.r,_[p].r,_[d].r),_[p].Az<0&&(l=-l),p?1==p?(l=i-l,g-=_[p].r*c(l),v-=_[p].r*u(l)):(l=o-l,g+=_[p].r*c(l),v+=_[p].r*u(l)):(g+=_[p].r*c(l),v-=_[p].r*u(l));g*=f,v*=f}r.x=g,r.y=v}},"chamb","Chamberlin Trimetric","\n\tMisc Sph, no inv.\n\tlat_1= lon_1= lat_2= lon_2= lat_3= lon_3="),ut(function(t){var e=.9772050238058398,n=1.0233267079464885,r=3.0699801238394655,i=.32573500793527993,o=1/3;t.inv=function(t,e){e.phi=3*f(t.y*i),e.lam=t.x*n/(2*c((e.phi+e.phi)*o)-1)},t.fwd=function(t,n){t.phi*=o,n.x=e*t.lam*(2*c(t.phi+t.phi)-1),n.y=r*u(t.phi)},t.es=0},"crast","Craster Parabolic (Putnins P4)","\n\tPCyl., Sph."),ut(function(t){t.fwd=function(t,e){var n=a(t.lam);e.y=t.phi,e.x=t.lam,e.x*=c((.95+n*(n*n*.0016666666666666666-.08333333333333333))*(t.phi*(.9+.03*t.phi*t.phi*t.phi*t.phi)))},t.es=0},"denoy","Denoyer Semi-Elliptical","\n\tPCyl, Sph., no inv."),ut(function(t){var e=.9213177319235613,n=.3183098861837907;t.es=0,t.fwd=function(t,r){r.x=e*t.lam*(1-n*a(t.phi)),r.y=e*t.phi},t.inv=function(t,r){r.phi=t.y/e,r.lam=t.x/(e*(1-n*a(r.phi)))}},"eck1","Eckert I","\n\tPCyl Sph"),ut(function(t){var e=.46065886596178063,n=1.4472025091165353,r=.3333333333333333,i=1.0000001;t.es=0,t.fwd=function(t,r){r.x=e*t.lam*(r.y=g(4-3*u(a(t.phi)))),r.y=n*(2-r.y),t.phi<0&&(r.y=-r.y)},t.inv=function(t,o){o.lam=t.x/(e*(o.phi=2-a(t.y)/n)),o.phi=(4-o.phi*o.phi)*r,a(o.phi)>=1?a(o.phi)>i?W():o.phi=o.phi<0?-O:O:o.phi=f(o.phi),t.y<0&&(o.phi=-o.phi)}},"eck2","Eckert II","\n\tPCyl Sph"),ut(function(t){gn(t,{C_x:.4222382003157712,C_y:.8444764006315424,A:1,B:.4052847345693511})},"eck3","Eckert III","\n\tPCyl Sph"),ut(function(t){gn(t,{C_x:.94745,C_y:.94745,A:0,B:.3039635509270133})},"wag6","Wagner VI","\n\tPCyl Sph"),ut(function(t){gn(t,{C_x:.8660254037844,C_y:1,A:0,B:.3039635509270133})},"kav7","Kavraisky VII","\n\tPCyl Sph"),ut(function(t){gn(t,{C_x:1.8949,C_y:.94745,A:-.5,B:.3039635509270133})},"putp1","Putnins P1","\n\tPCyl Sph"),ut(function(t){var e=.4222382003157712,n=1.3265004281770023,r=3.5707963267948966,i=1e-7,o=6;t.es=0,t.fwd=function(t,s){var l,f,p,h,d;for(l=r*u(t.phi),f=t.phi*t.phi,t.phi*=.895168+f*(.0218849+.00826809*f),d=o;d&&(h=c(t.phi),p=u(t.phi),t.phi-=f=(t.phi+p*(h+2)-l)/(1+h*(h+2)-p*p),!(a(f)<i));--d);d?(s.x=e*t.lam*(1+c(t.phi)),s.y=n*u(t.phi)):(s.x=e*t.lam,s.y=t.phi<0?-n:n)},t.inv=function(t,i){var o;i.phi=sn(t.y/n),i.lam=t.x/(e*(1+(o=c(i.phi)))),i.phi=sn((i.phi+u(i.phi)*(o+2))/r)}},"eck4","Eckert IV","\n\tPCyl Sph"),ut(function(t){var e=.4410127717245515,n=2.267508027238226,r=.882025543449103,i=1.133754013619113;t.es=0,t.fwd=function(t,n){n.x=e*(1+c(t.phi))*t.lam,n.y=r*t.phi},t.inv=function(t,e){e.lam=n*t.x/(1+c(e.phi=i*t.y))}},"eck5","Eckert V","\n\tPCyl Sph"),ut(function(t){var e=c(it(t.params,"rlat_ts"));e<=0&&K(-24);t.es=0,t.fwd=function(n,r){r.x=e*n.lam,r.y=n.phi-t.phi0},t.inv=function(n,r){r.lam=n.x/e,r.phi=n.y+t.phi0}},"eqc","Equidistant Cylindrical (Plate Caree)","\n\tCyl, Sph\n\tlat_ts=[, lat_0=0]"),ut(function(t){var e,n,r,i,o,s,l,f,p,h,g,y,m;e=it(t.params,"rlat_1"),n=it(t.params,"rlat_2"),a(e+n)<q&&K(-21);(l=rn(t.es))||e_error_0();r=h=u(e),p=c(e),g=a(e-n)>=q,(f=t.es>0)?(m=en(h,p,t.es),y=on(e,h,p,l),g&&(h=u(n),p=c(n),r=(m-en(h,p,t.es))/(on(n,h,p,l)-y)),o=(s=y+m/r)-on(t.phi0,u(t.phi0),c(t.phi0),l)):(g&&(r=(p-c(n))/(n-e)),s=e+c(e)/r,o=s-t.phi0);t.fwd=function(t,e){i=s-(f?on(t.phi,u(t.phi),c(t.phi),l):t.phi),e.x=i*u(t.lam*=r),e.y=o-i*c(t.lam)},t.inv=function(e,n){0!=(i=_(e.x,e.y=o-e.y))?(r<0&&(i=-i,e.x=-e.x,e.y=-e.y),n.phi=s-i,f&&(n.phi=an(n.phi,t.es,l)),n.lam=d(e.x,e.y)/r):(n.lam=0,n.phi=r>0?O:-O)}},"eqdc","Equidistant Conic","\n\tConic, Sph&Ell\n\tlat_1= lat_2="),ut(function(t){var e=1.340264,n=-.081106,r=893e-6,i=.003796,o=Math.sqrt(3)/2;t.es=0,t.fwd=function(t,a){var s=Math.asin(o*Math.sin(t.phi)),u=s*s,c=u*u*u;a.x=t.lam*Math.cos(s)/(o*(e+3*n*u+c*(7*r+9*i*u))),a.y=s*(e+n*u+c*(r+i*u))},t.inv=function(t,a){var s,u,c,l,f=t.y;for(l=0;l<12&&(f-=c=(f*(e+n*(s=f*f)+(u=s*s*s)*(r+i*s))-t.y)/(e+3*n*s+u*(7*r+9*i*s)),!(Math.abs(c)<1e-9));++l);u=(s=f*f)*s*s,a.lam=o*t.x*(e+3*n*s+u*(7*r+9*i*s))/Math.cos(f),a.phi=Math.asin(Math.sin(f)/o)}},"eqearth","Equal Earth","\n\tPCyl., Sph."),ut(yn,"etmerc","Extended Transverse Mercator","\n\tCyl, Sph\n\tlat_ts=(0)\nlat_0=(0)"),ut(function(t){var e;t.es||K(-34);t.y0=it(t.params,"bsouth")?1e7:0,t.x0=5e5,it(t.params,"tzone")?(e=it(t.params,"izone"))>0&&e<=60?--e:K(-35):(e=s(30*(jt(t.lam0)+I)/I))<0?e=0:e>=60&&(e=59);t.lam0=(e+.5)*I/30-I,t.k0=.9996,t.phi0=0,yn(t)},"utm","Universal Transverse Mercator (UTM)","\n\tCyl, Sph\n\tzone= south"),ut(function(t){var e=1.7071067811865475,n=.7071067811865476,r=.585786437626905,i=1.4142135623730951;t.fwd=function(t,r){r.x=n*t.lam,r.y=e*l(.5*t.phi)},t.inv=function(t,e){e.lam=i*t.x,e.phi=2*h(t.y*r)},t.es=0},"gall","Gall (Gall Stereographic)","\n\tCyl, Sph"),ut(function(t){t.is_geocent=!0,t.x0=0,t.y0=0,t.fwd=function(t,e){e.x=t.lam,e.y=t.phi},t.inv=function(t,e){e.phi=t.y,e.lam=t.x}},"geocent","Geocentric","\n\t"),ut(function(t){var e=i(it(t.params,"tlat_1")?it(t.params,"rlat_1"):0),n=u(e),r=c(e);function i(t){return sn(l(.5*t))}t.fwd=function(t,e){var o=.5*t.lam,a=i(t.phi),s=u(a),l=c(a),f=c(o);n*s+r*l*f>=0?(e.x=l*u(o),e.y=r*s-n*l*f):H()},t.es=0},"gilbert","Gilbert Two World Perspective","\n\tPCyl., Sph., NoInv.\n\tlat_1="),ut(function(t){t.fwd=function(t,e){var n=t.phi*t.phi;e.y=t.phi*(1+.08333333333333333*n),e.x=t.lam*(1-.162388*n),n=t.lam*t.lam,e.x*=.87-952426e-9*n*n},t.es=0},"gins8","Ginsburg VIII (TsNIIGAiK)","\n\tPCyl, Sph., no inv."),ut(function(t){it(t.params,"tn"),it(t.params,"tm")?vn(t,it(t.params,"dm"),it(t.params,"dn")):K(-99)},"gn_sinu","General Sinusoidal Series","\n\tPCyl, Sph.\n\tm= n="),ut(mn,"sinu","Sinusoidal (Sanson-Flamsteed)","\n\tPCyl, Sph&Ell"),ut(function(t){vn(t,1,2.5707963267948966)},"eck6","Eckert VI","\n\tPCyl, Sph.\n\tm= n="),ut(function(t){vn(t,.5,1.7853981633974483)},"mbtfps","McBryde-Thomas Flat-Polar Sinusoidal","\n\tPCyl, Sph."),ut(function(t){var e,n,r=1e-10,i=0,o=1,s=2,l=3;a(a(t.phi0)-O)<r?n=t.phi0<0?o:i:a(t.phi0)<r?n=s:(n=l,sinph0=u(t.phi0),e=c(t.phi0));t.inv=function(c,p){var y,m,v,b=c.x,x=c.y;if(y=_(b,x),v=u(p.phi=h(y)),m=g(1-v*v),a(y)<=r)p.phi=t.phi0,p.lam=0;else{switch(n){case l:p.phi=m*sinph0+x*v*e/y,a(p.phi)>=1?p.phi=p.phi>0?O:-O:p.phi=f(p.phi),x=(m-sinph0*u(p.phi))*y,b*=v*e;break;case s:p.phi=x*v/y,a(p.phi)>=1?p.phi=p.phi>0?O:-O:p.phi=f(p.phi),x=m*y,b*=v;break;case o:p.phi-=O;break;case i:p.phi=O-p.phi,x=-x}p.lam=d(b,x)}},t.fwd=function(t,a){var f,p,h;switch(h=u(t.phi),p=c(t.phi),f=c(t.lam),n){case s:a.y=p*f;break;case l:a.y=sinph0*h+e*p*f;break;case o:a.y=-h;break;case i:a.y=h}switch(a.y<=r&&H(),a.x=(a.y=1/a.y)*p*u(t.lam),n){case s:a.y*=h;break;case l:a.y*=e*h-sinph0*p*f;break;case i:f=-f;case o:a.y*=p*f}},t.es=0},"gnom","Gnomonic","\n\tAzi, Sph."),ut(_n,"moll","Mollweide","\n\tPCyl Sph"),ut(function(t){xn(t,bn(t,I/3))},"wag4","Wagner IV","\n\tPCyl Sph"),ut(function(t){xn(t,{C_x:.90977,C_y:1.65014,C_p:3.00896})},"wag5","Wagner V","\n\tPCyl Sph"),ut(function(t){var e,n,r,i;t.es=0,mn(t),e=t.fwd,n=t.inv,_n(t),r=t.fwd,i=t.inv,t.fwd=function(t,n){a(t.phi)<.7109307819790236?e(t,n):(r(t,n),n.y-=t.phi>0?.0528:-.0528)},t.inv=function(t,e){a(t.y)<=.7109307819790236?n(t,e):(t.y+=t.y>0?.0528:-.0528,i(t,e))}},"goode","Goode Homolosine","\n\tPCyl, Sph."),ut(function(t){var e,n,r,i=1e-10;t.inv=function(t,n){var r=g(1-.25*e*e*t.x*t.x-.25*t.y*t.y);a(2*r*r-1)<i?(n.lam=E,n.phi=E,pj_errno=-14):(n.lam=ln(e*t.x*r,2*r*r-1)/e,n.phi=sn(r*t.y))},t.fwd=function(t,i){var o,a;a=g(2/(1+(o=c(t.phi))*c(t.lam*=e))),i.x=n*a*o*u(t.lam),i.y=r*a*u(t.phi)},t.es=0,it(t.params,"tW")?(e=a(it(t.params,"dW")))<=0&&K(-27):e=.5;it(t.params,"tM")?(n=a(it(t.params,"dM")))<=0&&K(-27):n=1;r=1/n,n/=e},"hammer","Hammer & Eckert-Greifendorff","\n\tMisc Sph, \n\tW= M="),ut(function(t){var e=20,n=1e-7,r=1.000001,i=2.67595,o=2.43763,s=.3736990601468637,l=.4102345310814193,p=1.75859,h=1.93052,d=.5686373742600607,g=.5179951515653813,y=.85,m=1.1764705882352942;t.inv=function(t,e){var n=t.y*(t.y<0?g:d);a(n)>1?a(n)>r?W():n=n>0?O:-O:n=f(n),e.lam=m*t.x/c(n),n+=n,e.phi=(n+u(n))*(t.y<0?l:s),a(e.phi)>1?a(e.phi)>r?W():e.phi=e.phi>0?O:-O:e.phi=f(e.phi)},t.fwd=function(t,r){var s,l,f;for(l=u(t.phi)*(t.phi<0?o:i),f=e;f&&(t.phi-=s=(t.phi+u(t.phi)-l)/(1+c(t.phi)),!(a(s)<n));--f);r.x=y*t.lam*c(t.phi*=.5),r.y=u(t.phi)*(t.phi<0?h:p)},t.es=0},"hatano","Hatano Asymmetrical Equal Area","\n\tPCyl., Sph."),ut(Sn,"healpix","HEALPix","\n\tSph., Ellps."),ut(function(t){Sn(t,!0)},"rhealpix","rHEALPix","\n\tSph., Ellps.\n\tnorth_square= south_square="),ut(function(t){var e,n,r,i,o,s,p,m,v,_=1e-15,b=.785398163397448,x=1.37008346281555;t.a=6377397.155,t.e=g(t.es=.006674372230614),it(t.params,"tlat_0")||(t.phi0=.863937979737193);it(t.params,"tlon_0")||(t.lam0=.4334234309119251);it(t.params,"tk")||(t.k0=.9999);v=1,it(t.params,"tczech")||(v=-1);i=g(1+t.es*y(c(t.phi0),4)/(1-t.es)),e=f(u(t.phi0)/i),r=y((1+t.e*u(t.phi0))/(1-t.e*u(t.phi0)),i*t.e/2),o=l(e/2+b)/y(l(t.phi0/2+b),i)*r,n=g(1-t.es)/(1-t.es*y(u(t.phi0),2)),s=u(x),p=t.k0*n/l(x),m=.5286277629901559,t.inv=function(e,n){var r,S,w,E,I,C,P,N;P=e.x,e.x=e.y,e.y=P,e.x*=v,e.y*=v,I=g(e.x*e.x+e.y*e.y),E=d(e.y,e.x)/u(x),w=2*(h(y(p/I,1/s)*l(x/2+b))-b),r=f(c(m)*u(w)-u(m)*c(w)*c(E)),S=f(c(w)*u(E)/c(r)),n.lam=t.lam0-S/i,C=r,N=0;do{n.phi=2*(h(y(o,-1/i)*y(l(r/2+b),1/i)*y((1+t.e*u(C))/(1-t.e*u(C)),t.e/2))-b),a(C-n.phi)<_&&(N=1),C=n.phi}while(0===N);n.lam-=t.lam0},t.fwd=function(e,n){var r,a,d,g,_,S,w;r=y((1+t.e*u(e.phi))/(1-t.e*u(e.phi)),i*t.e/2),a=2*(h(o*y(l(e.phi/2+b),i)/r)-b),d=-e.lam*i,g=f(c(m)*u(a)+u(m)*c(a)*c(d)),_=f(c(a)*u(d)/c(g)),S=s*_,w=p*y(l(x/2+b),s)/y(l(g/2+b),s),n.y=w*c(S),n.x=w*u(S),n.y*=v,n.x*=v}},"krovak","Krovak","\n\tPCyl., Ellps."),ut(function(t){var e,n,r,i,o,s,l,p,h,y,m,v=1e-10,b=0,x=1,S=2,w=3;y=a(t.phi0),h=a(y-O)<v?t.phi0<0?x:b:a(y)<v?S:w;if(t.es){switch(t.e=g(t.es),o=tn(1,t.e,t.one_es),.5/(1-t.es),p=hn(t.es),h){case b:case x:s=1;break;case S:s=1/(l=g(.5*o)),r=1,i=.5*o;break;case w:l=g(.5*o),m=u(t.phi0),e=tn(m,t.e,t.one_es)/o,n=g(1-e*e),s=c(t.phi0)/(g(1-t.es*m*m)*l*n),i=(r=l)/s,r*=s}t.inv=function(r,i){var a,g,y,m,E=0;switch(h){case S:case w:if(r.x/=s,r.y*=s,(m=_(r.x,r.y))<v)return i.lam=0,i.phi=t.phi0,i;g=2*f(.5*m/l),a=c(g),g=u(g),r.x*=g,h==w?(E=a*e+r.y*g*n/m,r.y=m*n*a-r.y*e*g):(E=r.y*g/m,r.y=m*a);break;case b:r.y=-r.y;case x:if(!(y=r.x*r.x+r.y*r.y))return i.lam=0,i.phi=t.phi0,i;E=1-y/o,h==x&&(E=-E)}return i.lam=d(r.x,r.y),i.phi=dn(f(E),p),i},t.fwd=function(s,l){var f,p,d,y,m=0,_=0,E=0;f=c(s.lam),p=u(s.lam),d=u(s.phi),y=tn(d,t.e,t.one_es),(h==w||h==S)&&(_=g(1-(m=y/o)*m));switch(h){case w:E=1+e*m+n*_*f;break;case S:E=1+_*f;break;case b:E=O+s.phi,y=o-y;break;case x:E=s.phi-O,y=o+y}a(E)<v&&H();switch(h){case w:case S:h==w?(E=g(2/E),l.y=i*E*(n*m-e*_*f)):(E=g(2/(1+_*f)),l.y=E*m*i),l.x=r*E*_*p;break;case b:case x:y>=0?(E=g(y),l.x=E*p,l.y=f*(h==x?E:-E)):l.x=l.y=0}}}else h==w&&(e=u(t.phi0),n=c(t.phi0)),t.inv=function(r,i){var o,s=0,l=0;o=_(r.x,r.y),(i.phi=.5*o)>1&&W();i.phi=2*f(i.phi),(h==w||h==S)&&(l=u(i.phi),s=c(i.phi));switch(h){case S:i.phi=a(o)<=v?0:f(r.y*l/o),r.x*=l,r.y=s*o;break;case w:i.phi=a(o)<=v?t.phi0:f(s*e+r.y*l*n/o),r.x*=l*n,r.y=(s-u(i.phi)*e)*o;break;case b:r.y=-r.y,i.phi=O-i.phi;break;case x:i.phi-=O}i.lam=0!=r.y||h!=S&&h!=w?d(r.x,r.y):0},t.fwd=function(r,i){var o,s,l;switch(l=u(r.phi),s=c(r.phi),o=c(r.lam),h){case S:case w:i.y=h==S?1+s*o:1+e*l+n*s*o,i.y<=v&&H(),i.y=g(2/i.y),i.x=i.y*s*u(r.lam),i.y*=h==S?l:n*l-e*s*o;break;case b:o=-o;case x:a(r.phi+t.phi0)<v&&H(),i.y=T-.5*r.phi,i.y=2*(h==x?c(i.y):u(i.y)),i.x=i.y*u(r.lam),i.y*=o}}},"laea","Lambert Azimuthal Equal Area","\n\tAzi, Sph&Ell"),ut(wn,"lonlat","Lat/long (Geodetic)","\n\t"),ut(wn,"longlat","Lat/long (Geodetic alias)","\n\t"),ut(wn,"latlon","Lat/long (Geodetic alias)","\n\t"),ut(wn,"latlong","Lat/long (Geodetic alias)","\n\t"),ut(function(t){var e,n,r,i,o,s,f,p,m,b,x,S=1e-10;t.inv=function(e,n){var r,i=e.x,o=e.y;i/=t.k0,o/=t.k0,0!=(r=_(i,o=f-o))?(s<0&&(r=-r,i=-i,o=-o),m?(n.phi=In(y(r/p,1/s),t.e),n.phi==E&&W()):n.phi=2*h(y(p/r,1/s))-O,n.lam=d(i,o)/s):(n.lam=0,n.phi=s>0?O:-O)},t.fwd=function(e,n){var r,i=e.lam;a(a(e.phi)-O)<S?(e.phi*s<=0&&H(),r=0):r=p*(m?y(En(e.phi,u(e.phi),t.e),s):y(l(T+.5*e.phi),-s));i*=s,n.x=t.k0*(r*u(i)),n.y=t.k0*(f-r*c(i))},i=it(t.params,"rlat_1"),it(t.params,"tlat_2")?o=it(t.params,"rlat_2"):(o=i,it(t.params,"tlat_0")||(t.phi0=i));a(i+o)<S&&K(-21);s=n=u(i),e=c(i),r=a(i-o)>=S,(m=0!=t.es)?(t.e=g(t.es),x=en(n,e,t.es),b=En(i,n,t.e),r&&(n=u(o),s=v(x/en(n,c(o),t.es)),s/=v(b/En(o,n,t.e))),p=f=x*y(b,-s)/s,f*=a(a(t.phi0)-O)<S?0:y(En(t.phi0,u(t.phi0),t.e),s)):(r&&(s=v(e/c(o))/v(l(T+.5*o)/l(T+.5*i))),p=e*y(l(T+.5*i),s)/s,f=a(a(t.phi0)-O)<S?0:p*y(l(T+.5*t.phi0),-s))},"lcc","Lambert Conformal Conic","\n\tConic, Sph&Ell\n\tlat_1= and lat_2= or lat_0="),ut(function(t){var e,n,r,i=1e-8;e=it(t.params,"rlat_1"),n=c(e),r=l(T+.5*e),n<i&&K(-22);t.fwd=function(t,o){o.y=t.phi-e,a(o.y)<i?o.x=t.lam*n:(o.x=T+.5*t.phi,a(o.x)<i||a(a(o.x)-O)<i?o.x=0:o.x=t.lam*o.y/v(l(o.x)/r))},t.inv=function(t,o){o.phi=t.y+e,a(t.y)<i?o.lam=t.x/n:(o.lam=T+.5*o.phi,a(o.lam)<i||a(a(o.lam)-O)<i?o.lam=0:o.lam=t.x*v(l(o.lam)/r)/t.y)},t.es=0},"loxim","Loximuthal","\n\tPCyl Sph"),ut(function(t){var e=.9525793444156804,n=.9258200997725514,r=3.401680257083045,i=2/3,o=1/3,s=1.0000001;t.fwd=function(t,a){t.phi=f(e*u(t.phi)),a.x=n*t.lam*(2*c(i*t.phi)-1),a.y=r*u(o*t.phi)},t.inv=function(t,o){o.phi=t.y/r,a(o.phi)>=1?a(o.phi)>s?W():o.phi=o.phi<0?-O:O:o.phi=f(o.phi),o.lam=t.x/(n*(2*c(i*(o.phi*=3))-1)),a(o.phi=u(o.phi)/e)>=1?a(o.phi)>s?W():o.phi=o.phi<0?-O:O:o.phi=f(o.phi)},t.es=0},"mbt_fpp","McBride-Thomas Flat-Polar Parabolic","\n\tCyl., Sph."),ut(function(t){var e=20,n=1e-7,r=1.000001,i=1.7071067811865475,o=.585786437626905,s=1.874758284622695,l=.533402096794177,p=.3124597141037825,h=3.2004125807650623;t.fwd=function(t,r){var o,l,f;for(l=i*u(t.phi),f=e;f&&(t.phi-=o=(u(.5*t.phi)+u(t.phi)-l)/(.5*c(.5*t.phi)+c(t.phi)),!(a(o)<n));--f);r.x=p*t.lam*(1+2*c(t.phi)/c(.5*t.phi)),r.y=s*u(.5*t.phi)},t.inv=function(t,e){var n;e.phi=l*t.y,a(e.phi)>1?a(e.phi)>r?W():e.phi<0?(n=-1,e.phi=-I):(n=1,e.phi=I):e.phi=2*f(n=e.phi),e.lam=h*t.x/(1+2*c(e.phi)/c(.5*e.phi)),e.phi=o*(n+u(e.phi)),a(e.phi)>1?a(e.phi)>r?W():e.phi=e.phi<0?-O:O:e.phi=f(e.phi)},t.es=0},"mbt_fpq","McBryde-Thomas Flat-Polar Quartic","\n\tCyl., Sph."),ut(function(t){var e=10,n=1e-7,r=.45503,i=1.36509,o=1.41546,s=.22248,l=1.44492,f=1/3;t.fwd=function(t,p){var h,d,g,y;for(h=o*u(t.phi),y=e;y&&(g=t.phi/i,t.phi-=d=(r*u(g)+u(t.phi)-h)/(f*c(g)+c(t.phi)),!(a(d)<n));--y);g=t.phi/i,p.x=s*t.lam*(1+3*c(t.phi)/c(g)),p.y=l*u(g)},t.inv=function(t,e){var n;e.phi=i*(n=sn(t.y/l)),e.lam=t.x/(s*(1+3*c(e.phi)/c(n))),e.phi=sn((r*u(n)+u(e.phi))/o)},t.es=0},"mbt_fps","McBryde-Thomas Flat-Pole Sine (No. 2)","\n\tCyl., Sph."),ut(function(t){var e=1e-10,n=0,r=it(t.params,"tlat_ts");r&&(n=it(t.params,"rlat_ts"))>=O&&K(-24);t.es?(r&&(t.k0=en(u(n),c(n),t.es)),t.inv=function(e,n){n.phi=In(m(-e.y/t.k0),t.e),n.phi===E&&W();n.lam=e.x/t.k0},t.fwd=function(n,r){a(a(n.phi)-O)<=e&&H();r.x=t.k0*n.lam,r.y=-t.k0*v(En(n.phi,u(n.phi),t.e))}):(t.inv=function(e,n){n.phi=O-2*h(m(-e.y/t.k0)),n.lam=e.x/t.k0},t.fwd=function(n,r){a(a(n.phi)-O)<=e&&H();r.x=t.k0*n.lam,r.y=t.k0*v(l(T+.5*n.phi))})},"merc","Mercator","\n\tCyl, Sph&Ell\n\tlat_ts="),ut(function(t){t.fwd=function(t,e){e.x=t.lam,e.y=1.25*v(l(T+.4*t.phi))},t.inv=function(t,e){e.lam=t.x,e.phi=2.5*(h(m(.8*t.y))-T)},t.es=0},"mill","Miller Cylindrical","\n\tCyl, Sph"),ut(function(t){t.lam0=20*P,t.phi0=18*P,t.es=0,Nn(t,[[.9245,0],[0,0],[.01943,0]])},"mil_os","Miller Oblated Stereographic","\n\tAzi(mod)"),ut(function(t){t.lam0=-165*P,t.phi0=-10*P,t.es=0,Nn(t,[[.721316,0],[0,0],[-.0088162,-.00617325]])},"lee_os","Lee Oblated Stereographic","\n\tAzi(mod)"),ut(function(t){t.lam0=-96*P,t.phi0=39*P,t.es=0,t.a=6370997,Nn(t,[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]])},"gs48","Mod Stereographic of 48 U.S.","\n\tAzi(mod)"),ut(function(t){var e;t.lam0=-152*P,t.phi0=64*P,0!=t.es?(e=[[.9945303,0],[.0052083,-.0027404],[.0072721,.0048181],[-.0151089,-.1932526],[.0642675,-.1381226],[.3582802,-.2884586]],t.a=6378206.4,t.e=g(t.es=.00676866)):(e=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],t.a=6370997);Nn(t,e)},"alsk","Mod Stereographic of Alaska","\n\tAzi(mod)"),ut(function(t){var e;t.lam0=-120*P,t.phi0=45*P,0!=t.es?(e=[[.9827497,0],[.0210669,.0053804],[-.1031415,-.0571664],[-.0323337,-.0322847],[.0502303,.1211983],[.0251805,.0895678],[-.0012315,-.1416121],[.0072202,-.1317091],[-.0194029,.0759677],[-.0210072,.0834037]],t.a=6378206.4,t.e=g(t.es=.00676866)):(e=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],t.a=6370997);Nn(t,e)},"gs50","Mod Stereographic of 50 U.S.","\n\tAzi(mod)"),ut(function(t){var e=.8707,n=-.131979,r=-.013791,i=.003971,o=-.001529,s=1.007226,u=.015085,c=-.044475,l=.028874,f=-.005916,p=s,h=3*u,d=7*c,g=9*l,y=11*f,m=1e-11,v=.8707*.52*I;t.es=0,t.fwd=function(t,a){var p,h;h=(p=t.phi*t.phi)*p,a.x=t.lam*(e+p*(n+p*(r+h*p*(i+p*o)))),a.y=t.phi*(s+p*(u+h*(c+l*p+f*h)))},t.inv=function(t,_){var b,x,S,w,E=t.x,I=t.y;for(I>v?I=v:I<-v&&(I=-v),b=I;b-=x=(b*(s+(S=b*b)*(u+(w=S*S)*(c+l*S+f*w)))-I)/(p+S*(h+w*(d+g*S+y*w))),!(a(x)<m););_.phi=b,S=b*b,_.lam=E/(e+S*(n+S*(r+S*S*S*(i+S*o))))}},"natearth","Natural Earth","\n\tPCyl., Sph."),ut(function(t){var e=.84719,n=-.13063,r=-.04515,i=.05494,o=-.02326,s=.00331,u=1.01183,c=-.02625,l=.01926,f=-.00396,p=u,h=9*c,d=11*l,g=13*f,y=1e-11,m=.45334622460635143*I;t.es=0,t.fwd=function(t,a){var p,h,d;d=(p=t.phi*t.phi)*(h=p*p),a.x=t.lam*(e+n*p+d*d*(r+i*p+o*h+s*d)),a.y=t.phi*(u+h*h*(c+l*p+f*h))},t.inv=function(t,v){var _,b,x,S,w,E=t.x,I=t.y;for(I>m?I=m:I<-m&&(I=-m),_=I;_-=b=(_*(u+(S=(x=_*_)*x)*S*(c+l*x+f*S))-I)/(p+S*S*(h+d*x+g*S)),!(a(b)<y););v.phi=_,w=(x=_*_)*(S=x*x),v.lam=E/(e+n*x+w*w*(r+i*x+o*S+s*w))}},"natearth2","Natural Earth 2","\n\tPCyl., Sph."),ut(function(t){var e=10,n=1e-7;t.inv=function(t,e){e.lam=2*t.x/(1+c(t.y)),e.phi=sn(.5*(t.y+u(t.y)))},t.fwd=function(t,r){var i,o,s;for(i=2*u(t.phi),o=t.phi*t.phi,t.phi*=1.00371+o*(-.011412*o-.0935382),s=e;s&&(t.phi-=o=(t.phi+u(t.phi)-i)/(1+c(t.phi)),!(a(o)<n));--s);r.x=.5*t.lam*(1+c(t.phi)),r.y=t.phi},t.es=0},"nell","Nell","\n\tPCyl., Sph."),ut(function(t){var e=9,n=1e-7;t.es=0,t.fwd=function(t,e){e.x=.5*t.lam*(1+c(t.phi)),e.y=2*(t.phi-l(.5*t.phi))},t.inv=function(t,r){var i,o,s,u;for(s=.5*t.y,u=e;u>0&&(o=c(.5*r.phi),r.phi-=i=(r.phi-l(r.phi/2)-s)/(1-.5/(o*o)),!(a(i)<n));--u);u?r.lam=2*t.x/(1+c(r.phi)):(r.phi=s<0?-O:O,r.lam=2*t.x)}},"nell_h","Nell-Hammer","\n\tPCyl., Sph."),ut(function(t){An(t,it(t.params,"dh"))},"nsper","Near-sided perspective","\n\tAzi, Sph\n\th="),ut(function(t){var e=it(t.params,"dtilt")*P,n=it(t.params,"dazi")*P,r=it(t.params,"dh");An(t,r,e,n)},"tpers","Tilted perspective","\n\tAzi, Sph\n\ttilt= azi= h="),ut(function(t){var e=1e-10,n=.484813681109536,r=2.0626480624709638,i=[[.7557853228,0],[.249204646,.003371507],[-.001541739,.04105856],[-.10162907,.01727609],[-.26623489,-.36249218],[-.6870983,-1.1651967]],o=[1.5627014243,.5185406398,-.03333098,-.1052906,-.0368594,.007317,.0122,.00394,-.0013],s=[.6399175073,-.1358797613,.063294409,-.02526853,.0117879,-.0055161,.0026906,-.001333,67e-5,-34e-5];t.ra=1/(t.a=6378388),t.lam0=173*P,t.phi0=-41*P,t.x0=251e4,t.y0=6023150,t.inv=function(r,s){var u,c,l,f,p,h,d={r:r.y,i:r.x},g={};for(u=20;u>0&&((p=Pn(d,i,g)).r-=r.y,p.i-=r.x,h=g.r*g.r+g.i*g.i,d.r+=l=-(p.r*g.r+p.i*g.i)/h,d.i+=f=-(p.i*g.r-p.r*g.i)/h,!(a(l)+a(f)<=e));--u);if(u>0){for(s.lam=d.i,c=o.length-1,s.phi=o[c],--c;c>=0;--c)s.phi=o[c]+d.r*s.phi;s.phi=t.phi0+d.r*s.phi*n}else s.lam=s.phi=E},t.fwd=function(e,n){var o=s.length-1,a={r:s[o]},u=(e.phi-t.phi0)*r;for(--o;o>=0;--o)a.r=s[o]+u*a.r;a.r*=u,a.i=e.lam,a=Cn(a,i),n.x=a.i,n.y=a.r}},"nzmg","New Zealand Map Grid","\n\tfixed Earth"),ut(function(t){var e,n,r,i,o,s,f,p,g,y,m,v,_,b,x,S=1e-10;e=it(t.params,"so_proj"),n=st[e],e||K(-26);n&&"ob_tran"!=e||K(-37);t.es=0,r={},Object.keys(t).forEach(function(e){r[e]=t[e]}),n.init(r),r.is_latlong&&1==t.to_meter&&(t.to_meter=P,t.fr_meter=C);it(t.params,"to_alpha")?(p=it(t.params,"ro_lon_c"),g=it(t.params,"ro_lat_c"),y=it(t.params,"ro_alpha"),a(a(g)-O)<=S&&K(-32),i=p+ln(-c(y),-u(y)*u(g)),f=sn(c(g)*u(y))):it(t.params,"to_lat_p")?(i=it(t.params,"ro_lon_p"),f=it(t.params,"ro_lat_p")):(m=it(t.params,"ro_lon_1"),_=it(t.params,"ro_lat_1"),v=it(t.params,"ro_lon_2"),b=it(t.params,"ro_lat_2"),(a(_-b)<=S||(x=a(_))<=S||a(x-O)<=S||a(a(b)-O)<=S)&&K(-33),i=d(c(_)*u(b)*c(m)-u(_)*c(b)*c(v),u(_)*c(b)*u(v)-c(_)*u(b)*u(m)),f=h(-c(i-m)/l(_)));a(f)>S?(o=c(f),s=u(f),t.fwd=function(t,e){var n,a,l;n=c(t.lam),a=u(t.phi),l=c(t.phi),t.lam=jt(ln(l*u(t.lam),s*l*n+o*a)+i),t.phi=sn(s*a-o*l*n),r.fwd(t,e)},t.inv=r.inv?function(t,e){var n,a,l;r.inv(t,e),e.lam!=E&&(n=c(e.lam-=i),a=u(e.phi),l=c(e.phi),e.phi=sn(s*a+o*l*n),e.lam=ln(l*u(e.lam),s*l*n-o*a))}:null):(t.fwd=function(t,e){var n,o;n=c(t.phi),o=c(t.lam),t.lam=jt(ln(n*u(t.lam),u(t.phi))+i),t.phi=sn(-n*o),r.fwd(t,e)},t.inv=r.inv?function(t,e){var n,o;r.inv(t,e),e.lam!=E&&(n=c(e.phi),o=e.lam-i,e.lam=ln(n*u(o),-u(e.phi)),e.phi=sn(n*c(o)))}:null)},"ob_tran","General Oblique Transformation","\n\tMisc Sph\n\to_proj= plus parameters for projection\n\to_lat_p= o_lon_p= (new pole) or\n\to_alpha= o_lon_c= o_lat_c= or\n\to_lon_1= o_lat_1= o_lon_2= o_lat_2="),ut(function(t){var e,n,r,i,o,a,s,p,y,m,v;s=1/t.k0,p=t.k0,it(t.params,"talpha")?(a=it(t.params,"ralpha"),o=it(t.params,"rlonc"),v=h(-c(a)/(-u(0)*u(a)))+o,y=f(c(0)*u(a))):(e=it(t.params,"rlat_1"),n=it(t.params,"rlat_2"),r=it(t.params,"rlon_1"),i=it(t.params,"rlon_2"),v=d(c(e)*u(n)*c(r)-u(e)*c(n)*c(i),u(e)*c(n)*u(i)-c(e)*u(n)*u(r)),r==-O&&(v=-v),y=h(-c(v-r)/l(e)));t.lam0=v+O,m=c(y),y=u(y),c(v),v=u(v),t.es=0,t.fwd=function(t,e){var n;e.y=u(t.lam),n=c(t.lam),e.x=h((l(t.phi)*m+y*e.y)/n),n<0&&(e.x+=I),e.x*=p,e.y=s*(y*u(t.phi)-m*c(t.phi)*e.y)},t.inv=function(t,e){var n,r;t.y/=s,t.x/=p,n=g(1-t.y*t.y),e.phi=f(t.y*y+n*m*(r=u(t.x))),e.lam=d(n*y*r-t.y*m,n*c(t.x))}},"ocea","Oblique Cylindrical Equal Area","\n\tCyl, Sph lonc= alpha= or\n\tlat_1= lat_2= lon_1= lon_2="),ut(function(t){var e,n,r,i,o,s,p,_,b,x,S,w,C,P,N,A,M,R,D,F,k,B,j,G,U,z,V,Y=1e-7,X=0,J=0,$=0,Z=0,Q=0,tt=0,et=0,nt=0;V=it(t.params,"tno_rot"),0!=(w=it(t.params,"talpha"))&&(et=it(t.params,"ralpha"));0!=(C=it(t.params,"tgamma"))&&(X=it(t.params,"rgamma"));w||C?(J=it(t.params,"rlonc"),(nt=it(t.params,"tno_off")||it(t.params,"tno_uoff"))&&(it(t.params,"sno_uoff"),it(t.params,"sno_off"))):($=it(t.params,"rlon_1"),Q=it(t.params,"rlat_1"),Z=it(t.params,"rlon_2"),tt=it(t.params,"rlat_2"),(a(Q-tt)<=Y||(e=a(Q))<=Y||a(e-O)<=Y||a(a(t.phi0)-O)<=Y||a(a(tt)-O)<=Y)&&K(-33));n=g(t.one_es),a(t.phi0)>q?(_=u(t.phi0),r=c(t.phi0),e=1-t.es*_*_,N=r*r,N=g(1+t.es*N*N/t.one_es),P=N*t.k0*n/e,i=N*n/(r*g(e)),(o=i*i-1)<=0?o=0:(o=g(o),t.phi0<0&&(o=-o)),A=o+=i,A*=y(En(t.phi0,_,t.e),N)):(N=1/n,P=t.k0,A=i=o=1);w||C?(w?(S=f(u(et)/i),C||(X=et)):et=f(i*u(S=X)),t.lam0=J-f(.5*(o-1/o)*l(S))/N):(s=y(En(Q,u(Q),t.e),N),p=y(En(tt,u(tt),t.e),N),o=A/s,b=(p-s)/(p+s),x=((x=A*A)-p*s)/(x+p*s),(e=$-Z)<-I?Z-=L:e>I&&(Z+=L),t.lam0=jt(.5*($+Z)-h(x*l(.5*N*($-Z))/b)/N),S=h(2*u(N*jt($-t.lam0))/(o-1/o)),X=et=f(i*u(S)));F=u(S),k=c(S),B=u(X),j=c(X),R=1/(M=P*(D=1/N)),P*N,nt?z=0:(z=a(M*h(g(i*i-1)/c(et))),t.phi0<0&&(z=-z));G=M*v(l(T-(o=.5*S))),U=M*v(l(T+o)),t.fwd=function(e,n){var r,i,o,s,l,f,p,h;a(a(e.phi)-O)>q?(r=.5*((l=A/y(En(e.phi,u(e.phi),t.e),N))-(f=1/l)),i=.5*(l+f),s=u(N*e.lam),a(a(o=(r*F-s*k)/i)-1)<q&&H(),h=.5*M*v((1-o)/(1+o)),f=c(N*e.lam),p=a(f)<Y?P*e.lam:M*d(r*k+s*F,f)):(h=e.phi>0?G:U,p=M*e.phi),V?(n.x=p,n.y=h):(p-=z,n.x=h*j+p*B,n.y=p*j-h*B)},t.inv=function(e,n){var r,i,o,s,l,f,p;V?(i=e.y,r=e.x):(i=e.x*j-e.y*B,r=e.y*j+e.x*B+z),s=.5*((o=m(-R*i))-1/o),l=.5*(o+1/o),f=u(R*r),a(a(p=(f*k+s*F)/l)-1)<q?(n.lam=0,n.phi=p<0?-O:O):(n.phi=A/g((1+p)/(1-p)),(n.phi=In(y(n.phi,1/N),t.e))==E&&W(),n.lam=-D*d(s*k-f*F,c(R*r)))}},"omerc","Oblique Mercator","\n\tCyl, Sph&Ell no_rot\n\talpha= [gamma=] [no_off] lonc= or\n\t lon_1= lat_1= lon_2= lat_2="),ut(function(t){var e=1e-10,n=0,r=1,i=2,o=3,s={};a(a(t.phi0)-O)<=e?s.mode=t.phi0<0?r:n:a(t.phi0)>e?(s.mode=o,s.sinph0=u(t.phi0),s.cosph0=c(t.phi0)):s.mode=i;t.fwd=function(l,f){var p,h,d;switch(h=c(l.phi),p=c(l.lam),s.mode){case i:h*p<-e&&H(),f.y=u(l.phi);break;case o:s.sinph0*(d=u(l.phi))+s.cosph0*h*p<-e&&H(),f.y=s.cosph0*d-s.sinph0*h*p;break;case n:p=-p;case r:a(l.phi-t.phi0)-e>O&&H(),f.y=h*p}f.x=h*u(l.lam)},t.inv=function(u,c){var l,h,y;if((y=l=_(u.x,u.y))>1&&(y-1>e&&W(),y=1),h=g(1-y*y),a(l)<=e)c.phi=t.phi0,c.lam=0;else{switch(s.mode){case n:u.y=-u.y,c.phi=p(y);break;case r:c.phi=-p(y);break;case i:case o:s.mode==i?(c.phi=u.y*y/l,u.x*=y,u.y=h*l):(c.phi=h*s.sinph0+u.y*y*s.cosph0/l,u.y=(h-s.sinph0*c.phi)*l,u.x*=y*s.cosph0),a(c.phi)>=1?c.phi=c.phi<0?-O:O:c.phi=f(c.phi)}c.lam=0!=u.y||s.mode!=o&&s.mode!=i?d(u.x,u.y):0==u.x?0:u.x<0?-O:O}},t.es=0},"ortho","Orthographic","\n\tAzi, Sph."),ut(function(t){var e=1.0148,n=.23185,r=-.14499,i=.02406,o=e,s=5*n,u=7*r,c=9*i,l=1e-11,f=908571831.7;t.es=0,t.fwd=function(t,o){var a=t.phi*t.phi;o.x=t.lam,o.y=t.phi*(e+a*a*(n+a*(r+i*a)))},t.inv=function(t,p){var h,d,g,y;for(h=t.y,t.y>f?t.y=f:t.y<-f&&(t.y=-f),y=100;y&&(h-=d=(h*(e+(g=h*h)*g*(n+g*(r+i*g)))-t.y)/(o+g*g*(s+g*(u+c*g))),!(a(d)<l));--y);p.phi=h,p.lam=t.x}},"patterson","Patterson Cylindrical","\n\tCyl., Sph."),ut(function(t){var e,n,r=1e-10,i=1e-10,o=10,s=20,p=1e-12;t.es?(n=rn(t.es),e=on(t.phi0,u(t.phi0),c(t.phi0),n),t.fwd=function(i,o){var s,l,f;a(i.phi)<=r?(o.x=i.lam,o.y=-e):(l=u(i.phi),s=a(f=c(i.phi))>r?en(l,f,t.es)/l:0,o.x=s*u(i.lam*=l),o.y=on(i.phi,l,f,n)-e+s*(1-c(i.lam)))},t.inv=function(i,o){var h,d,y,m,v,_,b,x,S,w,E=i.x,I=i.y;if(a(I+=e)<=r)o.lam=E,o.phi=0;else{for(h=I*I+E*E,o.phi=I,w=s;w>0&&(y=u(o.phi),v=y*(m=c(o.phi)),a(m)<p&&W(),d=y*(x=g(1-t.es*y*y))/m,_=on(o.phi,y,m,n),b=_*_+h,x=t.one_es/(x*x*x),o.phi+=S=(_+_+d*b-2*I*(d*_+1))/(t.es*v*(b-2*I*_)/d+2*(I-_)*(d*x-1/v)-x-x),!(a(S)<=p));--w);w||W(),d=u(o.phi),o.lam=f(E*l(o.phi)*g(1-t.es*d*d))/u(o.phi)}}):(e=-t.phi0,t.fwd=function(n,i){var o,s;a(n.phi)<=r?(i.x=n.lam,i.y=e):(o=1/l(n.phi),i.x=u(s=n.lam*u(n.phi))*o,i.y=n.phi-t.phi0+o*(1-c(s)))},t.inv=function(e,n){var s,c,p,h;if(a(e.y=t.phi0+e.y)<=r)n.lam=e.x,n.phi=0;else{n.phi=e.y,s=e.x*e.x+e.y*e.y,h=o;do{p=l(n.phi),n.phi-=c=(e.y*(n.phi*p+1)-n.phi-.5*(n.phi*n.phi+s)*p)/((n.phi-e.y)/p-1)}while(a(c)>i&&--h);h||W(),n.lam=f(e.x*l(n.phi))/u(n.phi)}})},"poly","Polyconic (American)","\n\tConic, Sph&Ell"),ut(function(t){var e=1.8949,n=1.71848,r=.6141848493043784,i=1e-10,o=10,s=1.0471975511965976;t.es=0,t.fwd=function(t,l){var f,p,h,d,g;for(f=r*u(t.phi),h=t.phi*t.phi,t.phi*=.615709+h*(.00909953+.0046292*h),g=o;g&&(p=c(t.phi),h=u(t.phi),t.phi-=d=(t.phi+h*(p-1)-f)/(1+p*(p-1)-h*h),!(a(d)<i));--g);g||(t.phi=t.phi<0?-s:s),l.x=e*t.lam*(c(t.phi)-.5),l.y=n*u(t.phi)},t.inv=function(t,i){var o;i.phi=sn(t.y/n),i.lam=t.x/(e*((o=c(i.phi))-.5)),i.phi=sn((i.phi+u(i.phi)*(o-1))/r)}},"putp2","Putnins P2","\n\tPCyl., Sph."),ut(Tn,"putp3","Putnins P3","\n\tPCyl., Sph."),ut(function(t){Tn(t,!0)},"putp3p","Putnins P3'","\n\tPCyl., Sph."),ut(function(t){On(t,.874038744,3.883251825)},"putp4p","Putnins P4'","\n\tPCyl., Sph."),ut(function(t){On(t,1,4.442882938)},"weren","Werenskiold I","\n\tPCyl., Sph."),ut(Mn,"putp5","Putnins P5","\n\tPCyl., Sph."),ut(function(t){Mn(t,!0)},"putp5p","Putnins P5'","\n\tPCyl., Sph."),ut(Ln,"putp6","Putnins P6","\n\tPCyl., Sph."),ut(function(t){Ln(t,!0)},"putp6p","Putnins P6'","\n\tPCyl., Sph."),ut(function(t){var e,n,r,i,o=1e-10,s=0,f=1,y=2,m=3,v=4,_=5,b=0,x=1,S=2,w=3;e=t.phi0>=O-T/2?v:t.phi0<=-(O-T/2)?_:a(t.lam0)<=T?s:a(t.lam0)<=O+T?t.lam0>0?f:m:y;0!==t.es&&(t.a*t.a,n=t.a*g(1-t.es),r=1-(t.a-n)/t.a,i=r*r);function E(t,e,n){var r,i;return t<o?(r=b,i=0):(i=d(e,n),a(i)<=T?r=b:i>T&&i<=O+T?(r=x,i-=O):i>O+T||i<=-(O+T)?(r=S,i=i>=0?i-I:i+I):(r=w,i+=O)),{area:r,theta:i}}function C(t,e){var n=t+e;return n<-I?n+=L:n>+I&&(n-=L),n}t.fwd=function(n,r){var o,a,d,P,N,A,L,R,D,F,k,B,j,G;o=0!==t.es?h(i*l(n.phi)):n.phi,a=n.lam,e==v?(P=O-o,a>=T&&a<=O+T?(L=b,d=a-O):a>O+T||a<=-(O+T)?(L=x,d=a>0?a-I:a+I):a>-(O+T)&&a<=-T?(L=S,d=a+O):(L=w,d=a)):e==_?(P=O+o,a>=T&&a<=O+T?(L=b,d=-a+O):a<T&&a>=-T?(L=x,d=-a):a<-T&&a>=-(O+T)?(L=S,d=-a-O):(L=w,d=a>0?-a+I:-a-I)):(e==f?a=C(a,+O):e==y?a=C(a,+I):e==m&&(a=C(a,-O)),k=u(o),B=c(o),j=u(a),R=B*c(a),D=B*j,F=k,e==s?G=E(P=p(R),F,D):e==f?G=E(P=p(D),F,-R):e==y?G=E(P=p(-R),F,-D):e==m?G=E(P=p(-D),F,R):(P=0,G={area:b,theta:0}),d=G.theta,L=G.area),A=h(12/I*(d+p(u(d)*c(T))-O)),N=g((1-c(P))/(c(A)*c(A))/(1-c(h(1/c(d))))),L==x?A+=O:L==S?A+=I:L==w&&(A+=M),r.x=N*c(A),r.y=N*u(A)},t.inv=function(o,s){var E,P,N,A,T,M,L,R,D,F,k,B,j;if(P=h(g(o.x*o.x+o.y*o.y)),E=d(o.y,o.x),o.x>=0&&o.x>=a(o.y)?F=b:o.y>=0&&o.y>=a(o.x)?(F=x,E-=O):o.x<0&&-o.x>=a(o.y)?(F=S,E=E<0?E+I:E-I):(F=w,E+=O),D=I/12*l(E),T=u(D)/(c(D)-1/g(2)),M=h(T),(L=1-(N=c(E))*N*(A=l(P))*A*(1-c(h(1/c(M)))))<-1?L=-1:L>1&&(L=1),e==v)R=p(L),s.phi=O-R,s.lam=F==b?M+O:F==x?M<0?M+I:M-I:F==S?M-O:M;else if(e==_)R=p(L),s.phi=R-O,s.lam=F==b?-M+O:F==x?-M:F==S?-M-O:M<0?-M-I:-M+I;else{var G,U,q;D=(G=L)*G,U=(D+=(q=D>=1?0:g(1-D)*u(M))*q)>=1?0:g(1-D),F==x?(D=U,U=-q,q=D):F==S?(U=-U,q=-q):F==w&&(D=U,U=q,q=-D),e==f?(D=G,G=-U,U=D):e==y?(G=-G,U=-U):e==m&&(D=G,G=U,U=-D),s.phi=p(-q)-O,s.lam=d(U,G),e==f?s.lam=C(s.lam,-O):e==y?s.lam=C(s.lam,-I):e==m&&(s.lam=C(s.lam,+O))}0!==t.es&&(k=s.phi<0?1:0,B=l(s.phi),j=n/g(B*B+i),s.phi=h(g(t.a*t.a-j*j)/(r*j)),k&&(s.phi=-s.phi))}},"qsc","Quadrilateralized Spherical Cube","\n\tAzi, Sph."),ut(function(t){var e=h([[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]]),n=h([[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]]),r=.8487,i=1.3523,o=11.459155902616464,u=.08726646259971647,c=18,l=1.000001,f=1e-8;function p(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))}function h(t){return t.map(function(t){return new Float32Array(t)})}t.es=0,t.fwd=function(t,l){var f,h;(f=s((h=a(t.phi))*o))<0&&H(),f>=c&&(f=c-1),h=C*(h-u*f),l.x=p(e[f],h)*r*t.lam,l.y=p(n[f],h)*i,t.phi<0&&(l.y=-l.y)},t.inv=function(t,o){var u,h,d,g,y,m;if(o.lam=t.x/r,o.phi=a(t.y/i),o.phi>=1)o.phi>l?W():(o.phi=t.y<0?-O:O,o.lam/=e[c][0]);else{if((g=s(o.phi*c))<0||g>=c)return W();for(;;)if(n[g][0]>o.phi)--g;else{if(!(n[g+1][0]<=o.phi))break;++g}for(d=new Float32Array(n[g]),u=5*(o.phi-d[0])/(n[g+1][0]-d[0]),d[0]-=o.phi;u-=h=p(d,u)/(m=u,(y=d)[1]+m*(y[2]+y[2]+3*m*y[3])),!(a(h)<f););o.phi=(5*g+u)*P,t.y<0&&(o.phi=-o.phi),o.lam/=p(e[g],u)}}},"robin","Robinson","\n\tPCyl., Sph."),ut(Rn("EULER"),"euler","Euler","\n\tConic, Sph\n\tlat_1= and lat_2="),ut(Rn("MURD1"),"murd1","Murdoch I","\n\tConic, Sph\n\tlat_1= and lat_2="),ut(Rn("MURD2"),"murd2","Murdoch II","\n\tConic, Sph\n\tlat_1= and lat_2="),ut(Rn("MURD3"),"murd3","Murdoch III","\n\tConic, Sph\n\tlat_1= and lat_2="),ut(Rn("PCONIC"),"pconic","Perspective Conic","\n\tConic, Sph\n\tlat_1= and lat_2="),ut(Rn("TISSOT"),"tissot","Tissot","\n\tConic, Sph\n\tlat_1= and lat_2="),ut(Rn("VITK1"),"vitk1","Vitkovsky I","\n\tConic, Sph\n\tlat_1= and lat_2="),ut(function(t){var e,n,r,i,o,s,f,p,d,y=1e-10,_=6;r=.5*t.e,f=c(t.phi0),f*=f,n=g(1+t.es*f*f*t.rone_es),d=u(t.phi0),o=c(p=sn(s=d/n)),d*=t.e,e=v(l(T+.5*p))-n*(v(l(T+.5*t.phi0))-r*v((1+d)/(1-d))),i=t.k0*g(t.one_es)/(1-d*d),t.inv=function(f,p){var d,g,b,x,S,w,E,I,C;for(b=2*(h(m(f.y/i))-T),x=f.x/i,S=c(b),d=sn(o*u(b)+s*S*c(x)),g=sn(S*u(x)/c(d)),E=(e-v(l(T+.5*d)))/n,C=_;C&&(w=t.e*u(d),d-=I=(E+v(l(T+.5*d))-r*v((1+w)/(1-w)))*(1-w*w)*c(d)*t.rone_es,!(a(I)<y));--C);C?(p.phi=d,p.lam=g/n):W()},t.fwd=function(a,f){var p,d,g,y,_,b;_=t.e*u(a.phi),p=2*h(m(n*(v(l(T+.5*a.phi))-r*v((1+_)/(1-_)))+e))-O,d=n*a.lam,b=c(p),g=sn(o*u(p)-s*b*c(d)),y=sn(b*u(d)/c(g)),f.x=i*y,f.y=i*v(l(T+.5*g))}},"somerc","Swiss. Obl. Mercator","\n\tCyl, Ell\n\tFor CH1903"),ut(function(t){var e=it(t.params,"tlat_ts")?it(t.params,"rlat_ts"):O;Dn(t,e)},"stere","Stereographic","\n\tAzi, Sph&Ell\n\tlat_ts="),ut(function(t){t.phi0=it(t.params,"bsouth")?-O:O,t.k0=.994,t.x0=2e6,t.y0=2e6,t.lam0=0,t.es||K(-34);Dn(t,O)},"ups","Universal Polar Stereographic","\n\tAzi, Sph&Ell\n\tsouth"),ut(function(t){var e=(s=t.e,p=t.phi0,m=s*s,v=u(p),b=c(p),x=g(1-m)/(1-m*v*v),S=g(1+m*b*b*b*b/(1-m)),w=f(v/S),E=.5*S*s,{e:s,K:l(.5*w+T)/(y(l(.5*p+T),S)*Fn(s*v,E)),C:S,chi:w,ratexp:E,rc:x}),n=e.chi,r=2*e.rc,i=u(n),o=c(n);var s,p,m,v,b,x,S,w,E;t.fwd=function(n,a){var s,f,p,d;n=function(t,e){return{phi:2*h(e.K*y(l(.5*t.phi+T),e.C)*Fn(e.e*u(t.phi),e.ratexp))-O,lam:e.C*t.lam}}(n,e),f=u(n.phi),s=c(n.phi),p=c(n.lam),d=t.k0*r/(1+i*f+o*s*p),a.x=d*s*u(n.lam),a.y=d*(o*f-i*s*p)},t.inv=function(s,p){var g,m,v,b,x=s.x/t.k0,S=s.y/t.k0;(g=_(x,S))?(m=2*d(g,r),v=u(m),b=c(m),p.phi=f(b*i+S*v*o/g),p.lam=d(x*v,g*o*b-S*i*v)):(p.phi=n,p.lam=0),function(t,e){t.phi;var n,r,i=y(l(.5*t.phi+T)/e.K,1/e.C);for(t.lam/=e.C,n=20;n>0&&(r=2*h(i*Fn(e.e*u(t.phi),-.5*e.e))-O,!(a(r-t.phi)<1e-14));--n)t.phi=r;n||J(-17)}(p,e)}},"sterea","Oblique Stereographic Alternative","\n\tAzimuthal, Sph&Ell"),ut(function(t){kn(t,1.50488,1.35439,!1)},"kav5","Kavraisky V","\n\tPCyl., Sph."),ut(function(t){kn(t,2,2,!1)},"qua_aut","Quartic Authalic","\n\tPCyl., Sph."),ut(function(t){kn(t,2,2,!0)},"fouc","Foucaut","\n\tPCyl., Sph."),ut(function(t){kn(t,1.48875,1.36509,!1)},"mbt_s","McBryde-Thomas Flat-Polar Sine (No. 1)","\n\tPCyl., Sph."),ut(function(t){t.es=0,t.fwd=function(e,n){n.x=c(e.phi)*u(e.lam)/t.k0,n.y=t.k0*(d(l(e.phi),c(e.lam))-t.phi0)},t.inv=function(e,n){var r;e.y=e.y/t.k0+t.phi0,e.x*=t.k0,r=g(1-e.x*e.x),n.phi=f(r*u(e.y)),n.lam=d(e.x,r*c(e.y))}},"tcea","Transverse Cylindrical Equal Area","\n\tCyl, Sph"),ut(function(t){t.es=0,t.fwd=function(t,e){var n=l(t.phi/2),r=u(T*n);e.x=t.lam*(.74482-.34588*r*r),e.y=1.70711*n},t.inv=function(t,e){var n=t.y/1.70711,r=u(T*n);e.lam=t.x/(.74482-.34588*r*r),e.phi=2*h(n)}},"times","Times","\n\tCyl, Sph"),ut(function(t){var e,n,r,i=1e-10,o=1,s=.5,l=.16666666666666666,h=.08333333333333333,y=.05,_=.03333333333333333,b=.023809523809523808,x=.017857142857142856;t.es?((r=rn(t.es))||e_error_0(),n=on(t.phi0,u(t.phi0),c(t.phi0),r),e=t.es/(1-t.es),t.fwd=function(f,p){var d,m,v,S,w,E;if(f.lam<-O||f.lam>O)return void J(-14);d=u(f.phi),m=c(f.phi),v=a(m)>i?d/m:0,v*=v,S=m*f.lam,w=S*S,S/=g(1-t.es*d*d),E=e*m*m,p.x=t.k0*S*(o+l*w*(1-v+E+y*w*(5+v*(v-18)+E*(14-58*v)+b*w*(61+v*(v*(179-v)-479))))),p.y=t.k0*(on(f.phi,d,m,r)-n+d*S*f.lam*s*(1+h*w*(5-v+E*(9+4*E)+_*w*(61+v*(v-58)+E*(270-330*v)+x*w*(1385+v*(v*(543-v)-3111))))))},t.inv=function(i,f){var p,d,m,v,S,w,E;f.phi=an(n+i.y/t.k0,t.es,r),a(f.phi)>=O?(f.phi=i.y<0?-O:O,f.lam=0):(w=u(f.phi),m=c(f.phi),E=a(m)>1e-10?w/m:0,p=e*m*m,v=i.x*g(d=1-t.es*w*w)/t.k0,d*=E,E*=E,S=v*v,f.phi-=d*S/(1-t.es)*s*(1-S*h*(5+E*(3-9*p)+p*(1-4*p)-S*_*(61+E*(90-252*p+45*E)+46*p-S*x*(1385+E*(3633+E*(4095+1575*E)))))),f.lam=v*(o-S*l*(1+2*E+p-S*y*(5+E*(28+24*E+8*p)+6*p-S*b*(61+E*(662+E*(1320+720*E))))))/m)}):(e=t.k0,n=.5*e,t.fwd=function(r,o){var s,l;if(r.lam<-O||r.lam>O)return void J(-14);l=c(r.phi),s=l*u(r.lam),a(a(s)-1)<=i&&H();o.x=n*v((1+s)/(1-s)),o.y=l*c(r.lam)/g(1-s*s),(s=a(o.y))>=1?s-1>i?H():o.y=0:o.y=p(o.y);r.phi<0&&(o.y=-o.y);o.y=e*(o.y-t.phi0)},t.inv=function(n,r){var i=m(n.x/e),o=.5*(i-1/i);i=c(t.phi0+n.y/e),r.phi=f(g((1-i*i)/(1+o*o))),n.y<0&&-r.phi+t.phi0<0&&(r.phi=-r.phi);r.lam=o||i?d(o,i):0})},"tmerc","Transverse Mercator","\n\tCyl, Sph&Ell"),ut(function(t){var e,n,r,i,o,a,s,f,p,h,g,y,m,v,b,x,S,w,E,I,C,P,N;I=it(t.params,"rlat_1"),w=it(t.params,"rlon_1"),C=it(t.params,"rlat_2"),E=it(t.params,"rlon_2"),I==C&&w==E&&K(-25);t.lam0=jt(.5*(w+E)),h=jt(E-w),e=c(I),r=c(C),n=u(I),i=u(C),a=e*i,s=n*r,o=e*r*u(h),p=un(n*i+e*r*c(h)),g=.5*p,P=d(r*u(h),e*i-n*r*c(h)),v=c(N=sn(e*u(P))),b=u(N),x=jt(d(e*c(P),n)-g),h*=.5,S=O-d(u(P)*n,c(P))-h,y=l(g),m=.5/u(g),f=.5/p,p*=p,t.fwd=function(t,l){var d,g,y,m,v,_,b;_=u(t.phi),b=c(t.phi),g=un(n*_+e*b*c(m=t.lam+h)),y=un(i*_+r*b*c(v=t.lam-h)),g*=g,y*=y,l.x=f*(d=g-y),d=p-d,l.y=f*cn(4*p*y-d*d),o*_-b*(a*u(m)-s*u(v))<0&&(l.y=-l.y)},t.inv=function(t,e){var n,r,i,o,a,s;i=(n=c(_(t.y,t.x+g)))+(r=c(_(t.y,t.x-g))),o=n-r,e.lam=-d(o,i*y),e.phi=un(_(y*i,o)*m),t.y<0&&(e.phi=-e.phi),s=u(e.phi),a=c(e.phi),e.phi=sn(b*s+v*a*(i=c(e.lam-=x))),e.lam=d(a*u(e.lam),b*a*i-v*s)+S},t.es=0},"tpeqd","Two Point Equidistant","\n\tMisc Sph\n\tlat_1= lon_1= lat_2= lon_2="),ut(function(t){var e,n,r,i,o,a;(i=it(t.params,"dn"))>0&&i<=1==!1&&K(-40);r=it(t.params,"dq")/3,o=it(t.params,"ralpha"),a=i*u(o),e=c(o)/g(1-a*a),n=1/(e*i),t.fwd=function(t,o){var a=t.phi=sn(i*u(t.phi));o.x=e*t.lam*c(t.phi),a*=a,o.y=t.phi*(1+a*r)*n},t.es=0},"urm5","Urmaev V","\n\tPCyl., Sph., no inv.\n\tn= q= alpha="),ut(function(t){var e=it(t.params,"dn");(e<=0||e>1)&&K(-40);Bn(t,e)},"urmfps","Urmaev Flat-Polar Sinusoidal","\n\tPCyl, Sph.\n\tn="),ut(function(t){Bn(t,.8660254037844386)},"wag1","Wagner I (Kavraisky VI)","\n\tPCyl, Sph."),ut(function(t){var e=1e-10,n=.3333333333333333,r=.07407407407407407,i=4.188790204786391,o=9.869604401089358,s=19.739208802178716,u=4.934802200544679;t.fwd=function(t,n){var r,i,o,s,u;(u=a(t.phi/O))-e>1&&H(),u>1&&(u=1),a(t.phi)<=e?(n.x=t.lam,n.y=0):a(t.lam)<=e||a(u-1)<e?(n.x=0,n.y=I*l(.5*f(u)),t.phi<0&&(n.y=-n.y)):(i=(r=.5*a(I/t.lam-t.lam/I))*r,o=g(1-u*u),s=(o/=u+o-1)*o,u=o*(2/u-1),u*=u,n.x=o-u,o=u+i,n.x=I*(r*n.x+g(i*n.x*n.x-o*(s-u)))/o,t.lam<0&&(n.x=-n.x),n.y=a(n.x/I),n.y=1-n.y*(n.y+2*r),n.y<-e&&H(),n.y<0?n.y=0:n.y=g(n.y)*(t.phi<0?-I:I))},t.inv=function(t,l){var f,h,d,y,m,v,_,b,x,S,w,E,C;if(E=t.x*t.x,(w=a(t.y))<e)return l.phi=0,f=E*E+s*(E+u),l.lam=a(t.x)<=e?0:.5*(E-o+g(f))/t.x,l;C=t.y*t.y,y=(d=-I*w*((b=E+C)+o))+o*(b-3*C),h=I*w,x=2*g(-n*(v=d/(m=(_=b*b)+L*(w*b+I*(C+I*(w+O))))-n*(y/=m)*y)),(f=a(S=3*(S=r*y*y*y+(h*h-n*y*d)/m)/(v*x)))-e<=1?(S=f>1?S>0?0:I:p(S),l.phi=I*(x*c(S*n+i)-n*y),t.y<0&&(l.phi=-l.phi),f=_+s*(E-C+u),l.lam=a(t.x)<=e?0:.5*(b-o+(f<=0?0:g(f)))/t.x):W()}},"vandg","van der Grinten (I)","\n\tMisc Sph"),ut(function(t){jn(t,!1)},"vandg2","van der Grinten II","\n\tMisc Sph, no inv."),ut(function(t){jn(t,!0)},"vandg3","van der Grinten III","\n\tMisc Sph, no inv."),ut(function(t){t.es=0,t.fwd=function(t,e){var n,r,i,o,s,u,c,l;a(t.phi)<1e-10?(e.x=t.lam,e.y=0):a(t.lam)<1e-10||a(a(t.phi)-O)<1e-10?(e.x=0,e.y=t.phi):(u=(o=.5*((i=a(R*t.phi))*(8-i*(2+(s=i*i)))-5)/(s*(i-1)))*o,c=R*t.lam,c=g((c+=1/c)*c-4),a(t.lam)-O<0&&(c=-c),n=i+o,n=(c*((n*=n)+u-1)+2*g(n*(s+u*(l=c*c)-1)+(1-s)*(s*((r=i+3*o)*r+4*u)+u*(12*i*o+4*u))))/(4*n+l),e.x=O*n,e.y=O*g(1+c*a(n)-n*n),t.lam<0&&(e.x=-e.x),t.phi<0&&(e.y=-e.y))}},"vandg4","van der Grinten IV","\n\tMisc Sph, no inv."),ut(function(t){var e=.92483,n=1.38725,r=.88022,i=.8855;t.fwd=function(t,o){t.phi=sn(r*u(i*t.phi)),o.x=e*t.lam*c(t.phi),o.y=n*t.phi},t.inv=function(t,o){o.phi=t.y/n,o.lam=t.x/(e*c(o.phi)),o.phi=sn(u(o.phi)/r)/i}},"wag2","Wagner II","\n\tPCyl., Sph."),ut(function(t){var e=.6666666666666666,n=it(t.params,"rlat_ts"),r=c(n)/c(2*n/3);t.es=0,t.fwd=function(t,n){n.x=r*t.lam*c(e*t.phi),n.y=t.phi},t.inv=function(t,n){n.phi=t.y,n.lam=t.x/(r*c(e*n.phi))}},"wag3","Wagner III","\n\tPCyl., Sph.\n\tlat_ts="),ut(function(t){t.es=0,t.fwd=function(t,e){var n,r,i;n=f(e.y=.9063077870366499*u(t.phi)),e.x=2.66723*(r=c(n))*u(t.lam/=3),e.y*=1.24104*(i=1/g(.5*(1+r*c(t.lam)))),e.x*=i}},"wag7","Wagner VII","\n\tMisc Sph, no inv."),ut(function(t){var e=c(it(t.params,"rlat_ts"));t.fwd=function(t,n){n.x=.5*t.lam*(e+c(t.phi)),n.y=t.phi},t.inv=function(t,n){n.phi=t.y,n.lam=2*t.x/(e+c(n.phi))},t.es=0},"wink1","Winkel I","\n\tPCyl., Sph.\n\tlat_ts="),ut(function(t){var e=c(it(t.params,"rlat_1")),n=10,r=1e-7;t.fwd=function(t,i){var o,s,l,f=t.phi;for(i.y=f*R,o=I*u(f),f*=1.8,l=n;l&&(f-=s=(f+u(f)-o)/(1+c(f)),!(a(s)<r));--l);l?f*=.5:f=f<0?-O:O,i.x=.5*t.lam*(c(f)+e),i.y=T*(u(f)+i.y)},t.inv=null,t.es=0},"wink2","Winkel II","\n\tPCyl., Sph., no inv.\n\tlat_1=");var Gn=zt;Gn.pj_init=wt,Gn.pj_fwd=Gt,Gn.pj_inv=Ut,Gn.pj_transform=Dt,Gn.pj_add=ut,Gn.pj_fwd_deg=function(t,e){return Gt({lam:t.lam*P,phi:t.phi*P},e)},Gn.pj_inv_deg=function(t,e){var n=Ut(t,e);return{lam:n.lam*C,phi:n.phi*C}},Gn.pj_transform_point=Rt,Gn.internal={dmstod:et,dmstor:tt,get_rtodms:function(t,e,n,r){var i=qt(t,e,n,r);return function(t){return i(t*C)}},get_dtodms:qt,get_proj_defn:function(t){var e="datum,ellps,a,b,es,rf,f,towgs84,nadgrids,R,R_A,R_V,R_a,R_lat_a,R_lat_g,pm,init,no_defs".split(","),n="";return Object.keys(t.params).forEach(function(r){-1==e.indexOf(r)&&(n+=ft(t,r))}),(n+=lt(t)).trim()},pj_latlong_from_proj:function(t){return wt("+proj=latlong"+lt(t))},pj_get_params:ot,pj_datums:pt,pj_list:st,pj_ellps:gt,pj_units:mt,pj_read_init_opts:St,find_datum:dt,DEG_TO_RAD:P,RAD_TO_DEG:C,wkt_parse:He,wkt_unpack:We,wkt_to_proj4:function(t){var e,n=He(t);return n.PROJCS?e=oe(n.PROJCS):n.GEOGCS?e="+proj=longlat "+ne(n.GEOGCS):n.GEOCCS?Qt("geocentric coordinates are not supported"):Qt("missing a supported WKT CS type"),e},wkt_from_proj4:function(t){return t.length&&(t=wt(t)),Xe(ct(t)?{GEOGCS:ue(t)}:ge(t))},wkt_make_projcs:ge,wkt_get_geogcs_name:fe,wkt_stringify:Xe,mproj_insert_libcache:function(t,e){bt[t]=e},mproj_search_libcache:xt,GeographicLib:Qe},void 0===(o="function"==typeof(i=Gn)?i.call(e,n,e,t):i)||(t.exports=o)}()}).call(this,"/index.js")},function(t,e){},function(t,e,n){var r=n(5);t.exports=!r(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(13),i=n(15),o=n(27);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(13),i=n(68),o=n(7),a=n(37),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(18);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(23),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(28),i=n(18);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(4),i=n(29),o=n(14),a=n(10),s=n(52),u=n(69),c=n(31),l=c.get,f=c.enforce,p=String(u).split("toString");i("inspectSource",function(t){return u.call(t)}),(t.exports=function(t,e,n,i){var u=!!i&&!!i.unsafe,c=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof e||a(n,"name")||o(n,"name",e),f(n).source=p.join("string"==typeof e?e:"")),t!==r?(u?!l&&t[e]&&(c=!0):delete t[e],c?t[e]=n:o(t,e,n)):c?t[e]=n:s(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&l(this).source||u.call(this)})},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var t=s(p);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(176),i=n(177),o=n(178);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=p(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|h(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|h(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return N(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,p=0;p<u;p++)if(c(t,o+p)!==c(e,p)){f=!1;break}if(f)return o}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,r){return z(U(e,t.length-n),t,n,r)}function x(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function S(t,e,n,r){return x(t,e,n,r)}function w(t,e,n,r){return z(q(e),t,n,r)}function E(t,e,n,r){return z(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=P));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function N(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=G(t[o]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function F(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,r,o){return o||F(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,o){return o||F(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:U(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(35))},function(t,e,n){"use strict";(function(e){var r,i=n(25),o=i.Buffer,a={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(a[r]=i[r]);var s=a.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(s[r]=o[r]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(t,e,n){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,n)}),s.alloc||(s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=o(t);return e&&0!==e.length?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r}),!a.kStringMaxLength)try{a.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(t){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a}).call(this,n(22))},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(5),i=n(16),o="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(4),i=n(52),o=n(30),a=r["__core-js_shared__"]||i("__core-js_shared__",{});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.2.1",mode:o?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e,n){var r,i,o,a=n(126),s=n(4),u=n(8),c=n(14),l=n(10),f=n(38),p=n(39),h=s.WeakMap;if(a){var d=new h,g=d.get,y=d.has,m=d.set;r=function(t,e){return m.call(d,t,e),e},i=function(t){return g.call(d,t)||{}},o=function(t){return y.call(d,t)}}else{var v=f("state");p[v]=!0,r=function(t,e){return c(t,v,e),e},i=function(t){return l(t,v)?t[v]:{}},o=function(t){return l(t,v)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(1);function i(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+c*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!=c>t[1]&&t[0]<(u-a)*(t[1]-s)/(c-s)+a&&(r=!r)}return r}e.a=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var o=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var a=Object(r.a)(t),s=Object(r.b)(e),u=e.geometry?e.geometry.type:e.type,c=e.bbox;if(c&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(a,c))return!1;"Polygon"===u&&(s=[s]);for(var l=0,f=!1;l<s.length&&!f;l++)if(i(a,s[l][0],o)){for(var p=!1,h=1;h<s[l].length&&!p;)i(a,s[l][h],!o)&&(p=!0),h++;p||(f=!0)}return f}},function(t,e,n){"use strict";n(67),n(79),n(80),n(81),n(205),n(206),n(62),n(86),n(87),n(88),n(207),n(208),n(89),n(90),n(97),n(211),n(102);var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n,r;return e=t,(n=[{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"sub",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"scale",value:function(e){return new t(this.x*e,this.y*e)}},{key:"sqDistanceTo",value:function(t){return(this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y)}},{key:"toStr",value:function(){return"(".concat(this.x.toFixed(3),", ").concat(this.y.toFixed(3),")")}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])&&o(e.prototype,n),r&&o(e,r),t}();function s(t,e){return t.x*e.y-t.y*e.x}function u(t,e){return s(t[1].sub(t[0]),e.sub(t[0]))}var c=new a(0,0),l=1,f=1e3;function p(t,e){return t.bin==e.bin?0:t.bin<e.bin?-1:1}function h(t,e){var n=t[1].sub(t[0]),r=e[0].sub(t[0]),i=e[1].sub(t[0]),o=s(n,r),a=s(n,i);if(o>0&&a>0||o<0&&a<0)return!1;var u=e[1].sub(e[0]),c=t[0].sub(e[0]),l=t[1].sub(e[0]),f=s(u,c),p=s(u,l);if(f>0&&p>0||f<0&&p<0)return!1;if(Math.abs(o)<1e-14&&Math.abs(a)<1e-14){if(Math.max(e[0].x,e[1].x)<Math.min(t[0].x,t[1].x)||Math.min(e[0].x,e[1].x)>Math.max(t[0].x,t[1].x))return!1;if(Math.max(e[0].y,e[1].y)<Math.min(t[0].y,t[1].y)||Math.min(e[0].y,e[1].y)>Math.max(t[0].y,t[1].y))return!1}return!0}function d(t){!function(t){for(var e=t.vert.length,n=Math.round(Math.pow(e,.25)),r=[],i=[],o=0;o<e;o++){var s=(t.vert[o].x-c.x)/l,u=(t.vert[o].y-c.y)/l;r.push(new a(s,u));var h=Math.round((n-1)*s),d=Math.round((n-1)*u),g=void 0;g=d%2==0?d*n+h:(d+1)*n-h-1,i.push({ind:o,bin:g})}var y=f;r.push(new a(.5-y,-y/Math.sqrt(3)+.5)),r.push(new a(y+.5,-y/Math.sqrt(3)+.5)),r.push(new a(.5,2*y/Math.sqrt(3)+.5));for(var m=e;m<e+3;m++)t.vert.push(new a(l*r[m].x+c.x,l*r[m].y+c.y));i.sort(p),t.scaled_vert=r,t.bin=i,t.tri=[[e,e+1,e+2]],t.adj=[[-1,-1,-1]],t.vert_to_tri=[]}(t);for(var e=t.scaled_vert,n=t.bin,r=t.tri,i=t.adj,o=e.length-3,s=0,u=0;u<o;u++){var h=n[u].ind;if(-1===(s=g(e[h],t,s)[0]))throw"Could not find a triangle containing the new vertex!";var d=r[s],m=[d[0],d[1],h],v=[h,d[1],d[2]],_=[d[0],h,d[2]];r[s]=m;var b=r.length,x=i[s];i[s]=[b,b+1,x[2]],r.push(v),r.push(_),i.push([x[0],b+1,s]),i.push([b,x[1],s]);var S=[];if(x[2]>=0){var w=i[x[2]].indexOf(s);S.push([x[2],w])}if(x[0]>=0){var E=i[x[0]].indexOf(s);i[x[0]][E]=b,S.push([x[0],E])}if(x[1]>=0){var I=i[x[1]].indexOf(s);i[x[1]][I]=b+1,S.push([x[1],I])}y(h,t,S)}!function(t){for(var e=t.scaled_vert,n=t.tri,r=t.adj,i=e.length-3,o=0,a=[],s=0;s<n.length;s++){for(var u=o,c=s;c<n.length;c++){if(n[c][0]<i&&n[c][1]<i&&n[c][2]<i){a[s+o]=s;break}a[s+o]=-1,o++}var l=o-u;l>0&&(n.splice(s,l),r.splice(s,l))}for(var f=0;f<r.length;f++)for(var p=0;p<3;p++)r[f][p]=a[r[f][p]];t.scaled_vert.splice(-3,3),t.vert.splice(-3,3)}(t)}function g(t,e,n){for(var r=e.scaled_vert,i=e.tri,o=e.adj,a=Math.max(10,o.length),s=0,c=[];s<a;){if(-1===n)return[n,s];var l=i[n],f=[u([r[l[1]],r[l[2]]],t),u([r[l[2]],r[l[0]]],t),u([r[l[0]],r[l[1]]],t)];if(f[0]>=0&&f[1]>=0&&f[2]>=0)return[n,s];for(var p=-1,h=0;h<3;h++)if(f[h]>=0){p=h;break}var d=(p+1)%3,g=(p+2)%3;if(f[d]>=0&&f[g]<0)n=o[n][g],c[s]=r[l[p]].add(r[l[d]]).scale(.5);else if(f[d]<0&&f[g]>=0)n=o[n][d],c[s]=r[l[g]].add(r[l[p]]).scale(.5);else{var y=r[l[d]].sub(r[l[p]]),m=t.sub(r[l[p]]);y.dot(m)>0?(n=o[n][g],c[s]=r[l[p]].add(r[l[d]]).scale(.5)):(n=o[n][d],c[s]=r[l[g]].add(r[l[p]]).scale(.5))}s++}throw"Could not locate the triangle that encloses (".concat(t.x,", ").concat(t.y,")!")}function y(t,e,n){for(var r=e.scaled_vert,i=e.tri,o=e.adj,a=r[t];n.length>0;){for(var s=n.pop(),u=s[0],c=i[u],l=[],f=0;f<3;f++)l[f]=r[c[f]];if(!v(l,a)){var p=s[1],h=o[u][p];if(h<0)throw"negative index";m(e,u,h);var d=i[u].indexOf(t),g=o[u][d];if(g>=0){var y=o[g].indexOf(u);n.push([g,y])}var _=i[h].indexOf(t),b=o[h][_];if(b>=0){var x=o[b].indexOf(h);n.push([b,x])}}}}function m(t,e,n){var r=t.tri,i=t.adj,o=t.vert_to_tri,a=i[e].indexOf(n),s=i[n].indexOf(e),u=(a+1)%3,c=(a+2)%3,l=(s+1)%3,f=(s+2)%3;r[e][c]=r[n][s],r[n][f]=r[e][a],i[e][a]=i[n][l],i[n][s]=i[e][u];var p=i[e][u];if(p>=0){var h=i[p].indexOf(e);i[p][h]=n}var d=i[n][l];if(d>=0){var g=i[d].indexOf(n);i[d][g]=e}if(i[e][u]=n,i[n][l]=e,o.length>0){o[r[e][a]].push(n),o[r[n][s]].push(e);var y=o[r[e][u]].indexOf(n);o[r[e][u]].splice(y,1),y=o[r[n][l]].indexOf(e),o[r[n][l]].splice(y,1)}}function v(t,e){var n=t[0].sub(e),r=t[1].sub(e),i=t[2].sub(e),o=n.x*n.x+n.y*n.y,a=r.x*r.x+r.y*r.y,s=i.x*i.x+i.y*i.y;return!(n.x*(r.y*s-a*i.y)-n.y*(r.x*s-a*i.x)+o*(r.x*i.y-r.y*i.x)>0)}function _(t){if(0!=t.con_edge.length){!function(t){var e=t.tri;t.vert_to_tri=[];for(var n=t.vert_to_tri,r=0;r<e.length;r++)for(var i=0;i<3;i++)null==n[e[r][i]]?n[e[r][i]]=[r]:n[e[r][i]].push(r)}(t);for(var e,n,r=t.con_edge,i=t.tri,o=t.scaled_vert,a=t.adj,s=t.vert_to_tri,u=[],c=0;c<r.length;c++){for(var l=b(t,c),f=0,p=Math.max(l.length,1);l.length>0&&f<p;)x(t,l,c,u),l=b(t,c),f++;if(l.length>0)throw"Could not add edge ".concat(c," to triangulation after ").concat(p," iterations!")}for(;;){for(var h=0,d=0;d<u.length;d++){for(var g=u[d],y=!1,_=0;_<r.length;_++)if(e=g,n=r[_],e[0]==n[0]&&e[1]==n[1]||e[1]==n[0]&&e[0]==n[1]){y=!0;break}if(!y){for(var S=s[g[0]],w=0,E=[-1,-1],I=0;I<S.length;I++){var C=i[S[I]];if((C[0]==g[1]||C[1]==g[1]||C[2]==g[1])&&(E[w]=S[I],2==++w))break}if(-1!=E[0]){var P=[o[i[E[0]][0]],o[i[E[0]][1]],o[i[E[0]][2]]],N=a[E[1]].indexOf(E[0]);if(!v(P,o[i[E[1]][N]])){var A=a[E[0]].indexOf(E[1]);m(t,E[0],E[1]),h++,u[d]=[i[E[0]][A],i[E[1]][N]]}}}}if(0==h)break}}}function b(t,e){for(var n=t.tri,r=t.scaled_vert,i=t.adj,o=t.con_edge,a=t.vert_to_tri,s=o[e][0],u=o[e][1],c=[r[s],r[u]],l=a[s],f=!1,p=[],d=0;d<l.length;d++){var g=n[l[d]],y=g.indexOf(s),m=(y+1)%3,v=(y+2)%3;if(u==g[m]){f=!0;break}if(u==g[v]){f=!0;break}if(h(c,[r[g[m]],r[g[v]]])){p.push([l[d],y]);break}}if(!f){if(0==p.length)throw"Cannot have no intersections!";for(;;){var _=p[p.length-1],b=i[_[0]][_[1]];if(n[b][0]==u||n[b][1]==u||n[b][2]==u)break;var x=i[b].indexOf(_[0]);if(-1==x)throw"Could not find edge!";for(var S=n[b],w=1;w<3;w++){var E=(x+w+2)%3;if(h(c,[r[S[(x+w+1)%3]],r[S[E]]])){p.push([b,(x+w)%3]);break}}}}return p}function x(t,e,n,r){for(var i=t.tri,o=t.scaled_vert,a=t.adj,s=t.con_edge[n],u=[o[s[0]],o[s[1]]],c=e.length,l=0;l<c;l++){var f=e[c-1-l][0],p=e[c-1-l][1],d=a[f][p],g=a[d].indexOf(f),y=o[i[f][p]],v=o[i[f][(p+1)%3]],_=o[i[d][g]],b=o[i[f][(p+2)%3]];if(h([y,_],[v,b])){m(t,f,d);var x=[i[f][p],i[d][g]],S=[y,_];!(x[0]==s[0]||x[0]==s[1]||x[1]==s[0]||x[1]==s[1])&&h(u,S)||r.push([x[0],x[1]])}}}function S(t,e,n){for(var r=[n[t[0]],n[t[1]]],i=0;i<e.length;i++){if(e[i][0]==t[0]&&e[i][1]==t[1]||e[i][0]==t[1]&&e[i][1]==t[0])return!1;var o=e[i][0]==t[0]||e[i][0]==t[1]||e[i][1]==t[0]||e[i][1]==t[1],a=[n[e[i][0]],n[e[i][1]]];if(!o&&h(a,r))return!1}return!0}e.a=function(t,e,n){if(e||(e=[]),"object"!==i(t)||"FeatureCollection"!==t.type)throw"Argument points must be FeatureCollection";if(!Array.isArray(e))throw"Argument points must be Array of Array";if(n&&"string"!=typeof n)throw"Argument z must be string";var o=!1,s=t.features.reduce(function(t,e){var r=e.geometry.coordinates;return t[0].push(r[0]),t[1].push(r[1]),n?t[2].push(e.properties[n]):3===r.length&&(o=!0,t[2].push(e.geometry.coordinates[2])),t},[[],[],[]]),u=Math.max.apply(null,s[0]),c=Math.min.apply(null,s[0]),l=Math.max.apply(null,s[1]),f=Math.min.apply(null,s[1]),p=u-c,h=(u+c)/2,g=l-f,y=(l+f)/2,m=1.1*Math.max(p,g),v={vert:t.features.map(function(t){var e=t.geometry.coordinates,n=[(e[0]-h)/m+.5,(e[1]-y)/m+.5];return new a(n[0],n[1])})};!function(t,e){var n=t.vert.length;t.con_edge=[];for(var r=0;r<e.length;r++){var i=e[r];if(i[0]<0||i[0]>=n||i[1]<0||i[1]>=n)throw"Vertex indices of edge ".concat(r," need to be non-negative and less than the number of input vertices.");if(i[0]===i[1])throw"Edge ".concat(r," is degenerate!");if(!S(i,t.con_edge,t.vert))throw"Edge ".concat(r," already exists or intersects with an existing edge!");t.con_edge.push([i[0],i[1]])}}(v,e),d(v),_(v);var b=["a","b","c"];return Object(r.b)(v.tri.map(function(t){var e={},n=t.map(function(t,n){var r=[s[0][t],s[1][t]];return void 0!==s[2][t]&&(o?r[2]=s[2][t]:e[b[n]]=s[2][t]),r});return n[3]=n[0],Object(r.g)([n],e)}))}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(13),i=n(50),o=n(27),a=n(20),s=n(37),u=n(10),c=n(68),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var r=n(8);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(29),i=n(53),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports={}},function(t,e,n){var r=n(54),i=n(4),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e,n){var r=n(16);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(71),i=n(56);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(15).f,i=n(10),o=n(3)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(5),i=n(3)("species");t.exports=function(t){return!r(function(){var e=[];return(e.constructor={})[i]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t,e){var n=[][t];return!n||!r(function(){n.call(null,e||function(){throw 1},1)})}},function(t,e,n){"use strict";var r,i,o=n(160),a=RegExp.prototype.exec,s=String.prototype.replace,u=a,c=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(t){var e,n,r,i,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),c&&(e=u.lastIndex),r=a.call(u,t),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),t.exports=u},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),function(t){return!!t}),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===i(t,-1);return(t=n(r(t.split("/"),function(t){return!!t}),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(22))},function(t,e,n){"use strict";var r=n(117),i=n.n(r),o=n(6),a=n(0);e.a=function(t,e){if(e=e||{},!Object(a.d)(e))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(Object(o.a)(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var s=i()(r,n);return s.length>3?Object(a.g)([s]):null}},function(t,e,n){(function(r,i){var o,a;!function(){var s,u=function(){var t=c.toArray(arguments).join(" ");throw new Error(t)},c={getUniqueName:(s=0,function(t){return(t||"__id_")+ ++s}),isFunction:function(t){return"function"==typeof t},isObject:function(t){return t===Object(t)},clamp:function(t,e,n){return t<e?e:t>n?n:t},isArray:function(t){return Array.isArray(t)},isNumber:function(t){return null!=t&&t.constructor==Number},isInteger:function(t){return c.isNumber(t)&&(0|t)===t},isString:function(t){return null!=t&&t.toString===String.prototype.toString},isBoolean:function(t){return!0===t||!1===t},toArray:function(t){var e;c.isArrayLike(t)||u("utils.toArray() requires an array-like object");try{e=Array.prototype.slice.call(t,0)}catch(i){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}return e},isArrayLike:function(t){return!!t&&(!!c.isArray(t)||!c.isString(t)&&(0===t.length||t.length>0))},addslashes:function(t){return(t+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},regexEscape:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},defaults:function(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e]||{};for(var i in r)i in t==!1&&r.hasOwnProperty(i)&&(t[i]=r[i])}return t},extend:function(t){var e,n,r,i=t||{},o=arguments.length;for(n=1;n<o;n++)for(e in r=arguments[n]||{})r.hasOwnProperty(e)&&(i[e]=r[e]);return i},inherit:function(t,e){var n=function(){this.__super__==n&&(this.__super__=e.prototype.__super__,e.apply(this,arguments),delete this.__super__)};n.prototype=e.prototype||e,t.prototype=c.extend(new n,t.prototype),t.prototype.constructor=t,t.prototype.__super__=n}};c.merge=function(t,e){c.isArray(t)&&c.isArray(e)||u("Usage: utils.merge(destArray, srcArray);");for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},c.difference=function(t,e){var n=c.arrayToIndex(e);return t.filter(function(t){return!Object.prototype.hasOwnProperty.call(n,t)})},c.contains=function(t,e){return c.isString(t)?-1!=t.indexOf(e):c.isArrayLike(t)?-1!=c.indexOf(t,e):void u("Expected Array or String argument")},c.some=function(t,e){return t.reduce(function(t,n){return t||e(n)},!1)},c.every=function(t,e){return t.reduce(function(t,n){return t&&e(n)},!0)},c.find=function(t,e,n){var r=t.filter(e,n);return 0===r.length?null:r[0]},c.indexOf=function(t,e,n){n&&u("utils.indexOf() No longer supports property argument");for(var r=e!=e,i=0,o=t.length||0;i<o;i++){if(t[i]===e)return i;if(r&&t[i]!=t[i])return i}return-1},c.range=function(t,e,n){for(var r=[],i=void 0===e?0:e,o=void 0===n?1:n;t--;)r.push(i),i+=o;return r},c.repeat=function(t,e){for(var n,r=[],i=0;i<t;i++)void 0!==(n=e(i))&&(r[i]=n);return r.length>0?r:void 0},c.sum=function(t,e){c.isArrayLike(t)||u("utils.sum() expects an array, received:",t);for(var n,r=0,i=0,o=0,a=t.length;o<a;o++)(n=t[o])?r+=n:isNaN(n)&&i++;return e&&(e.nan=i),r},c.getArrayBounds=function(t){for(var e,n=1/0,r=-1/0,i=0,o=0,a=t.length;o<a;o++)(e=t[o])!=e&&i++,e<n&&(n=e),e>r&&(r=e);return{min:n,max:r,nan:i}},c.uniq=function(t){var e={};return t.reduce(function(t,n){return n in e==!1&&(e[n]=!0,t.push(n)),t},[])},c.pluck=function(t,e){return t.map(function(t){return t[e]})},c.countValues=function(t){return t.reduce(function(t,e){return t[e]=e in t?t[e]+1:1,t},{})},c.indexOn=function(t,e){return t.reduce(function(t,n){return t[n[e]]=n,t},{})},c.groupBy=function(t,e){return t.reduce(function(t,n){var r=n[e];return r in t?t[r].push(n):t[r]=[n],t},{})},c.arrayToIndex=function(t,e){var n=arguments.length>1;return t.reduce(function(t,r){return t[r]=!n||e,t},{})},c.forEach=function(t,e,n){if(!c.isArrayLike(t))throw new Error("#forEach() takes an array-like argument. "+t);for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r)},c.forEachProperty=function(t,e,n){Object.keys(t).forEach(function(r){e.call(n,t[r],r)})},c.initializeArray=function(t,e){for(var n=0,r=t.length;n<r;n++)t[n]=e;return t},c.replaceArray=function(t,e){t.splice(0,t.length);for(var n=0,r=e.length;n<r;n++)t.push(e[n])},c.repeatString=function(t,e){for(var n="",r=0;r<e;r++)n+=t;return n},c.pluralSuffix=function(t){return 1!=t?"s":""},c.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},c.lpad=function(t,e,n){return n=n||" ",t=String(t),c.repeatString(n,e-t.length)+t},c.rpad=function(t,e,n){return n=n||" ",(t=String(t))+c.repeatString(n,e-t.length)},c.trim=function(t){return c.ltrim(c.rtrim(t))};var l=/^\s+/;c.ltrim=function(t){return t.replace(l,"")};var f=/\s+$/;function p(){this.mx=this.my=1,this.bx=this.by=0}function h(){arguments.length>0&&this.setBounds.apply(this,arguments)}function d(t,e){c.isNumber(t)?t=new ArrayBuffer(t):"function"==typeof y&&t instanceof y&&(t=d.toArrayBuffer(t)),t instanceof ArrayBuffer==0&&u("BinArray constructor takes an integer, ArrayBuffer or Buffer argument"),this._buffer=t,this._bytes=new Uint8Array(t),this._view=new DataView(t),this._idx=0,this._le=!1!==e}function g(t,e){var n,r,i,o=e[1],a=e[2],s=e[3]?parseInt(e[3].substr(1)):void 0,u=e[4],l="s"==u,f="x"==u||"X"==u,p="d"==u||"i"==u,h=!l,d="",g=0,y=!1,m=!1;if(l?n=String(t):f?(n=t.toString(16),"X"==u&&(n=n.toUpperCase())):h&&("-"==(n=c.numToStr(t,p?0:s))[0]&&(m=!0,n=n.substr(1)),y=0==parseFloat(n),-1==o.indexOf("'")&&-1==o.indexOf(",")||(n=c.addThousandsSep(n)),y||(m?d="":-1!=o.indexOf("+")&&(d="+"))),a){var v=n.length+d.length,_=parseInt(a,10);v<_&&(g=_-v,r=-1==o.indexOf("0")?" ":"0",i=c.repeatString(r,g))}return n=0==g?d+n:"0"==r?d+i+n:i+d+n}c.rtrim=function(t){return t.replace(f,"")},c.addThousandsSep=function(t){for(var e="",n="-"==t[0]?1:0,r=t.indexOf("."),i=t.length,o=(-1==r?i:r)-3;o>n;)e=","+t.substring(o,i)+e,i=o,o-=3;return t.substring(0,i)+e},c.numToStr=function(t,e){return e>=0?t.toFixed(e):String(t)},c.formatNumber=function(t,e,n,r){var i;return isNaN(t)?i=n||"-":(i=c.numToStr(t,e),i=c.addThousandsSep(i),r&&parseFloat(i)>0&&(i="+"+i)),i},p.prototype.isNull=function(){return!this.mx||!this.my||isNaN(this.bx)||isNaN(this.by)},p.prototype.invert=function(){var t=new p;return t.mx=1/this.mx,t.my=1/this.my,t.bx=-this.bx/this.mx,t.by=-this.by/this.my,t},p.prototype.transform=function(t,e,n){return(n=n||[])[0]=t*this.mx+this.bx,n[1]=e*this.my+this.by,n},p.prototype.toString=function(){return JSON.stringify(c.extend({},this))},h.prototype.toString=function(){return JSON.stringify({xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax})},h.prototype.toArray=function(){return this.hasBounds()?[this.xmin,this.ymin,this.xmax,this.ymax]:[]},h.prototype.hasBounds=function(){return this.xmin<=this.xmax&&this.ymin<=this.ymax},h.prototype.sameBounds=h.prototype.equals=function(t){return t&&this.xmin===t.xmin&&this.xmax===t.xmax&&this.ymin===t.ymin&&this.ymax===t.ymax},h.prototype.width=function(){return this.xmax-this.xmin||0},h.prototype.height=function(){return this.ymax-this.ymin||0},h.prototype.area=function(){return this.width()*this.height()||0},h.prototype.empty=function(){return this.xmin=this.ymin=this.xmax=this.ymax=void 0,this},h.prototype.setBounds=function(t,e,n,r){return 1==arguments.length&&(c.isArrayLike(t)?(e=t[1],n=t[2],r=t[3],t=t[0]):(e=t.ymin,n=t.xmax,r=t.ymax,t=t.xmin)),this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=r,(t>n||e>r)&&this.update(),this},h.prototype.centerX=function(){return.5*(this.xmin+this.xmax)},h.prototype.centerY=function(){return.5*(this.ymax+this.ymin)},h.prototype.containsPoint=function(t,e){return t>=this.xmin&&t<=this.xmax&&e<=this.ymax&&e>=this.ymin},h.prototype.containsBufferedPoint=h.prototype.containsCircle=function(t,e,n){return t+n>this.xmin&&t-n<this.xmax&&e-n<this.ymax&&e+n>this.ymin},h.prototype.intersects=function(t){return t.xmin<=this.xmax&&t.xmax>=this.xmin&&t.ymax>=this.ymin&&t.ymin<=this.ymax},h.prototype.contains=function(t){return t.xmin>=this.xmin&&t.ymax<=this.ymax&&t.xmax<=this.xmax&&t.ymin>=this.ymin},h.prototype.shift=function(t,e){this.setBounds(this.xmin+t,this.ymin+e,this.xmax+t,this.ymax+e)},h.prototype.padBounds=function(t,e,n,r){this.xmin-=t,this.ymin-=e,this.xmax+=n,this.ymax+=r},h.prototype.scale=function(t,e){var n=.5*(this.xmax-this.xmin),r=.5*(this.ymax-this.ymin),i=t-1,o=void 0===e?i:e-1;this.xmin-=n*i,this.ymin-=r*o,this.xmax+=n*i,this.ymax+=r*o},h.prototype.cloneBounds=h.prototype.clone=function(){return new h(this.xmin,this.ymin,this.xmax,this.ymax)},h.prototype.clearBounds=function(){this.setBounds(new h)},h.prototype.mergePoint=function(t,e){void 0===this.xmin?this.setBounds(t,e,t,e):(t<this.xmin?this.xmin=t:t>this.xmax&&(this.xmax=t),e<this.ymin?this.ymin=e:e>this.ymax&&(this.ymax=e))},h.prototype.fillOut=function(t,e,n){arguments.length<3&&(e=.5,n=.5);var r,i=this.width(),o=this.height(),a=i/o;return isNaN(t)||t<=0||(a<t?(r=o*t-i,this.xmin-=(1-e)*r,this.xmax+=e*r):(r=i/t-o,this.ymin-=(1-n)*r,this.ymax+=n*r)),this},h.prototype.update=function(){var t;this.xmin>this.xmax&&(t=this.xmin,this.xmin=this.xmax,this.xmax=t),this.ymin>this.ymax&&(t=this.ymin,this.ymin=this.ymax,this.ymax=t)},h.prototype.transform=function(t){return this.xmin=this.xmin*t.mx+t.bx,this.xmax=this.xmax*t.mx+t.bx,this.ymin=this.ymin*t.my+t.by,this.ymax=this.ymax*t.my+t.by,this.update(),this},h.prototype.getTransform=function(t,e){var n=new p;return n.mx=t.width()/this.width()||1,n.bx=t.xmin-n.mx*this.xmin,e?(n.my=-t.height()/this.height()||1,n.by=t.ymax-n.my*this.ymin):(n.my=t.height()/this.height()||1,n.by=t.ymin-n.my*this.ymin),n},h.prototype.mergeCircle=function(t,e,n){n<0&&(n=-n),this.mergeBounds([t-n,e-n,t+n,e+n])},h.prototype.mergeBounds=function(t){var e,n,r,i;return t instanceof h?(e=t.xmin,n=t.ymin,r=t.xmax,i=t.ymax):4==arguments.length?(e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3]):4==t.length?(e=t[0],n=t[1],r=t[2],i=t[3]):u("Bounds#mergeBounds() invalid argument:",t),void 0===this.xmin?this.setBounds(e,n,r,i):(e<this.xmin&&(this.xmin=e),n<this.ymin&&(this.ymin=n),r>this.xmax&&(this.xmax=r),i>this.ymax&&(this.ymax=i)),this},c.sortOn=function(t){for(var e=[],n=1;n<arguments.length;n+=2)e.push(c.getKeyComparator(arguments[n],arguments[n+1]));return t.sort(function(t,n){for(var r=0,i=0,o=e.length;i<o&&0===r;)r=e[i](t,n),i++;return r}),t},c.genericSort=function(t,e){var n=c.getGenericComparator(e);return Array.prototype.sort.call(t,n),t},c.sortOnKey=function(t,e,n){var r=c.getGenericComparator(!1!==n);t.sort(function(t,n){return r(e(t),e(n))})},c.sortOnKey2=function(t,e,n){c.sortArrayByKeys(t,t.map(e),n)},c.sortArrayByKeys=function(t,e,n){var r=c.getSortedIds(e,n);c.reorderArray(t,r)},c.getSortedIds=function(t,e){var n=c.range(t.length);return c.sortArrayIndex(n,t,e),n},c.sortArrayIndex=function(t,e,n){var r=c.getGenericComparator(n);t.sort(function(t,n){var i=r(e[t],e[n]);return i>0||0===i&&t>n?1:-1})},c.reorderArray=function(t,e){for(var n=e.length,r=[],i=0;i<n;i++){var o=e[i];(o<0||o>=n)&&u("Out-of-bounds array idx"),r[i]=t[o]}c.replaceArray(t,r)},c.getKeyComparator=function(t,e){var n=c.getGenericComparator(e);return function(e,r){return n(e[t],r[t])}},c.getGenericComparator=function(t){return t=!1!==t,function(e,n){var r=0;return null==n?r=null==e?0:-1:null==e?r=1:e<n?r=t?-1:1:e>n?r=t?1:-1:e!=e?r=1:n!=n&&(r=-1),r}},c.quicksort=function(t,e){return c.quicksortPartition(t,0,t.length-1),!1===e&&Array.prototype.reverse.call(t),t},c.quicksortPartition=function(t,e,n){for(var r,i,o=e,a=n;o<n;){for(r=t[e+n>>1];o<=a;){for(;t[o]<r;)o++;for(;t[a]>r;)a--;o<=a&&(i=t[o],t[o]=t[a],t[a]=i,o++,a--)}e<a&&c.quicksortPartition(t,e,a),e=o,a=n}},c.findRankByValue=function(t,e){if(isNaN(e))return t.length;for(var n=1,r=0,i=t.length;r<i;r++)e>t[r]&&n++;return n},c.findValueByPct=function(t,e){var n=Math.ceil((1-e)*t.length);return c.findValueByRank(t,n)},c.findValueByRank=function(t,e){(!t.length||e<1||e>t.length)&&u("[findValueByRank()] invalid input");for(var n,r,i,o,a=(e=c.clamp(0|e,1,t.length))-1,s=0,l=t.length-1;s<l;){i=t[a],n=s,r=l;do{for(;t[n]<i;)n++;for(;i<t[r];)r--;n<=r&&(o=t[n],t[n]=t[r],t[r]=o,n++,r--)}while(n<=r);r<a&&(s=n),a<n&&(l=r)}return t[a]},c.findMedian=function(t){var e=t.length,n=Math.floor(e/2)+1,r=c.findValueByRank(t,n);return 0==(1&e)&&(r=(r+c.findValueByRank(t,n-1))/2),r},c.mean=function(t){for(var e,n=0,r=NaN,i=0,o=t.length;i<o;i++)e=t[i],isNaN(e)||(r=1==++n?e:e/n+(n-1)/n*r);return r},d.bufferToUintArray=function(t,e){return 4==e?new Uint32Array(t):2==e?new Uint16Array(t):1==e?new Uint8Array(t):void u("BinArray.bufferToUintArray() invalid word length:",e)},d.uintSize=function(t){return 1&t||2&t||4},d.bufferCopy=function(t,e,n,r,i){r=r||0,i=i||n.byteLength-r,t.byteLength-e<i&&u("Buffer overflow; tried to write:",i);for(var o=Math.min(d.uintSize(i),d.uintSize(r),d.uintSize(t.byteLength),d.uintSize(e),d.uintSize(n.byteLength)),a=d.bufferToUintArray(n,o),s=d.bufferToUintArray(t,o),c=i/o,l=r/o,f=e/o;c--;)s[f++]=a[l++];return i},d.toArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t[i];return n},d.bufferSize=function(t){return t instanceof ArrayBuffer?t.byteLength:0|t.length},c.buffersAreIdentical=function(t,e){var n=d.bufferSize(t);if(n!=d.bufferSize(e))return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0},d.prototype={size:function(){return this._buffer.byteLength},littleEndian:function(){return this._le=!0,this},bigEndian:function(){return this._le=!1,this},buffer:function(){return this._buffer},bytesLeft:function(){return this._buffer.byteLength-this._idx},skipBytes:function(t){return this._idx+=t+0,this},readUint8:function(){return this._bytes[this._idx++]},writeUint8:function(t){return this._bytes[this._idx++]=t,this},readInt8:function(){return this._view.getInt8(this._idx++)},writeInt8:function(t){return this._view.setInt8(this._idx++,t),this},readUint16:function(){var t=this._view.getUint16(this._idx,this._le);return this._idx+=2,t},writeUint16:function(t){return this._view.setUint16(this._idx,t,this._le),this._idx+=2,this},readUint32:function(){var t=this._view.getUint32(this._idx,this._le);return this._idx+=4,t},writeUint32:function(t){return this._view.setUint32(this._idx,t,this._le),this._idx+=4,this},readInt32:function(){var t=this._view.getInt32(this._idx,this._le);return this._idx+=4,t},writeInt32:function(t){return this._view.setInt32(this._idx,t,this._le),this._idx+=4,this},readFloat64:function(){var t=this._view.getFloat64(this._idx,this._le);return this._idx+=8,t},writeFloat64:function(t){return this._view.setFloat64(this._idx,t,this._le),this._idx+=8,this},readFloat64Array:function(t){var e,n=8*t,r=this._idx,i=this._buffer;if(r%8==0)e=new Float64Array(i,r,t);else if(i.slice)e=new Float64Array(i.slice(r,r+n));else{var o=new ArrayBuffer(n);d.bufferCopy(o,0,i,r,n),e=new Float64Array(o)}return this._idx+=n,e},readUint32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.readUint32());return e},peek:function(t){return this._view.getUint8(t>=0?t:this._idx)},position:function(t){return null!=t?(this._idx=t,this):this._idx},readCString:function(t,e){for(var n="",r=t>=0?t:this.bytesLeft();r>0;){var i=this.readUint8();if(r--,0==i)break;if(i>127&&e){n=null;break}n+=String.fromCharCode(i)}return t>0&&r>0&&this.skipBytes(r),n},writeString:function(t,e){var n,r=0,i=t.length;e&&(i=Math.min(i,e));for(var o=0;o<i;o++)(n=t.charCodeAt(o))>127&&(n="?".charCodeAt(0)),this.writeUint8(n),r++;return r},writeCString:function(t,e){var n=e?e-1:null,r=this.writeString(t,n);if(this.writeUint8(0),r++,e)for(;r<e;)this.writeUint8(0),r++;return this},writeBuffer:function(t,e,n){return this._idx+=d.bufferCopy(this._buffer,this._idx,t,n,e),this}},c.format=function(t){var e=c.formatter(t),n=e.apply(null,Array.prototype.slice.call(arguments,1));return n},c.formatter=function(t){for(var e,n=/%([\',+0]*)([1-9]?)((?:\.[1-9])?)([sdifxX%])/g,r=[],i=[],o=0,a="",s=n.exec(t);s;)e=t.substring(o,n.lastIndex-s[0].length),"%%"==s[0]?a+=e+"%":(r.push(a+e),a="",i.push(s)),o=n.lastIndex,s=n.exec(t);return r.push(a+t.substr(o)),function(){var e=r[0],n=arguments.length;n!=i.length&&u("[format()] Data does not match format string; format:",t,"data:",arguments);for(var o=0;o<n;o++)e+=g(arguments[o],i[o])+r[o+1];return e}};var y=n(25).Buffer;c.createBuffer=function(t,e){return c.isInteger(t)?y.allocUnsafe?y.allocUnsafe(t):new y(t):y.from&&y.allocUnsafe?y.from(t,e):new y(t,e)},c.wildcardToRegExp=function(t){var e=t.split("*").map(function(t){return c.regexEscape(t)}).join(".*");return new RegExp("^"+e+"$")},c.expandoBuffer=function(t,e){var n,r=0,i=e>=1?e:1.2;return function(e){return e>r&&(r=Math.ceil(e*i),n=new t(r)),n}},c.copyElements=function(t,e,n,r,i,o){t===n&&r>e&&u("copy error");var a=1,s=0;o&&(a=-1,s=i-1);for(var c=0;c<i;c++,s+=a)n[c+r]=t[e+s]},c.extendBuffer=function(t,e,n){var r=Math.max(t.length,e),i=n||t.length,o=new t.constructor(r);return c.copyElements(t,0,o,0,i),o},c.mergeNames=function(t,e){var n;return t&&e&&(n=c.findStringPrefix(t,e).replace(/[-_]$/,"")),n||""},c.findStringPrefix=function(t,e){for(var n=0,r=t.length;n<r&&t[n]===e[n];n++);return t.substr(0,n)},c.isFiniteNumber=function(t){return 0===t||!!t&&t.constructor==Number&&t!==1/0&&t!==-1/0},c.isNonNegNumber=function(t){return 0===t||t>0&&t.constructor==Number},c.parsePercent=function(t){var e,n=String(t);return(e=n.indexOf("%")>0?Number(n.replace("%",""))/100:Number(n))>=0&&e<=1||b(c.format("Invalid percentage: %s",n)),e},c.formatVersionedName=function(t,e){var n=String(e);return/[0-9]$/.test(t)&&(n="-"+n),t+n},c.uniqifyNames=function(t,e){var n=c.countValues(t),r=e||c.formatVersionedName,i={};return Object.keys(n).forEach(function(t){n[t]>1&&(i[t]=!0)}),t.map(function(t){for(var e,n=1,o=t;o in i;){if(!(e=r(t,n))||e==o)throw new Error("Naming error");o=e,n++}return i[o]=!0,o})};var m={},v={VERSION:"0.4.130",LOGGING:!1,context:{DEBUG:!1,QUIET:!1,VERBOSE:!1,defs:{},input_files:[]}},_={stack:[],start:function(){_.stack.push(+new Date)},stop:function(t){var e=+new Date-_.stack.pop(),n=e+"ms";return t&&(n=t+" "+n),E(n),e}};function u(){v.error.apply(null,c.toArray(arguments))}function b(){v.stop.apply(null,c.toArray(arguments))}function x(t){var e=new Error(t);return e.name="UserError",e}function S(t){var e=c.toArray(t),n=v.getStateVar("current_command");return n&&"help"!=n&&e.unshift("["+n+"]"),e}function w(){v.message.apply(null,S(arguments))}function E(){v.getStateVar("VERBOSE")&&v.message.apply(null,S(arguments))}function I(){v.getStateVar("DEBUG")&&v.logArgs(arguments)}function C(t){return t>=0?t:~t}new Float64Array(1),v.runningInBrowser=function(){return!!m.gui},v.getStateVar=function(t){return v.context[t]},v.setStateVar=function(t,e){v.context[t]=e},m.enableLogging=function(){return v.LOGGING=!0,m},m.printError=function(t){var e;if(c.isString(t)&&(t=new x(t)),!v.LOGGING||"UserError"!=t.name)throw t;e=t.message,/Error/.test(e)||(e="Error: "+e),console.error(S([e]).join(" ")),v.message("Run mapshaper -h to view help")},v.error=function(){var t=c.toArray(arguments).join(" ");throw new Error(t)},v.stop=function(){throw new x(v.formatLogArgs(arguments))},v.message=function(){v.logArgs(arguments)},v.formatLogArgs=function(t){return c.toArray(t).join(" ")},v.formatStringsAsGrid=function(t){var e=t.reduce(function(t,e){return Math.max(t,e.length)},0)+2,n=Math.floor(80/e)||1;return t.reduce(function(t,r,i){var o=i%n;return i>0&&0===o&&(t+="\n"),o<n-1&&(r=c.rpad(r,e-2," ")),t+"  "+r},"")},v.logArgs=function(t){v.LOGGING&&!v.getStateVar("QUIET")&&c.isArrayLike(t)&&(console.error||console.log).call(console,v.formatLogArgs(t))},v.getWorldBounds=function(t){return[-180+(t=c.isFiniteNumber(t)?t:1e-10),-90+t,180-t,90-t]},v.probablyDecimalDegreeBounds=function(t){return Y(v.getWorldBounds(-1),t instanceof h?t.toArray():t)},v.clampToWorldBounds=function(t){var e=t instanceof h?t.toArray():t;return(new h).setBounds(Math.max(e[0],-180),Math.max(e[1],-90),Math.min(e[2],180),Math.min(e[3],90))},v.layerHasGeometry=function(t){return v.layerHasPaths(t)||v.layerHasPoints(t)},v.layerHasPaths=function(t){return("polygon"==t.geometry_type||"polyline"==t.geometry_type)&&v.layerHasNonNullShapes(t)},v.layerHasPoints=function(t){return"point"==t.geometry_type&&v.layerHasNonNullShapes(t)},v.layerHasNonNullShapes=function(t){return c.some(t.shapes||[],function(t){return!!t})},v.requireDataFields=function(t,e){t||b("Missing attribute data");var n=t.getFields(),r=c.difference(e,n);r.length>0&&b("Table is missing one or more fields:\n",r,"\nExisting fields:","\n"+v.formatStringsAsGrid(n))},v.layerTypeMessage=function(t,e,n){var r;return n&&c.isString(n)?r=n:(r=e+", ",t&&t.geometry_type?r+="received a "+t.geometry_type+" layer":r+="received a layer with no geometry"),r},v.requirePointLayer=function(t,e){t&&"point"===t.geometry_type||b(v.layerTypeMessage(t,"Expected a point layer",e))},v.requirePolylineLayer=function(t,e){t&&"polyline"===t.geometry_type||b(v.layerTypeMessage(t,"Expected a polyline layer",e))},v.requirePolygonLayer=function(t,e){t&&"polygon"===t.geometry_type||b(v.layerTypeMessage(t,"Expected a polygon layer",e))},v.requirePathLayer=function(t,e){t&&v.layerHasPaths(t)||b(v.layerTypeMessage(t,"Expected a polygon or polyline layer",e))};var P=6378137,N=Math.PI/180;function A(t,e,n,r,i,o){var a=t-r,s=e-i,u=n-o;return Math.sqrt(a*a+s*s+u*u)}function T(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function O(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function M(t,e,n,r,i,o){var a=t-r,s=e-i,u=n-o;return a*a+s*s+u*u}function L(t){for(var e=2*Math.PI;t<0;)t+=e;for(;t>=e;)t-=e;return t}function R(t,e,n,r){var i=Math.PI/180;t*=i,n*=i,e*=i,r*=i;var o=Math.sin(n-t)*Math.cos(r),a=Math.cos(e)*Math.sin(r)-Math.sin(e)*Math.cos(r)*Math.cos(n-t);return Math.atan2(o,a)}function D(t,e,n,r){var i=A(0,0,0,t,e,n),o=Math.asin(n/i)/N,a=Math.atan2(e/i,t/i)/N;r[0]=a,r[1]=o}function F(t,e,n){var r;t*=N,e*=N,r=Math.cos(e),n[0]=Math.cos(t)*r*P,n[1]=Math.sin(t)*r*P,n[2]=Math.sin(e)*P}function k(t,e,n,r){var i=n-t,o=r-e,a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e)*Math.cos(r)*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function B(t,e,n,r){var i=Math.PI/180;return k(t*i,e*i,n*i,r*i)*P}function j(t,e,n,r,i,o){return Math.abs(((e-o)*(n-i)+(r-o)*(i-t))/2)}function G(t,e,n,r,i,o){var a=t*r-t*o+n*o-n*e+i*e-i*r;return a*a}function U(t,e,n,r,i,o){var a=O(t,e,n,r)*O(n,r,i,o),s=0;return a>0&&((s=((t-n)*(i-n)+(e-r)*(o-r))/a)>1?s=1:s<-1&&(s=-1)),s}function q(t,e,n,r,i,o,a,s,u){var c=A(t,e,n,r,i,o)*A(r,i,o,a,s,u),l=0;return c>0&&((l=((t-r)*(a-r)+(e-i)*(s-i)+(n-o)*(u-o))/c)>1?l=1:l<-1&&(l=-1)),l}function z(t,e,n,r,i,o,a,s,u){return.5*Math.sqrt(G(t,e,r,i,a,s)+G(t,n,r,o,a,u)+G(e,n,i,o,s,u))}function V(t,e,n){var r;if(0===n)r=t;else if(t>=e+n)r=e;else if(e>=t+n)r=t;else{var i=t+n-e;r=t-i*i/n*.25}return r<0&&(r=0),r}function Y(t,e){return t[0]<=e[0]&&t[2]>=e[2]&&t[1]<=e[1]&&t[3]>=e[3]}v.calcArcBounds=function(t,e,n,r){var i,o,a,s,u,c,l=0|n,f=isNaN(r)?t.length-l:r+l;for(f>0&&(a=u=t[l],s=c=e[l]),l++;l<f;l++)(i=t[l])<a&&(a=i),i>u&&(u=i),(o=e[l])<s&&(s=o),o>c&&(c=o);return[a,s,u,c]},v.reversePathCoords=function(t,e,n){for(var r,i=e,o=e+n-1;i<o;)r=t[i],t[i]=t[o],t[o]=r,i++,o--};var X,J,H={R:P,D2R:N,degreesToMeters:function(t){return t*N*P},distanceSq:T,distance2D:O,distance3D:A,innerAngle:function(t,e,n,r,i,o){var a,s=O(t,e,n,r),u=O(n,r,i,o);return 0===s||0===u?0:(a=((t-n)*(i-n)+(e-r)*(o-r))/(s*u))>=1-1e-14?0:a<=1e-14-1?Math.PI:Math.acos(a)},innerAngle2:function(t,e,n,r,i,o){var a=Math.atan2(e-r,t-n),s=Math.atan2(o-r,i-n),u=Math.abs(a-s);return u>Math.PI&&(u=2*Math.PI-u),u},signedAngle:function(t,e,n,r,i,o){if(t==n&&e==r||n==i&&r==o)return NaN;var a=t-n,s=e-r,u=i-n,c=o-r,l=a*u+s*c,f=a*c-s*u;return L(Math.atan2(f,l))},bearing2D:function(t,e,n,r){var i=Math.PI/2-Math.atan2(r-e,n-t);return i>Math.PI?i-2*Math.PI:i},bearing:R,signedAngleSph:function(t,e,n,r,i,o){if(t==n&&e==r||n==i&&r==o)return NaN;var a=R(n,r,t,e),s=R(n,r,i,o);return L(2*Math.PI+a-s)},standardAngle:L,convLngLatToSph:function(t,e,n,r,i){for(var o=[],a=0,s=t.length;a<s;a++)F(t[a],e[a],o),n[a]=o[0],r[a]=o[1],i[a]=o[2]},lngLatToXYZ:F,xyzToLngLat:D,sphericalDistance:k,greatCircleDistance:B,pointSegDistSq:function(t,e,n,r,i,o){return V(T(t,e,n,r),T(t,e,i,o),T(n,r,i,o))},pointSegDistSq3D:function(t,e,n,r,i,o,a,s,u){return V(M(t,e,n,r,i,o),M(t,e,n,a,s,u),M(r,i,o,a,s,u))},innerAngle3D:function(t,e,n,r,i,o,a,s,u){var c,l=A(t,e,n,r,i,o),f=A(r,i,o,a,s,u);return 0===l||0===f?0:(c=((t-r)*(a-r)+(e-i)*(s-i)+(n-o)*(u-o))/(l*f))>=1?0:c<=-1?Math.PI:Math.acos(c)},triangleArea:j,triangleArea3D:z,cosine:U,cosine3D:q};function W(t,e){this._i=0,this._n=0,this._inc=1,this._xx=t,this._yy=e,this.i=0,this.x=0,this.y=0}function $(t,e,n){var r=0,i=0,o=1,a=0;this.init=function(t,e,n,s){return r=s||0,n?(i=t,o=1,a=t+e):(i=t+e-1,o=-1,a=t-1),this},this.hasNext=function(){var s=n,u=i,c=u,l=r,f=a,p=o;if(u==f)return!1;do{c+=p}while(c!=f&&s[c]<l);return i=c,this.x=t[u],this.y=e[u],this.i=u,!0}}function K(t){this._arcs=t,this._i=0,this._n=0,this.x=0,this.y=0}function Z(){var t,e,n,r,i,o,a,s,l,f,p,d,g=0;function y(o,a,c){var f=o.length;o instanceof Array&&(o=new Uint32Array(o)),a instanceof Array&&(a=new Float64Array(a)),c instanceof Array&&(c=new Float64Array(c)),t=a,e=c,r=o,i=null,g=0,l=null,n=new Uint32Array(f);for(var p=0,h=0;h<f;h++)n[h]=p,p+=o[h];return p==t.length&&t.length==e.length||u("ArcCollection#initXYData() Counting error"),_(),s=new W(t,e),this}function m(n){n?(n.length!=t.length&&u("ArcCollection#initZData() mismatched arrays"),n instanceof Array&&(n=new Float64Array(n)),l=new $(t,e,i=n)):(i=null,g=0,l=null)}function _(){var n=function(t,e,n){for(var r,i,o,a=n.length,s=new Float64Array(4*a),u=new h,c=0,l=0;l<a;l++)(r=n[l])>0&&(i=4*l,o=v.calcArcBounds(t,e,c,r),s[i++]=o[0],s[i++]=o[1],s[i++]=o[2],s[i]=o[3],c+=r,u.mergeBounds(o));return{bb:s,bounds:u}}(t,e,r);o=n.bb,a=n.bounds}function b(){var t=i,e=g;if(!t||!e)return this.getPointCount();for(var n=0,r=0,o=t.length;r<o;r++)t[r]>=e&&n++;return n}function x(){for(var n,o=b(),a=r.length,s=new Float64Array(o),c=new Float64Array(o),l=new Float64Array(o),f=new Int32Array(a),p=0,h=0,d=0;d<a;d++){n=0;for(var y=p+r[d];p<y;p++)i[p]>=g&&(s[h]=t[p],c[h]=e[p],l[h]=i[p],h++,n++);n<2&&u("Collapsed arc"),f[d]=n}return{xx:s,yy:c,zz:l,nn:f}}1==arguments.length?(f=arguments[0],p=[],d=[],y(f.map(function(t){for(var e=t?t.length:0,n=0;n<e;n++)p.push(t[n][0]),d.push(t[n][1]);return e}),p,d)):3==arguments.length?y.apply(this,arguments):u("ArcCollection() Invalid arguments"),this.updateVertexData=function(t,e,n,r){y(t,e,n),m(r||null)},this.getVertexData=function(){return{xx:t,yy:e,zz:i,bb:o,nn:r,ii:n}},this.getCopy=function(){var n=new Z(new Int32Array(r),new Float64Array(t),new Float64Array(e));return i&&(n.setThresholds(new Float64Array(i)),n.setRetainedInterval(g)),n},this.getFilteredCopy=function(){if(!i||0===g)return this.getCopy();var t=x(),e=new Z(t.nn,t.xx,t.yy);return e.setThresholds(t.zz),e},this.toArray=function(){var t=[];return this.forEach(function(e){for(var n=[];e.hasNext();)n.push([e.x,e.y]);t.push(n)}),t},this.toJSON=function(){return this.toArray()},this.forEachArcSegment=function(o,a){for(var s=o>=0,u=s?o:~o,c=this.getRetainedInterval(),l=r[u],f=s?1:-1,p=s?n[u]:n[u]+l-1,h=p,d=t,g=e,y=i,m=0,v=1;v<l;v++)h+=f,(0===c||y[h]>=c)&&(a(p,h,d,g),p=h,m++);return m},this.forEachSegment=function(t){for(var e=0,n=0,r=this.size();n<r;n++)e+=this.forEachArcSegment(n,t);return e},this.transformPoints=function(n){for(var i,o=t,a=e,s=-1,u=0,c=0,l=o.length;c<l;c++,u--){for(;0===u;)u=r[++s];(i=n(o[c],a[c],s))&&(o[c]=i[0],a[c]=i[1])}_()},this.forEach=function(t){for(var e=0,n=this.size();e<n;e++)t(this.getArcIter(e),e)},this.forEach2=function(o){for(var a=0,s=this.size();a<s;a++)o(n[a],r[a],t,e,i,a)},this.forEach3=function(o){for(var a,s,u,c,l,f=0,p=this.size();f<p;f++)s=(a=n[f])+r[f],u=t.subarray(a,s),c=e.subarray(a,s),i&&(l=i.subarray(a,s)),o(u,c,l,f)},this.filter=function(t){var e=function(e){return t(this.getArcIter(e),e)}.bind(this);return this.deleteArcs(e)},this.deleteArcs=function(o){for(var a=this.size(),s=new Int32Array(a),u=0,l=0;l<a;l++)o(l)?(s[l]=u++,r[l]):s[l]=-1;return u<a&&function(o){for(var a,s,u=0,l=0,f=c.copyElements,p=0,h=o.length;p<h;p++)a=o[p],s=r[p],a>-1&&(f(t,n[p],t,u,s),f(e,n[p],e,u,s),i&&f(i,n[p],i,u,s),r[a]=s,u+=s,l++);y(r.subarray(0,l),t.subarray(0,u),e.subarray(0,u)),i&&m(i.subarray(0,u))}(s),s},this.dedupCoords=function(){for(var n,o,a=0,s=0,u=0,c=this.size(),l=i;a<c;)n=r[a],o=v.dedupArcCoords(s,u,n,t,e,l),r[a]=o,s+=n,u+=o,a++;return s>u&&(y(r,t.subarray(0,u),e.subarray(0,u)),l&&m(l.subarray(0,u))),s-u},this.getVertex=function(n,r){var i=this.indexOfVertex(n,r);return{x:t[i],y:e[i]}},this.indexOfVertex=function(t,e){var i=t<0?~t:t,o=r[i];return e<0&&(e=o+e),i!=t&&(e=o-e-1),(e<0||e>=o)&&u("[ArcCollection] out-of-range vertex id"),n[i]+e},this.pointIsEndpoint=function(t){for(var e=n,i=r,o=0,a=e.length;o<a;o++)if(t===e[o]||t===e[o]+i[o]-1)return!0;return!1},this.arcIsClosed=function(n){var r=this.indexOfVertex(n,0),i=this.indexOfVertex(n,-1);return r!=i&&t[r]==t[i]&&e[r]==e[i]},this.arcIsLollipop=function(n){var r,i;return!(this.getArcLength(n)<=2||!this.arcIsClosed(n))&&(r=this.indexOfVertex(n,1),i=this.indexOfVertex(n,-2),t[r]==t[i]&&e[r]==e[i])},this.arcIsDegenerate=function(t){for(var e,n,r=this.getArcIter(t),i=0;r.hasNext();){if(i>0&&(e!=r.x||n!=r.y))return!1;e=r.x,n=r.y,i++}return!0},this.getArcLength=function(t){return r[C(t)]},this.getArcIter=function(t){var e=t>=0,o=e?t:~t,a=i&&g?l:s;return o>=r.length&&u("#getArcId() out-of-range arc id:",t),a.init(n[o],r[o],e,g)},this.getShapeIter=function(t){return new K(this).init(t)},this.setThresholds=function(t){var e=this.getPointCount(),n=null;return t&&(t.length==e?n=t:t.length==this.size()?n=function(t,e){var n=new Float64Array(e),r=0;t.forEach(function(t){for(var e=0,i=t.length;e<i;r++,e++)n[r]=t[e]}),r!=e&&u("Mismatched thresholds");return n}(t,e):u("Invalid threshold data")),m(n),this},this.flatten=function(){if(g>0){var t=x();this.updateVertexData(t.nn,t.xx,t.yy),g=0}else i=null},this.getRetainedInterval=function(){return g},this.setRetainedInterval=function(t){return g=t,this},this.getRetainedPct=function(){return this.getPctByThreshold(g)},this.setRetainedPct=function(t){return t>=1?g=0:(g=this.getThresholdByPct(t),g=v.clampIntervalByPct(g,t)),this},this.getRemovableThresholds=function(t){i||u("[arcs] Missing simplification data.");for(var e,n=1|t,r=new Float64Array(Math.ceil(i.length/n)),o=0,a=0,s=this.getPointCount();o<s;o+=n)(e=i[o])!=1/0&&(r[a++]=e);return r.subarray(0,a)},this.getArcThresholds=function(t){t>=0&&t<this.size()||u("[arcs] Invalid arc id:",t);var e=n[t],o=e+r[t];return i.subarray(e,o)},this.getPctByThreshold=function(t,e){var n,r,i;return t>0?(n=this.getRemovableThresholds(e),r=c.findRankByValue(n,t),i=n.length>0?1-(r-1)/n.length:1):i=1,i},this.getThresholdByPct=function(t,e){return v.getThresholdByPct(t,this,e)},this.arcIntersectsBBox=function(t,e){var n=o,r=4*t;return n[r]<=e[2]&&n[r+2]>=e[0]&&n[r+3]>=e[1]&&n[r+1]<=e[3]},this.arcIsContained=function(t,e){var n=o,r=4*t;return n[r]>=e[0]&&n[r+2]<=e[2]&&n[r+1]>=e[1]&&n[r+3]<=e[3]},this.arcIsSmaller=function(t,e){var n=o,r=4*t;return n[r+2]-n[r]<e&&n[r+3]-n[r+1]<e},this.isPlanar=function(){return!v.probablyDecimalDegreeBounds(this.getBounds())},this.size=function(){return n&&n.length||0},this.getPointCount=function(){return t&&t.length||0},this.getFilteredPointCount=b,this.getBounds=function(){return a.clone()},this.getSimpleShapeBounds=function(t,e){e=e||new h;for(var n=0,r=t.length;n<r;n++)this.mergeArcBounds(t[n],e);return e},this.getSimpleShapeBounds2=function(t,e){var n=e||[],r=o,i=4*C(t[0]);n[0]=r[i],n[1]=r[++i],n[2]=r[++i],n[3]=r[++i];for(var a=1,s=t.length;a<s;a++)r[i=4*C(t[a])]<n[0]&&(n[0]=r[i]),r[++i]<n[1]&&(n[1]=r[i]),r[++i]>n[2]&&(n[2]=r[i]),r[++i]>n[3]&&(n[3]=r[i]);return n},this.getMultiShapeBounds=function(t,e){if(e=e||new h,t)for(var n=0,r=t.length;n<r;n++)this.getSimpleShapeBounds(t[n],e);return e},this.mergeArcBounds=function(t,e){t<0&&(t=~t);var n=4*t;e.mergeBounds(o[n],o[n+1],o[n+2],o[n+3])}}function Q(){this.a=1,this.c=0,this.tx=0,this.b=0,this.d=1,this.ty=0}function tt(t,e){var r=n(11),i=u(t),o=i.crs,a=[i],s=function(t){t.internal.pj_list.mixed||t.pj_add(function(t){t.a=1},"mixed","Mapshaper Mixed Projection");return t.pj_init("+proj=mixed")}(r);function u(t){return{bounds:new h(c(t.bbox)),crs:r.pj_init(t.proj)}}function c(t){var e=Math.PI/180;return t.map(function(t){return t*e})}return o.__mixed_crs=s,o.addFrame=function(t){var n,i,o,s=v.getFrameParams(t,e),c=u(s),l=new Q,f=s.origin?(n=s.origin,i=c.crs,[(o=r.pj_fwd_deg({lam:n[0],phi:n[1]},i)).x,o.y]):[0,0],p=s.placement||[0,0],h=p[0]-f[0]+(+s.dx||0),d=p[1]-f[1]+(+s.dy||0);return s.rotation&&l.rotate(s.rotation*Math.PI/180,f[0],f[1]),s.scale&&l.scale(s.scale,s.scale,f[0],f[1]),l.translate(h,d),c.matrix=l,a.push(c),this},s.fwd=function(t,e){for(var n,i,o=0,s=a.length;o<s;o++)if((n=a[o]).bounds.containsPoint(t.lam,t.phi)){i=r.pj_fwd(t,n.crs),n.matrix&&n.matrix.transformXY(i.x,i.y,i);break}e.x=i?i.x:1/0,e.y=i?i.y:1/0},o}W.prototype.init=function(t,e,n){return n?(this._i=t,this._inc=1):(this._i=t+e-1,this._inc=-1),this._n=e,this},W.prototype.hasNext=function(){var t=this._i;return this._n>0&&(this._i=t+this._inc,this.x=this._xx[t],this.y=this._yy[t],this.i=t,this._n--,!0)},K.prototype.hasNext=function(){var t=this._arc;return this._i<this._n!=!1&&(t.hasNext()?(this.x=t.x,this.y=t.y,!0):(this.nextArc(),this.hasNext()))},K.prototype.init=function(t){return this._ids=t,this._n=t.length,this.reset(),this},K.prototype.nextArc=function(){var t=this._i+1;t<this._n&&(this._arc=this._arcs.getArcIter(this._ids[t]),t>0&&this._arc.hasNext()),this._i=t},K.prototype.reset=function(){this._i=-1,this.nextArc()},v.dedupArcCoords=function(t,e,n,r,i,o){for(var a,s,u,c,l,f=0,p=0;f<n;)a=r[c=t+f],s=i[c],(l=a==a&&s==s&&(0===p||a!=r[c-1]||s!=i[c-1]))&&(r[u=e+p]=a,i[u]=s,p++),o&&p>0&&(l||o[c]>o[u])&&(o[u]=o[c]),f++;return p>1?p:0},v.getAvgSegment=function(t){var e=0,n=t.forEachSegment(function(t,n,r,i){var o=r[t]-r[n],a=i[t]-i[n];e+=Math.sqrt(o*o+a*a)});return e/n||0},v.getAvgSegment2=function(t){var e=0,n=0,r=t.forEachSegment(function(t,r,i,o){e+=Math.abs(i[t]-i[r]),n+=Math.abs(o[t]-o[r])});return[e/r||0,n/r||0]},v.getDirectedArcPresenceTest=function(t,e){var n=new Uint8Array(e);return v.forEachArcId(t,function(t){var r=C(t);r<e==!1&&u("index error"),n[r]|=t<0?2:1}),function(t){var e=C(t);return t<0?2==(2&n[e]):1==(1&n[e])}},v.getArcPresenceTest=function(t,e){var n=new Uint8Array(e.size());return v.countArcsInShapes(t,n),function(t){return t<0&&(t=~t),n[t]>0}},v.getArcPresenceTest2=function(t,e){var n=v.countArcsInLayers(t,e);return function(t){return n[C(t)]>0}},v.countArcsInShapes=function(t,e){v.traversePaths(t,null,function(t){for(var n,r=t.arcs,i=0;i<r.length;i++)(n=r[i])<0&&(n=~n),e[n]++})},v.countArcsInLayers=function(t,e){var n=new Uint32Array(e.size());return t.filter(v.layerHasPaths).forEach(function(t){v.countArcsInShapes(t.shapes,n)}),n},v.findShapesByArcId=function(t,e,n){var r=n?new Uint8Array(n):[],i=[];return e.forEach(function(t){r[C(t)]=1}),t.forEach(function(t,e){var n=!1;v.forEachArcId(t||[],function(t){n=n||1==r[C(t)]}),n&&i.push(e)}),i},v.reversePath=function(t){t.reverse();for(var e=0,n=t.length;e<n;e++)t[e]=~t[e];return t},v.clampIntervalByPct=function(t,e){return e<=0?t=1/0:e>=1&&(t=0),t},v.findNextRemovableVertices=function(t,e,n,r){var i,o,a=v.findNextRemovableVertex(t,e,n,r);if(a>-1)for(o=t[a],i=[a];++a<r;)t[a]==o&&i.push(a);return i||null},v.findNextRemovableVertex=function(t,e,n,r){var i,o,a=0,s=-1;n>r&&(i=n,n=r,r=i);for(var u=n+1;u<r;u++)(o=t[u])<e&&o>a&&(s=u,a=o);return s},v.forEachArcId=function(t,e){for(var n,r=0;r<t.length;r++)if((n=t[r])instanceof Array)v.forEachArcId(n,e);else if(c.isInteger(n)){var i=e(n);void 0!==i&&(t[r]=i)}else n&&u("Non-integer arc id in:",t)},v.forEachSegmentInShape=function(t,e,n){for(var r=0,i=t?t.length:0;r<i;r++)v.forEachSegmentInPath(t[r],e,n)},v.forEachSegmentInPath=function(t,e,n){for(var r=0,i=t.length;r<i;r++)e.forEachArcSegment(t[r],n)},v.traversePaths=function(t,e,n,r){var i=0;t.forEach(function(t,o){if(t&&0!==t.length){var a,s;r&&r(o);for(var u=0,c=t.length;u<c;u++)if(a=t[u],n&&n({i:u,shapeId:o,shape:t,arcs:a}),e)for(var l=0,f=a.length;l<f;l++,i++)s=a[l],e({i:l,shapeId:o,partId:u,arcId:s,segId:i})}})},v.arcHasLength=function(t,e){var n,r,i=e.getArcIter(t);if(i.hasNext())for(n=i.x,r=i.y;i.hasNext();)if(i.x!=n||i.y!=r)return!0;return!1},v.filterEmptyArcs=function(t,e){if(!t)return null;var n=[];return t.forEach(function(t){for(var r=[],i=0;i<t.length;i++)v.arcHasLength(t[i],e)&&r.push(t[i]);r.length>0&&n.push(r)}),n.length>0?n:null},v.groupPolygonRings=function(t,e){var n,r=[],i=[],o=e?-1:1;return(t||[]).forEach(function(t){t.area*o>0?i.push([t]):t.area*o<0&&r.push(t)}),0===r.length?i:(n=v.getBoundsSearchFunction(i.map(function(t,e){return{bounds:t[0].bounds,idx:e}})),r.forEach(function(t){for(var e,r,a,s=-1,u=0,c=t.area*-o,l=t.bounds,f=n(l.xmin,l.ymin,l.xmax,l.ymax),p=0,h=f.length;p<h;p++)r=f[p].idx,a=(e=i[r][0]).area*o,e.bounds.contains(t.bounds)&&a>c&&(0===u||a<u)&&(u=a,s=r);-1==s?I("[groupPolygonRings()] polygon hole is missing a containing ring, dropping."):i[s].push(t)}),i)},v.getPathMetadata=function(t,e,n){for(var r,i=[],o=0,a=t&&t.length;o<a;o++)r=t[o],i.push({ids:r,area:"polygon"==n?H.getPlanarPathArea(r,e):0,bounds:e.getSimpleShapeBounds(r)});return i},v.quantizeArcs=function(t,e){var n=t.getBounds(),r=new h(0,0,e-1,e-1),i=n.getTransform(r),o=i.invert();t.transformPoints(function(t,e){var n=i.transform(t,e);return o.transform(Math.round(n[0]),Math.round(n[1]))})},v.countPointsInLayer=function(t){var e=0;return v.layerHasPoints(t)&&v.forEachPoint(t.shapes,function(){e++}),e},v.countPoints2=function(t,e,n){var r,i,o,a,s,u=0;for(n=n||1/0,r=0,i=t.length;r<i&&u<=n;r++)for(o=0,a=(s=t[r])?s.length:0;o<a;o++)e&&!e(s[o])||u++;return u},v.getPointBounds=function(t){var e=new h;return v.forEachPoint(t,function(t){e.mergePoint(t[0],t[1])}),e},v.getPointFeatureBounds=function(t,e){var n,r=t?t.length:0;e||(e=new h);for(var i=0;i<r;i++)n=t[i],e.mergePoint(n[0],n[1]);return e},v.forEachPoint=function(t,e){var n,r,i,o,a;for(n=0,r=t.length;n<r;n++)for(i=0,o=(a=t[n])?a.length:0;i<o;i++)e(a[i],n)},v.transformPointsInLayer=function(t,e){v.layerHasPoints(t)&&v.forEachPoint(t.shapes,function(t){var n=e(t[0],t[1]);t[0]=n[0],t[1]=n[1]})},v.cloneShape=function(t){return t?t.map(function(t){return t.concat()}):null},v.cloneShapes=function(t){return c.isArray(t)?t.map(v.cloneShape):null},v.forEachShapePart=function(t,e){v.editShapeParts(t,e)},v.editShapes=function(t,e){for(var n=0,r=t.length;n<r;n++)t[n]=v.editShapeParts(t[n],e)},v.editShapeParts=function(t,e){if(!t)return null;c.isArray(t)||u("Expected an array, received:",t);for(var n,r=0,i=t.length,o=0;o<i;o++)null===(n=e(t[o],o,t))?(r++,t[o]=null):c.isArray(n)&&(t[o]=n);return r==i?null:r>0?t.filter(function(t){return!!t}):t},v.findMaxPartCount=function(t){for(var e,n=0,r=0,i=t.length;r<i;r++)(e=t[r])&&e.length>n&&(n=e.length);return n},m.affine=function(t,e,n){var r,i,o,a=n.rotate||0,s=n.scale||1,u=n.shift?v.convertIntervalPair(n.shift,v.getDatasetCRS(e)):[0,0],c=e.arcs,l=[],f=[],p=[];e.layers.filter(v.layerHasGeometry).forEach(function(r){var i,o=[],a=[];-1==t.indexOf(r)?a=r.shapes:n.where?(i=v.compileValueExpression(n.where,r,e.arcs),r.shapes.forEach(function(t,e){(i(e)?o:a).push(t)})):o=r.shapes,"point"==r.geometry_type?p=p.concat(o):(l=l.concat(o),f=f.concat(a))});var h=v.getAffineAnchor({arcs:e.arcs,layers:[{geometry_type:"point",shapes:p},{geometry_type:"polyline",shapes:l}]},n);o=v.getAffineTransform(a,s,u,h),l.length>0&&(r=new Uint8Array(c.size()),i=new Uint8Array(c.size()),v.countArcsInShapes(l,r),f.length>0&&(v.countArcsInShapes(f,i),v.applyArrayMask(i,r),e.arcs=v.duplicateSelectedArcs(f,c,i)),e.arcs.transformPoints(function(t,e,n){if(n<r.length&&r[n]>0)return o(t,e)})),v.forEachPoint(p,function(t){var e=o(t[0],t[1]);t[0]=e[0],t[1]=e[1]})},v.getAffineAnchor=function(t,e){var n;return e.anchor?e.anchor:[(n=v.getDatasetBounds(t)).centerX(),n.centerY()]},v.getAffineTransform=function(t,e,n,r){var i=t*Math.PI/180,o=e*Math.cos(i),a=-e*Math.sin(i);return function(t,e){return[o*(t-r[0])-a*(e-r[1])+n[0]+r[0],a*(t-r[0])+o*(e-r[1])+n[1]+r[1]]}},v.applyArrayMask=function(t,e){for(var n=0,r=t.length;n<r;n++)0===e[n]&&(t[n]=0)},v.duplicateSelectedArcs=function(t,e,n){for(var r,i=0,o=0,a=e.getVertexData(),s=[],u=[],l=[],f=[],p=0,h=n.length;p<h;p++)n[p]>0&&(f[p]=e.size()+i,r=a.nn[p],c.copyElements(a.xx,a.ii[p],s,o,r),c.copyElements(a.yy,a.ii[p],u,o,r),l.push(r),o+=r,i++);return v.forEachArcId(t,function(t){var e=C(t);if(n[e]>0)return t<0?~f[e]:f[e]}),v.mergeArcs([e,new Z(l,s,u)])},v.makePointBuffer=function(t,e,n){var r=v.makePointBufferGeoJSON(t,e,n);return v.importGeoJSON(r,{})},v.makePointBufferGeoJSON=function(t,e,n){var r=n.vertices||72,i=v.getBufferDistanceFunction(t,e,n),o=v.getGeodeticSegmentFunction(e);return{type:"GeometryCollection",geometries:t.shapes.map(function(t,e){var n=i(e);return n&&t?v.getPointBufferGeometry(t,n,r,o):null})}},v.getPointBufferGeometry=function(t,e,n,r){var i=[];if(!t||!t.length)return null;for(var o=0;o<t.length;o++)i.push(v.getPointBufferPolygonCoordinates(t[o],e,n,r));return 1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}},v.getPointBufferPolygonCoordinates=function(t,e,n,r){for(var i=[],o=360/n,a=0;a<n;a++)i.push(r(t[0],t[1],a*o,e));return i.push(i[0].concat()),[i]},Q.prototype.transformXY=function(t,e,n){return(n=n||{}).x=t*this.a+e*this.c+this.tx,n.y=t*this.b+e*this.d+this.ty,n},Q.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},Q.prototype.rotate=function(t,e,n){var r=Math.cos(t),i=Math.sin(t);e=e||0,n=n||0,this.a=r,this.c=-i,this.b=i,this.d=r,this.tx+=e-e*r+n*i,this.ty+=n-e*i-n*r},Q.prototype.scale=function(t,e,n,r){n=n||0,r=r||0,this.a*=t,this.c*=t,this.b*=e,this.d*=e,this.tx-=n*(t-1),this.ty-=r*(e-1)},v.getFrameParams=function(t,e){var n=e[t.name];return c.defaults(t,{scale:1,dx:0,dy:0,rotation:0}),n?(Object.keys(n).forEach(function(e){var r=n[e];e in t?t[e]=n[e]:t.proj=v.replaceProjParam(t.proj,e,r)}),t):t},v.replaceProjParam=function(t,e,n){var r="+"+e+"=";return t.split(" ").map(function(t){return 0===t.indexOf(r)&&(t=t.substr(0,r.length)+n),t}).join(" ")},v.getLayerDataTable=function(t){var e=t.data;return e||(e=t.data=new rt(t.shapes?t.shapes.length:0)),e},v.copyRecord=function(t){var e,n,r={};if(!t)return null;for(e in t)t.hasOwnProperty(e)&&((n=t[e])==t&&delete(n=c.extend({},n))[e],r[e]=n&&n.constructor===Object?v.copyRecord(n):n);return r},v.insertFieldValues=function(t,e,n){var r=v.getFeatureCount(t)||n.length,i=t.data=t.data||new rt(r);i.getRecords();v.insertFieldValues2(e,i.getRecords(),n)},v.insertFieldValues2=function(t,e,n){var r,i,o,a=e.length;for(r=0,a=e.length;r<a;r++)i=e[r],o=n[r],i||(i=e[r]={}),i[t]=void 0===o?null:o},v.getValueType=function(t){var e=null;return c.isString(t)?e="string":c.isNumber(t)?e="number":c.isBoolean(t)?e="boolean":c.isObject(t)&&(e="object"),e},v.fixInconsistentFields=function(t){var e=v.findIncompleteFields(t);v.patchMissingFields(t,e)},v.findIncompleteFields=function(t){var e,n,r,i={};for(e=0;e<t.length;e++)for(r=Object.keys(t[e]||{}),n=0;n<r.length;n++)i[r[n]]=1+(0|i[r[n]]);return Object.keys(i).filter(function(e){return i[e]<t.length})},v.patchMissingFields=function(t,e){var n,r,i,o;for(r=0;r<t.length;r++)for(n=t[r]||(t[r]={}),i=0;i<e.length;i++)(o=e[i])in n==!1&&(n[o]=void 0)},v.fieldListContainsAll=function(t,e){return t.indexOf("*")>-1||0===c.difference(e,t).length},v.getColumnType=function(t,e){for(var n,r=null,i=0,o=e.length;i<o&&!(r=(n=e[i])?v.getValueType(n[t]):null);i++);return r},v.deleteFields=function(t,e){t.getFields().forEach(function(n){e(n)&&t.deleteField(n)})},v.isInvalidFieldName=function(t){return/^\s*$/.test(t)},v.getUniqFieldNames=function(t,e){var n={};return t.map(function(r){var i,o=0;do{i=v.adjustFieldName(r,e,o),o++}while(i in n||r!=i&&c.contains(t,i));return n[i]=!0,i})},v.adjustFieldName=function(t,e,n){var r,i;return e=e||256,n?(1==(i=String(n)).length&&(i="_"+i),r=t.substr(0,e-i.length)+i):r=t.substr(0,e),r},v.applyFieldOrder=function(t,e){return"ascending"==e&&t.sort(function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:1}),t},v.findFieldNames=function(t,e){var n=t[0],r=n?Object.keys(n):[];return v.applyFieldOrder(r,e)},v.getEncodings=function(){var t=n(63);return t.encodingExists("ascii"),Object.keys(t.encodings)},v.validateEncoding=function(t){return v.encodingIsSupported(t)||b("Unknown encoding:",t,"\nRun the -encodings command see a list of supported encodings"),t},v.encodingIsUtf8=function(t){return!t||/^utf-?8$/i.test(String(t))},v.encodingIsAsciiCompat=function(t){return!(t=v.standardizeEncodingName(t))||/^(win|latin|utf8|ascii|iso88|gb)/.test(t)},v.standardizeEncodingName=function(t){return(t||"").toLowerCase().replace(/[_-]/g,"")},v.bufferToString=function(t,e,n,r){return n>=0&&(t=t.slice(n,r)),v.decodeString(t,e)},v.getNativeEncoder=function(t){var e=null;return"utf8"!=(t=v.standardizeEncodingName(t))?null:("undefined"!=typeof TextEncoder&&(e=new TextEncoder(t)),function(n){return e?y.from(e.encode(n).buffer):c.createBuffer(n,t)})},v.encodeString=(X=n(63),J=v.getNativeEncoder("utf8"),function(t,e){return v.encodingIsUtf8(e)?J(t):X.encode(t,e)}),v.getNativeDecoder=function(t){var e=null;return"utf8"!=(t=v.standardizeEncodingName(t))?null:("undefined"!=typeof TextDecoder&&(e=new TextDecoder(t)),function(n){return e?e.decode(n):n.toString(t)})},v.decodeString=function(){var t=n(63),e=v.getNativeDecoder("utf8");return function(n,r){return v.encodingIsUtf8(r)?e(n):t.decode(n,r)}}(),v.encodingIsSupported=function(t){var e=v.standardizeEncodingName(t);return c.contains(v.getEncodings(),e)},v.trimBOM=function(t){return 65279==t.charCodeAt(0)&&(t=t.substr(1)),t},v.printEncodings=function(){var t=v.getEncodings().filter(function(t){return!/^(_|cs|internal|ibm|isoir|singlebyte|table|[0-9]|l[0-9]|windows)/.test(t)});t.sort(),w("Supported encodings:\n"+v.formatStringsAsGrid(t))},v.detectEncoding=function(t){var e=null;return v.looksLikeUtf8(t)?e="utf8":v.looksLikeWin1252(t)&&(e="win1252"),e},v.decodeSamples=function(t,e){return e.map(function(e){return v.decodeString(e,t).trim()}).join("\n")},v.formatSamples=function(t){return v.formatStringsAsGrid(t.split("\n"))},v.looksLikeWin1252=function(t){var e="abcdefghijklmnopqrstuvwxyz0123456789.'\"?+-\n,:;/|_$% ",n=v.decodeSamples("win1252",t),r=v.getCharScore(n,e);return v.getCharScore(n,""+e)>.97&&r>=.6},v.looksLikeUtf8=function(t){return-1==v.decodeSamples("utf8",t).indexOf("")},v.replaceUtf8ReplacementChar=function(t){for(var e=!1,n=0,r=t.length;n<r;n++)239==t[n]&&n+2<r&&191==t[n+1]&&189==t[n+2]&&(e||(t=c.createBuffer(t),e=!0),t[n]=t[n+1]=t[n+2]=63);return t},v.getCharScore=function(t,e){var n={},r=0;t=t.toLowerCase();for(var i=0,o=e.length;i<o;i++)n[e[i]]=1;for(i=0,o=t.length;i<o;i++)r+=n[t[i]]||0;return r/t.length};var et={};function nt(t,e){c.isString(t)&&u("[DbfReader] Expected a buffer, not a string");var n=new d(t),r=function(t){t.position(0).littleEndian();var e,n={version:t.readInt8(),updateYear:t.readUint8(),updateMonth:t.readUint8(),updateDay:t.readUint8(),recordCount:t.readUint32(),dataOffset:t.readUint16(),recordSize:t.readUint16(),incompleteTransaction:t.skipBytes(2).readUint8(),encrypted:t.readUint8(),mdx:t.skipBytes(12).readUint8(),ldid:t.readUint8()},r=1;t.skipBytes(2),n.fields=[];for(;13!=t.peek()&&10!=t.peek()&&t.position()<n.dataOffset-1;)(e=o(t)).columnOffset=r,n.fields.push(e),r+=e.size;r!=n.recordSize&&u("Record length mismatch; header:",n.recordSize,"detected:",r);13!=t.peek()&&w("Found a non-standard DBF header terminator ("+t.peek()+"). DBF file may be corrupted.");return v.getUniqFieldNames(c.pluck(n.fields,"name")).forEach(function(t,e){n.fields[e].name=t}),n}(n),i=e||null;function o(t){return{name:t.readCString(11),type:String.fromCharCode(t.readUint8()),address:t.readUint32(),size:t.readUint8(),decimals:t.readUint8(),id:t.skipBytes(2).readUint8(),position:t.skipBytes(2).readUint8(),indexFlag:t.skipBytes(7).readUint8()}}function a(){return c.pluck(r.fields,"name")}function s(t){return r.dataOffset+r.recordSize*t}function l(){return i||(i=function(){var t,e,i=r.ldid,o=et.lookupCodePage(i),a=function(t){for(var e,i,o,a,u=[],l=r.fields.filter(function(t){return"C"==t.type}),f=c.createBuffer(256),p={},h=0,d=r.recordCount;h<d;h++)for(var g=0,y=l.length;g<y&&!(u.length>=t);g++)e=l[g],n.position(s(h)+e.columnOffset),(i=et.readStringBytes(n,e.size,f))>0&&et.bufferContainsHighBit(f,i)&&(o=c.createBuffer(f.slice(0,i)),(a=o.toString("hex"))in p==!1&&(p[a]=!0,u.push(o)));return u}(50),u=0===a.length;o&&87!=i?t=o:u&&(t="ascii");t||(t=v.detectEncoding(a));t&&a.length>0&&(e=v.decodeSamples(t,a),e="\nSample text containing non-ascii characters:"+((e=v.formatStringsAsGrid(e.split("\n"))).length>60?"\n":"")+e,w(e="Detected DBF text encoding: "+t+(t in et.encodingNames?" ("+et.encodingNames[t]+")":"")+e));return t}())||(i="utf8",b("Unable to auto-detect the text encoding of the DBF file.\n"+et.ENCODING_PROMPT)),i}function f(t){var e,r=t.map(p),i=function(t){var e=t.size()-1;return 26!=t.peek(e)&&e++,e}(n),o=(e=a().map(function(t,e){return JSON.stringify(t)+": arguments["+e+"]"}),new Function("return {"+e.join(",")+"};")),u=[];return function(e){for(var a,c,l=s(e),f=0,p=t.length;f<p;f++)(a=l+(c=t[f]).columnOffset)+c.size>i&&b("Invalid DBF file: encountered end-of-file while reading data"),n.position(a),u[f]=r[f](n,c.size);return o.apply(null,u)}}function p(t){var e=t.type,n=null;return"I"==e?n=et.readInt:"F"==e||"N"==e?n=et.getNumberReader():"L"==e?n=et.readBool:"D"==e?n=et.readDate:"C"==e?n=et.getStringReader(l()):(w('Field "'+field.name+'" has an unsupported type ('+field.type+") -- converting to null values"),n=function(){return null}),n}this.size=function(){return r.recordCount},this.readRow=function(t){return f(r.fields)(t)},this.getFields=a,this.getBuffer=function(){return n.buffer()},this.deleteField=function(t){r.fields=r.fields.filter(function(e){return e.name!=t})},this.readRows=function(){for(var t=f(r.fields),e=[],n=0,i=this.size();n<i;n++)e.push(t(n));return e}}function rt(t){var e;if(c.isArray(t))e=t;else if(e=[],c.isInteger(t))for(var n=0;n<t;n++)e.push({});else t&&u("Invalid DataTable constructor argument:",t);this.exportAsDbf=function(t){return et.exportRecords(e,t.encoding,t.field_order)},this.getRecords=function(){return e},this.getReadOnlyRecordAt=function(t){return v.copyRecord(e[t])}}et.languageIds=[1,"437",2,"850",3,"1252",8,"865",9,"437",10,"850",11,"437",13,"437",14,"850",15,"437",16,"850",17,"437",18,"850",19,"932",20,"850",21,"437",22,"850",23,"865",24,"437",25,"437",26,"850",27,"437",28,"863",29,"850",31,"852",34,"852",35,"852",36,"860",37,"850",38,"866",55,"850",64,"852",77,"936",78,"949",79,"950",80,"874",87,"1252",88,"1252",89,"1252",100,"852",101,"866",102,"865",103,"861",106,"737",107,"857",108,"863",120,"950",121,"949",122,"936",123,"932",124,"874",134,"737",135,"852",136,"857",200,"1250",201,"1251",202,"1254",203,"1253",204,"1257"],et.encodingNames={932:"Japanese",936:"Simplified Chinese",950:"Traditional Chinese",1252:"Western European",949:"Korean",874:"Thai",1250:"Eastern European",1251:"Russian",1254:"Turkish",1253:"Greek",1257:"Baltic"},et.ENCODING_PROMPT='To avoid corrupted text, re-import using the "encoding=" option.\nTo see a list of supported encodings, run the "encodings" command.',et.lookupCodePage=function(t){var e=et.languageIds.indexOf(t);return-1==e?null:et.languageIds[e+1]},et.readAsciiString=function(t,e){var n=t.readCString(e,!0);return null===n&&b("DBF file contains non-ascii text.\n"+et.ENCODING_PROMPT),c.trim(n)},et.readStringBytes=function(t,e,n){for(var r,i=0,o=0;o<e&&0!==(r=t.readUint8());o++)(i>0||32!=r)&&(n[i++]=r);for(;i>0&&32==n[i-1];)i--;return i},et.getStringReader=function(e){var n=e||"ascii",r=v.standardizeEncodingName(n),i=c.createBuffer(256);return!("object"==typeof t)||"utf8"!=r&&"ascii"!=r?function(t,e){var r,o,a=et.readStringBytes(t,e,i),s="";for(r=0;r<a;r++){if((o=i[r])>127)return v.bufferToString(i,n,0,a);s+=String.fromCharCode(o)}return s}:function(t,e){var n=et.readStringBytes(t,e,i);return i.toString(r,0,n)}},et.bufferContainsHighBit=function(t,e){for(var n=0;n<e;n++)if(t[n]>=128)return!0;return!1},et.getNumberReader=function(){var t=et.getStringReader("ascii");return function(e,n){var r,i=t(e,n);return i.indexOf(",")>=0&&(i=i.replace(",",".")),r=parseFloat(i),isNaN(r)?null:r}},et.readInt=function(t,e){return t.readInt32()},et.readBool=function(t,e){var n=t.readCString(e),r=null;return/[ty]/i.test(n)?r=!0:/[fn]/i.test(n)&&(r=!1),r},et.readDate=function(t,e){var n=t.readCString(e),r=n.substr(0,4),i=n.substr(4,2),o=n.substr(6,2);return new Date(Date.UTC(+r,+i-1,+o))},et.MAX_STRING_LEN=254,et.bufferPool=new function(){var t,e,n=5e3;function r(){t=new Uint8Array(n),e=0}return r(),{reserve:function(i){return e+i>n&&r(),e+=i,t.subarray(e-i,e)},putBack:function(t){e-=t}}},et.exportRecords=function(t,e,n){var r=t.length,i=v.findFieldNames(t,n),o=et.convertFieldNames(i),a=i.map(function(n,r){var i=et.getFieldInfo(t,n,e||"utf8"),a=o[r];return i.name=a,n!=a&&w('Changed field name from "'+n+'" to "'+a+'"'),i.warning&&w("["+n+"] "+i.warning),i}),s=et.getHeaderSize(a.length),l=et.getRecordSize(c.pluck(a,"size")),f=s+r*l+1,p=new ArrayBuffer(f),h=new d(p).littleEndian(),g=new Date;return h.writeUint8(3),h.writeUint8(g.getFullYear()-1900),h.writeUint8(g.getMonth()+1),h.writeUint8(g.getDate()),h.writeUint32(r),h.writeUint16(s),h.writeUint16(l),h.skipBytes(17),h.writeUint8(0),h.skipBytes(2),a.reduce(function(t,e){return h.writeCString(e.name,11),h.writeUint8(e.type.charCodeAt(0)),h.writeUint32(t),h.writeUint8(e.size),h.writeUint8(e.decimals),h.skipBytes(14),t+e.size},1),h.writeUint8(13),h.position()!=s&&u("Dbf#exportRecords() header size mismatch; expected:",s,"written:",h.position()),t.forEach(function(t,e){var n=h.position();h.writeUint8(32);for(var r=0,i=a.length;r<i;r++)a[r].write(e,h);h.position()-n!=l&&u("#exportRecords() Error exporting record:",t)}),h.writeUint8(26),h.position()!=f&&u("Dbf#exportRecords() file size mismatch; expected:",f,"written:",h.position()),p},et.getHeaderSize=function(t){return 33+32*t},et.getRecordSize=function(t){return c.sum(t)+1},et.initNumericField=function(t,e,n){var r,i;r=this.getNumericFieldInfo(e,n),t.decimals=r.decimals,(i=Math.max(r.max.toFixed(t.decimals).length,r.min.toFixed(t.decimals).length))>18&&(i=18,t.decimals-=i-18,t.decimals<0&&u("Dbf#getFieldInfo() Out-of-range error.")),t.size=i;var o=et.getDecimalFormatter(i,t.decimals);t.write=function(t,r){var a=e[t],s=o(a[n]);s.length<i&&(s=c.lpad(s,i," ")),r.writeString(s,i)}},et.initBooleanField=function(t,e,n){t.size=1,t.write=function(t,r){var i,o=e[t][n];i=!0===o?"T":!1===o?"F":"?",r.writeString(i)}},et.initDateField=function(t,e,n){t.size=8,t.write=function(t,r){var i,o=e[t][n];i=o instanceof Date==!1?"00000000":c.lpad(o.getUTCFullYear(),4,"0")+c.lpad(o.getUTCMonth()+1,2,"0")+c.lpad(o.getUTCDate(),2,"0"),r.writeString(i)}},et.convertValueToString=function(t){return null==t?"":String(t)},et.initStringField=function(t,e,n,r){var i="ascii"==r?et.encodeValueAsAscii:et.getStringWriterEncoded(r),o=0,a=0,s=e.map(function(t){var e=et.convertValueToString(t[n]),s=i(e);return s.length>et.MAX_STRING_LEN&&(s="ascii"==r?s.subarray(0,et.MAX_STRING_LEN):et.truncateEncodedString(s,r,et.MAX_STRING_LEN),a++),o=Math.max(o,s.length),s});t.size=o,t.write=function(t,e){var n,r=s[t],i=Math.min(o,r.length),a=e._bytes,u=e.position();for(n=0;n<i;n++)a[n+u]=r[n];e.position(u+o)},a>0&&(t.warning="Truncated "+a+" string"+(1==a?"":"s")+" to fit the 254-byte limit")},et.convertFieldNames=function(t){return v.getUniqFieldNames(t.map(et.cleanFieldName),10)},et.cleanFieldName=function(t){return t.replace(/[^A-Za-z0-9]+/g,"_")},et.getFieldInfo=function(t,e,n){var r=this.discoverFieldType(t,e),i={type:r,decimals:0};return"N"==r?et.initNumericField(i,t,e):"C"==r?et.initStringField(i,t,e,n):"L"==r?et.initBooleanField(i,t,e):"D"==r?et.initDateField(i,t,e):(i.size=0,i.type="N",r&&(i.warning="Unable to export "+r+"-type data, writing null values"),i.write=function(){}),i},et.discoverFieldType=function(t,e){for(var n,r=0,i=t.length;r<i;r++){if(n=t[r][e],c.isString(n))return"C";if(c.isNumber(n))return"N";if(c.isBoolean(n))return"L";if(n instanceof Date)return"D";if(n)return typeof n}return null},et.getDecimalFormatter=function(t,e){return function(n){var r=c.isFiniteNumber(n)?n.toFixed(e):String(" ");return c.lpad(r,t," ")}},et.getNumericFieldInfo=function(t,e){for(var n,r=0,i=0,o=1,a=1,s=0,u=1e-15,l=0,f=t.length;l<f;l++)if(n=t[l][e],c.isFiniteNumber(n)){if(n<r||n>i)for(n<r&&(r=n),n>i&&(i=n);Math.abs(n)>=a;)a*=10,u*=10;for(;Math.abs(Math.round(n*o)-n*o)>u&&15!=s;)s++,u*=10,o*=10}return{decimals:s,min:r,max:i}},et.encodeValueAsAscii=function(t,e){var n,r,i=String(t),o=i.length,a=et.bufferPool.reserve(o);for(n=0;n<o;n++){if((r=i.charCodeAt(n))>127){if(e){a=null,n=0;break}r="?".charCodeAt(0)}a[n]=r}return et.bufferPool.putBack(o-n),a?a.subarray(0,n):null},et.getStringWriterEncoded=function(t){return function(e){var n=et.encodeValueAsAscii(e,!0);return null===n&&(n=v.encodeString(String(e),t)),n}},et.truncateEncodedString=function(t,e,n){for(var r,i,o=t.slice(0,n),a=n;a>0&&a>=n-3;){if(r=a==n?o:t.slice(0,a),""!=(i=v.decodeString(r,e)).charAt(i.length-1)){o=r;break}a--}return o};var it={fieldExists:function(t){return c.contains(this.getFields(),t)},toString:function(){return JSON.stringify(this)},toJSON:function(){return this.getRecords()},addField:function(t,e){var n=c.isFunction(e);c.isNumber(e)||c.isString(e)||n||u("DataTable#addField() requires a string, number or function for initialization"),this.fieldExists(t)&&u("DataTable#addField() tried to add a field that already exists:",t),this.getRecords().forEach(function(r,i){r[t]=n?e(r,i):e})},getRecordAt:function(t){return this.getRecords()[t]},addIdField:function(){this.addField("FID",function(t,e){return e})},deleteField:function(t){this.getRecords().forEach(function(e){delete e[t]})},getFields:function(){return v.findFieldNames(this.getRecords())},update:function(t){for(var e=this.getRecords(),n=0,r=e.length;n<r;n++)e[n]=t(e[n],n)},clone:function(){return new rt(this.getRecords().map(v.copyRecord))},size:function(){return this.getRecords().length}};function ot(t){var e,n,r=t.byteLength||t.length;function i(){return n||(n=t instanceof ArrayBuffer?c.createBuffer(t):t),n}this.readToBinArray=function(n,i){return r<n+i&&u("Out-of-range error"),e||(e=new d(t)),e.position(n),e},this.toString=function(t){return v.bufferToString(i(),t)},this.readSync=function(t,e){return i().slice(t,e||r)},this.findString=at.prototype.findString,this.expandBuffer=function(){return this},this.size=function(){return r},this.close=function(){}}function at(t,e){var r,i,o,a,s=n(12),l=s.statSync(t).size,f=e&&e.cacheSize||8388608,p=e&&e.bufferSize||16384;function h(e,n){var a,p,h=l-e;return(h<n||h<0)&&u("Tried to read past end-of-file"),!(o&&e>=i&&i+o.length>=e+n)&&(h<(p=Math.max(f,n))&&(p=h),o&&p==o.length||(o=c.createBuffer(p)),r||(r=s.openSync(t,"r")),a=s.readSync(r,o,0,p,e),i=e,a!=p&&u("Error reading file"),!0)}v.getStateVar("input_files").push(t),this.expandBuffer=function(){return p*=2,this},this.readToBinArray=function(t,e){return h(t,e)&&(a=new d(o)),a.position(t-i),a},this.readSync=function(t,e){return e>0==!1&&(t+(e=p)>l&&(e=l-t),0===e)?c.createBuffer(0):(h(t,e),o.slice(t-i,t-i+e))},this.size=function(){return l},this.toString=function(e){return st.readFile(t,e||"utf8")},this.close=function(){r&&(s.closeSync(r),r=null,o=null)}}c.extend(rt.prototype,it),v.FileReader=at,v.BufferReader=ot,v.readFirstChars=function(t,e){return v.bufferToString(t.readSync(0,Math.min(e||1e3,t.size())))},at.prototype.findString=function(t,e){var n,r=Math.min(this.size(),e||this.size()),i=this.readSync(0,r),o=t.length,a=i.length-o,s=t.charCodeAt(0);for(n=0;n<a;n++)if(i[n]==s&&i.toString("utf8",n,n+o)==t)return{offset:n+o,text:i.toString("utf8",0,n)};return null},v.readDelimRecords=function(t,e,r,i){var o,a=n(66).dsvFormat(e),s=[],u=v.readDelimLines(t,0,e,r,1),c=v.trimBOM(u?u.text:"");if(!u)return[];for(;u=v.readDelimLines(t,u.offset,e,r,500);)o=a.parse(c+u.text,i),s.push.apply(s,o);return s},v.readDelimLines=function(t,e,n,r,i){n.charCodeAt(0);var o,a,s,u,c=!1,l=t.readSync(e),f=!1,p=i>0?i:1;for(o=0,a=l.length;o<a&&(s=l[o],!(f&&(13==u&&10==s||(f=!1,p--),p<=0)));o++)34==s?c=!c:c||13!=s&&10!=s||(f=!0),o==a-1&&(a=(l=t.expandBuffer().readSync(e)).length),u=s;return 0===o?null:{offset:o+e,text:v.bufferToString(l,r,0,o)}},c.replaceFileExtension=function(t,e){return c.parseLocalPath(t).pathbase+"."+e},c.getPathSep=function(t){return-1==t.indexOf("/")&&-1!=t.indexOf("\\")?"\\":"/"},c.parseLocalPath=function(t){var e,n={},r=c.getPathSep(t),i=t.split(r);return 1==i.length?(n.filename=i[0],n.directory=""):(n.filename=i.pop(),n.directory=i.join(r)),(e=n.filename.lastIndexOf("."))>-1?(n.extension=n.filename.substr(e+1),n.basename=n.filename.substr(0,e),n.pathbase=t.substr(0,t.lastIndexOf("."))):(n.extension="",n.basename=n.filename,n.pathbase=t),n},c.getFileBase=function(t){return c.parseLocalPath(t).basename},c.getFileExtension=function(t){return c.parseLocalPath(t).extension},c.getPathBase=function(t){return c.parseLocalPath(t).pathbase},c.getCommonFileBase=function(t){return t.reduce(function(t,e,n){return t=0===n?c.getFileBase(e):c.mergeNames(t,e)},"")},c.getOutputFileBase=function(t){var e=t.info&&t.info.input_files;return e&&c.getCommonFileBase(e)||"output"},v.guessInputFileType=function(t){var e=c.getFileExtension(t||"").toLowerCase(),n=null;return"dbf"==e||"shp"==e||"prj"==e||"shx"==e?n=e:/json$/.test(e)?n="json":"csv"!=e&&"tsv"!=e&&"txt"!=e&&"tab"!=e||(n="text"),n},v.guessInputContentType=function(t){var e=null;return c.isString(t)?e=v.stringLooksLikeJSON(t)?"json":"text":(c.isObject(t)&&t.type||c.isArray(t))&&(e="json"),e},v.guessInputType=function(t,e){return v.guessInputFileType(t)||v.guessInputContentType(e)},v.stringLooksLikeJSON=function(t){return/^\s*[{[]/.test(String(t))},v.couldBeDsvFile=function(t){var e=c.getFileExtension(t).toLowerCase();return/csv|tsv|txt$/.test(e)},v.isZipFile=function(t){return/\.zip$/i.test(t)},v.isSupportedOutputFormat=function(t){return["geojson","topojson","json","dsv","dbf","shapefile","svg"].indexOf(t)>-1},v.getFormatName=function(t){return{geojson:"GeoJSON",topojson:"TopoJSON",json:"JSON records",dsv:"CSV",dbf:"DBF",shapefile:"Shapefile",svg:"SVG"}[t]||""},v.isSupportedBinaryInputType=function(t){var e=c.getFileExtension(t).toLowerCase();return"shp"==e||"shx"==e||"dbf"==e},v.filenameIsUnsupportedOutputType=function(t){return/\.(shx|prj|xls|xlsx|gdb|sbn|sbx|xml|kml)$/i.test(t)};var st={};function ut(t){var e=t||{},n=new tt({proj:"+proj=aea +lon_0=-96 +lat_0=37.5 +lat_1=29.5 +lat_2=45.5",bbox:[-129,23,-62,52]},e).addFrame({name:"AK",proj:"+proj=aea +lat_1=55 +lat_2=70 +lat_0=65 +lon_0=-148 +x_0=0 +y_0=0",bbox:[-172.26,50.89,-127,73.21],origin:[-152,63],placement:[-1882782,-969242],scale:.37}).addFrame({name:"HI",proj:"+proj=aea +lat_1=19 +lat_2=24 +lat_0=20.9 +lon_0=-156.5 +x_0=0 +y_0=0",bbox:[-160.5,18.72,-154.57,22.58],origin:[-157,21],placement:[-1050326,-1055362]});return e.PR&&n.addFrame({name:"PR",proj:"+proj=aea +lat_1=18 +lat_2=18.43 +lat_0=17.83 +lon_0=-66.43 +x_0=0 +y_0=0",bbox:[-68.092,17.824,-65.151,18.787],origin:[-66.431,18.228],placement:[1993101,-1254517]}),e.VI&&n.addFrame({name:"VI",proj:"+proj=aea +lat_1=18 +lat_2=18.43 +lat_0=17.83 +lon_0=-66.43 +x_0=0 +y_0=0",bbox:[-65.104,17.665,-64.454,18.505],origin:[-66.431,18.228],placement:[1993101,-1254517]}),n}st.isFile=function(t,e){var n=st.statSync(t);return e&&t in e||n&&n.isFile()||!1},st.fileSize=function(t){var e=st.statSync(t);return e&&e.size||0},st.isDirectory=function(t){var e=st.statSync(t);return e&&e.isDirectory()||!1},st.readFile=function(t,e,r){var i;return r&&t in r?(i=r[t],delete r[t]):"/dev/stdin"==t?i=n(107).readFileSync(t):(v.getStateVar("input_files").push(t),i=n(12).readFileSync(t)),e&&y.isBuffer(i)&&(i=v.trimBOM(v.decodeString(i,e))),i},st.writeFile=function(t,e,r){var i=n(107);r?i.writeFile(t,e,function(t){var e=v.context;return function(){v.context=e,t.apply(null,c.toArray(arguments))}}(r)):i.writeFileSync(t,e)},st.convertArrayBuffer=function(t){for(var e=new Uint8Array(t),n=c.createBuffer(e.length),r=0,i=e.length;r<i;r++)n[r]=e[r];return n},st.expandFileName=function(t){var e=c.parseLocalPath(t),r=c.wildcardToRegExp(e.filename),i=e.directory||".",o=[];try{n(12).readdirSync(i).forEach(function(t){var e=n(47).join(i,t);r.test(t)&&st.isFile(e)&&o.push(e)})}catch(t){}return 0===o.length&&b("No files matched ("+t+")"),o},st.expandInputFiles=function(t){return t.reduce(function(t,e){return e.indexOf("*")>-1?t=t.concat(st.expandFileName(e)):t.push(e),t},[])},st.validateOutputDir=function(t){st.isDirectory(t)||u("Output directory not found:",t)},st.checkFileExists=function(t,e){st.isFile(t,e)||"/dev/stdin"==t||b("File not found ("+t+")")},st.statSync=function(t){var e=null;try{e=n(12).statSync(t)}catch(t){}return e},v.importDelim=function(t,e){return v.importDelim2({content:t},e)},v.importDelim2=function(t,e){var r,i,o,a,s,l=!t.content&&""!==t.content,f=t.content;return e=e||{},r=v.getImportFilterFunction(e),l&&st.fileSize(t.filename)<2e9&&(f=st.readFile(t.filename),l=!1),l?i=new at(t.filename):f instanceof ArrayBuffer||f instanceof y?(i=new ot(f),f=null):c.isString(f)||u("Unexpected object type"),i&&!v.encodingIsAsciiCompat(e.encoding)&&(f=i.toString(e.encoding),i=null),i?(a=v.guessDelimiter(v.readFirstChars(i,2e3)),o=v.readDelimRecords(i,a,e.encoding,r)):(a=v.guessDelimiter(f),delete(o=n(66).dsvFormat(a).parse(f,r)).columns),0===o.length&&w("Unable to read any data records"),v.adjustRecordTypes(o,e),s=new rt(o),v.deleteFields(s,v.isInvalidFieldName),{layers:[{data:s}],info:{input_delimiter:a}}},v.supportedDelimiters=["|","\t",",",";"],v.isSupportedDelimiter=function(t){return c.contains(v.supportedDelimiters,t)},v.guessDelimiter=function(t){return c.find(v.supportedDelimiters,function(e){return v.getDelimiterRxp(e).test(t)})||","},v.getDelimiterRxp=function(t){var e="^[^\\n\\r]+"+c.regexEscape(t);return new RegExp(e)},v.getFieldTypeHints=function(t){var e={};return(t=t||{}).string_fields&&t.string_fields.forEach(function(t){e[t]="string"}),t.field_types&&t.field_types.forEach(function(t){var n,r,i;-1!=t.indexOf(":")?(r=(n=t.split(":"))[0],i=v.validateFieldType(n[1])):"+"===t[0]&&(r=t.substr(1),i="number"),i?e[r]=i:w("Invalid type hint (expected :str or :num) ["+t+"]")}),e},v.adjustRecordTypes=function(t,e){var n=v.getFieldTypeHints(e),r=n["*"],i=Object.keys(t[0]||[]),o=[],a={};i.forEach(function(e){var i=n[e],s=null;"number"==i||"number"==r?s=v.convertDataField(e,t,c.parseNumber):"string"==i||"string"==r?s=v.convertDataField(e,t,c.parseString):(s=v.tryNumericField(e,t))&&o.push(e),s&&(a[e]=s)}),Object.keys(a).length>0&&v.updateFieldsInRecords(i,t,a),o.length>0&&w(c.format("Auto-detected number field%s: %s",1==o.length?"":"s",o.join(", ")))},v.updateFieldsInRecords=function(t,e,n){e.forEach(function(r,i){var o,a,s,u={};for(a=0,o=t.length;a<o;a++)u[s=t[a]]=s in n?n[s][i]:r[s];e[i]=u})},v.tryNumericField=function(t,e){for(var n,r,i,o=[],a=0,s=0,u=e.length;s<u;s++){if(n=e[s][t],null===(i=c.parseNumber(n))){if((r=n?n.trim():"").length>0&&"NA"!=r&&"NaN"!=r)return null}else a++;o.push(i)}return a>0?o:null},v.convertDataField=function(t,e,n){for(var r=[],i=0,o=e.length;i<o;i++)r.push(n(e[i][t]));return r},v.validateFieldType=function(t){var e=t.toLowerCase(),n=null;return"n"==e[0]?n="number":"s"==e[0]&&(n="string"),n},c.cleanNumericString=function(t){return t.replace(/,/g,"")},c.parseString=function(t){return t||""},c.parseNumber=function(t){var e=String(t).trim(),n=e?Number(c.cleanNumericString(e)):NaN;return isNaN(n)?null:n},v.getImportFilterFunction=function(t){var e=t.csv_filter?v.compileExpressionToFunction(t.csv_filter,{returns:!0}):null,n=t.csv_fields?v.getRecordMapper(v.mapFieldNames(t.csv_fields)):null,r=v.getBaseContext();return e||n?function(t){var i;try{i=!e||e.call(null,t,r)}catch(t){b(t.name,"in expression ["+exp+"]:",t.message)}return!1===i?null:(!0!==i&&b("Filter expression must return true or false"),n?n(t):t)}:null},v.parseCustomProjection=function(t){var e=t.trim().split(/ +/),n=[],r=e.filter(function(t){return!/^\+/.test(t)||(n.push(t.substr(1)),!1)}),i=r[0],o=v.parseCustomParams(n);return 1!=r.length?null:v.getCustomProjection(i,o)},v.getCustomProjection=function(t,e){return"albersusa"==t?new ut(e):null},v.parseCustomParams=function(t){var e={};return t.forEach(function(t){v.parseCustomParam(t,e)}),e},v.parseCustomParam=function(t,e){var n=t.split("="),r=n[0].split("."),i=r.pop(),o=r.reduce(function(t,e){if(e in t==!1)t[e]={};else if(!c.isObject(t[e]))return{};return t[e]},e);n.length>1?o[i]=v.parseCustomParamValue(n[1]):i in o!=!1||r.length||(o[i]={})},v.parseCustomParamValue=function(t){var e;return t.indexOf(",")>0?e=t.split(",").map(parseFloat):(null===(e=c.parseNumber(t))&&(e=t),e)},v.projectionAliases={robinson:"+proj=robin +datum=WGS84",webmercator:"+proj=merc +a=6378137 +b=6378137",wgs84:"+proj=longlat +datum=WGS84",albersusa:new ut},v.initProjLibrary=function(t,e){e()},v.findProjLibs=function(t){var e=t.match(/\b(esri|epsg|nad83|nad27)(?=:[0-9]+\b)/gi)||[];return c.uniq(e.map(function(t){return t.toLowerCase()}))},v.getProjTransform=function(t,e){var r=n(11),i=v.isLatLngCRS(t);return e=e.__mixed_crs||e,function(n,o){var a;return i&&(n<-180?n=-180:n>180&&(n=180)),a=[n,o],r.pj_transform_point(t,e,a),a}},v.getProjTransform2=function(t,e){var r=n(11),i=[0],o=[0],a=t.is_latlong?r.internal.DEG_TO_RAD:1,s=e.is_latlong?r.internal.RAD_TO_DEG:1,u=v.isLatLngCRS(t);return function(n,c){var l;u&&(n<-180?n=-180:n>180&&(n=180)),i[0]=n*a,o[0]=c*a;try{e=e.__mixed_crs||e,r.pj_transform(t,e,i,o),l=i[0]==1/0}catch(t){l=!0}return l?null:[i[0]*s,o[0]*s]}},v.toLngLat=function(t,e){return isLatLngCRS(e)?t.concat():v.getProjInfo(e,v.getCRS("wgs84"))(t)},v.getProjInfo=function(t){var e,n;try{(e=v.getDatasetCRS(t))&&(n=v.crsToProj4(e))}catch(t){}return n||"[unknown]"},v.crsToProj4=function(t){return n(11).internal.get_proj_defn(t)},v.crsToPrj=function(t){var e;try{e=n(11).internal.wkt_from_proj4(t)}catch(t){}return e},v.crsAreEqual=function(t,e){var n=v.crsToProj4(t);return!!n&&n==v.crsToProj4(e)},v.getProjDefn=function(t){var e,r=n(11);return(e=v.looksLikeProj4String(t)?t:t in r.internal.pj_list?"+proj="+t:t in v.projectionAliases?v.projectionAliases[t]:v.parseCustomProjection(t))||b("Unknown projection definition:",t),e},v.looksLikeProj4String=function(t){return/^(\+[^ ]+ *)+$/.test(t)},v.getCRS=function(t){var e,r=v.getProjDefn(t);if(c.isString(r))try{e=n(11).pj_init(r)}catch(t){b("Unable to use projection",r,"("+t.message+")")}else e=r;return e||null},v.setDatasetCRS=function(t,e){t.info=t.info||{},t.info.crs=e.crs,t.info.prj=e.prj},v.getDatasetCRS=function(t){var e=t.info||{},n=e.crs;return!n&&e.prj&&(n=v.parsePrj(e.prj)),!n&&v.probablyDecimalDegreeBounds(v.getDatasetBounds(t))&&(n=v.getCRS("wgs84")),n},v.getScaleFactorAtXY=function(t,e,r){var i=n(11),o=i.pj_inv_deg({x:t,y:e},r),a=i.pj_inv_deg({x:t+1,y:e},r);return 1/B(o.lam,o.phi,a.lam,a.phi)},v.isProjectedCRS=function(t){return t&&t.is_latlong||!1},v.isLatLngCRS=function(t){return t&&t.is_latlong||!1},v.printProjections=function(){var t=n(11).internal.pj_list,e="Proj4 projections\n";Object.keys(t).sort().forEach(function(n){e+="  "+c.rpad(n,7," ")+"  "+t[n].name+"\n"}),e+="\nAliases",Object.keys(v.projectionAliases).sort().forEach(function(t){e+="\n  "+t}),w(e)},v.translatePrj=function(t){var e;try{e=n(11).internal.wkt_to_proj4(t)}catch(t){b("Unusable .prj file ("+t.message+")")}return e},v.parsePrj=function(t){return v.getCRS(v.translatePrj(t))};var ct={m:"meters",meter:"meters",meters:"meters",mi:"miles",mile:"miles",miles:"miles",km:"kilometers",ft:"feet",feet:"feet"},lt={meters:1,kilometers:1e3,feet:.3048,miles:1609.344};function ft(t,e){return function(t,e,n){var r=[];return t.forEach(function(t){if(t.used)return;o(t)||function(t){var e=[t.arcId],o=i(t);t.used=!0;for(;o&&o!=t;)e.push(o.arcId),o.used=!0,(o=i(o))&&o!=t&&o.used&&u("buildRing() topology error");o||u("buildRing() traversal error");t.used=!0,function(t,e){e in r==!1&&(r[e]=[]);r[e].push(t)}(e,n(t.shapeId))}(t)}),r;function i(n,r){var a,s=pt(n,t,e);return r=r||0,s!=n&&(a=o(s))&&(r>100&&u("deep recursion -- unhandled topology problem"),s=1==e[a.shapeId][a.partId].length?i(s,r+1):i(a,r+1)),s}function o(e){var r,i=n(e.shapeId);return null===(r=c.find(e.group,function(r){var o=e,a=t[r];return o!=a&&!a.used&&n(a.shapeId)===i&&o.arcId==~a.arcId}))?null:t[r]}}(function(t,e){var n=[],r=[],i=[],o=t.map(function(t,n){return e(n)});return v.traversePaths(t,function(t){var e=t.arcId,o=e<0?~e:e,a=i.length,s=n[o];s||(s=[],n[o]=s);s.push(a),t.group=s,i.push(t),3==s.length&&r.push(s)}),r.forEach(function t(e){var n=a(e,l)||a(e,f)||a(e,p);n&&(h(e=e.filter(function(t){return!c.contains(n,t)})),h(n),e.length>2&&t(e))}),i;function a(t,e){for(var n,r,o=0;o<t.length-1;o++){n=i[t[o]];for(var a=o+1;a<t.length;a++)if(e(n,r=i[t[a]]))return[n.segId,r.segId]}return null}function s(e,n){return pt(e,i,t).arcId===~pt(n,i,t).arcId}function u(e,n){return ht(e,i,t).arcId===~ht(n,i,t).arcId}function l(t,e){return p(t,e)&&s(t,e)&&u(t,e)}function f(t,e){return p(t,e)&&(s(t,e)||u(t,e))}function p(t,e){return t.arcId===~e.arcId&&o[t.shapeId]===o[e.shapeId]}function h(t){t.forEach(function(e){i[e].group=t})}}(t,e),t,e)}function pt(t,e,n){return dt(t,e,n,1)}function ht(t,e,n){return dt(t,e,n,-1)}function dt(t,e,n,r){var i,o=n[t.shapeId][t.partId].length,a=(t.i+r)%o;return a<0&&(a+=o),(i=e[t.segId-t.i+a])&&i.shapeId==t.shapeId||u("index error"),i}function gt(t,e){c.isArray(t)&&(t=new Z(t));var n,r=t.getVertexData(),i=r.nn,o=r.xx,a=r.yy;Object.defineProperty(this,"arcs",{value:t});this.toArray=function(){var t=d(),e=new Uint8Array(t.length),n=[];return c.forEach(t,function(r,i){var o,a;if(1!=e[i]&&(a=s(i)))for(o={coordinates:a,arcs:[]},n.push(o);1!=e[i];)o.arcs.push(p(i)),e[i]=1,i=t[i]}),n};function s(t){return l(t)?null:[n.xx[t],n.yy[t]]}function l(t){return isNaN(n.xx[t])}function f(t){var e=h(t),r=d(),i=r[e],o=function(t){var e=d(),n=t,r=e[t];for(;r!=t;)n=r,(r=e[r])==n&&u("Node indexing error");return n}(e);n.xx[e]=NaN,n.yy[e]=NaN,r[e]=e,r[o]=i}function p(t){var e=t>>1;return!0&t?e:~e}function h(t){return t>=0?2*t+1:2*~t}function d(){return n||(n=v.findNodeTopology(t,e),2*i.length!=n.chains.length&&u("[NodeCollection] count error")),n.chains}function g(t,e){var n=e>=0?e:~e,r=i[t>=0?t:~t];return!(r<2)&&(r==i[n]&&!!(y(t,e,-1)&&y(t,e,1)&&y(t,e,-2)))}function y(e,n,r){var i=t.indexOfVertex(e,r),s=t.indexOfVertex(n,r);return o[i]==o[s]&&a[i]==a[s]}function m(t){var e=h(t),n=d(),r=n[e];return r>=0&&r<n.length||u("out-of-range chain id"),p(r)}this.size=function(){return this.toArray().length},this.findDanglingEndpoints=function(){for(var t,e=d(),n=[],r=0,i=e.length;r<i;r++)e[r]==r&&(t=s(r))&&n.push({point:t,arc:p(r)});return n},this.detachAcyclicArcs=function(){for(var t,e,n=d(),r=0,i=0,o=n.length;i<o;i+=2)t=i==n[i],e=i+1==n[i+1],!t&&!e||l(i)||(this.detachArc(p(i)),r++);return r>0&&(r+=this.detachAcyclicArcs()),r},this.detachArc=function(t){f(t),f(~t)},this.forEachConnectedArc=function(t,e){for(var n=m(t),r=0;n!=t;)e(n,r++),n=m(n)},this.getConnectedArcs=function(t,e){var n=[],r=!!e,i=m(t);for(r&&e(t);i!=t;)r&&!e(i)||n.push(i),i=m(i);return n},this.findDuplicateArc=function(t){for(var e=m(t),n=t;e!=t;)g(t,e)&&C(e)<C(n)&&(n=e),e=m(e);return n},this.internal={testArcMatch:g,testVertexMatch:y}}v.getIntervalConversionFactor=function(t,e){var n,r=0,i=0;return e&&(e.is_latlong?i=1:e.to_meter>0?i=e.to_meter:u("Invalid CRS")),t&&((r=lt[t])||u("Unknown units:",t)),r&&i?n=r/i:r||i?r&&!i?b("Unable to convert",t,"to unknown coordinates"):!r&&i&&(n=1/i):n=1,n},v.parseMeasure=function(t){var e=v.parseMeasure2(t);return isNaN(e.value)&&b("Invalid parameter:",t),e},v.parseMeasure2=function(t){var e=c.isString(t)?t:"",n=/(sq|)([a-z]+)(2|)$/i.exec(e),r={};return c.isNumber(t)?r.value=t:""===e?r.value=NaN:n?(r.units=ct[n[2].toLowerCase()],r.areal=!(!n[1]&&!n[3]),r.value=Number(e.substring(0,e.length-n[0].length)),r.units||isNaN(r.value)||b("Unknown units: "+n[0])):r.value=Number(e),r},v.convertAreaParam=function(t,e){var n=v.parseMeasure(t),r=v.getIntervalConversionFactor(n.units,e);return n.value*r*r},v.convertDistanceParam=function(t,e){var n=v.parseMeasure(t),r=v.getIntervalConversionFactor(n.units,e);return n.areal&&b("Expected a distance, received an area:",t),n.value*r},v.convertIntervalParam=function(t,e){var n=v.parseMeasure(t),r=v.getIntervalConversionFactor(n.units,e);return n.units&&e&&e.is_latlong&&b("Parameter does not support distance units with latlong datasets"),n.areal&&b("Expected a distance, received an area:",t),n.value*r},v.convertIntervalPair=function(t,e){var n,r;return Array.isArray(t)&&2==t.length||b("Expected two distance parameters, received",t),n=v.parseMeasure(t[0]),r=v.parseMeasure(t[1]),(n.units&&!r.units||r.units&&!n.units)&&b("Both parameters should have units:",t),[v.convertIntervalParam(t[0],e),v.convertIntervalParam(t[1],e)]},v.convertFourSides=function(t,e,n){var r=t.split(",");return 1==r.length?r=[r[0],r[0],r[0],r[0]]:4!=r.length&&b("Expected a distance parameter or a list of four params"),r.map(function(r,i){return r.indexOf("%")>0?(parseFloat(r)/100||0)*(1==i||3==i?n.height():n.width()):v.convertIntervalParam(t,e)})},v.findNodeTopology=function(t,e){var n=2*t.size(),r=new Float64Array(n),i=new Float64Array(n),o=new Int32Array(n);t.forEach2(function(t,n,a,s,u,c){var l=t,f=t+n-1,p=2*c,h=p+1,d=a[l],g=s[l],y=a[f],m=s[f];e&&!e(c)&&(d=g=y=m=NaN),r[p]=d,i[p]=g,o[p]=c,r[h]=y,i[h]=m,o[h]=c});var a=xt(r,i);return{xx:r,yy:i,ids:o,chains:a}},v.getPathEndpointTest=function(t,e){var n=new Uint8Array(e.size());function r(t){v.forEachShapePart(t,i)}function i(t){o(~t[0]),o(t[t.length-1])}function o(t){var e=C(t),r=e==t;n[e]|=r?1:2}return t.forEach(function(t){v.layerHasPaths(t)&&t.shapes.forEach(r)}),function(t){var e=C(t),r=e==t,i=n[e];return r?1==(1&i):2==(2&i)}},v.divideFeaturesByType=function(t,e,n){return c.uniq(n).map(function(r){for(var i,o=[],a=[],s=0,u=0,c=t.length;u<c;u++)n[u]==r&&(r&&a.push(t[u]),i=e[u],o.push(i),i||s++);return{geometry_type:r,shapes:a,data:s<a.length?new rt(o):null}})},v.getOutputLayer=function(t,e){return e&&e.no_replace?{geometry_type:t.geometry_type}:t},v.copyLayer=function(t){var e=v.copyLayerShapes(t);return e.data&&(e.data=e.data.clone()),e},v.filterPathLayerByArcIds=function(t,e){var n=e.reduce(function(t,e){return t[e]=!0,t},{}),r=v.cloneShapes(t.shapes);return v.editShapes(r,function(t){for(var e=0;e<t.length;e++)if(C(t[e])in n)return null;return t}),c.defaults({shapes:r},t)},v.copyLayerShapes=function(t){var e=c.extend({},t);return t.shapes&&(e.shapes=v.cloneShapes(t.shapes)),e},v.countMultiPartFeatures=function(t){for(var e=0,n=0,r=t.length;n<r;n++)t[n]&&t[n].length>1&&e++;return e},v.getFeatureCount=function(t){var e=0;return t.data?e=t.data.size():t.shapes&&(e=t.shapes.length),e},v.getLayerBounds=function(t,e){var n=null;return"point"==t.geometry_type?n=v.getPointBounds(t.shapes):"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type||(n=v.getPathBounds(t.shapes,e)),n},v.getPathBounds=function(t,e){var n=new h;return v.forEachArcId(t,function(t){e.mergeArcBounds(t,n)}),n},v.isolateLayer=function(t,e){return c.defaults({layers:e.layers.filter(function(e){return e==t})},e)},v.initDataTable=function(t){t.data=new rt(v.getFeatureCount(t))},v.mergeDatasetsForExport=function(t){var e=t.map(function(t){return c.defaults({layers:t.layers.map(v.copyLayerShapes)},t)});return v.mergeDatasets(e)},v.mergeCommandTargets=function(t,e){var n,r=[],i=[],o=0;return t.forEach(function(t){r=r.concat(t.layers),i=i.concat(t.dataset),t.dataset.arcs&&t.dataset.arcs.size()>0&&o++}),n=v.mergeDatasets(i),o>1&&m.buildTopology(n),i.forEach(e.removeDataset),e.addDataset(n),e.setDefaultTarget(r,n),[{layers:r,dataset:n}]},v.mergeDatasets=function(t){var e,n=[],r=0,i=[],o={};return v.requireDatasetsHaveCompatibleCRS(t),t.forEach(function(t){var e=t.arcs?t.arcs.size():0;e>0&&n.push(t.arcs),v.mergeDatasetInfo(o,t),t.layers.forEach(function(t){"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type||v.forEachArcId(t.shapes,function(t){return t<0?t-r:t+r}),i.push(t)}),r+=e}),(e=v.mergeArcs(n)).size()!=r&&u("[mergeDatasets()] Arc indexing error"),{info:o,arcs:e,layers:i}},v.requireDatasetsHaveCompatibleCRS=function(t){t.reduce(function(t,e){var n=v.getDatasetCRS(e);return t&&n&&v.isLatLngCRS(t)!=v.isLatLngCRS(n)&&b("Unable to combine projected and unprojected datasets"),n||t},null)},v.mergeDatasetInfo=function(t,e){var n=e.info||{};t.input_files=c.uniq((t.input_files||[]).concat(n.input_files||[])),t.input_formats=c.uniq((t.input_formats||[]).concat(n.input_formats||[])),c.defaults(t,n)},v.mergeArcs=function(t){var e=t.map(function(t){return t.getRetainedInterval()>0&&(E("Baking-in simplification setting."),t.flatten()),t.getVertexData()}),n=c.mergeArrays(c.pluck(e,"xx"),Float64Array),r=c.mergeArrays(c.pluck(e,"yy"),Float64Array);return new Z(c.mergeArrays(c.pluck(e,"nn"),Int32Array),n,r)},c.countElements=function(t){return t.reduce(function(t,e){return t+(e.length||0)},0)},c.mergeArrays=function(t,e){var n=c.countElements(t),r=new(e||Array)(n),i=0;return t.forEach(function(t){for(var e=t.length,n=0;n<e;n++)r[n+i]=t[n];i+=e}),r},v.mergeDatasetsIntoDataset=function(t,e){var n=v.mergeDatasets([t].concat(e)),r=e.reduce(function(t,e){return t.concat(e.layers)},[]);return t.arcs=n.arcs,r},v.splitDataset=function(t){return t.layers.map(function(e){var n={arcs:t.arcs,layers:[e],info:t.info};return v.dissolveArcs(n),n})},v.copyDataset=function(t){var e=c.extend({},t);return e.layers=e.layers.map(v.copyLayer),e.arcs&&(e.arcs=e.arcs.getFilteredCopy()),e},v.copyDatasetForExport=function(t){var e=c.extend({},t);return e.layers=e.layers.map(v.copyLayerShapes),e.arcs&&(e.arcs=e.arcs.getFilteredCopy()),e},v.copyDatasetForRenaming=function(t){return c.defaults({layers:t.layers.map(function(t){return c.extend({},t)})},t)},v.getDatasetBounds=function(t){var e=new h;return t.layers.forEach(function(n){var r=v.getLayerBounds(n,t.arcs);r&&e.mergeBounds(r)}),e},v.datasetHasGeometry=function(t){return c.some(t.layers,function(t){return v.layerHasGeometry(t)})},v.datasetHasPaths=function(t){return c.some(t.layers,function(t){return v.layerHasPaths(t)})},v.cleanupArcs=function(t){if(t.arcs&&!c.some(t.layers,v.layerHasPaths))return t.arcs=null,!0},v.pruneArcs=function(t){v.cleanupArcs(t),t.arcs&&v.dissolveArcs(t)},v.replaceLayers=function(t,e,n){var r=t.layers.concat();c.repeat(Math.max(e.length,n.length),function(t){var i=e[t],o=n[t],a=i?r.indexOf(i):r.length;i&&r.splice(a,1),o&&r.splice(a,0,o)}),t.layers=r},v.transformPoints=function(t,e){t.arcs&&t.arcs.transformPoints(e),t.layers.forEach(function(t){v.layerHasPoints(t)&&v.transformPointsInLayer(t,e)})},v.dissolveArcs=function(t){var e=t.arcs,n=t.layers.filter(v.layerHasPaths);if(e&&n.length){var r=v.getArcDissolveTest(n,e),i=[],o=0,a=new Int32Array(e.size()),s=new Uint8Array(e.size());n.forEach(function(t){t.shapes=t.shapes.map(function(t){return v.editShapeParts(t&&t.concat(),u)})}),t.arcs=v.dissolveArcCollection(e,i,o)}else t.arcs=null;function u(t){for(var n,u,c,l,f,p,h=0,d=[],g=0,y=t.length;g<y;g++)f=(u=t[g])===(c=C(u)),e.arcIsDegenerate(u)||(0!==s[c]?n=null:(l=e.getArcLength(u),n&&r(t[g-1],u)?(l>0&&l--,n.push(u),s[c]=1):(n=[u],a[c]=i.length,i.push(n),s[c]=f?2:3),h+=l)),s[c]>1&&(p=a[c],(f&&3==s[c]||!f&&2==s[c])&&(p=~p),d.push(p));return o+=h,d}},v.dissolveArcCollection=function(t,e,n){var r=new Uint32Array(e.length),i=new Float64Array(n),o=new Float64Array(n),a=t.getVertexData(),s=a.zz?new Float64Array(n):null,u=t.getRetainedInterval(),l=0;return e.forEach(function(t,e){t.forEach(function(t,n){!function(t,e){var n=C(t),u=t<0,f=a.nn[n],p=a.ii[n],h=r[e];f>0&&(h>0&&(f--,u||p++),c.copyElements(a.xx,p,i,l,f,u),c.copyElements(a.yy,p,o,l,f,u),s&&c.copyElements(a.zz,p,s,l,f,u),r[e]+=f,l+=f)}(t,e)})}),new Z(r,i,o).setThresholds(s).setRetainedInterval(u)},v.getArcDissolveTest=function(t,e){var n,r,i=new gt(e,v.getArcPresenceTest2(t,e)),o=t.filter(function(t){return"polyline"==t.geometry_type}),a=v.getPathEndpointTest(o,e);return function(t,e){return t==e||t==~e?(E("Unexpected arc sequence:",t,e),!1):(n=0,i.forEachConnectedArc(t,s),1==n&&r==~e&&!a(t)&&!a(~e))};function s(t,e){n++,r=t}},v.dissolveBufferDataset=function(t,e){var n,r=e||{},i=t.layers[0],o=v.addIntersectionCuts(t,{});if(r.debug_division)return v.debugBufferDivision(i,o);var a=new Ft(i,o,{flat:!1,no_holes:!1});if(r.debug_mosaic)return n=v.composeMosaicLayer(i,a.mosaic),i.shapes=n.shapes,void(i.data=n.data);var s=v.getRingIntersector(a.nodes,"dissolve"),u=i.shapes.map(function(t,e){for(var n=a.getTilesByShapeIds([e]),r=[],i=0;i<n.length;i++)r.push(n[i][0]);return s(r)});i.shapes=u,r.no_dissolve||v.dissolveArcs(t)},v.debugBufferDivision=function(t,e){var n=v.getHoleDivider(e),r=[],i=[];return t.shapes.forEach(function(t){var e=[],o=[];n(t,e,o),e.forEach(function(t){r.push([t]),i.push({type:"ring"})}),o.forEach(function(t){r.push([v.reversePath(t)]),i.push({type:"hole"})})}),t.shapes=r,t.data=new rt(i),t},v.getBufferTileDissolver=function(){return function(t){return ft([t],function(t){return 0})[0]}},v.getBufferToleranceFromCircleSegments=function(t){return 1-Math.cos(Math.PI/t)},v.getArcDegreesFromTolerancePct=function(t){return 360*Math.acos(1-t)/Math.PI},v.getBufferToleranceFromCircleSegments2=function(t){return 1/Math.cos(Math.PI/t)-1},v.getArcDegreesFromTolerancePct2=function(t){return 360*Math.acos(1/(t+1))/Math.PI},v.parseConstantBufferDistance=function(t,e){return v.parseMeasure2(t).value&&v.convertDistanceParam(t,e)||null},v.getBufferToleranceFunction=function(t,e){var n=v.getDatasetCRS(t),r=e.tolerance?v.parseConstantBufferDistance(e.tolerance,n):0;return function(t){return r||(r||.01*t)}},v.getBufferDistanceFunction=function(t,e,n){n.radius||b("Missing expected radius parameter");var r=n.units||"",i=v.getDatasetCRS(e),o=v.parseConstantBufferDistance(n.radius+r,i);if(o)return function(){return o};var a=v.compileValueExpression(n.radius,t,null,{});return function(t){var e=a(t);return e&&v.parseConstantBufferDistance(e+r,i)||0}},v.getGeodesic=function(t){var e=v.getDatasetCRS(t);v.isLatLngCRS(e)||u("Expected an unprojected CRS");var r=e.es/(1+Math.sqrt(e.one_es));return new(n(11).internal.GeographicLib.Geodesic.Geodesic)(e.a,r)},v.getPlanarSegmentEndpoint=function(t,e,n,r){var i=n/180*Math.PI;return[t+Math.sin(i)*r,e+Math.cos(i)*r]},v.fastGeodeticSegmentFunction=function(t,e,n,r){var i=Math.PI/180,o=Math.cos(e*i),a=2*o*o-1,s=2*o*a-o,u=2*o*s-a,c=1e3*(111.41513*o-.09455*s+12e-5*(2*o*u-s)),l=1e3*(111.13209-.56605*a+.0012*u),f=n*i,p=e+Math.cos(f)*r/l;return[t+Math.sin(f)*r/c,p]},v.getGeodeticSegmentFunction=function(t,e){var n=v.getDatasetCRS(t);if(!v.isLatLngCRS(n))return v.getPlanarSegmentEndpoint;if(!e)return v.fastGeodeticSegmentFunction;var r=v.getGeodesic(t);return function(t,e,n,i){var o=r.Direct(e,t,n,i);return[o.lon2,o.lat2]}},v.getGeodeticDistanceFunction=function(t,e){var n=v.getDatasetCRS(t);if(!v.isLatLngCRS(n))return v.getPlanarSegmentEndpoint},v.segmentTurn=function(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1],u=a-n[0],c=s-n[1],l=r[0]+u,f=r[1]+c,p=H.orient2D(i,o,a,s,l,f);return p?p<0?1:-1:0},v.bearingDegrees=function(t,e,n,r){return 180*H.bearing(t,e,n,r)/Math.PI},v.bearingDegrees2D=function(t,e,n,r){return 180*H.bearing2D(t,e,n,r)/Math.PI},v.getBearingFunction=function(t){var e=v.getDatasetCRS(t);return v.isLatLngCRS(e)?v.bearingDegrees:v.bearingDegrees2D};var yt,mt={};function vt(t){function e(e){var n,r,i,o,a=0,s=!1,u=!1,c=t.readSync(e),l=null;for(r=0,i=c.length;r<i;r++){if(o=c[r],s)u?u=!1:34==o?s=!1:92==o&&(u=!0);else if(34==o)s=!0;else if(123==o)0===a&&(n=r),a++;else if(125==o){if(0===--a){l={text:v.bufferToString(c,"utf8",n,r+1),offset:e+r+1};break}if(-1==a)break}else if(93==o&&0===a)break;r==i-1&&(i=(c=t.expandBuffer().readSync(e)).length)}return l}this.readObjects=function(n){var r=t.findString('"features"',5e3)||t.findString('"geometries"',5e3);!function(t,n){var r=e(t);for(;r;)n(JSON.parse(r.text)),r=e(r.offset)}(r?r.offset:0,n)},this.readObject=e}function _t(t){var e=new ArrayBuffer(16),n=new Float64Array(e),r=new Uint32Array(e),i=0|t;if(i>0==!1)throw new Error("Invalid size param: "+t);return function(t,e){var o,a=r;return n[0]=t,n[1]=e,(2147483647&(o=(o=a[0]^a[1])<<5^o>>7^a[2]^a[3]))%i}}function bt(t){var e=Math.floor(.25*t+1),n=_t(e),r=new Int32Array(e),i=[],o=[],a=0;function s(t,e,a,s,u){for(var c,l,f,p=u(a),h=n(t[a],e[a]),d=r[h];-1!=d;){if(c=o[d][0],l=o[d][1],f=c.length,c[0]===t[s]&&c[f-1]===t[a]&&c[f-2]===t[p]&&l[0]===e[s]&&l[f-1]===e[a]&&l[f-2]===e[p])return d;d=i[d]}return null}c.initializeArray(r,-1),this.addArc=function(t,e){var s=t.length-1,u=n(t[s],e[s]),c=r[u],l=o.length;return r[u]=l,o.push([t,e]),a+=t.length,i.push(c),l},this.findDuplicateArc=function(t,e,n,r,i,o){var a=s(t,e,n,r,i);return a=null===a?s(t,e,r,n,o):~a},this.getVertexData=function(){for(var t,e,n=new Float64Array(a),r=new Float64Array(a),i=new Uint32Array(o.length),s=0,u=0,l=o.length;u<l;u++)e=(t=o[u])[0].length,c.copyElements(t[0],0,n,s,e),c.copyElements(t[1],0,r,s,e),i[u]=e,s+=e;return{xx:n,yy:r,nn:i}}}function xt(t,e){for(var n,r,i,o,a=function(t,e){var n,r,i,o,a,s=t.length,u=Math.floor(1.3*s)||1,c=_t(u),l=new Int32Array(u),f=new Int32Array(s);for(i=0;i<s;i++)o=t[i],a=e[i],o!=o||a!=a?r=-1:(r=l[n=c(o,a)]-1,l[n]=i+1),f[i]=r>=0?r:i;return f}(t,e),s=t.length-1;s>=0;s--)if(!((r=a[s])>=s)){i=s,o=-1;do{r=a[n=r],e[n]==e[s]&&t[n]==t[s]?(a[n]=i,i=n):(o>-1&&(a[o]=n),o=n)}while(r<n);o>-1&&(a[o]=o),a[s]=i}return a}function St(t){var e=new Uint8Array(t);this.setId=function(t){t<0?e[~t]|=2:e[t]|=1},this.hasId=function(t){return t<0?2==(2&e[~t]):1==(1&e[t])},this.clearId=function(t){t<0?e[~t]&=1:e[t]&=2},this.clearIds=function(t){for(var e=0;e<t.length;e++)this.clearId(t[e])},this.setIds=function(t){for(var e=0;e<t.length;e++)this.setId(t[e])}}function wt(t){var e=1e4,n=new Float64Array(e),r=new Float64Array(e),i=0;this.endPath=function(){t(n,r,i),i=0},this.addPoint=function(t,o){i>=e&&(e=Math.ceil(1.3*e),n=c.extendBuffer(n,e),r=c.extendBuffer(r,e)),n[i]=t,r[i]=o,i++}}function Et(t){var e=t.reserved_points>0?t.reserved_points:2e4,n=new Float64Array(e),r=new Float64Array(e),i=[],o=[],a=[],s=[],u=t.type||null,l=null,f=-1,p=-1,h=0,d=0,g=0;function y(t){var e=p<s.length?s[p]:null;e?e!=t&&b("Unable to import mixed-geometry GeoJSON features"):(s[p]=t,u?t!=u&&(u="mixed"):u=t)}function m(t){if(t>n.length){var e=Math.max(t,Math.ceil(1.5*n.length));n=c.extendBuffer(n,e,h),r=c.extendBuffer(r,e,h)}}function _(t){(i[p]||(i[p]=[])).push(t)}t.precision&&(l=c.getRoundingFunction(t.precision)),c.extend(this,new wt(function(t,e,i){var o,s,c,p,y=0;m(h+i);for(var v=0;v<i;v++)o=t[v],s=e[v],l&&(o=l(o),s=l(s)),v>0&&o==c&&s==p?d++:(n[h]=o,r[h]=s,h++,y++),p=s,c=o;"polygon"==u&&y>0&&(t[0]==t[i-1]&&e[0]==e[i-1]||(m(h+1),n[h]=t[0],r[h]=e[0],g++,h++,y++));!function(t){a[++f]=t,_([f])}(y)})),this.startShape=function(t){i[++p]=null,t&&(o[p]=t)},this.importLine=function(t){t.length<2?E("Skipping a defective line"):(y("polyline"),this.importPath(t))},this.importPoints=function(t){y("point"),l&&t.forEach(function(t){t[0]=l(t[0]),t[1]=l(t[1])}),t.forEach(_)},this.importRing=function(t,e){var n=H.getPlanarPathArea2(t);!n||t.length<4?E("Skipping a defective ring"):(y("polygon"),(!0===e&&n>0||!1===e&&n<0)&&(E("Warning: reversing",e?"a CW hole":"a CCW ring"),t.reverse()),this.importPath(t))},this.importPath=function(t){for(var e,n=0,r=t.length;n<r;n++)e=t[n],this.addPoint(e[0],e[1]);this.endPath()},this.done=function(){var t,e,l={name:""};return d>0&&E(c.format("Removed %,d duplicate point%s",d,c.pluralSuffix(d))),g>0&&w(c.format("Closed %,d open polygon ring%s",g,c.pluralSuffix(g))),h>0&&(h<n.length&&(n=n.subarray(0,h),r=r.subarray(0,h)),t=new Z(a,n,r)),"mixed"==u?e=v.divideFeaturesByType(i,o,s):(l={geometry_type:u},u&&(l.shapes=i),o.length>0&&(l.data=new rt(o)),e=[l]),e.forEach(function(t){t.data&&v.fixInconsistentFields(t.data.getRecords())}),{arcs:t||null,info:{},layers:e}}}function It(t){var e=t.id_field||mt.ID_FIELD,n=new Et(t);this.parseObject=function(r){var i,o;r&&r.type?"Feature"==r.type?(i=r.geometry,o=r.properties||{},"id"in r&&(o[e]=r.id)):i=r:i=null,n.startShape(o),i&&mt.importGeometry(i,n,t)},this.done=function(){return n.done()}}function Ct(t,e,n){var r,i,o,a,s,c,l=e.getVertexData(),f=e.getMultiShapeBounds(t);function p(t,e,n){var r,u,c,f=s[n],p=0,h=l.xx,d=l.yy;r=n==a?i.length-f:s[n+1]-f;for(var g=0;g<r;g++)u=i[g+f],c=o[g+f],p+=H.testRayIntersection(t,e,h[u],d[u],h[c],d[c]);return p}function h(t){var e=Math.floor((t-r)/c);return e<0&&(e=0),e>=a&&(e=a-1),e}!function(){var n,f,p,d,g,y,m,_,b,x,S=l.xx,w=0,E=0,I=-1;v.forEachSegmentInShape(t,e,function(){w++}),f=new Uint32Array(2*w),m=0,v.forEachSegmentInShape(t,e,function(t,e,n,r){f[m++]=t,f[m++]=e}),v.sortSegmentIds(S,f),i=new Uint32Array(w),o=new Uint32Array(w),a=function(t){var e=Math.pow(t,.75)/10;return Math.ceil(e)}(w),s=new Uint32Array(a+1),r=S[f[0]],c=(S[f[f.length-2]]-r)/a,p=0,d=w-1;for(;E<w;){for(g=f[_=2*E],y=f[_+1],b=S[g],x=S[y],n=I,I=h(b);I>n;)s[++n]=p;x-b>=0==!1&&u("Invalid segment"),h(x)-I>1?(i[d]=g,o[d]=y,d--):(i[p]=g,o[p]=y,p++),E++}s[a]=p,p!=d+1&&u("Segment indexing error")}(),this.pointInPolygon=function(t,e){if(!f.containsPoint(t,e))return!1;var n=h(t),r=p(t,e,n);return n>0&&(r+=p(t,e,n-1)),r+=p(t,e,a),isNaN(r)?-1:r%2==1?1:0}}function Pt(t,e){var n=v.getBoundsSearchFunction(function(t,e){var n=[];return t.forEach(function(t,r){for(var i=t?t.length:0,o=0;o<i;o++)n.push({ids:t[o],id:r,bounds:e.getSimpleShapeBounds(t[o])})}),n}(t,e)),r=v.getPathBounds(t,e).area();function i(t,n){return!!n.bounds.containsPoint(t[0],t[1])&&(!n.index&&n.bounds.area()>.01*r&&(n.index=new Ct([n.ids],e)),n.index?n.index.pointInPolygon(t[0],t[1]):H.testPointInRing(t[0],t[1],n.ids,e))}function o(t,e){var n=!1,r=!1;return e.forEach(function(e){var o=i(t,e);-1==o?n=!0:1==o&&(r=!r)}),n||r}function a(t){var e,n,r=[];if(t.length>0){t.sort(function(t,e){return t.id-e.id});for(var i=0;i<t.length;i++)n=t[i],0!==i&&n.id==t[i-1].id||r.push(e=[]),e.push(n)}return r}function s(t,e){var r=e>0?e:0;t[0],t[1];return n(t[0]-r,t[1]-r,t[0]+r,t[1]+r)}function u(t){var n=t[0],r=e.getVertex(n,0),i=e.getVertex(n,1);return[(r.x+i.x)/2,(r.y+i.y)/2]}this.findEnclosingShapes=function(t){var e=[];return a(s(t)).forEach(function(n){o(t,n)&&e.push(n[0].id)}),e},this.findEnclosingShape=function(t){var e=-1;return a(s(t)).forEach(function(n){o(t,n)&&(e=n[0].id)}),e},this.findPointEnclosureCandidates=function(t,e){var n=s(t,e);return c.pluck(n,"id")},this.pointIsEnclosed=function(t){return o(t,s(t))},this.findSmallestEnclosingPolygon=function(t){var n,r=e.getSimpleShapeBounds(t),o=u(t);return s(o).forEach(function(t){!t.bounds.contains(r)||t.bounds.sameBounds(r)||n&&n.bounds.area()<t.bounds.area()||i(o,t)&&(n=t)}),n?n.id:-1},this.arcIsEnclosed=function(t){return this.pointIsEnclosed(u([t]))},this.pathIsEnclosed=function(t){return this.pointIsEnclosed(u(t))},this.findEnclosedPaths=function(t){var r,i=e.getSimpleShapeBounds(t),o=n(i.xmin,i.ymin,i.xmax,i.ymax),a=[];return o.length>6&&(r=new Ct([t],e)),o.forEach(function(n){var o=u(n.ids);i.containsPoint(o[0],o[1])&&(r?r.pointInPolygon(o[0],o[1]):H.testPointInRing(o[0],o[1],t,e))&&a.push(n.ids)}),a.length>0?a:null},this.findPathsInsideShape=function(t){var e=[];return t.forEach(function(t){var n=this.findEnclosedPaths(t);n&&(e=function(t,e){var n,r=[];for(n=0;n<t.length;n++)-1==e.indexOf(t[n])&&r.push(t[n]);for(n=0;n<e.length;n++)-1==t.indexOf(e[n])&&r.push(e[n]);return r}(e,n))},this),e.length>0?e:null}}function Nt(t,e,n,r,i,o){var a=O(n,r,i,o);return a<e&&(e=a,t[0]=i,t[1]=o),e}function At(t,e,n){return e<n?t<e||t>n:e>n?t>e||t<n:t!=e}function Tt(t,e,n){var r;return H.outsideRange(t,e,n)&&(r=Math.abs(t-e)<Math.abs(t-n)?e:n,Math.abs(t-r)>1e-15&&I("[clampToCloseRange()] large clamping interval",t,e,n),t=r),t}function Ot(t,e,n,r){return t*r-e*n}function Mt(t,e,n,r,i,o){return Ot(t-i,e-o,n-i,r-o)}function Lt(t,e,n,r,i,o,a,s){return Mt(t,e,n,r,i,o)*Mt(t,e,n,r,a,s)<=0&&Mt(i,o,a,s,t,e)*Mt(i,o,a,s,n,r)<=0}function Rt(t,e,n){return t>e&&t<n}function Dt(t,e){Object.keys(e).forEach(function(n){Object.defineProperty(t,n,{get:e[n]})})}function Ft(t,e,n){var r=n||{},i=t.shapes,o=(v.getHoleDivider(e),v.buildPolygonMosaic(e).mosaic),a=new Bt(o,e.arcs),s=new St(o.length),c=new jt(o,r),l=new kt(o,a,e,r);function f(t,e){return o[t]}function p(t){for(var n,r,i,s,u=o[t][0],l=e.arcs,f=-1,p=0,h=0;h<u.length;h++)n=u[h],(i=a.getShapeIdByArcId(~n))<0||(r=c.getShapeIdByTileId(i))<0||(s=H.getPathPerimeter([n],l))>p&&(f=r,p=s);f>-1&&c.addTileToShape(f,t)}this.mosaic=o,this.nodes=e,i.forEach(function(t,e){var n=l.getTilesInShape(t,e);c.indexTileIdsByShapeId(e,n)}),r.flat&&c.flatten(),this.removeGaps=function(t){r.flat||u("MosaicIndex#removeGaps() should only be called with flat mosaic"),c.getUnusedTileIds().filter(function(e){var n=o[e];return t(n[0])}).forEach(p)},this.getUnusedTiles=function(){return getUnusedTileIds().map(f)},this.getTilesByShapeIds=function(t){return function(t){var e,n,r,i,o=[];for(r=0;r<t.length;r++)for(n=c.getTileIdsByShapeId(t[r]),i=0;i<n.length;i++)e=n[i],s.hasId(e)||(s.setId(e),o.push(e));return s.clearIds(o),o}(t).map(f)},this.overlayShapes=function(t){}}function kt(t,e,n,r){var i,o,a=new St(t.length),s=v.getHoleDivider(n),u=new St(n.arcs.size()),c=new St(n.arcs.size());function l(t){i=i?i.concat(t):t}function f(t){u.setIds(t),p(t),u.clearIds(t),a.clearIds(o)}function p(e){for(var n,r=[],i=0,o=e.length;i<o;i++)(n=d(e[i]))>-1&&r.push(n);r.length>0&&function(e){for(var n=[],r=0,i=e.length;r<i;r++)h(n,t[e[r]]);n.length>0&&p(n)}(r)}function h(t,e){for(var n,r,i,o,a=0;a<e.length;a++){r=e[a];for(var s=0;s<r.length;s++)n=r[s],o=void 0,o=~(i=n),c.hasId(i)||c.hasId(o)||u.hasId(i)||u.hasId(o)||t.push(~n)}}function d(t){var n=e.getShapeIdByArcId(t);return-1==n||a.hasId(n)?-1:(a.setId(n),o.push(n),n)}this.getTilesInShape=function(t,e){var n,a=[],u=[];return o=[],i=[],e,r.no_holes?s(t,a,u):(s(t,a,u),u.forEach(l),c.setIds(i)),a.forEach(f),n=o,o=null,c.clearIds(i),i=null,n}}function Bt(t,e){var n,r=e.size(),i=new Int32Array(r),o=new Int32Array(r);function a(t){for(var e,r=0,a=t.length;r<a;r++)(e=t[r])<0?o[~e]=n:i[e]=n}c.initializeArray(i,-1),c.initializeArray(o,-1),t.forEach(function(t,e){n=e,t.forEach(a)}),this.getShapeIdByArcId=function(t){var e=C(t);return e>=r?-1:t<0?o[e]:i[e]}}function jt(t,e){var n=new Int32Array(t.length);c.initializeArray(n,-1);var r=[],i=[];function o(t,o){var a=n[o];-1!=a&&e.flat||(-1==a?n[o]=t:-2==a?r[o].push(t):(r[o]=[a,t],n[o]=-2),i[t].push(o))}this.getTileIdsByShapeId=function(t){return i[t]},this.getShapeIdByTileId=function(t){var e=n[t];return e>=0?e:-1},this.indexTileIdsByShapeId=function(t,e){i[t]=[];for(var n=0;n<e.length;n++)o(t,e[n])},this.flatten=function(){r.forEach(function(t,e){!function(t){var e,o=r[t],a=o[0];n[t]=a;for(var s=0;s<o.length;s++)(e=o[s])!=a&&(i[e]=i[e].filter(u),i[e].length);function u(e){return t!=e}}(e)}),r=[]},this.getUnusedTileIds=function(){for(var t=[],e=0,r=n.length;e<r;e++)-1==n[e]&&t.push(e);return t},this.addTileToShape=function(t,e){t in i!=!1&&-1==n[e]||u("Internal error"),n[e]=t,i[t].push(e)}}mt.ID_FIELD="FID",mt.typeLookup={LineString:"polyline",MultiLineString:"polyline",Polygon:"polygon",MultiPolygon:"polygon",Point:"point",MultiPoint:"point"},mt.translateGeoJSONType=function(t){return mt.typeLookup[t]||null},mt.pathIsRing=function(t){var e=t[0],n=t[t.length-1];return t.length>=4&&e[0]==n[0]&&e[1]==n[1]},v.GeoJSONReader=vt,v.roundPoints=function(t,e){v.forEachPoint(t.shapes,function(t){t[0]=e(t[0]),t[1]=e(t[1])})},v.setCoordinatePrecision=function(t,e){var n=c.getRoundingFunction(e);return v.transformPoints(t,function(t,e){return[n(t),n(e)]}),t},c.getRoundingFunction=function(t){c.isNumber(t)&&0!==t||u("Rounding increment must be a non-zero number.");var e=1/t;return e>1&&(e=Math.round(e)),function(t){return Math.round(t*e)/e}},H.calcPolsbyPopperCompactness=function(t,e){return e?t*Math.PI*4/(e*e):0},H.getShapeArea=function(t,e){return(t||[]).reduce(function(t,n){return t+H.getPathArea(n,e)},0)},H.getPlanarShapeArea=function(t,e){return(t||[]).reduce(function(t,n){return t+H.getPlanarPathArea(n,e)},0)},H.getSphericalShapeArea=function(t,e){return e.isPlanar()&&u("[getSphericalShapeArea()] Function requires decimal degree coordinates"),(t||[]).reduce(function(t,n){return t+H.getSphericalPathArea(n,e)},0)},H.getMaxPath=function(t,e){var n=0;return(t||[]).reduce(function(t,r){var i=e.getSimpleShapeBounds(r).area();return i>n&&(n=i,t=r),t},null)},H.getAvgPathXY=function(t,e){var n=e.getShapeIter(t);if(!n.hasNext())return null;for(var r=n.x,i=n.y,o=0,a=0,s=0;n.hasNext();)o++,a+=n.x,s+=n.y;return 0!==o&&n.x===r&&n.y===i||(a+=r,s+=i,o++),{x:a/o,y:s/o}},H.testPointInPolygon=function(t,e,n,r){var i=!1,o=!1;return n&&n.forEach(function(n){var a=H.testPointInRing(t,e,n,r);1==a?i=!i:-1==a&&(o=!0)}),o||i},H.getPointToPathDistance=function(t,e,n,r){return H.getPointToPathInfo(t,e,n,r).distance},H.getPointToPathInfo=function(t,e,n,r){var i,o,a,s,u,c,l,f,p,h,d,g=r.getShapeIter(n),y=1/0;for(g.hasNext()&&(p=T(t,e,i=u=l=g.x,o=c=f=g.y));g.hasNext();)(d=V(p,h=T(t,e,a=g.x,s=g.y),T(i,o,a,s)))<y&&(y=d,u=i,c=o,l=a,f=s),i=a,o=s,p=h;return y==1/0?{distance:1/0}:{segment:[[u,c],[l,f]],distance:Math.sqrt(y)}},H.getYIntercept=function(t,e,n,r,i){return n+(t-e)*(i-n)/(r-e)},H.getXIntercept=function(t,e,n,r,i){return e+(t-n)*(r-e)/(i-n)},H.getPointToShapeDistance=function(t,e,n,r){return(n||[]).reduce(function(n,i){var o=H.getPointToPathDistance(t,e,i,r);return Math.min(n,o)},1/0)},H.testPointInRing=function(t,e,n,r){var i=!1,o=!1;return v.forEachSegmentInPath(n,r,function(n,r,a,s){var u=H.testRayIntersection(t,e,a[n],s[n],a[r],s[r]);1==u?i=!i:isNaN(u)&&(o=!0)}),o?-1:i?1:0},H.testRayIntersection=function(t,e,n,r,i,o){var a=H.getRayIntersection(t,e,n,r,i,o);return a!=a?NaN:a==-1/0?0:1},H.getRayIntersection=function(t,e,n,r,i,o){var a,s=-1/0;return t<n&&t<i||t>n&&t>i||e>r&&e>o||(t===n||t===i?t===n&&t===i?e!=r&&e!=o&&e>r==e>o||(s=NaN):t===n?e===r?s=NaN:i<n&&e<r&&(s=r):e===o?s=NaN:n<i&&e<o&&(s=o):(a=H.getYIntercept(t,n,r,i,o))>e?s=a:a==e&&(s=NaN)),s},H.getPathArea=function(t,e){return(e.isPlanar()?H.getPlanarPathArea:H.getSphericalPathArea)(t,e)},H.getSphericalPathArea=function(t,e){for(var n,r,i,o,a=e.getShapeIter(t),s=0,u=!1,c=Math.PI/180;a.hasNext();)n=a.x*c,r=Math.sin(a.y*c),u?s+=(n-i)*(2+r+o):u=!0,i=n,o=r;return s/2*6378137*6378137},H.getPlanarPathArea2=function(t){for(var e,n,r,i,o,a,s,u=0,c=0,l=t.length;c<l;c++)s=t[c],0===c?(e=0,n=0,o=-s[0],a=-s[1]):u+=(e=s[0]+o)*i-r*(n=s[1]+a),r=e,i=n;return u/2},H.getPlanarPathArea=function(t,e){var n,r,i,o,a,s,u=e.getShapeIter(t),c=0;if(u.hasNext())for(n=0,r=0,a=-u.x,s=-u.y;u.hasNext();)i=n,o=r,c+=(n=u.x+a)*o-i*(r=u.y+s);return c/2},H.getPathPerimeter=function(t,e){return(e.isPlanar()?H.getPlanarPathPerimeter:H.getSphericalPathPerimeter)(t,e)},H.getShapePerimeter=function(t,e){return(t||[]).reduce(function(t,n){return t+H.getPathPerimeter(n,e)},0)},H.getSphericalShapePerimeter=function(t,e){return e.isPlanar()&&u("[getSphericalShapePerimeter()] Function requires decimal degree coordinates"),(t||[]).reduce(function(t,n){return t+H.getSphericalPathPerimeter(n,e)},0)},H.getPlanarPathPerimeter=function(t,e){return H.calcPathLen(t,e,!1)},H.getSphericalPathPerimeter=function(t,e){return H.calcPathLen(t,e,!0)},H.countVerticesInPath=function(t,e){for(var n=e.getShapeIter(t),r=0;n.hasNext();)r++;return r},H.getPathBounds=function(t){for(var e=new h,n=0,r=t.length;n<r;n++)e.mergePoint(t[n][0],t[n][1]);return e},H.transposePoints=function(t){for(var e=[],n=[],r=t.length,i=0;i<r;i++)e.push(t[i][0]),n.push(t[i][1]);return[e,n]},H.calcPathLen=function(){var t,e;function n(n,r,i,o){t+=e(i[n],o[n],i[r],o[r])}return function(r,i,o){o&&i.isPlanar()&&u("Expected lat-long coordinates"),e=o?B:O,t=0;for(var a=0,s=r.length;a<s;a++)i.forEachArcSegment(r[a],n);return t}}(),m.buildTopology=function(t){if(t.arcs){var e=t.arcs.getVertexData(),n=v.buildPathTopology(e.nn,e.xx,e.yy);t.arcs.updateVertexData(n.nn,n.xx,n.yy),t.layers.forEach(function(t){"polyline"!=t.geometry_type&&"polygon"!=t.geometry_type||(t.shapes=v.replaceArcIds(t.shapes,n.paths))})}},v.buildPathTopology=function(t,e,n){var r,i,o=e.length,a=xt(e,n),s=function(t,e){for(var n=new Int32Array(t),r=0,i=0,o=e.length;i<o;i++)for(var a=0,s=e[i];a<s;a++,r++)n[r]=i;return n}(o,t),c=new bt(o),l=f()?e.subarray:Array.prototype.slice;return r=function(t){for(var e,n=[],r=0,i=0,o=t.length;i<o;i++)e=t[i],n.push(e<2?null:g(r,r+e-1)),r+=e;return n}(t),(i=c.getVertexData()).paths=r,i;function f(){return!(!e.subarray||!n.subarray)}function p(e){var n=s[e],r=e+1;if(r<o&&s[r]===n)return e+1;var i=t[n];return d(e,e-i+1)?e-i+2:-1}function h(e){var n=s[e],r=e-1;if(r>=0&&s[r]===n)return e-1;var i=t[n];return d(e,e+i-1)?e+i-2:-1}function d(t,r){return e[t]==e[r]&&n[t]==n[r]}function g(r,i){for(var o,l=[],f=-1,d=r;d<i;d++)y(d)&&(f>-1?l.push(_(o,d)):f=d,o=d);return-1==f?l.push(function(r,i){var o,l=a[r],f=s[r];for(;l!=r&&!(s[l]<f);)l=a[l];if(l==r)return _(r,i);for(var d=r;d<i;d++)if(null!==(o=c.findDuplicateArc(e,n,d,d,p,h)))return o;u("Unmatched ring; id:",f,"len:",t[f])}(r,i)):f==r?(y(i)||u("Topology error"),l.push(_(o,d))):l.push(function(t,r,i,o){var a=c.findDuplicateArc(e,n,t,o,p,h);null===a&&(a=c.addArc(v(e,t,r,i,o),v(n,t,r,i,o)));return a}(o,i,r+1,f)),l}function y(t){var e,n,r=a[t],i=h(t),o=p(t);if(-1==i||-1==o)return!0;for(;t!=r;){if(e=h(r),n=p(r),-1==e||-1==n||m(i,o,e,n))return!0;r=a[r]}return!1}function m(t,r,i,o){var a=e[t],s=e[r],u=e[i],c=e[o],l=n[t],f=n[r],p=n[i],h=n[o];return!(a==c&&s==u&&l==h&&f==p||a==u&&s==c&&l==p&&f==h)}function v(t,e,n,r,i){var o,a=n-e+i-r+2,s=new(f()?Float64Array:Array)(a),u=0;for(o=e;o<=n;o++)s[u++]=t[o];for(o=r;o<=i;o++)s[u++]=t[o];return s}function _(t,r){var i=c.findDuplicateArc(e,n,t,r,p,h);return null===i&&(i=c.addArc(l.call(e,t,r+1),l.call(n,t,r+1))),i}},v.replaceArcIds=function(t,e){return t.map(function(t){return function(t,e){return t?t.map(function(t){return function(t,e){return t.reduce(function(t,n){var r=C(n),i=e[r];if(i){n<0&&(i=i.concat(),v.reversePath(i));for(var o=0,a=i.length;o<a;o++)t.push(i[o])}return t},[])}(t,e)}):null}(t,e)})},v.getHighPrecisionSnapInterval=function(t){var e=t.getBounds();return e.hasBounds()?1e-14*Math.max(Math.abs(e.xmin),Math.abs(e.ymin),Math.abs(e.xmax),Math.abs(e.ymax)):0},v.snapCoords=function(t,e){var n=v.getAvgSegment(t),r=.0025*n;e>0&&(r=e,w(c.format("Applying snapping threshold of %s -- %.6f times avg. segment length",e,e/n)));var i=v.snapCoordsByInterval(t,r);i>0&&t.dedupCoords(),w(c.format("Snapped %s point%s",i,c.pluralSuffix(i)))},v.snapCoordsByInterval=function(t,e){for(var n=0,r=t.getVertexData(),i=c.sortCoordinateIds(r.xx),o=0,a=i.length;o<a;o++)n+=s(o,e,i,r.xx,r.yy);return n;function s(t,e,n,r,i){for(var o,a,s,u=t,c=n.length,l=r[n[t]],f=i[n[t]],p=0;++u<c&&!((a=r[o=n[u]]-l)>e);)s=i[o]-f,0===a&&0===s||a*a+s*s>e*e||(r[o]=l,i[o]=f,p++);return p}},c.sortCoordinateIds=function(t){for(var e=t.length,n=new Uint32Array(e),r=0;r<e;r++)n[r]=r;return c.quicksortIds(t,n,0,n.length-1),n},c.quicksortIds=function(t,e,n,r){if(r-n>24){for(var i,o=t[e[n+r>>1]],a=n,s=r;a<=s;){for(;t[e[a]]<o;)a++;for(;t[e[s]]>o;)s--;a<=s&&(i=e[a],e[a]=e[s],e[s]=i,a++,s--)}s>n&&c.quicksortIds(t,e,n,s),a<r&&c.quicksortIds(t,e,a,r)}else c.insertionSortIds(t,e,n,r)},c.insertionSortIds=function(t,e,n,r){var i,o,a;for(a=n+1;a<=r;a++){for(i=e[a],o=a-1;o>=n&&t[i]<t[e[o]];o--)e[o+1]=e[o];e[o+1]=i}},v.getSelfIntersectionSplitter=function(t){var e=new St(t.arcs.size()),n=function(t){return e.hasId(~t)};return function(t){e.setIds(t);var n=r(t);return e.clearIds(t),n};function r(t){for(var e=null,n=0,r=t.length;n<r-1;n++)if(null!==(e=i(t,t[n])))return e;return v.removeSpikesInPath(t),t.length>0?[t]:[]}function i(r,i){var s,u,c,l=t.getConnectedArcs(i,n);if(l.length<2)return null;s=[];for(var f=0;f<l.length;f++)(c=a(r,u=~l[f]))>-1&&(e.clearId(u),s.push(c));return s.length<2?null:v.splitPathByIds(r,s).reduce(o,null)}function o(t,e){var n=r(e);return null===t?n:(t.push.apply(t,n),t)}function a(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}},v.splitPathByIds=function(t,e){var n=[];c.genericSort(e,!0),e[0]>0&&n.push(t.slice(0,e[0]));for(var r=0,i=e.length;r<i;r++)r<i-1?n.push(t.slice(e[r],e[r+1])):n.push(t.slice(e[r]));return n.length>e.length&&c.merge(n[0],n.pop()),n},v.deleteHoles=function(t,e){v.editShapes(t.shapes,function(t){if(H.getPathArea(t,e)<=0)return null})},v.getHoleDivider=function(t,e){var n=v.getSelfIntersectionSplitter(t);return function(r,i,o){var a=e?H.getSphericalPathArea:H.getPlanarPathArea;v.forEachShapePart(r,function(e){var r=n(e);0===r.length&&I("[getRingDivider()] Defective path:",e),r.forEach(function(e,n){var r=a(e,t.arcs);r>0?i.push(e):r<0&&o.push(e)})})}},v.cleanShapes=function(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=v.cleanShape(t[r],e,n)},v.cleanShape=function(t,e,n){return v.editShapeParts(t,function(t){var r=v.cleanPath(t,e);return"polygon"==n&&r&&(v.removeSpikesInPath(r),0===H.getPlanarPathArea(r,e)&&(r=null)),r})},v.cleanPath=function(t,e){for(var n=0,r=0,i=t.length;r<i;r++)e.arcIsDegenerate(t[r])&&(n++,t[r]=null);return n>0?t.filter(function(t){return null!==t}):t},v.removeSpikesInPath=function(t){var e=t.length;if(e>=2){if(t[0]==~t[e-1])t.pop(),t.shift();else for(var n=1;n<e;n++)if(t[n-1]==~t[n]){t.splice(n-1,2);break}t.length<e&&v.removeSpikesInPath(t)}},v.repairPolygonGeometry=function(t,e,n){var r=v.addIntersectionCuts(e);return t.forEach(function(t){v.repairSelfIntersections(t,r)}),t},v.repairSelfIntersections=function(t,e){var n=v.getSelfIntersectionSplitter(e);t.shapes=t.shapes.map(function(t,r){return function(t){var r=[];return v.forEachShapePart(t,function(t){var i=n(t);if(0===i.length)u("[cleanPolygon()] Defective path:",t);else if(1==i.length)r.push(i[0]);else{var o,a=H.getPlanarPathArea(t,e.arcs)>0?1:-1;i.reduce(function(t,n,r){var i=H.getPlanarPathArea(n,e.arcs)*a;return i>t&&(o=n,t=i),t},0);o&&r.push(o)}}),r.length>0?r:null}(t)})},v.cleanPathsAfterImport=function(t,e){var n,r=t.arcs;(e.snap||e.auto_snap||e.snap_interval)&&(e.snap_interval&&(n=v.convertIntervalParam(e.snap_interval,v.getDatasetCRS(t))),r&&v.snapCoords(r,n)),t.layers.forEach(function(t){v.layerHasPaths(t)&&v.cleanShapes(t.shapes,r,t.geometry_type)})},v.importGeoJSON=function(t,e){var n,r,i=e||{},o=Object.keys(mt.pathImporters),a=c.isString(t)?JSON.parse(t):t,s=new It(i);return((n="Feature"==a.type?{type:"FeatureCollection",features:[a]}:c.contains(o,a.type)?{type:"GeometryCollection",geometries:[a]}:a).features||n.geometries||[]).forEach(s.parseObject),r=s.done(),v.importCRS(r,a),r},mt.importGeometry=function(t,e,n){var r=t.type;if(r in mt.pathImporters){if(n.geometry_type&&n.geometry_type!=mt.translateGeoJSONType(r))return;mt.pathImporters[r](t.coordinates,e)}else"GeometryCollection"==r?t.geometries.forEach(function(t){mt.importGeometry(t,e,n)}):E("GeoJSON.importGeometry() Unsupported geometry type:",t.type)},mt.pathImporters={LineString:function(t,e){e.importLine(t)},MultiLineString:function(t,e){for(var n=0;n<t.length;n++)mt.pathImporters.LineString(t[n],e)},Polygon:function(t,e){for(var n=0;n<t.length;n++)e.importRing(t[n],n>0)},MultiPolygon:function(t,e){for(var n=0;n<t.length;n++)mt.pathImporters.Polygon(t[n],e)},Point:function(t,e){e.importPoints([t])},MultiPoint:function(t,e){e.importPoints(t)}},v.importCRS=function(t,e){"crs"in e&&(t.info.input_geojson_crs=e.crs)},v.getFormattedStringify=function(t){var e=c.arrayToIndex(t),n="",r=new RegExp('"'+n+"|"+n+'"',"g");function i(t,r){if(t in e&&c.isArray(r)){var i=JSON.stringify(r);if(i.indexOf(!1))return n+i.replace(/,/g,", ")+n}return r}return function(t){return JSON.stringify(t,i,"  ").replace(r,"")}},v.exportPointData=function(t){var e;return t&&0!==t.length?{bounds:(e={points:t,pointCount:t.length,bounds:H.getPathBounds(t)}).bounds,pathData:[e],partCount:1,pointCount:e.pointCount}:{partCount:0,pointCount:0}},v.exportPathData=function(t,e,n){if("point"==n)return v.exportPointData(t);var r=0,i=new h,o=[];return!t||"polyline"!=n&&"polygon"!=n||t.forEach(function(t,a){var s=e.getShapeIter(t),u=v.exportPathCoords(s),c=!0;"polygon"==n?(u.area=H.getPlanarPathArea2(u.points),c=u.pointCount>3&&0!==u.area):"polyline"==n&&(c=u.pointCount>1),c?(r+=u.pointCount,u.bounds=H.getPathBounds(u.points),i.mergeBounds(u.bounds),o.push(u)):E("Skipping a collapsed",n,"path")}),{pointCount:r,pathData:o,pathCount:o.length,bounds:i}},v.exportPathCoords=function(t){for(var e,n,r,i,o=[],a=0;t.hasNext();)e=t.x,n=t.y,0!==a&&r==e&&i==n||(o.push([e,n]),a++),r=e,i=n;return{points:o,pointCount:o.length}},m.mergeLayers=function(t,e){var n=t.filter(v.getFeatureCount),r={};return e=e||{},n.length?1==n.length?(w("Use the target= option to specify multiple layers for merging"),n.concat()):(r.data=v.mergeDataFromLayers(n,e.force),r.name=v.mergeLayerNames(n),r.geometry_type=v.getMergedLayersGeometryType(n),r.geometry_type&&(r.shapes=v.mergeShapesFromLayers(n)),r.shapes&&r.data&&r.shapes.length!=r.data.size()&&u("Mismatch between geometry and attribute data"),[r]):null},v.getMergedLayersGeometryType=function(t){var e=c.uniq(c.pluck(t,"geometry_type"));return e.length>1&&b("Incompatible geometry types:",e.map(function(t){return t||"[none]"}).join(", ")),e[0]||null},v.mergeShapesFromLayers=function(t){return t.reduce(function(t,e){return t.concat(e.shapes)},[])},v.mergeDataFromLayers=function(t,e){var n=c.uniq(t.reduce(function(t,e){return t.concat(e.data?e.data.getFields():[])},[]));if(0===n.length)return null;var r=v.checkMergeLayersInconsistentFields(n,t,e),i=t.reduce(function(t,e){var n=e.data?e.data.getRecords():new rt(v.getFeatureCount(e)).getRecords();return t.concat(n)},[]);return r.length>0&&v.fixInconsistentFields(i),new rt(i)},v.checkMergeLayersInconsistentFields=function(t,e,n){var r,i=c.uniq(e.reduce(function(e,n){return e.concat(c.difference(t,n.data?n.data.getFields():[]))},[]));return i.length>0&&(r="["+i.join(", ")+"]",r=(1==i.length?"Field "+r+" is missing":"Fields "+r+" are missing")+" from one or more layers",n?w("Warning: "+r):b(r)),v.checkMergeLayersFieldTypes(t,e),i},v.checkMergeLayersFieldTypes=function(t,e){t.forEach(function(t){var n=v.checkFieldTypes(t,e);n.length>1&&b('Inconsistent data types in "'+t+'" field:',n.join(", "))})},v.checkFieldTypes=function(t,e){return e.reduce(function(e,n){var r=n.data?v.getColumnType(t,n.data.getRecords()):null;return r&&-1==e.indexOf(r)&&e.push(r),e},[])},v.mergeLayerNames=function(t){return t.reduce(function(t,e){return null===t?t=e.name||null:t&&e.name&&(t=c.mergeNames(t,e.name)),t},null)||""},v.exportGeoJSON=function(t,e){var n,r=(e=e||{}).extension||"json";return(e.precision||e.rfc7946)&&(t=v.copyDatasetForExport(t),v.setCoordinatePrecision(t,e.precision||1e-6)),e.rfc7946&&(n=v.getRFC7946Warnings(t))&&w(n),e.file&&(r=c.getFileExtension(e.file)),(e.combine_layers?[t.layers]:t.layers.map(function(t){return[t]})).map(function(n){var i=v.mergeLayerNames(n)||"output",o=c.defaults({layers:n},t);return{content:v.exportDatasetAsGeoJSON(o,e,"buffer"),filename:i+"."+r}})},v.exportLayerAsGeoJSON=function(t,e,n,r,i){var o,a=v.exportProperties(t.data,n),s=t.shapes,c=v.exportIds(t.data,n);return i&&(o=n.prettify?v.getFormattedStringify(["bbox","coordinates"]):JSON.stringify),a&&s&&a.length!==s.length&&u("Mismatch between number of properties and number of shapes"),(s||a||[]).reduce(function(u,l,f){var p=s?s[f]:null,h=mt.exporters[t.geometry_type],d=p?h(p,e.arcs,n):null;if(r)d={type:"Feature",geometry:d,properties:a?a[f]:null},c&&(d.id=c[f]);else if(!d)return u;return i&&(d=o(d),"buffer"==i&&(d=v.encodeString(d,"utf8"))),u.push(d),u},[])},v.getRFC7946Warnings=function(t){var e,n=v.getDatasetCRS(t);return n&&v.isLatLngCRS(n)||(e="RFC 7946 warning: non-WGS84 coordinates.",n&&(e+=' Use "-proj wgs84" to convert.')),e},v.getDatasetBbox=function(t,e){var n,r,i,o,a=v.getDatasetCRS(t),s=e&&a&&v.isLatLngCRS(a),u=new h,c=new h;return t.layers.forEach(function(e){v.layerHasPaths(e)?v.traversePaths(e.shapes,null,function(e){var n=t.arcs.getSimpleShapeBounds(e.arcs);(n.centerX()<0?u:c).mergeBounds(n)}):v.layerHasPoints(e)&&v.forEachPoint(e.shapes,function(t){(t[0]<0?u:c).mergePoint(t[0],t[1])})}),(n=(new h).mergeBounds(c).mergeBounds(u)).hasBounds()&&(o=n.toArray()),s&&c.hasBounds()&&u.hasBounds()&&(r=c.xmin-u.xmax,i=360+u.xmin-c.xmax,r>0&&r>i&&(o[0]=c.xmin,o[2]=u.xmax)),o||null},v.exportDatasetAsGeoJSON=function(t,e,n){var r,i,o,a={},s=t.layers,u=v.useFeatureCollection(s,e);return u?(a.type="FeatureCollection",o="features"):(a.type="GeometryCollection",o="geometries"),e.rfc7946||v.exportCRS(t,a),e.bbox&&(i=v.getDatasetBbox(t,e.rfc7946))&&(a.bbox=i),r=s.reduce(function(r,i,o){var a=v.exportLayerAsGeoJSON(i,t,e,u,n);return r.length>0?r.concat(a):a},[]),"Feature"==e.geojson_type&&1==r.length?r[0]:n?mt.formatGeoJSON(a,r,o,n):(a[o]=r,a)},mt.formatGeoJSON=function(t,e,n,r){var i=JSON.stringify(t).replace(/\}$/,', "'+n+'": [\n');return"buffer"==r?mt.joinOutputBuffers(i,"\n]}",e):i+e.join(",\n")+"\n]}"},mt.joinOutputBuffers=function(t,e,n){var r=c.createBuffer(",\n","utf8"),i=n.reduce(function(t,e,n){return n>0&&t.push(r),t.push(e),t},[c.createBuffer(t,"utf8")]);return i.push(c.createBuffer(e,"utf8")),y.concat(i)},mt.exportPointGeom=function(t,e){var n=null;return 1==t.length?n={type:"Point",coordinates:t[0]}:t.length>1&&(n={type:"MultiPoint",coordinates:t}),n},mt.exportLineGeom=function(t,e){var n=v.exportPathData(t,e,"polyline");if(0===n.pointCount)return null;var r=n.pathData.map(function(t){return t.points});return 1==r.length?{type:"LineString",coordinates:r[0]}:{type:"MultiLineString",coordinates:r}},mt.exportPolygonGeom=function(t,e,n){var r=v.exportPathData(t,e,"polygon");if(0===r.pointCount)return null;var i=v.groupPolygonRings(r.pathData,n.invert_y),o=n.rfc7946&&!n.invert_y,a=i.map(function(t){return t.map(function(t){return o&&t.points.reverse(),t.points})});return 1==a.length?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}},mt.exporters={polygon:mt.exportPolygonGeom,polyline:mt.exportLineGeom,point:mt.exportPointGeom},v.exportCRS=function(t,e){var n=t.info||{};!n.crs&&"input_geojson_crs"in n?e.crs=n.input_geojson_crs:n.crs&&!v.isLatLngCRS(n.crs)&&(e.crs=null)},v.useFeatureCollection=function(t,e){var n=e.geojson_type||"";return"Feature"==n||"FeatureCollection"==n||"GeometryCollection"!=n&&(n&&b("Unsupported GeoJSON type:",e.geojson_type),c.some(t,function(t){var n=t.data?t.data.getFields():[],r=v.useFeatureProperties(n,e),i=!!v.getIdField(n,e);return r||i}))},v.useFeatureProperties=function(t,e){return!(e.drop_table||e.cut_table||0===t.length||1==t.length&&t[0]==mt.ID_FIELD)},v.exportProperties=function(t,e){var n,r=t?t.getFields():[],i=v.getIdField(r,e);return v.useFeatureProperties(r,e)?(n=t.getRecords(),i==mt.ID_FIELD?n.map(function(t){return delete(t=c.extend({},t))[i],t}):n):null},v.getIdField=function(t,e){var n=[],r=e.id_field;return c.isString(r)?n.push(r):c.isArray(r)&&(n=r),n.push(mt.ID_FIELD),c.find(n,function(e){return c.contains(t,e)})},v.exportIds=function(t,e){var n=t?t.getFields():[],r=v.getIdField(n,e);return r?t.getRecords().map(function(t){return r in t?t[r]:null}):null},v.getPolylineBufferMaker=function(t,e,n,r){var i=v.getPathBufferMaker(t,e,n,r),o=r.geometry_type,a="polyline"==r.output_geometry?"polyline":"polygon";function s(t,e){var n,r=i(t,e);return"polyline"==o&&(n=v.reversePath(t.concat()),r=r.concat(i(n,e))),r.push(r[0]),"polyline"==a?r:[r]}return function(t,e){for(var n={type:"polyline"==a?"MultiLineString":"MultiPolygon",coordinates:[]},r=0;r<t.length;r++)n.coordinates.push(s(t[r],e));return 0==n.coordinates.length?null:n}},v.getPathBufferMaker=function(t,e,n,r){var i=r.backtrack>=0?r.backtrack:10,o=new K(t),a=r.cap_style||"round";function s(t,n,r,o,a,s){for(var u=o+a,c=o+10;c<u;)p(t,e(n,r,c,s),i),c+=10}function u(t,e,n,r,i){return H.distance2D(t,e,n,r)<i}function c(t,e){var n=t[t.length-1];u(n[0],n[1],e[0],e[1],1e-10)||t.push(e)}function l(t,n,r,i){return"flat"==a?[[t,n]]:function(t,n,r,i){var o=[],a=r-90,s=10;for(;s<180;)o.push(e(t,n,a+s,i)),s+=10;return o}(t,n,r,i)}function f(t,e){var n=e-t;return n>180&&(n-=360),n<-180&&(n+=360),n}function p(t,e,n){for(var r,i,o,a,s=0,u=t.length-3;s<n&&u>=0;s++,u--)if(o=t[t.length-1],r=t[u],i=t[u+1],a=v.bufferIntersection(r[0],r[1],i[0],i[1],o[0],o[1],e[0],e[1])){for(;t.length>u+1;)t.pop();c(t,a)}c(t,e)}return function(t,r){var a,c,h,d,g,y,m,v,_,b,x,S,w,E,I,C,P=[],N=0;for(o.init(t);o.hasNext();)o.x===g&&o.y===y||(h=g,d=y,g=o.x,y=o.y,N>=1&&(b=_,_=n(h,d,g,y),m=e(h,d,_-90,r),v=e(g,y,_-90,r)),1==N&&(x=_,a=h,c=d,P.push(m,v)),N>1&&(S=f(b,_),w=P,E=m[0],I=m[1],C=void 0,u((C=w[w.length-1])[0],C[1],E,I,1e-6)?p(P,v,i):S>0?(s(P,h,d,b-90,S,r),p(P,m,i),p(P,v,i)):(p(P,m,i),p(P,v,i))),N++);return g==a&&y==c?(S=f(_,x))>0&&s(P,g,y,_-90,S,r):P.push.apply(P,l(g,y,_,r)),P}},v.addBufferVertex=function(t,e,n){for(var r,i,o,a,s=0,u=t.length-3;s<n&&u>=0;s++,u--)if(o=t[t.length-1],r=t[u],i=t[u+1],a=v.bufferIntersection(r[0],r[1],i[0],i[1],o[0],o[1],e[0],e[1])){for(a.length;t.length>u+1;)t.pop();t.push(a)}t.push(e)},v.bufferIntersection=function(t,e,n,r,i,o,a,s){return t<i&&t<a&&n<i&&n<a||t>i&&t>a&&n>i&&n>a||e<o&&e<s&&r<o&&r<s||e>o&&e>s&&r>o&&r>s?null:H.segmentIntersection(t,e,n,r,i,o,a,s)},v.getPolylineBufferMaker2=function(t,e,n,r){var i=v.getPathBufferMaker2(t,e,n,r),o=r.geometry_type,a="polyline"==r.output_geometry?"polyline":"polygon";function s(t){return[t]}function u(t,e){var n,r=i(t,e);return"polyline"==o&&(n=v.reversePath(t.concat()),r=r.concat(i(n,e))),"polyline"==a?void 0:(void 0).map(s)}return function(t,e){for(var n={type:"polyline"==a?"MultiLineString":"MultiPolygon",coordinates:[]},r=0;r<t.length;r++)n.coordinates=n.coordinates.concat(u(t[r],e));return 0==n.coordinates.length?null:n}},v.getPathBufferMaker2=function(t,e,n,r){var i=r.backtrack>=0?r.backtrack:50,o=new K(t),a=r.cap_style||"round";function s(t,n,r,i,o,a){for(var s=i+o,u=i+10;u<s;)p(t,e(n,r,u,a)),u+=10}function u(t,e,n,r,i){return H.distance2D(t,e,n,r)<i}function c(t,e){var n=t[t.length-1];u(n[0],n[1],e[0],e[1],1e-10)||t.push(e)}function l(t,n,r,i){return"flat"==a?[[t,n]]:function(t,n,r,i){var o=[],a=r-90,s=10;for(;s<180;)o.push(e(t,n,a+s,i)),s+=10;return o}(t,n,r,i)}function f(t,e){var n=e-t;return n>180&&(n-=360),n<-180&&(n+=360),n}function p(t,e){for(var n,r,o,a,s=0,u=t.length-3;s<i&&u>=0;s++,u--)if(o=t[t.length-1],n=t[u],r=t[u+1],a=v.bufferIntersection(n[0],n[1],r[0],r[1],o[0],o[1],e[0],e[1])){for(;t.length>u+1;)t.pop();c(t,a)}c(t,e)}return function(t,r){var i,a,c,h,d,g,y,m,v,_,b,x,S,w,E,I,C=[],P=0;for(o.init(t);o.hasNext();)o.x===d&&o.y===g||(c=d,h=g,d=o.x,g=o.y,P>=1&&(_=v,v=n(c,h,d,g),y=e(c,h,v-90,r),m=e(d,g,v-90,r)),1==P&&(b=v,i=c,a=h,C.push(y,m)),P>1&&(x=f(_,v),S=C,w=y[0],E=y[1],I=void 0,u((I=S[S.length-1])[0],I[1],w,E,1e-6)?p(C,m):x>0?(s(C,c,h,_-90,x,r),p(C,y),p(C,m)):(p(C,y),p(C,m))),P++);return d==i&&g==a?(x=f(v,b))>0&&s(C,d,g,v-90,x,r):C.push.apply(C,l(d,g,v,r)),[]}},v.makePolylineBuffer=function(t,e,n){var r=v.makeShapeBufferGeoJSON(t,e,n),i=v.importGeoJSON(r,{});return v.dissolveBufferDataset(i,n),i},v.makeShapeBufferGeoJSON=function(t,e,n){var r=v.getBufferDistanceFunction(t,e,n),i=(v.getBufferToleranceFunction(e,n),v.getGeodeticSegmentFunction(e,!1)),o=v.getBearingFunction(e),a=c.extend({geometry_type:t.geometry_type},n),s=(n.v2?v.getPolylineBufferMaker2:v.getPolylineBufferMaker)(e.arcs,i,o,a);t.data&&t.data.getRecords();return{type:"GeometryCollection",geometries:t.shapes.map(function(e,n){var i=r(n);return i&&e?s(e,i,t.geometry_type):null})}},v.makePolygonBuffer=function(t,e,n){var r=v.makeShapeBufferGeoJSON(t,e,n),i=v.importGeoJSON(r,{});return v.dissolveBufferDataset(i),i},m.buffer=function(t,e,n){return v.makeBufferLayer(t[0],e,n)},v.makeBufferLayer=function(t,e,n){var r,i;"point"==t.geometry_type?r=v.makePointBuffer(t,e,n):"polyline"==t.geometry_type?r=v.makePolylineBuffer(t,e,n):"polygon"==t.geometry_type?r=v.makePolygonBuffer(t,e,n):b("Unsupported geometry type");var o=v.mergeDatasetsIntoDataset(e,[r]);return(i=o[0]).name=t.name,t.data&&!i.data&&(i.data=n.no_replace?t.data.clone():t.data),o},v.sortSegmentIds=function(t,e){v.orderSegmentIds(t,e),v.quicksortSegmentIds(t,e,0,e.length-2)},v.orderSegmentIds=function(t,e,n){function r(t,n){var r=e[t];e[t]=e[n],e[n]=r}for(var i=0,o=e.length;i<o;i+=2)t[e[i]]>t[e[i+1]]&&r(i,i+1)},v.insertionSortSegmentIds=function(t,e,n,r){for(var i,o,a=n+2;a<=r;a+=2){i=e[a],o=e[a+1];for(var s=a-2;s>=n&&t[i]<t[e[s]];s-=2)e[s+2]=e[s],e[s+3]=e[s+1];e[s+2]=i,e[s+3]=o}},v.quicksortSegmentIds=function(t,e,n,r){for(var i,o,a=n,s=r;a<r;){for(i=t[e[n+r>>2<<1]];a<=s;){for(;t[e[a]]<i;)a+=2;for(;t[e[s]]>i;)s-=2;a<=s&&(o=e[a],e[a]=e[s],e[s]=o,o=e[a+1],e[a+1]=e[s+1],e[s+1]=o,a+=2,s-=2)}if(s-n<40?v.insertionSortSegmentIds(t,e,n,s):v.quicksortSegmentIds(t,e,n,s),r-a<40)return void v.insertionSortSegmentIds(t,e,a,r);n=a,s=r}},v.getBoundsSearchFunction=function(t){var e,r;if(!t.length)return function(){return[]};function i(e){return t[e]}return r=n(214),e=new r(t.length),t.forEach(function(t){var n=t.bounds;e.add(n.xmin,n.ymin,n.xmax,n.ymax)}),e.finish(),function(t,n,r,o){return e.search(t,n,r,o).map(i)}},H.segmentIntersection=function(t,e,n,r,i,o,a,s){return Lt(t,e,n,r,i,o,a,s)?function(t,e,n,r,i,o,a,s){var u,c,l=Ot(n-t,r-e,a-i,s-o);if(0===l)return function(t,e,n,r,i,o,a,s){var u=Math.min(t,n,i,a),c=Math.max(t,n,i,a),l=Math.min(e,r,o,s),f=Math.max(e,r,o,s),p=f-l>c-u,h=[];(p?Rt(e,l,f):Rt(t,u,c))&&h.push(t,e);(p?Rt(r,l,f):Rt(n,u,c))&&h.push(n,r);(p?Rt(o,l,f):Rt(i,u,c))&&h.push(i,o);(p?Rt(s,l,f):Rt(a,u,c))&&h.push(a,s);2!=h.length&&4!=h.length?I("Invalid collinear segment intersection",h=null):4==h.length&&h[0]==h[2]&&h[1]==h[3]&&(h=null);return h}(t,e,n,r,i,o,a,s);if(function(t,e,n,r,i,o,a,s){return t==i&&e==o||t==a&&e==s||n==i&&r==o||n==a&&r==s}(t,e,n,r,i,o,a,s))return null;if(Math.abs(l)<1e-18)return function(t,e,n,r,i,o,a,s){var u=null;At(t,i,a)||At(e,o,s)?At(n,i,a)||At(r,o,s)?At(i,t,n)||At(o,e,r)?At(a,t,n)||At(s,e,r)?I("[findEndpointInRange()] error"):u=[a,s]:u=[i,o]:u=[n,r]:u=[t,e];return u}(t,e,n,r,i,o,a,s);return u=Mt(i,o,a,s,t,e)/l,function(t,e,n,r,i,o,a,s,u){var c=t[0],l=t[1],f=1e-12;f=Nt(t,f,c,l,e,n),f=Nt(t,f,c,l,r,i),f=Nt(t,f,c,l,o,a),f=Nt(t,f,c,l,s,u)}(c=[t+u*(n-t),e+u*(r-e)],t,e,n,r,i,o,a,s),function(t,e,n,r,i,o,a,s,u){var c=t[0],l=t[1];c=Tt(c,e,r),c=Tt(c,o,s),l=Tt(l,n,i),l=Tt(l,a,u),t[0]=c,t[1]=l}(c,t,e,n,r,i,o,a,s),c}(t,e,n,r,i,o,a,s):null},H.segmentHit=Lt,H.orient2D=Mt,H.outsideRange=At,H.findClosestPointOnSeg=function(t,e,n,r,i,o){var a,s=i-n,u=o-r,c=(t-n)*s+(e-r)*u,l=s*s+u*u,f=0===l?-1:c/l;a=f<=.1?[n,r]:f>=.9?[i,o]:[n+f*s,r+f*u];return a},v.getIntersectionPoints=function(t){return t.map(function(t){return[t.x,t.y]})},v.findSegmentIntersections=function(t,e){var n,r,i=e||{},o=t.getBounds(),a=(!t.isPlanar()&&Y(v.getWorldBounds(),o.toArray()),o.ymin),s=o.ymax-a,u=i.stripes||v.calcSegmentIntersectionStripeCount(t),l=new Uint32Array(u),f=u>1&&s>0?function(t){return Math.floor((u-1)*(t-a)/s)}:function(t){return 0};t.forEachSegment(function(t,e,n,r){for(var i=f(r[t]),o=f(r[e]);l[i]=l[i]+2,i!=o;)i+=o>i?1:-1});var p,h,d=(p=c.sum(l),h=4*p,(!yt||yt.byteLength<h)&&(yt=new ArrayBuffer(h)),new Uint32Array(yt,0,p)),g=0,y=[];c.forEach(l,function(t){var e=g;g+=t,y.push(d.subarray(e,g))}),c.initializeArray(l,0),t.forEachSegment(function(t,e,n,r){for(var i,o,a=f(r[t]),s=f(r[e]);i=l[a],l[a]=i+2,(o=y[a])[i]=t,o[i+1]=e,a!=s;)a+=s>a?1:-1});var m,_=t.getVertexData(),b=[];for(n=0;n<u;n++)for(m=v.intersectSegments(y[n],_.xx,_.yy),r=0;r<m.length;r++)b.push(m[r]);return v.dedupIntersections(b)},v.sortIntersections=function(t){t.sort(function(t,e){return t.x-e.x||t.y-e.y})},v.dedupIntersections=function(t){var e={};return t.filter(function(t){var n=v.getIntersectionKey(t);return!(n in e)&&(e[n]=!0,!0)})},v.getIntersectionKey=function(t){return t.a.join(",")+";"+t.b.join(",")},v.calcSegmentIntersectionStripeCount2=function(t){var e=t.getFilteredPointCount()-t.size(),n=2*Math.pow(e,.4);return Math.ceil(n)||1},v.calcSegmentIntersectionStripeCount=function(t){var e=t.getFilteredPointCount()-t.size(),n=Math.ceil(Math.pow(10*e,.6)/40);return n>0?n:1},v.calcSegmentIntersectionStripeCount_old=function(t){var e=t.getBounds().height(),n=v.getAvgSegment2(t)[1],r=1;return n>0&&e>0&&(r=Math.ceil(e/n/20)),r||1},v.intersectSegments=function(t,e,n){var r,i,o,a,s,u,c,l,f,p,h,d,g,y,m,_,b,x=t.length-2,S=[];for(v.sortSegmentIds(e,t),_=0;_<x;){for(r=t[_],i=t[_+1],s=e[r],u=e[i],f=n[r],p=n[i],b=_;b<x&&(o=t[b+=2],!(u<(c=e[o])));){if(h=n[o],a=t[b+1],l=e[a],d=n[a],f>=h){if(f>d&&p>h&&p>d)continue}else if(f<d&&p<h&&p<d)continue;r!=o&&r!=a&&i!=o&&i!=a&&(g=H.segmentIntersection(s,f,u,p,c,h,l,d))&&(y=[r,i],m=[o,a],S.push(v.formatIntersection(g,y,m,e,n)),4==g.length&&S.push(v.formatIntersection(g.slice(2),y,m,e,n)))}_+=2}return S},v.formatIntersection=function(t,e,n,r,i){var o,a=t[0],s=t[1];return e=v.formatIntersectingSegment(a,s,e[0],e[1],r,i),n=v.formatIntersectingSegment(a,s,n[0],n[1],r,i),{x:a,y:s,a:o=e[0]<n[0]?e:n,b:o==e?n:e}},v.formatIntersectingSegment=function(t,e,n,r,i,o){return i[n]==t&&o[n]==e?[n,n]:i[r]==t&&o[r]==e?[r,r]:n<r?[n,r]:[r,n]},v.addIntersectionCuts=function(t,e){var n,r,i,o=e||{},a=t.arcs;return I("addIntersectionCuts() snap dist:",n=o.snap_interval?v.convertIntervalParam(o.snap_interval,v.getDatasetCRS(t)):v.getHighPrecisionSnapInterval(a)),a.flatten(),r=o.no_snap?0:v.snapCoordsByInterval(a,n),i=a.dedupCoords(),(r>0||i>0)&&m.buildTopology(t),v.cutPathsAtIntersections(t),t.layers.forEach(function(t){v.layerHasPaths(t)&&v.cleanShapes(t.shapes,a,t.geometry_type)}),v.cleanArcReferences(t)},v.cleanArcReferences=function(t){var e=new gt(t.arcs),n=v.findDuplicateArcs(e);return n&&v.replaceIndexedArcIds(t,n),v.deleteUnusedArcs(t)>0&&(e=new gt(t.arcs)),e},v.replaceIndexedArcIds=function(t,e){var n=function(t){for(var n,r,i,o=0;o<t.length;o++)r=C(n=t[o]),i=e[r],t[o]=n==r?i:~i;return t};t.layers.forEach(function(t){v.layerHasPaths(t)&&v.editShapes(t.shapes,n)})},v.findDuplicateArcs=function(t){for(var e,n=new Int32Array(t.arcs.size()),r=0,i=0,o=t.arcs.size();i<o;i++)e=t.findDuplicateArc(i),n[i]=e,i!=e&&r++;return r>0?n:null},v.deleteUnusedArcs=function(t){var e=v.getArcPresenceTest2(t.layers,t.arcs),n=t.arcs.size(),r=t.arcs.deleteArcs(e),i=n-t.arcs.size();return i>0&&v.replaceIndexedArcIds(t,r),i},v.getDividedArcUpdater=function(t,e){return function(t){for(var e=[],r=0;r<t.length;r++)n(t[r],e);return e};function n(n,r){var i,o=n<0,a=o?~n:n,s=t[a],u=(a>=t.length-1?e:t[a+1])-1;do{o?(i=~u,u--):(i=s,s++),r.push(i)}while(u-s>=0)}},v.divideArcs=function(t){var e=v.findClippingPoints(t),n=v.insertCutPoints(e,t);return t.dedupCoords(),n},v.cutPathsAtIntersections=function(t){var e=v.divideArcs(t.arcs);v.remapDividedArcs(t,e)},v.remapDividedArcs=function(t,e){var n=v.getDividedArcUpdater(e,t.arcs.size());t.layers.forEach(function(t){v.layerHasPaths(t)&&v.editShapes(t.shapes,n)})},v.insertCutPoints=function(t,e){var n,r,i,o,a=e.getVertexData(),s=a.xx,c=a.yy,l=a.nn,f=0,p=0,h=[],d=e.size(),g=new Uint32Array(d),y=v.filterSortedCutPoints(v.sortCutPoints(t,s,c),e),m=e.getPointCount()+2*y.length,_=new Float64Array(m),b=new Float64Array(m);y.reverse(),o=y.pop();for(var x=0,S=0;x<d;x++){for(i=l[x],g[x]=S,n=0,r=0;n<i;){for(_[p]=s[f],b[p]=c[f],p++,r++;o&&o.i==f;)_[p]=o.x,b[p]=o.y,p++,r++,h[S++]=r,r=0,_[p]=o.x,b[p]=o.y,p++,r++,o=y.pop();n++,f++}h[S++]=r}return p!=m&&u("[insertCutPoints()] Counting error"),e.updateVertexData(h,_,b,null),g},v.convertIntersectionsToCutPoints=function(t,e,n){for(var r,i,o,a=[],s=0,u=t.length;s<u;s++)r=t[s],i=v.getCutPoint(r.x,r.y,r.a[0],r.a[1],e,n),o=v.getCutPoint(r.x,r.y,r.b[0],r.b[1],e,n),i&&a.push(i),o&&a.push(o);return a},v.getCutPoint=function(t,e,n,r,i,o){var a=i[n],s=o[n],c=i[r],l=o[r];return(r<n||r>n+1)&&u("Out-of-sequence arc ids:",n,r),H.outsideRange(t,a,c)||H.outsideRange(e,s,l)?(I("[getCutPoint()] Coordinate range error"),null):{x:t,y:e,i:n}},v.sortCutPoints=function(t,e,n){return t.sort(function(t,r){return t.i-r.i||Math.abs(t.x-e[t.i])-Math.abs(r.x-e[r.i])||Math.abs(t.y-n[t.i])-Math.abs(r.y-n[r.i])}),t},v.filterSortedCutPoints=function(t,e){var n=[],r=0;return e.forEach2(function(e,i,o,a){for(var s,u,c=e+i-1,l=o[e],f=a[e],p=o[c],h=a[c];r<t.length&&t[r].i<=c;)s=t[r],u=n[n.length-1],s.x==l&&s.y==f||s.x==p&&s.y==h||u&&u.x==s.x&&u.y==s.y&&u.i==s.i||n.push(s),r++}),n},v.findClippingPoints=function(t){var e=v.findSegmentIntersections(t),n=t.getVertexData();return v.convertIntersectionsToCutPoints(e,n.xx,n.yy)},v.findAcyclicArcs=function(t){},v.getRightmostArc=function(t,e,n){var r=e.getConnectedArcs(t);return n&&(r=r.filter(n)),0===r.length?t:v.getRighmostArc2(t,r,e.arcs)},v.getRighmostArc2=function(t,e,n){var r,i,o,a,s=n.getVertexData(),c=s.xx,l=s.yy,f=n.indexOfVertex(t,-1),p=c[f],h=l[f],d=n.indexOfVertex(t,-2),g=c[d],y=l[d],m=t;for(e.length>0&&(m=e[0],r=n.indexOfVertex(m,-2)),a=1;a<e.length;a++)i=e[a],o=n.indexOfVertex(i,-2),2==v.chooseRighthandPath(g,y,p,h,c[r],l[r],c[o],l[o])&&(m=i,r=o);return m==t&&u("Pathfinder error"),m},v.chooseRighthandPath=function(t,e,n,r,i,o,a,s){var c,l=H.signedAngle(t,e,n,r,i,o),f=H.signedAngle(t,e,n,r,a,s);return l<=0||f<=0?(I("[chooseRighthandPath()] 0 angle(s):",l,f),l<=0&&I("  A orient2D:",H.orient2D(t,e,n,r,i,o)),f<=0&&I("  B orient2D:",H.orient2D(t,e,n,r,a,s)),c=l>0?1:f>0?2:0):l<f?c=1:f<l?c=2:isNaN(l)||isNaN(f)?u("Invalid node geometry"):I("[chooseRighthandPath()] equal angles:",l,"fallback test:",c=v.chooseRighthandVector(i-n,o-r,a-n,s-r)),c},v.chooseRighthandVector=function(t,e,n,r){var i=H.orient2D(t,e,0,0,n,r);return i>0?2:i<0?1:0},v.setBits=function(t,e,n){return t&~n|e&n},v.andBits=function(t,e,n){return t&(~n|e)},v.setRouteBits=function(t,e,n){var r,i=C(e);i==e?r=-4:(r=-49,t<<=4),n[i]&=t|r},v.getRouteBits=function(t,e){var n=C(t),r=e[n];return n!=t&&(r>>=4),7&r},v.openArcRoutes=function(t,e,n,r,i,o,a){v.forEachArcId(t,function(t){var s=t<0,u=s?~t:t,c=n[u],l=s?i:r,f=s?r:i,p=c;e.arcIsLollipop(t)?(I("lollipop"),p=0):(l&&(p|=3),f&&(p|=48),a>0&&(p|=a),o&&34==(34&p)&&(p&=-18)),n[u]=p})},v.closeArcRoutes=function(t,e,n,r,i,o){v.forEachArcId(t,function(t){var e=t<0,a=e?~t:t,s=n[a],u=255;(e?i:r)&&(o&&(u&=-2),u^=2),(e?r:i)&&(o&&(u&=-17),u^=32),n[a]=s&u})},v.getPathFinder=function(t,e,n){var r=null;return n&&(r=function(t){return n(~t)}),function(n){var i,o,a=[],s=n;do{if(!e(s))return null;if(a.push(s),o=i=s,(s=~v.getRightmostArc(o,t,r))==~i)return I("Pathfinder warning: dead-end path"),null}while(s!=n);return 0===a.length?null:a}},v.getRingIntersector=function(t,e,n){var r=t.arcs,i=v.getPathFinder(t,function(t){var e=v.getRouteBits(t,n),r=!1;3==e&&(r=!0,v.setRouteBits(1,t,n));return r},function(t){return 1==(1&v.getRouteBits(t,n))});return n=n||new Uint8Array(r.size()),function(t){var o,a="dissolve"==e,s="flatten"==e;return t.length>0?(o=[],v.openArcRoutes(t,r,n,!0,s,a),v.forEachShapePart(t,function(t){for(var e,n=0,r=t.length;n<r;n++)(e=i(t[n]))&&o.push(e)}),v.closeArcRoutes(t,r,n,!0,s,!0)):o=t,o}},v.debugFlags=function(t){var e=[];c.forEach(t,function(t){e.push(function(t){for(var e="",n=0;n<8;n++)e+=(t&1<<n)>0?"1":"0",n<7&&(e+=" "),3==n&&(e+=" ");return e}(t))}),w(e)},H.getShapeCentroid=function(t,e){var n=H.getMaxPath(t,e);return n?H.getPathCentroid(n,e):null},H.getPathCentroid=function(t,e){var n,r,i,o,a,s,u,c,l=e.getShapeIter(t),f=0,p=0,h=0;if(!l.hasNext())return null;for(i=0,o=0,n=-l.x,r=-l.y;l.hasNext();)a=i,s=o,i=l.x+n,f+=u=a*(o=l.y+r)-s*i,p+=u*(a+i),h+=u*(s+o);return 0===(c=f/2)?H.getAvgPathXY(t,e):{x:p/(6*c)-n,y:h/(6*c)-r}},v.simplifyArcsFast=function(t,e){for(var n,r=[],i=[],o=[],a=0,s=t.size();a<s;a++)1==(n=v.simplifyPathFast([a],t,e,r,i))&&(n=0,r.pop(),i.pop()),o.push(n);return new Z(o,r,i)},v.simplifyPolygonFast=function(t,e,n){if(!t||!n)return null;var r=[],i=[],o=[],a=[];return t.forEach(function(t){for(var s=v.simplifyPathFast(t,e,n,r,i);s<4&&s>0;)r.pop(),i.pop(),s--;s>0&&(a.push([o.length]),o.push(s))}),{shape:a.length>0?a:null,arcs:new Z(o,r,i)}},v.simplifyPathFast=function(t,e,n,r,i){for(var o,a,s,u,c=e.getShapeIter(t),l=0;c.hasNext();)s=c.x,u=c.y,(0===l||O(s,u,o,a)>n)&&(r.push(s),i.push(u),o=s,a=u,l++);return s==o&&u==a||(r.push(s),i.push(u),l++),l},v.findAnchorPoint=function(t,e){var n,r,i=t&&H.getMaxPath(t,e),o=i&&e.getSimpleShapeBounds(i);return o&&o.hasBounds()&&0!==o.area()?(n=.01*Math.sqrt(o.area()),(r=v.simplifyPolygonFast(t,e,n)).shape?v.findAnchorPoint2(r.shape,r.arcs):null):null},v.findAnchorPoint2=function(t,e){var n,r,i,o,a,s,u,c,l=H.getMaxPath(t,e),f=e.getSimpleShapeBounds(l),p=H.getPathCentroid(l,e),h=v.getPointWeightingFunction(p,f),d=H.getPlanarPathArea(l,e);return 1==t.length&&1.2*d>f.area()?(a=5,o=.2):1==t.length&&1.7*d>f.area()?(a=7,o=.4):(a=11,o=.5),n=f.width()*o,i=(r=p.x-n/2)+n,s=n/a,(u=v.probeForBestAnchorPoint(t,e,r,i,a,h))?(c=v.probeForBestAnchorPoint(t,e,u.x-s/2,u.x+s/2,2,h)).distance>u.distance&&(u=c):(E("[points inner] failed, falling back to centroid"),u=p),u},v.getPointWeightingFunction=function(t,e){var n=Math.max(e.width(),e.height())/2;return function(e,r){var i=O(t.x,t.y,e,r);return 1-Math.min(.6*i/n,.25)}},v.findAnchorPointCandidates=function(t,e,n){var r=e.getBounds().ymin-1;return n.reduce(function(n,i){var o=v.findHitCandidates(i,r,t,e);return n.concat(o)},[])},v.probeForBestAnchorPoint=function(t,e,n,r,i,o){var a,s,u,c=v.getInnerTics(n,r,i),l=(r-n)/i,f=v.findAnchorPointCandidates(t,e,c);f.forEach(function(t){t.interval*=o(t.x,t.y)}),f.sort(function(t,e){return e.interval-t.interval});for(var p=0;p<f.length&&(u=f[p],!(a&&a.distance>u.interval));p++)s=v.getAdjustedPoint(u.x,u.y,t,e,l,o),(!a||s.distance>a.distance)&&(a=s);return a},v.getAdjustedPoint=function(t,e,n,r,i,o){var a={x:t,y:e,distance:H.getPointToShapeDistance(t,e,n,r)*o(t,e)};return v.scanForBetterPoint(a,n,r,i,o),v.scanForBetterPoint(a,n,r,-i,o),a},v.scanForBetterPoint=function(t,e,n,r,i){for(var o,a=t.x,s=t.y,u=t.distance;s+=r,(o=H.getPointToShapeDistance(a,s,e,n)*i(a,s))>.9*u&&H.testPointInPolygon(a,s,e,n);)o>u&&(t.distance=u=o,t.y=s)},v.findHitCandidates=function(t,e,n,r){var i,o,a,s=v.findRayShapeIntersections(t,e,n,r),u=[];c.genericSort(s);for(var l=0;l<s.length;l+=2)i=s[l],(a=((o=s[l+1])-i)/2)>0&&u.push({y:(i+o)/2,x:t,interval:a});return u},v.findRayShapeIntersections=function(t,e,n,r){return n?n.reduce(function(n,i){var o=v.findRayRingIntersections(t,e,i,r);return n.concat(o)},[]):[]},v.findRayRingIntersections=function(t,e,n,r){var i=[];return v.forEachSegmentInPath(n,r,function(n,r,o,a){var s=H.getRayIntersection(t,e,o[n],a[n],o[r],a[r]);s>-1/0&&i.push(s)}),i.length%2==1&&(i=[]),i},v.getInnerTics=function(t,e,n){for(var r=(e-t)/(n+1),i=[],o=1;o<=n;o++)i.push(t+r*o);return i},v.initFeatureProxy=function(t,e){var n,r,i,o,a,s,u=v.layerHasPoints(t),l=e&&v.layerHasPaths(t),f=t.data?t.data.getRecords():null,p=l&&e.isPlanar(),h={};function d(){var e=t.shapes[s];o||(o=e&&e[0]||null)}function g(){return r=r||H.getShapeCentroid(a,e)}function y(){return i=i||v.findAnchorPoint(a,e)}function m(){return n||(n=e.getMultiShapeBounds(a)),n}return Dt(h,{id:function(){return s},layer_name:function(){return t.name||""}}),f&&Object.defineProperty(h,"properties",{set:function(t){c.isObject(t)?f[s]=t:b("Can't assign non-object to $.properties")},get:function(){var t=f[s];return t||(t=f[s]={}),t}}),l?(Dt(h,{partCount:function(){return a?a.length:0},isNull:function(){return 0===h.partCount},bounds:function(){return m().toArray()},height:function(){return m().height()},width:function(){return m().width()}}),"polyline"==t.geometry_type&&Dt(h,{length:function(){return H.getShapePerimeter(a,e)}}),"polygon"==t.geometry_type&&Dt(h,{area:function(){return p?h.planarArea:H.getSphericalShapeArea(a,e)},perimeter:function(){return H.getShapePerimeter(a,e)},compactness:function(){return H.calcPolsbyPopperCompactness(h.area,h.perimeter)},planarArea:function(){return H.getPlanarShapeArea(a,e)},originalArea:function(){var t,n=e.getRetainedInterval();return e.setRetainedInterval(0),t=h.area,e.setRetainedInterval(n),t},centroidX:function(){var t=g();return t?t.x:null},centroidY:function(){var t=g();return t?t.y:null},innerX:function(){var t=y();return t?t.x:null},innerY:function(){var t=y();return t?t.y:null}})):u&&(Object.defineProperty(h,"coordinates",{set:function(e){!e||c.isArray(e)?t.shapes[s]=e||null:b("Can't assign non-array to $.coordinates")},get:function(){return t.shapes[s]||null}}),Object.defineProperty(h,"x",{get:function(){return d(),o?o[0]:null},set:function(t){d(),o&&(o[0]=Number(t))}}),Object.defineProperty(h,"y",{get:function(){return d(),o?o[1]:null},set:function(t){d(),o&&(o[1]=Number(t))}})),function(e){return s=e,l&&(n=null,r=null,i=null,a=t.shapes[e]),u&&(o=null),h}},v.expressionUtils={round:function(t,e){var n=1;for(e|=0;e-- >0;)n*=10;return Math.round(t*n)/n},sprintf:c.format},v.compileValueExpression=function(t,e,n,r){return(r=r||{}).returns=!0,v.compileFeatureExpression(t,e,n,r)},v.compileFeaturePairFilterExpression=function(t,e,n){var r=v.compileFeaturePairExpression(t,e,n);return function(t,e){var n=r(t,e);return!0!==n&&!1!==n&&b("where expression must return true or false"),n}},v.compileFeaturePairExpression=function(t,e,n){var r,i=v.getExpressionContext(e),o=c(e,n),a=c(e,n),s=v.getAssignedVars(t),u="with($$env){with($$record){return "+t+"}}";try{r=new Function("$$record,$$env",u)}catch(e){console.error(e),b(e.name,"in expression ["+t+"]")}function c(t,e){var n=t.data?t.data.getRecords():[],r=v.initFeatureProxy(t,e);function i(t){}return function(t){var e;return-1==t?null:(i.prototype=n[t]||{},(e=new i).$=r(t),e)}}return v.nullifyUnsetProperties(s,i),function(e,n,u){var c;i.A=o(e),i.B=a(n),u&&v.nullifyUnsetProperties(s,u);try{c=r.call(i,u||{},i)}catch(e){b(e.name,"in expression ["+t+"]:",e.message)}return c}},v.compileFeatureExpression=function(t,e,n,r){var i,o,a=c.extend({},r),s=t||"",u=!a.no_assign,l=v.getAssignedVars(s);return u&&l.length>0&&!e.data&&v.initDataTable(e),u||(a.context=a.context||{},v.nullifyUnsetProperties(l,a.context)),o=e.data?e.data.getRecords():[],i=v.getExpressionFunction(s,e,n,a),function(t,e){var n;return n=e||(o[t]||(o[t]={})),u&&v.nullifyUnsetProperties(l,n),i(n,t)}},v.getAssignedVars=function(t,e){var n=t.match(/[a-z_][.a-z0-9_]*(?= *=[^=])/gi)||[];return c.uniq(n.filter(function(t){var n=t.indexOf(".");return e?n>-1:-1==n}))},v.getAssignmentObjects=function(t){var e=v.getAssignedVars(t,!0),n=[];return e.forEach(function(t){var e=/^([^.]+)\.[^.]+$/.exec(t),r=e?e[1]:null;r&&"this"!=r&&n.push(r)}),c.uniq(n)},v.compileExpressionToFunction=function(t,e){var n,r="with($$env){with($$record){ "+(e.returns?"return ":"")+t+"}}";try{n=new Function("$$record,$$env",r)}catch(e){b(e.name,"in expression ["+t+"]")}return n},v.getExpressionFunction=function(t,e,n,r){var i=v.initFeatureProxy(e,n),o=v.getExpressionContext(e,r.context,r),a=v.compileExpressionToFunction(t,r);return function(e,n){var r;o.$=i(n),o._=o,o.d=e||null;try{r=a.call(o.$,e,o)}catch(e){b(e.name,"in expression ["+t+"]:",e.message)}return r}},v.nullifyUnsetProperties=function(t,e){for(var n=0;n<t.length;n++)t[n]in e==!1&&(e[t[n]]=null)},v.getExpressionContext=function(t,e,n){var r=v.getBaseContext(),i={},o=t.data?t.data.getFields():[];return n=n||{},c.extend(r,v.expressionUtils),t.data&&v.nullifyUnsetProperties(o,r),e&&Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);n.get?Object.defineProperty(i,t,{get:n.get}):Object.defineProperty(i,t,{value:e[t]})}),Object.keys(r).reduce(function(t,e){return e in t?n.quiet||("function"==typeof t[e]&&o.indexOf(e)>-1?w("Warning: "+e+"() function is hiding a data field with the same name"):w('Warning: "'+e+'" has multiple definitions')):Object.defineProperty(t,e,{value:r[e]}),t},i)},v.getBaseContext=function(){var t={};return function(){for(var e in this)t[e]=void 0}(),t.console=console,t},m.filterFeatures=function(t,e,n){var r,i=t.data?t.data.getRecords():null,o=t.shapes||null,a=v.getFeatureCount(t),s=o?[]:null,u=i?[]:null,l=v.getOutputLayer(t,n);return n.expression&&(r=v.compileValueExpression(n.expression,t,e)),n.remove_empty&&(r=v.combineFilters(r,v.getNullGeometryFilter(t,e))),r||b("Missing a filter expression"),c.repeat(a,function(t){var e=r(t);!0===e?(o&&s.push(o[t]||null),i&&u.push(i[t]||null)):!1!==e&&b("Expression must return true or false")}),l.shapes=s,l.data=u?new rt(u):null,n.no_replace&&(l=v.copyLayer(l)),!1!==n.verbose&&w(c.format("Retained %,d of %,d features",v.getFeatureCount(l),a)),l},v.getNullGeometryFilter=function(t,e){var n=t.shapes;return"polygon"==t.geometry_type?v.getEmptyPolygonFilter(n,e):function(t){return!!n[t]}},v.getEmptyPolygonFilter=function(t,e){return function(n){return!!t[n]&&H.getPlanarShapeArea(t[n],e)>0}},v.combineFilters=function(t,e){return t&&e&&function(n){return t(n)&&e(n)}||t||e},v.getMode=function(t){return v.getModeData(t).modes[0]},v.getValueCountData=function(t){var e,n,r=[],i={},o=[];for(e=0;e<t.length;e++)(n=t[e])in i==!1?(i[n]=r.length,r.push(n),o.push(1)):o[i[n]]++;return{values:r,counts:o}},v.getMaxValue=function(t){var e,n=-1/0;for(e=0;e<t.length;e++)t[e]>n&&(n=t[e]);return n},v.getCountDataSummary=function(t){var e,n,r=t.counts,i=t.values,o=v.getMaxValue(r),a=0,s=[];for(e=0;e<r.length;e++)(n=r[e])===o?s.push(i[e]):n>a&&(a=n);return{modes:s,margin:s.length>1?0:o-a,count:o}},v.getModeData=function(t,e){var n=v.getValueCountData(t),r=v.getCountDataSummary(n);return e&&(r.counts=n.counts,r.values=n.values),r},m.calc=function(t,e,n){var r,i,o=n.expression;return n.where&&(t={shapes:t.shapes,data:t.data},m.filterFeatures(t,e,{expression:n.where}),o+=" where "+n.where),i=v.getStateVar("defs"),w(o+":  "+(r=v.compileCalcExpression(t,e,n.expression)(null,i))),r},v.evalCalcExpression=function(t,e,n){return v.compileCalcExpression(t,e,n)()},v.compileCalcExpression=function(t,e,n){var r,i,o=0,a=0,s=[],l={count:m,sum:y,average:y,median:y,min:y,max:y,mode:_,collect:_,first:function(t){0===o&&(s[a]=t);return a++,t},last:m},f={count:d(function(){return o},0),sum:d(c.sum,0),median:d(c.findMedian),min:d(function(t){return c.getArrayBounds(t).min}),max:d(function(t){return c.getArrayBounds(t).max}),average:d(c.mean),mode:d(v.getMode),collect:d(h),first:d(h),last:d(h)},p=v.getFeatureCount(t);return t.geometry_type&&(l.width=l.height=function(){},f.width=function(){return v.getLayerBounds(t,e).width()},f.height=function(){return v.getLayerBounds(t,e).height()}),r=v.compileFeatureExpression(n,t,e,{context:l,no_assign:!0,quiet:!0}),i=v.compileFeatureExpression(n,{data:t.data},null,{returns:!0,context:f,quiet:!0}),function(t,e){var n;return t?function(t){t.forEach(g)}(t):function(){for(var t=0;t<p;t++)g(t)}(),n=i(void 0,e),o=0,a=0,s=[],n};function h(t){return t}function d(t,e){var n=arguments.length>1?e:null;return function(){var e=a++;return o>0?t(s[e]):n}}function g(t){(t<0||t>=p)&&u("Invalid record index"),r(t),o++,a=0}function y(t){return isNaN(t)&&t&&b("Expected a number, received:",t),_(t)}function m(t){return s[a++]=t,t}function _(t){var e;return 0===o&&(s[a]=[]),(e=s[a]).length!=o&&b("Evaluation failed"),e.push(t),a++,t}},v.getJoinCalc=function(t,e){var n=v.compileCalcExpression({data:t},null,e);return function(t,e){t||(t=[]),n(t,e)}},v.getCategoryClassifier=function(t,e){if(!t||0===t.length)return function(){return 0};t.forEach(function(t){e&&e.fieldExists(t)||b("Data table is missing field:",t)});var n={},r=0,i=e.getRecords(),o=v.getMultiFieldKeyFunction(t);return function(t){var e=o(i[t]);return e in n==!1&&(n[e]=r++),n[e]}},v.getMultiFieldKeyFunction=function(t){return t.reduce(function(t,e){var n=function(t){return String(t[e])};return t?function(e){return t(e)+"~~"+n(e)}:n},null)},v.aggregateDataRecords=function(t,e,n){var r,i=v.groupIds(e,t.length),o=n.sum_fields||[],a=n.copy_fields||[];function s(e,n){for(var r,i=0,o=0;o<n.length;o++)i+=(r=t[n[o]])&&r[e]||0;return i}return n.fields&&(a=a.concat(n.fields)),n.calc&&(r=v.getJoinCalc(new rt(t),n.calc)),i.map(function(e){var n,i,u={};for(i=t[(e=e||[])[0]],n=0;n<o.length;n++)u[o[n]]=s(o[n],e);for(n=0;n<a.length;n++)u[a[n]]=i?i[a[n]]:null;return r&&r(e,u),u})},v.groupIds=function(t,e){for(var n,r=[],i=0;i<e;i++)(n=t(i))in r?r[n].push(i):r[n]=[i];return r},v.dissolvePolylineGeometry=function(t,e,n,r){var i=v.getPolylineDissolveGroups(t.shapes,e),o=v.getPolylineDissolver(n);return i.map(o)},v.getPolylineDissolveGroups=function(t,e){var n=[];return v.traversePaths(t,function(t){var r=e(t.shapeId);r in n==!1&&(n[r]=[]),n[r].push(t.arcId)}),n},v.getPolylineDissolver=function(t){var e=new Uint8Array(t.size()),n=function(t){return e[C(t)]>0},r=function(t){e[C(t)]=0},i=new gt(t);return function(t){t.forEach(function(t){e[C(t)]=1});var o=v.findPolylineEnds(t,i,n),a=v.collectPolylineArcs(o,i,n,r),s=v.collectPolylineArcs(t,i,n,r),u=a.concat(s);return t.forEach(function(t){e[C(t)]=0}),u}},v.collectPolylineArcs=function(t,e,n,r){var i=[];return t.forEach(function(t){for(var o,a=[],s=t;n(s)&&(a.push(s),o=n(s)?e.getConnectedArcs(s,n):[],r(s),o.length>0);)s=~o[0];a.length>0&&i.push(a)}),i},v.findPolylineEnds=function(t,e,n){var r=[];return t.forEach(function(t){0===e.getConnectedArcs(t,n).length&&r.push(~t),0===e.getConnectedArcs(~t,n).length&&r.push(t)}),r},m.dissolve=function(t,e,n){var r,i;return(n=c.extend({},n)).field&&(n.fields=[n.field]),i=v.getCategoryClassifier(n.fields,t.data),"polygon"==t.geometry_type?r=ft(t.shapes,i):"polyline"==t.geometry_type?r=v.dissolvePolylineGeometry(t,i,e,n):"point"==t.geometry_type&&(r=function(t,e,n){var r=!n.planar&&v.probablyDecimalDegreeBounds(v.getLayerBounds(t)),i=n.weight?v.compileValueExpression(n.weight,t):null,o=[];return 0!==v.countMultiPartFeatures(t.shapes)&&b("Dissolving multi-part points is not supported"),t.shapes.forEach(function(t,n){var a,s=e(n),u=i?i(n):1,c=t&&t[0];c&&(r&&(a=[],F(c[0],c[1],a),c=a),o[s]=function(t,e,n){var r,i,o=e[0],a=e[1];o==o&&a==a&&n>0&&(t?(r=t.sum+n,i=t.sum/r,t.centroid[0]=i*t.centroid[0]+n*o/r,t.centroid[1]=i*t.centroid[1]+n*a/r,3==e.length&&(t.centroid[2]=i*t.centroid[2]+n*e[2]/r),t.sum=r):t={sum:n,centroid:e.concat()});return t}(o[s],c,u))}),o.map(function(t){var e,n;return t?(r?(n=[],D((e=t.centroid)[0],e[1],e[2],n)):n=t.centroid,t?[n]:null):null})}(t,i,n)),v.composeDissolveLayer(t,r,i,n)},v.composeDissolveLayer=function(t,e,n,r){var i,o=null;if(t.data)for(var a=0,s=(o=v.aggregateDataRecords(t.data.getRecords(),n,r)).length;a<s;a++)e&&!e[a]&&(e[a]=null);return i={name:r.no_replace?null:t.name,shapes:e,data:o?new rt(o):null,geometry_type:t.geometry_type},r.silent||v.printDissolveMessage(t,i),i},v.printDissolveMessage=function(t,e){var n=v.getFeatureCount(t),r=v.getFeatureCount(e);w(c.format("Dissolved %,d feature%s into %,d feature%s",n,c.pluralSuffix(n),r,c.pluralSuffix(r)))},v.fixNestingErrors=function(t,e){if(t.length<=1)return t;var n=v.getPathMetadata(t,e,"polygon"),r=new Pt(t.map(function(t){return[t]}),e);return t.filter(function(t,e){var i,o=r.findSmallestEnclosingPolygon(t),a=!0;o>-1&&(i=n[e].area>0,n[o].area>0==i&&(a=!1));return a})},v.fixNestingErrors2=function(t,e){var n=v.getPathMetadata(t,e,"polygon"),r=new Pt(t.map(function(t){return[t]}),e);t.forEach(function(t,e){n[e].area>0||-1==r.findSmallestEnclosingPolygon(t)&&v.reversePath(t)})},v.mosaic=function(t,e){var n,r,i,o,a,s,u,c,l=[];return t.arcs||b("Dataset is missing path data"),n=v.addIntersectionCuts(t,e),r=v.buildPolygonMosaic(n),l.push({name:"mosaic",shapes:r.mosaic,geometry_type:"polygon"}),e.debug&&(l.push({geometry_type:"polygon",name:"mosaic-enclosure",shapes:r.enclosures}),r.lostArcs.length>0&&(l=l.concat((i=r.lostArcs,o=n.arcs,a={geometry_type:"polyline",name:"lost-arcs",shapes:[]},s={geometry_type:"point",name:"lost-arc-endpoints",shapes:[]},u=[],c=[],i.forEach(function(t){var e=o.getVertex(t,0),n=o.getVertex(t,-1);u.push({ARCID:t}),a.shapes.push([[t]]),c.push({ARCID:t},{ARCID:t}),s.shapes.push([[e.x,e.y]],[[n.x,n.y]])}),a.data=new rt(u),s.data=new rt(c),[a,s])))),l},v.buildPolygonMosaic=function(t){_.start(),t.detachAcyclicArcs();var e=v.findMosaicRings(t),n=e.cw.map(function(t){return[t]});_.stop("Find mosaic rings"),_.start();var r=[],i=new Pt(n,t.arcs);return e.ccw.forEach(function(t){var e=i.findSmallestEnclosingPolygon(t);e>-1?n[e].push(t):(v.reversePath(t),r.push([t]))}),_.stop(c.format("Detect holes (holes: %d, enclosures: %d)",e.ccw.length-r.length,r.length)),{mosaic:n,enclosures:r,lostArcs:e.lostArcs}},v.findMosaicRings=function(t){for(var e=t.arcs,n=[],r=[],i=[],o=[],a=new Uint8Array(e.size()),s=v.getPathFinder(t,function(t){return f(t,!0)}),u=0,c=a.length;u<c;u++)l(u),l(~u);return{cw:n,ccw:r,empty:i,lostArcs:o};function l(t){var a,u;if(f(t)){if(!(a=s(t)))return o.push(t),void I("Dead-end arc:",t);(u=H.getPlanarPathArea(a,e))>0?n.push(a):u<0?r.push(a):i.push(a)}}function f(t,e){var n=C(t),r=n==t?1:2,i=0==(a[n]&r);return e&&i&&(a[n]|=r),i}},v.getVertexCountTest=function(t,e){return function(n){return H.countVerticesInPath(n,e)<=t}},v.getSliverTest=function(t){var e=v.calcMaxSliverArea(t);return function(n){var r=H.getPlanarPathArea(n,t);return Math.abs(r)<=e}},v.getMinAreaTest=function(t,e,n){e.arcs;var r=v.convertAreaParam(t,v.getDatasetCRS(e));return n&&n.weighted?v.getWeightedMinAreaFilter(r,e.arcs):v.getMinAreaFilter(r,e.arcs)},v.getMinAreaFilter=function(t,e){var n=e.isPlanar()?H.getPlanarPathArea:H.getSphericalPathArea;return function(r){var i=n(r,e);return Math.abs(i)<t}},v.getWeightedMinAreaFilter=function(t,e){var n=e.isPlanar()?H.getPlanarPathArea:H.getSphericalPathArea,r=e.isPlanar()?H.getPlanarPathPerimeter:H.getSphericalPathPerimeter;return function(i){var o=n(i,e),a=r(i,e),s=H.calcPolsbyPopperCompactness(o,a);return Math.abs(o*s)<t}},v.getGapFillTest=function(t,e){return 0===e.min_gap_area?function(){return!1}:e.min_gap_area?v.getMinAreaTest(e.min_gap_area,t):v.getSliverTest(t.arcs)},v.dissolvePolygonLayer2_v1=function(t,e,n){(n=c.extend({},n)).field&&(n.fields=[n.field]);var r=v.getCategoryClassifier(n.fields,t.data),i=t.shapes.reduce(function(t,e,n){var i=r(n);return i in t==!1&&(t[i]=[]),v.extendShape(t[i],e),t},[]),o=v.dissolvePolygons2_v1(i,e,n);return v.composeDissolveLayer(t,o,r,n)},v.dissolvePolygons2_v1=function(t,e,n){var r=e.arcs,i=v.getArcPresenceTest(t,r),o=new gt(r,i),a=v.getHoleDivider(o),s=v.getRingIntersector(o,"dissolve"),u=v.getGapFillTest(e,n);_.start();var c=v.buildPolygonMosaic(o).mosaic;_.stop("Build mosaic");var l=new Int32Array(r.size()),f=new Int32Array(r.size()),p=[],h=[],d=t.map(function(){return[]});_.start(),t.forEach(function(t,e){var n,i,o=H.getShapeArea(t,r),s=[],u=[];p[e]=o,a(t,s,u),u.length>0?(t=s.concat(u),v.fixNestingErrors2(t,r)):t=s;for(n=0,i=t.length;n<i;n++)m(t[n],e)}),c.forEach(function(t,e){for(var n=-1,r=t[0],i=0,o=r.length;i<o;i++)n=y(n,x(r[i]));-1==n&&(n=-1);-1==n?h.push(e):d[n].push(e)}),h=h.filter(function(t){for(var e=c[t][0],n=-1,r=0,i=e.length;r<i;r++)n=y(n,x(~e[r]));n>-1&&u(e)&&d[n].push(t);return n<0});var g=d.map(function(t){for(var e,n,r=[],i=[],o=0,a=t.length;o<a;o++)n=c[t[o]],r.push(n[0]),n.length>1&&(i=i.concat(n.slice(1)));(e=s(r.concat(i))).length;return e.length>0?e:null});return _.stop("Dissolve tiles"),g;function y(t,e){var n=t;return(-1==t||e>-1&&p[t]<p[e])&&(n=e),n}function m(t,e){for(var n=0,r=t.length;n<r;n++)b(t[n],e)}function b(t,e){var n=x(t);-1!==n&&y(e,n)!=e||function(t,e){var n=C(t);(n==t?l:f)[n]=e+1}(t,e)}function x(t){var e=C(t);return(e==t?l:f)[e]-1}},v.extendShape=function(t,e){if(e)for(var n=0,r=e.length;n<r;n++)t.push(e[n])},m.cleanLayers=function(t,e,n){(n=n||{}).arcs||(v.addIntersectionCuts(e,n),t.forEach(function(t){"polygon"==t.geometry_type&&(t.shapes=v.dissolvePolygons2_v1(t.shapes,e,n)),n.allow_empty||m.filterFeatures(t,e.arcs,{remove_empty:!0})})),!n.no_arc_dissolve&&e.arcs&&v.dissolveArcs(e)},v.concatShapes=function(t){return t.reduce(function(t,e){return v.extendShape(t,e),t},[])},v.extendShape=function(t,e){if(e)for(var n=0,r=e.length;n<r;n++)t.push(e[n])},v.appendHolesToRings=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},v.getPolygonDissolver=function(t,e){e=e&&!t.arcs.isPlanar();var n=new Uint8Array(t.arcs.size()),r=v.getHoleDivider(t,e),i=v.getRingIntersector(t,"flatten",n,e),o=v.getRingIntersector(t,"dissolve",n,e);return function(e){if(!e)return null;var n=[],a=[];r(e,n,a),n=i(n),a.forEach(v.reversePath),(a=i(a)).forEach(v.reversePath);var s=v.appendHolesToRings(n,a),u=o(s);return u.length>1&&(u=v.fixNestingErrors(u,t.arcs)),u.length>0?u:null}},v.clipPolygons=function(t,e,n,r,i){var o=n.arcs,a=i||{},s=new Uint8Array(o.size()),u=new Uint8Array(o.size()),c=0,l=0,f=[],p=v.getPathFinder(n,function(t){var e,n,i=t>=0,o=i?t:~t,a=u[o],c=s[o];i?(e=a,n=c):(e=a>>4,n=c>>4);n&=3;var p=!1;3==(e&=3)?1==n||2==n&&"erase"==r||(p=!0):0===e&&3==n&&(f.push(t),p=!0);p&&(3==n&&l++,a=i?v.setBits(a,1,3):v.setBits(a,16,48));return a|=i?4:64,u[o]=a,p},function(t){var e=t>=0,n=e?t:~t,r=e?1:16,i=u[n],o=s[n];o>0&&c++;return(i&r)>0||(o&r)>0}),h=v.getPolygonDissolver(n);a.bbox2||(t=t.map(h)),v.openArcRoutes(e,o,s,"clip"==r,"erase"==r,!0,17);var d=new Pt(e,o),g=t.map(function(t,e){return t?function(t,e,n){var r=[],i="clip"==e,a="erase"==e;v.openArcRoutes(t,o,u,!0,!1,!1),v.forEachShapePart(t,function(t){for(var e,o=0,s=t.length;o<s;o++)if(c=0,l=0,e=p(t[o]))if(0===c||0===l){var u=n.pathIsEnclosed(e);(i&&u||a&&!u)&&r.push(e)}else r.push(e)}),v.closeArcRoutes(t,o,u,!0,!0,!0),f.length>0&&(v.closeArcRoutes(f,o,u,!0,!0,!0),f=[]);return 0===r.length?null:r}(t,r,d):null}),y=function(t){return t.map(function(t){var e=[];return v.forEachShapePart(t,function(t){for(var n,r,i,o=!0,a=!1,c=0;c<t.length;c++){if(n=t[c],r=u,i=void 0,void 0,i=C(n),0!=(68&r[i])){o=!1;break}!a&&m(t[c],s)&&(a=!0)}o&&a&&e.push(t)}),e.length>0?e:null})}(e);return v.closeArcRoutes(e,o,u,!0,!0),d=new Pt(y,o),t.forEach(function(t,e){var n=t?function(t,e,n){var r=n.findPathsInsideShape(t),i=[];if(!r)return null;"erase"==e&&r.forEach(v.reversePath);r.length<=1?i=r:(v.openArcRoutes(r,o,u,!0,!1,!0),r.forEach(function(t){for(var e,n=0;n<t.length;n++)(e=p(t[n]))&&i.push(e)}));return i.length>0?i:null}(t,r,d):null;n&&(g[e]=(g[e]||[]).concat(n))}),g;function m(t,e){return(17&e[C(t)])>0}},v.clipPolylines=function(t,e,n,r){var i=new Pt(e,n.arcs);return t.map(function(t){return function(t){var e=null;t&&(e=t.reduce(o,[]));return e&&e.length>0?e:null}(t)});function o(t,e){for(var n,o,a=null,s=0;s<e.length;s++)n=e[s],(o=i.arcIsEnclosed(n))&&"clip"==r||!o&&"erase"==r?(a||t.push(a=[]),a.push(n)):a=null;return t}},v.clipPoints=function(t,e,n,r){var i=new Pt(e,n);return t.reduce(function(t,e){for(var n,o=e?e.length:0,a=[],s=0;s<o;s++)n=i.findEnclosingShape(e[s])>-1,("clip"==r&&n||"erase"==r&&!n)&&a.push(e[s].concat());return t.push(a.length>0?a:null),t},[])},m.filterIslands=function(t,e,n){var r=e.arcs,i=0;"polygon"==t.geometry_type&&(n.min_area||n.min_vertices?(n.min_area&&(i+=v.filterIslands(t,r,v.getMinAreaTest(n.min_area,e,n))),n.min_vertices&&(i+=v.filterIslands(t,r,v.getVertexCountTest(n.min_vertices,r))),n.remove_empty&&m.filterFeatures(t,r,{remove_empty:!0,verbose:!1}),w(c.format("Removed %'d island%s",i,c.pluralSuffix(i)))):w("Missing a criterion for filtering islands; use min-area or min-vertices"))},v.filterIslands=function(t,e,n){var r=0,i=new Uint8Array(e.size());v.countArcsInShapes(t.shapes,i);return v.editShapes(t.shapes,function(t,o,a){if(1==t.length&&1===i[C(t[0])]&&(!n||n(t))&&!v.ringHasHoles(t,a,e))return r++,null}),r},v.ringIntersectsBBox=function(t,e,n){for(var r=0,i=t.length;r<i;r++)if(n.arcIntersectsBBox(C(t[r]),e))return!0;return!1},v.ringHasHoles=function(t,e,n){for(var r,i,o=n.getSimpleShapeBounds2(t),a=0,s=e.length;a<s;a++)if((r=e[a])&&r!=t&&v.ringIntersectsBBox(r,o,n)&&(i=n.getVertex(r[0],0),H.testPointInRing(i.x,i.y,t,n)))return!0;return!1},m.filterSlivers=function(t,e,n){return"polygon"!=t.geometry_type?0:v.filterSlivers(t,e,n)},v.filterSlivers=function(t,e,n){var r=n&&n.min_area?v.getMinAreaTest(n.min_area,e,n):v.getSliverTest(e.arcs),i=0;return v.editShapes(t.shapes,function(t,e,n){if(r(t))return i++,null}),w(c.format("Removed %'d sliver%s",i,c.pluralSuffix(i))),i},v.filterClipSlivers=function(t,e,n){var r=new Uint8Array(n.size()),i=v.getSliverTest(n),o=0;return v.countArcsInShapes(e.shapes,r),v.editShapes(t.shapes,function(t){for(var e=0,n=0,a=0,s=t&&t.length||0;a<s;a++)r[C(t[a])]>0?n++:e++;if(n>0&&e>0&&i(t))return o++,null}),o},v.calcMaxSliverArea=function(t){var e=t.getBounds().width()/2,n=t.getBounds().height()/2,r=0,i=0;return t.forEachSegment(function(t,o,a,s){var u=Math.abs(a[t]-a[o]),c=Math.abs(s[t]-s[o]);u<e&&c<n&&(i+=(Math.sqrt(u*u+c*c)-i)/++r)}),i*i},m.splitLayer=function(t,e,n){var r,i=n&&n.no_replace?v.copyLayer(t):t,o=i.data?i.data.getRecords():null,a=i.shapes,s={},u=[];return!e||o&&i.data.fieldExists(e)||b("Missing attribute field:",e),r=i.name||(e?"":"split"),c.repeat(v.getFeatureCount(i),function(t){var n,c=v.getSplitKey(t,e,o);c in s==!1?(s[c]=u.length,n={geometry_type:i.geometry_type,name:v.getSplitLayerName(r,c),data:o?new rt:null,shapes:a?[]:null},u.push(n)):n=u[s[c]],a&&n.shapes.push(a[t]),o&&n.data.getRecords().push(o[t])}),u},v.getSplitKey=function(t,e,n){var r=e&&n?n[t]:null;return String(r?r[e]:t+1)},v.getSplitLayerName=function(t,e){return(t?t+"-":"")+e},v.clipLayersByBBox=function(t,e,n){var r=n.bbox2,i=v.divideDatasetByBBox(e,r),o=new gt(e.arcs);return v.clipLayersByLayer(e.layers,i,o,"clip",n)},v.divideDatasetByBBox=function(t,e){var n=t.arcs,r=v.findBBoxCutPoints(n,e),i=v.insertCutPoints(r.cutPoints,n);n.dedupCoords(),v.remapDividedArcs(t,i);var o=v.bboxPointsToClipDataset(r.bboxPoints),a=v.mergeDatasets([t,o]),s=a.layers.pop();return t.arcs=a.arcs,t.layers=a.layers,s},v.bboxPointsToClipDataset=function(t){for(var e,n,r=[],i=[],o={geometry_type:"polygon",shapes:[[i]]},a=0,s=t.length-1;a<s;a++)e=t[a],n=t[a+1],r.push([[e.x,e.y],[n.x,n.y]]),i.push(a);return{arcs:new Z(r),layers:[o]}},v.findBBoxCutPoints=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=[],s=[],u=[],c=[];return t.forEachSegment(function(t,e,f,p){var h,d=f[t],g=p[t],y=f[e],m=p[e];v.segmentOutsideBBox(d,g,y,m,n,r,i,o)||v.segmentInsideBBox(d,g,y,m,n,r,i,o)||((h=H.segmentIntersection(n,o,i,o,d,g,y,m))&&l(a,h,t,e,f,p),(h=H.segmentIntersection(n,r,i,r,d,g,y,m))&&l(u,h,t,e,f,p),(h=H.segmentIntersection(n,r,n,o,d,g,y,m))&&l(c,h,t,e,f,p),(h=H.segmentIntersection(i,r,i,o,d,g,y,m))&&l(s,h,t,e,f,p))}),{cutPoints:c.concat(u,s,a),bboxPoints:v.getDividedBBoxPoints(e,c,a,s,u)};function l(t,e,n,r,i,o){e&&(t.push(f(e[0],e[1],n,r,i,o)),4==e.length&&t.push(f(e[2],e[3],n,r,i,o)))}function f(t,e,n,r,i,o){var a=v.formatIntersectingSegment(t,e,n,r,i,o);return v.getCutPoint(t,e,a[0],a[1],i,o)}},v.segmentOutsideBBox=function(t,e,n,r,i,o,a,s){return t<i&&n<i||t>a&&n>a||e<o&&r<o||e>s&&r>s},v.segmentInsideBBox=function(t,e,n,r,i,o,a,s){return t>i&&n>i&&t<a&&n<a&&e>o&&r>o&&e<s&&r<s},v.getDividedBBoxPoints=function(t,e,n,r,i){var o={x:t[0],y:t[1]},a={x:t[0],y:t[3]},s={x:t[2],y:t[3]},u={x:t[2],y:t[1]};return e=c.sortOn(e.concat([o,a]),"y",!0),n=c.sortOn(n.concat([a,s]),"x",!0),r=c.sortOn(r.concat([s,u]),"y",!1),i=c.sortOn(i.concat([u,o]),"x",!1),e.concat(n,r,i).reduce(function(t,e){var n=t.length>0?t[t.length-1]:null;return null!==n&&n.x==e.x&&n.y==e.y||t.push(e),t},[])},m.clipLayers=function(t,e,n,r){return v.clipLayers(t,e,n,"clip",r)},m.eraseLayers=function(t,e,n,r){return v.clipLayers(t,e,n,"erase",r)},m.clipLayer=function(t,e,n,r){return m.clipLayers([t],e,n,r)[0]},m.eraseLayer=function(t,e,n,r){return m.eraseLayers([t],e,n,r)[0]},m.sliceLayers=function(t,e,n,r){return v.clipLayers(t,e,n,"slice",r)},m.sliceLayer=function(t,e,n,r){return m.sliceLayers([t],e,n,r)},v.clipLayers=function(t,e,n,r,i){var o,a,s,u,l=c.some(t,v.layerHasPaths);return(i=i||{no_cleanup:!0}).bbox2?v.clipLayersByBBox(t,n,i):(e&&e.geometry_type&&(e={dataset:n,layer:e,disposable:!0}),i.bbox?s=(o=v.convertClipBounds(i.bbox)).layers[0]:e?(s=e.layer,o=c.defaults({layers:[s]},e.dataset)):b("Command requires a source file, layer id or bbox"),n.arcs!=o.arcs?(e&&!e.disposable&&(s=o.layers[0]=v.copyLayerShapes(o.layers[0])),a=v.mergeDatasets([n,o]),m.buildTopology(a)):a=n,l?(u=v.addIntersectionCuts(a,i),n.arcs=a.arcs):u=new gt(a.arcs),v.clipLayersByLayer(t,s,u,r,i))},v.clipLayersByLayer=function(t,e,n,r,i){return v.requirePolygonLayer(e,"Requires a polygon clipping layer"),t.reduce(function(t,o){return"slice"==r?t=t.concat(v.sliceLayerByLayer(o,e,n,i)):t.push(v.clipLayerByLayer(o,e,n,r,i)),t},[])},v.getSliceLayerName=function(t,e,n){return"slice-"+(e?t.data.getRecords()[0][e]:n+1)},v.sliceLayerByLayer=function(t,e,n,r){return m.splitLayer(e,r.id_field,{no_replace:!0}).map(function(e,i){var o=v.clipLayerByLayer(t,e,n,"clip",r);return o.name=v.getSliceLayerName(e,r.id_field,i),o})},v.clipLayerByLayer=function(t,e,n,r,i){var o,a,s,u=n.arcs,c=t.shapes?t.shapes.length:0,l=0;return 0===c?t:(t===e&&b("Can't clip a layer with itself"),"point"==t.geometry_type?a=v.clipPoints(t.shapes,e.shapes,u,r):"polygon"==t.geometry_type?a=v.clipPolygons(t.shapes,e.shapes,n,r,i):"polyline"==t.geometry_type?a=v.clipPolylines(t.shapes,e.shapes,n,r):b("Invalid target layer:",t.name),s={name:t.name,geometry_type:t.geometry_type,shapes:a,data:t.data},i.remove_slivers&&"polygon"==s.geometry_type&&(l=v.filterClipSlivers(s,e,u)),m.filterFeatures(s,u,{remove_empty:!0,verbose:!1}),s.data&&(s.data=s.data.clone()),(o=c-s.shapes.length)&&l&&w(v.getClipMessage(o,l)),s)},v.getClipMessage=function(t,e){var n=t?c.format("%,d null feature%s",t,c.pluralSuffix(t)):"",r=e?c.format("%,d sliver%s",e,c.pluralSuffix(e)):"";return n||r?c.format("Removed %s%s%s",n,n&&r?" and ":"",r):""},v.convertClipBounds=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=[[e,n],[e,i],[r,i],[r,n],[e,n]];return i>n&&r>e||b("Invalid bbox (should be [xmin, ymin, xmax, ymax]):",t),{arcs:new Z([o]),layers:[{shapes:[[[0]]],geometry_type:"polygon"}]}},v.getArcClassifier=function(t,e,n){var r=e.size(),i=new Int32Array(r),o=new Int32Array(r);return c.initializeArray(i,-1),c.initializeArray(o,-1),v.traversePaths(t,function(t){var e=C(t.arcId),n=t.shapeId,r=i[e];-1==r?i[e]=n:n<r?(o[e]=r,i[e]=n):o[e]=n}),function(t){return function(e){return function(t,e){var r,a=C(t),s=i[a],u=o[a];return-1==s?null:(r=e(s,u))?(i[a]=-1,o[a]=-1,n&&!n(s,u)?null:r):null}(e,t)}}},v.findNeighbors=function(t,e){var n=v.getArcClassifier(t,e)(function(t,e){return e>-1&&t>-1?[t,e]:null}),r=[],i={};return v.forEachArcId(t,function(t){var e,o=n(t);o&&(e=o.join("~"))in i==!1&&(r.push(o),i[e]=!0)}),r},m.cluster=function(t,e,n){v.requirePolygonLayer(t);var r=v.calcPolygonClusters(t,e,n),i=n.id_field||"cluster";return v.insertFieldValues(t,i,r),t},v.calcPolygonClusters=function(t,e,n){var r,i=v.getPolygonClusterCalculator(n),o=t.shapes.length,a=n.pct?c.parsePercent(n.pct):1,s=Math.round(o*a),u=n.group_by||null,l=t.shapes.map(function(n,r){var i=u&&t.data.getRecordAt(r)[u]||null;return{ids:[r],area:H.getShapeArea(n,e),bounds:e.getMultiShapeBounds(n),centroid:H.getShapeCentroid(n,e),group:i,friends:[]}}),f=[],p={};for(u&&!t.data&&b("Missing attribute data table"),v.findNeighbors(t.shapes,e).forEach(function(t,e){var n,r,i=l[t[0]],o=l[t[1]];i.group===o.group&&((n={ids:t}).score=g(n),n.score<0||(r=f.length,i.friends.push(r),o.friends.push(r),f.push(n)))});s-- >0&&(r=d());)h(r);return l.filter(Boolean).reduce(function(t,e,n){for(var r=e.ids,i=0;i<r.length;i++)t[r[i]]=n;return t},[]);function h(t){var e,n,r,i=(e=t.ids,n=l[e[0]],r=l[e[1]],n.bounds.mergeBounds(r.bounds),n.area+=r.area,n.ids=n.ids.concat(r.ids),function(t,e){var n=t.area/(t.area+e.area),r=t.centroid,i=e.centroid;r.x=r.x*n+i.x*(1-n),r.y=r.y*n+i.y*(1-n)}(n,r),l[e[0]]=null,l[e[1]]=null,n.friends=function(t){for(var e,n={},r=[],i=0;i<t.length;i++)(e=t[i])in n==0&&null!==f[e]&&(r.push(e),n[e]=!0);return r}(n.friends.concat(r.friends)),n),o=l.length;l[o]=i,function(t,e,n){for(var r,i,o=0,a=t.length;o<a;o++)i=t[o],r=f[i],s=r.ids,u=e,(s[0]===u[0]||s[0]===u[1]||s[1]===u[0]||s[1]===u[1])&&(f[i]=y(r,e,n));var s,u}(i.friends,t.ids,o)}function d(){var t,e,n,r=-1,i=1/0;for(e=0,n=f.length;e<n;e++)null!==(t=f[e])&&t.score<i&&(i=t.score,r=e);return-1==r?null:(t=f[r],f[r]=null,t)}function g(t){return i(l[t.ids[0]],l[t.ids[1]])}function y(t,e,n){var r,i=t.ids[0],o=t.ids[1];return e[0]!=i&&e[1]!=i||(i=n),e[0]!=o&&e[1]!=o||(o=n),i==o?null:(t.ids=[i,o],(r=function(t){var e=t.ids[0],n=t.ids[1];n<e&&(e=n,n=t.ids[0]);return e+","+n}(t))in p?null:(p[r]=!0,t.score=g(t),t.score<0?null:t))}},v.getPolygonClusterCalculator=function(t){var e=t.max_width||1/0,n=t.max_height||1/0,r=t.max_area||1/0;return function(t,i){var o=t.area+i.area,a=H.distance2D(t.centroid.x,t.centroid.y,i.centroid.x,i.centroid.y),s=t.bounds.clone().mergeBounds(i.bounds);return(o>r||s.width()>e||s.height()>n)&&(a=-1),a}},m.colorizer=function(t){t.name||b("Missing required name= parameter"),v.isReservedName(t.name)&&b('"'+t.name+'" is a reserved name'),v.getStateVar("defs")[t.name]=v.getColorizerFunction(t)},v.isReservedName=function(t){return/^(stroke|stroke-width|stroke-dasharray|fill|opacity|r|class)$/.test(t)},v.getColorizerFunction=function(t){var e,n=t.nodata||"white",r=t.precision?c.getRoundingFunction(t.precision):null;return t.colors&&t.colors.length||b("Missing colors= parameter"),t.breaks?e=v.getSequentialColorFunction(t.colors,t.breaks,r):t.categories?e=v.getCategoricalColorFunction(t.colors,t.other,t.categories):b("Missing categories= or breaks= parameter"),function(t){return e(t)||n}},v.getCategoricalColorFunction=function(t,e,n){return t.length!=n.length&&b("Number of colors should be equal to the number of categories"),function(r){var i=n.indexOf(r);return i>=0?t[i]:r&&e?e:null}},v.validateSequentialBreaks=function(t){var e=t.map(parseFloat);c.genericSort(e);for(var n=0;n<t.length;n++)t[n]!==e[n]&&b("Invalid class breaks:",t.join(","))},v.getSequentialColorFunction=function(t,e,n){return t.length!=e.length+1&&b("Number of colors should be one more than number of class breaks"),v.validateSequentialBreaks(e),function(r){var i=-1;return Number(r)===r&&(n&&(r=r(n)),i=c.getClassId(r,e)),i>-1&&i<t.length?t[i]:null}},c.getClassId=function(t,e){var n=0;if(!(t>=-1/0&&t<=1/0))return-1;for(;n<e.length&&t>=e[n];)n++;return n},m.dataFill=function(t,e,n){var r,i=n.field;i||b("Missing required field= parameter"),"polygon"!=t.geometry_type&&b("Target layer must be polygon type"),E("first pass:",r=v.fillMissingValues(t,i,v.getSingleAssignment(t,i,e)));do{E("count:",r=v.fillMissingValues(t,i,v.getMultipleAssignment(t,i,e)))}while(r>0);n.postprocess&&(v.fillDataIslands(t,i,e),v.fillDataIslands(t,i,e))},v.fillDataIslands=function(t,e,n){var r=t.data.getRecords(),i=v.getSingleAssignment(t,e,n,{min_border_pct:.5});r.forEach(function(t,n){var r=t[e],o=i(n);o&&o!=r&&(t[e]=o)})},v.fillMissingValues=function(t,e,n){var r=t.data.getRecords(),i=v.getEmptyRecordIds(r,e),o=0;return i.forEach(function(t){var i=n(t);v.isEmptyValue(i)||(o++,r[t][e]=i)}),o},v.getSingleAssignment=function(t,e,n,r){var i=v.buildAssignmentIndex(t,e,n),o=r&&r.min_border_pct||0;return function(t){for(var e,n,r,a=i[t],s=0,u=0,c=null,l=0;l<a.length;l++)if(n=(e=a[l]).value,r=e.length,v.isEmptyValue(n))s+=r;else{if(null!==c&&c!=n)return null;c=n,u+=r}return u/(u+s)<o?null:u>0?c:null}},v.isEmptyValue=function(t){return!t&&0!==t},v.getMultipleAssignment=function(t,e,n){var r;return function(i){for(var o,a,s,u=(r=r||v.buildAssignmentIndex(t,e,n))[i],c={},l=0,f=null,p=0;p<u.length;p++)a=(o=u[p]).value,s=o.length,v.isEmptyValue(a)?s:(a in c&&(s+=c[a]),s>l&&(l=s,f=a),c[a]=s);return f}},v.getEmptyRecordIds=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++)v.isEmptyValue(t[r][e])&&n.push(r);return n},v.buildAssignmentIndex=function(t,e,n){var r=t.shapes,i=t.data.getRecords(),o=v.getArcClassifier(r,n)(function(t,e){return t>-1?[t,e]:null}),a={},s={};return v.forEachArcId(r,function(t){var e,r=o(t);r&&(e=H.calcPathLen([t],n,!n.isPlanar()),u(r[0],r[1],e),r[1]>-1&&u(r[1],r[0],e))}),Object.keys(a).forEach(function(t){for(var n,r=a[t],o=Object.keys(r),u=s[t]=[],c=0;c<o.length;c++)n=o[c],u.push({length:r[n],value:n>-1?i[n][e]:null})}),s;function u(t,e,n){var r=a[t]||(a[t]={});r[e]=n+(r[e]||0)}},v.dissolvePolygonLayer2=function(t,e,n){(n=c.extend({},n)).field&&(n.fields=[n.field]);var r=v.getCategoryClassifier(n.fields,t.data),i=v.groupPolygons2(t,r),o=v.getArcPresenceTest(t.shapes,e.arcs),a=new gt(e.arcs,o),s=new Ft(t,a,{flat:!0});if(n.mosaic)return v.composeMosaicLayer(t,s.mosaic);if(n.arcs)return v.getArcLayer(a.arcs,t.name);s.removeGaps(v.getGapFillTest(e,n));var u=v.dissolvePolygonGroups2(i,s,n);return v.composeDissolveLayer(t,u,r,n)},v.getArcLayer=function(t,e){for(var n=[],r={geometry_type:"polyline",shapes:[],name:e},i=0,o=t.size();i<o;i++)r.shapes.push([[i]]),n.push({arc_id:i});return r.data=new rt(n),r},v.composeMosaicLayer=function(t,e){var n=e.map(function(t,e){return{tile_id:e}});return c.defaults({shapes:e,data:new rt(n)},t)},v.groupPolygons2=function(t,e){return t.shapes.reduce(function(t,n,r){var i=e(r);return i in t==!1&&(t[i]=[]),t[i].push(r),t},[])},v.dissolvePolygonGroups2=function(t,e,n){var r=v.getRingIntersector(e.nodes,"dissolve");return t.map(function(t){var i=e.getTilesByShapeIds(t);return n.tiles?i.reduce(function(t,e){return t.concat(e)},[]):v.dissolveTileGroup2(i,r)})},v.dissolveTileGroup2=function(t,e){for(var n,r,i=[],o=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(r[0]),r.length>1&&(o=o.concat(r.slice(1)));return(n=e(i.concat(o))).length,n.length>0?n:null},m.dissolve2=function(t,e,n){t.forEach(v.requirePolygonLayer),_.start();v.addIntersectionCuts(e,n);return _.stop("Add cuts"),t.map(function(t){return v.dissolvePolygonLayer2(t,e,n)})},m.dissolve2_v1=function(t,e,n){t.forEach(v.requirePolygonLayer),_.start();v.addIntersectionCuts(e,n);return _.stop("Add cuts"),t.map(function(t){return v.dissolvePolygonLayer2_v1(t,e,n)})},m.drop2=function(t,e,n){e.forEach(function(e){m.drop(t,e.layers,e.dataset,n)})},m.drop=function(t,e,n,r){var i=!1;e.forEach(function(e){var o=e.data&&r.fields,a=o&&v.fieldListContainsAll(o,e.data.getFields()),s=!o&&!r.geometry&&!r.holes||a&&r.geometry;r.geometry&&(i|=v.layerHasPaths(e),delete e.shapes,delete e.geometry_type),r.holes&&"polygon"==e.geometry_type&&v.deleteHoles(e,n.arcs),s?t.deleteLayer(e,n):a?delete e.data:o&&r.fields.forEach(e.data.deleteField,e.data)}),i&&v.pruneArcs(n)};var Gt={forEachShapePart:function(t,e){var n={GeometryCollection:function(t){t.geometries.forEach(r)},LineString:function(t){var n=e(t.arcs);n&&(t.arcs=n)},MultiLineString:function(t){i(t.arcs)},Polygon:function(t){i(t.arcs)},MultiPolygon:function(t){t.arcs.forEach(i)}};function r(t){t.type in n&&n[t.type](t)}function i(t){for(var n,r=0;r<t.length;r++)(n=e(t[r]))&&(t[r]=n)}r(t)},forEachArc:function(t,e){Gt.forEachShapePart(t,function(t){for(var n,r=0;r<t.length;r++)n=e(t[r]),c.isInteger(n)&&(t[r]=n)})}};v.importMetadata=function(t,e){e.proj4&&(t.info.crs=v.getCRS(e.proj4))},v.exportMetadata=function(t){var e=v.getDatasetCRS(t),n=null;return e&&(n=v.crsToProj4(e)),{proj4:n}},v.importTopoJSON=function(t,e){var n,r,i;return c.isString(t)&&(t=JSON.parse(t)),t.arcs&&t.arcs.length>0&&(t.transform&&Gt.decodeArcs(t.arcs,t.transform),e&&e.precision&&Gt.roundCoords(t.arcs,e.precision),r=new Z(t.arcs)),(i=Object.keys(t.objects).reduce(function(n,i){for(var o,a=Gt.importObject(t.objects[i],r,e),s=0,u=a.length;s<u;s++)(o=a[s]).name=i,n.push(o);return n},[])).forEach(function(e){v.layerHasPaths(e)&&v.cleanShapes(e.shapes,r,e.geometry_type),"point"==e.geometry_type&&t.transform&&Gt.decodePoints(e.shapes,t.transform),e.data&&v.fixInconsistentFields(e.data.getRecords())}),n={layers:i,arcs:r,info:{}},v.importCRS(n,t),t.metadata&&v.importMetadata(n,t.metadata),n},Gt.decodePoints=function(t,e){v.forEachPoint(t,function(t){t[0]=t[0]*e.scale[0]+e.translate[0],t[1]=t[1]*e.scale[1]+e.translate[1]})},Gt.decodeArcs=function(t,e){var n=e.scale[0],r=e.scale[1],i=e.translate[0],o=e.translate[1];t.forEach(function(t){for(var e,a,s,u=0,c=0,l=0,f=t.length;l<f;l++)a=(e=t[l])[0]+u,s=e[1]+c,e[0]=a*n+i,e[1]=s*r+o,u=a,c=s})},Gt.roundCoords=function(t,e){var n,r=c.getRoundingFunction(e);t.forEach(function(t){for(var e=0,i=t.length;e<i;e++)(n=t[e])[0]=r(n[0]),n[1]=r(n[1])})},Gt.importObject=function(t,e,n){var r=new Gt.GeometryImporter(e,n);return("GeometryCollection"==t.type?t.geometries:[t]).forEach(r.addGeometryObject,r),r.done()},Gt.GeometryImporter=function(t,e){var n,r=e&&e.id_field||mt.ID_FIELD,i=[],o=[],a=[],s=0,u=null;this.addGeometryObject=function(t){var e=t.properties||null;n=o.length,o[n]=null,"id"in t&&((e=e||{})[r]=t.id),i[n]=e,e||s++,t.type&&this.addShape(t),null===o[n]&&0},this.addShape=function(e){var r,i=o[n],a=mt.translateGeoJSONType(e.type);"GeometryCollection"==e.type?e.geometries.forEach(this.addShape,this):a?(this.setGeometryType(a),(r=Gt.shapeImporters[e.type](e,t))&&r.length&&(Array.isArray(r[0])?o[n]=i?i.concat(r):r:b("Invalid TopoJSON",e.type,"geometry"))):e.type&&b("Invalid TopoJSON geometry type:",e.type)},this.setGeometryType=function(t){var e=n<a.length?a[n]:null;e?e!=t&&b("Unable to import mixed-type TopoJSON geometries"):(a[n]=t,this.updateCollectionType(t))},this.updateCollectionType=function(t){u?t&&u!=t&&(u="mixed"):u=t},this.done=function(){return"mixed"==u?v.divideFeaturesByType(o,i,a):[{geometry_type:u,shapes:u?o:null,data:s<o.length?new rt(i):null}]}},Gt.importPolygonArcs=function(t,e){var n,r=t[0],i=null;if(e||b("Invalid TopoJSON file: missing arc data."),!(n=r?H.getPlanarPathArea(r,e):null))return null;n<0&&v.reversePath(r),i=[r];for(var o=1;o<t.length;o++)r=t[o],(n=H.getPlanarPathArea(r,e))&&(n>0&&v.reversePath(r),i.push(r));return i},Gt.shapeImporters={Point:function(t){return[t.coordinates]},MultiPoint:function(t){return t.coordinates},LineString:function(t){return[t.arcs]},MultiLineString:function(t){return t.arcs},Polygon:function(t,e){return Gt.importPolygonArcs(t.arcs,e)},MultiPolygon:function(t,e){return t.arcs.reduce(function(t,n){var r=Gt.importPolygonArcs(n,e);return r&&(t=t?t.concat(r):r),t},null)}},Gt.getPresimplifyFunction=function(t){var e=1e4/t;return function(t){return t===1/0?0:Math.ceil(t*e)}},m.explodeFeatures=function(t,e,n){var r=t.data?t.data.getRecords():null,i=r?[]:null,o=[],a=c.extend({},t);return t.shapes.forEach(function(a,s){var u;if(a?(u="polygon"==t.geometry_type&&a.length>1?n&&n.naive?v.explodePolygonNaive(a,e):v.explodePolygon(a,e):v.explodeShape(a),c.merge(o,u)):o.push(null),null!==i)for(var l=0,f=u?u.length:1;l<f;l++)i.push(v.cloneProperties(r[s]))}),a.shapes=o,null!==i&&(a.data=new rt(i)),a},v.explodeShape=function(t){return t.map(function(t){return[t.concat()]})},v.explodePolygon=function(t,e,n){var r=v.getPathMetadata(t,e,"polygon");return v.groupPolygonRings(r,n).map(function(t){return t.map(function(t){return t.ids})})},v.explodePolygonNaive=function(t,e){var n=v.getPathMetadata(t,e,"polygon");return console.log("Naive"),n.map(function(t){return t.area<0&&v.reversePath(t.ids),[t.ids]})},v.cloneProperties=function(t){var e={};for(var n in t)e[n]=t[n];return e};var Ut={symbolRenderers:{},symbolBuilders:{},furnitureRenderers:{},getTransform:function(t,e){var n="translate("+t[0]+" "+t[1]+")";return e&&1!=e&&(n+=" scale("+e+")"),n}};v.layerHasFurniture=function(t){var e=v.getFurnitureLayerType(t);return!!e&&e in Ut.furnitureRenderers},v.isFurnitureLayer=function(t){return!!t.furniture},v.getFurnitureLayerType=function(t){var e=t.data&&t.data.getReadOnlyRecordAt(0);return e&&e.type||null},v.getFurnitureLayerData=function(t){return t.data&&t.data.getReadOnlyRecordAt(0)},Ut.importFurniture=function(t,e){var n=Ut.furnitureRenderers[t.type];return n||b("Missing renderer for",t.type,"element"),n(t,e)||[]},v.transformDatasetToPixels=function(t,e){var n,r,i,o,a=v.findFrameLayerInDataset(t);return a?(n=new h((o=v.getFurnitureLayerData(a)).bbox),r=new h(0,0,o.width,o.height)):(n=v.getDatasetBounds(t),r=v.calcOutputSizeInPixels(n,e)),i=n.getTransform(r,e.invert_y),v.transformPoints(t,function(t,e){return i.transform(t,e)}),[Math.round(r.width()),Math.round(r.height())||1]},v.parseMarginOption=function(t){var e=(c.isNumber(t)?String(t):t||"").trim().split(/[, ] */);return 1==e.length&&e.push(e[0]),2==e.length&&e.push(e[0],e[1]),3==e.length&&e.push(e[2]),e.map(function(t){var e=parseFloat(t);return isNaN(e)?1:e})},v.calcOutputSizeInPixels=function(t,e){var n,r,i,o,a,s=0,c=0,l=t.width(),f=t.height(),p=v.parseMarginOption(e.margin),d=p[0]+p[2],g=p[1]+p[3];return e.svg_scale>0?(n=l/e.svg_scale+d,r=0):+e.pixels?(n=(i=v.getFrameSize(t,e))[0],r=i[1]):(r=e.height||0,n=e.width||(r>0?0:800)),r>0&&(a=(f||l||1)/(r-g)),n>0&&(o=(l||f||1)/(n-d)),n?r||(a=o,r=f>0?g+f/a:n,e.max_height>0&&r>e.max_height&&(a=o*r/e.max_height,r=e.max_height)):(o=a,n=l>0?d+l/o:r),o>a?c=(a=o)*(r-g)-f:a>o&&(s=(o=a)*(n-d)-l),t.padBounds(p[0]*o+.5*s,p[1]*a+.5*c,p[2]*o+.5*s,p[3]*a+.5*c),n>0&&r>0||u("Missing valid height and width parameters"),o===a&&o>0||u("Missing valid margin parameters"),new h(0,0,n,r)},v.exportTopoJSON=function(t,e){var n="."+(e.extension||"json"),r=!e.final||v.datasetHasPaths(t)&&t.arcs.getRetainedInterval()>0,i=JSON.stringify;return r&&(t=v.copyDatasetForExport(t)),e.prettify&&(i=v.getFormattedStringify("coordinates,arcs,bbox,translate,scale".split(","))),(e.width>0||e.height>0)&&(e=c.defaults({invert_y:!0},e),v.transformDatasetToPixels(t,e)),e.precision&&v.setCoordinatePrecision(t,e.precision),e.singles?v.splitDataset(t).map(function(t){return{content:i(Gt.exportTopology(t,e)),filename:(t.layers[0].name||"output")+n}}):[{filename:e.file||c.getOutputFileBase(t)+n,content:i(Gt.exportTopology(t,e))}]},Gt.exportTopology=function(t,e){var n={type:"Topology",arcs:[]},r=v.datasetHasPaths(t),i=v.getDatasetBounds(t);return e.bbox&&i.hasBounds()&&(n.bbox=i.toArray()),r&&e.presimplify&&!t.arcs.getVertexData().zz&&m.simplify(t,e),e.no_quantization||!e.quantization&&!r||(n.transform=Gt.transformDataset(t,i,e)),r&&(v.dissolveArcs(t),n.arcs=Gt.exportArcs(t.arcs,i,e),n.transform&&Gt.deltaEncodeArcs(n.arcs)),n.objects=t.layers.reduce(function(n,r,i){return n[r.name||"layer"+(i+1)]=Gt.exportLayer(r,t.arcs,e),n},{}),v.exportCRS(t,n),e.metadata&&(n.metadata=v.exportMetadata(t)),n},Gt.transformDataset=function(t,e,n){var r=Gt.calcExportBounds(e,t.arcs,n),i=e.getTransform(r),o=i.invert();function a(t,e){var n=i.transform(t,e);return[Math.round(n[0]),Math.round(n[1])]}return t.arcs&&t.arcs.transformPoints(a),n.no_point_quantization||t.layers.filter(v.layerHasPoints).forEach(function(t){v.transformPointsInLayer(t,a)}),{scale:[o.mx,o.my],translate:[o.bx,o.by]}},Gt.exportArcs=function(t,e,n){var r=null,i=[];return n.presimplify&&(r=Gt.getPresimplifyFunction(e.width())),t.forEach2(function(t,e,n,o,a){for(var s,u=[],c=t+e;t<c;t++)s=[n[t],o[t]],r&&s.push(r(a[t])),u.push(s);i.push(u.length>1?u:null)}),i},Gt.deltaEncodeArcs=function(t){t.forEach(function(t){for(var e,n,r,i,o,a=0,s=t.length;a<s;a++)r=(o=t[a])[0],i=o[1],a>0&&(o[0]=r-e,o[1]=i-n),e=r,n=i})},Gt.calcExportResolution=function(t,e){var n=v.getAvgSegment2(t);return[n[0]*e,n[1]*e]},Gt.calcExportBounds=function(t,e,n){var r;return r=n.topojson_precision>0?Gt.calcExportResolution(e,n.topojson_precision):n.quantization>0?[t.width()/(n.quantization-1),t.height()/(n.quantization-1)]:n.precision>0?[n.precision,n.precision]:Gt.calcExportResolution(e,.02),new h(0,0,Math.ceil(t.width()/r[0])||0,Math.ceil(t.height()/r[1])||0)},Gt.exportProperties=function(t,e,n){var r=v.exportProperties(e,n),i=v.exportIds(e,n);t.forEach(function(t,e){r&&(t.properties=r[e]),i&&(t.id=i[e])})},Gt.exportLayer=function(t,e,n){for(var r,i=v.getFeatureCount(t),o=[],a=Gt.exporters[t.geometry_type]||null,s=0;s<i;s++)r=a&&t.shapes[s],o[s]=r?a(r,e,n):{type:null};return t.data&&Gt.exportProperties(o,t.data,n),{type:"GeometryCollection",geometries:o}},Gt.exportPolygonGeom=function(t,e,n){var r={};return(t=v.filterEmptyArcs(t,e))&&0!==t.length?t.length>1?(r.arcs=v.explodePolygon(t,e,n.invert_y),1==r.arcs.length?(r.arcs=r.arcs[0],r.type="Polygon"):r.type="MultiPolygon"):(r.arcs=t,r.type="Polygon"):r.type=null,r},Gt.exportLineGeom=function(t,e){var n={};return(t=v.filterEmptyArcs(t,e))&&0!==t.length?1==t.length?(n.type="LineString",n.arcs=t[0]):(n.type="MultiLineString",n.arcs=t):n.type=null,n},Gt.exporters={polygon:Gt.exportPolygonGeom,polyline:Gt.exportLineGeom,point:mt.exportPointGeom};var qt={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULIPOINTM:28,MULTIPATCH:31,isPolygonType:function(t){return 5==t||15==t||25==t},isPolylineType:function(t){return 3==t||13==t||23==t},isMultiPartType:function(t){return qt.isPolygonType(t)||qt.isPolylineType(t)},isMultiPointType:function(t){return 8==t||18==t||28==t},isZType:function(t){return c.contains([11,13,15,18],t)},isMType:function(t){return qt.isZType(t)||c.contains([21,23,25,28],t)},hasBounds:function(t){return qt.isMultiPartType(t)||qt.isMultiPointType(t)}};v.translateShapefileType=function(t){return c.contains([qt.POLYGON,qt.POLYGONM,qt.POLYGONZ],t)?"polygon":c.contains([qt.POLYLINE,qt.POLYLINEM,qt.POLYLINEZ],t)?"polyline":c.contains([qt.POINT,qt.POINTM,qt.POINTZ,qt.MULTIPOINT,qt.MULTIPOINTM,qt.MULTIPOINTZ],t)?"point":null},v.isSupportedShapefileType=function(t){return c.contains([0,1,3,5,8,11,13,15,18,21,23,25,28],t)};var zt,Vt,Yt=function(){return{isNull:!0,pointCount:0,partCount:0,byteLength:12}};function Xt(t){var e,n=qt.hasBounds(t),r=qt.isMultiPartType(t),i=qt.isZType(t),o=qt.isMType(t),a=!n,s=a?0:16;if(0===t)return Yt;e=function(e,n){var i=e.position();if(this.id=e.bigEndian().readUint32(),this.type=e.littleEndian().skipBytes(4).readUint32(),0===this.type)return new Yt;(n>0!=!0||this.type!=t&&0!==this.type)&&u("Unable to read a shape -- .shp file may be corrupted"),this.byteLength=n,a?(this.pointCount=1,this.partCount=1):(e.skipBytes(32),this.partCount=r?e.readUint32():1,this.pointCount=e.readUint32()),this._data=function(){return e.position(i)}};var l={_xypos:function(){var t=12;return a||(t+=4),n&&(t+=32),r&&(t+=4*this.partCount+4),t},readCoords:function(){if(0===this.pointCount)return null;var t=this.readPartSizes(),e=this._data().skipBytes(this._xypos());return t.map(function(t){return e.readFloat64Array(2*t)})},readXY:function(){return 0===this.pointCount?new Float64Array(0):this._data().skipBytes(this._xypos()).readFloat64Array(2*this.pointCount)},readPoints:function(){for(var t,e=this.readXY(),n=i?this.readZ():null,r=o&&this.hasM()?this.readM():null,a=[],s=0,u=e.length/2;s<u;s++)t=[e[2*s],e[2*s+1]],n&&t.push(n[s]),r&&t.push(r[s]),a.push(t);return a},readPartSizes:function(){var t,e,n,r=[];if(0===this.pointCount);else if(1==this.partCount)r.push(this.pointCount);else{e=0,n=this._data().skipBytes(56);for(var i=0,o=this.partCount;i<o;i++)(t=(i<o-1?n.readUint32():this.pointCount)-e)>0&&(r.push(t),e+=t)}return r}},f={read:function(){var t=2;return i&&t++,this.hasM()&&t++,this._data().skipBytes(12).readFloat64Array(t)},stream:function(t){var e=this._data().skipBytes(12);t.addPoint(e.readFloat64(),e.readFloat64()),t.endPath()}},p={readBounds:function(){return this._data().skipBytes(12).readFloat64Array(4)},stream:function(t){for(var e,n=this.readPartSizes(),r=this.readXY(),i=0,o=0;i<n.length;){for(e=n[i];e-- >0;)t.addPoint(r[o++],r[o++]);t.endPath(),i++}r.length!=o&&u("Counting error")},stream2:function(t){for(var e,n=this.readPartSizes(),r=this._data().skipBytes(this._xypos()),i=0;i<n.length;){for(e=n[i];e-- >0;)t.addPoint(r.readFloat64(),r.readFloat64());t.endPath(),i++}},read:function(){for(var t=[],e=this.readPartSizes(),n=this.readPoints(),r=0,i=e.length-1;r<i;r++)t.push(n.splice(0,e[r]));return t.push(n),t}},h={_mpos:function(){var t=this._xypos()+16*this.pointCount;return i&&(t+=8*this.pointCount+s),t},readMBounds:function(){return this.hasM()?this._data().skipBytes(this._mpos()).readFloat64Array(2):null},readM:function(){return this.hasM()?this._data().skipBytes(this._mpos()+s).readFloat64Array(this.pointCount):null},hasM:function(){var t=this._mpos(),e=t+8*this.pointCount+s;return this.byteLength!=t&&(this.byteLength==e||void u("#hasM() Counting error"))}},d={_zpos:function(){return this._xypos()+16*this.pointCount},readZBounds:function(){return this._data().skipBytes(this._zpos()).readFloat64Array(2)},readZ:function(){return this._data().skipBytes(this._zpos()+s).readFloat64Array(this.pointCount)}};return a?c.extend(l,f):c.extend(l,p),i&&c.extend(l,d),o&&c.extend(l,h),e.prototype=l,l.constructor=e,e}function Jt(t,e){if(this instanceof Jt==!1)return new Jt(t,e);var n,r,i,o,a,s=c.isString(t)?new at(t):new ot(t),l=function(t){var e={signature:t.bigEndian().readUint32(),byteLength:2*t.skipBytes(20).readUint32(),version:t.littleEndian().readUint32(),type:t.readUint32(),bounds:t.readFloat64Array(4),zbounds:t.readFloat64Array(2),mbounds:t.readFloat64Array(2)};9994!=e.signature&&u("Not a valid .shp file");v.isSupportedShapefileType(e.type)||u("Unsupported .shp type:",e.type);e.byteLength!=s.size()&&u("File size of .shp doesn't match size in header");return e}(s.readToBinArray(0,100)),f=s.size(),p=new Xt(l.type);function h(){n=100,i=0,r=0}function d(t){var e,r,i,o,a,u=null;return t+12<=f&&((a=s.readToBinArray(t,12)).bigEndian().readUint32(),e=2*a.readUint32()+8,r=a.littleEndian().readUint32(),i=t+e<=f&&e>=12,o=0===r||r==l.type,i&&o&&(a=s.readToBinArray(t,e),u=new p(a,e),n=t+u.byteLength)),u}e&&(a=c.isString(e)?new at(e):new ot(e),o=a.readToBinArray(0,a.size()).bigEndian()),h(),this.header=function(){return l},this.forEachShape=function(t){for(var e=this.nextShape();e;)t(e),e=this.nextShape()},this.nextShape=function(){var t=function t(){var e=r+1;var u,c;if(a&&a.size()<=100+8*r||n+12>f)return null;o?(o.position(100+8*r),(c=2*o.readUint32())>n&&(i+=c-n)):c=n;u=d(c);u||(u=function(t,e){var n,r,o,a=t+4,u=null;for(;a+12<=f;){if(n=s.readToBinArray(a,12),r=n.bigEndian().readUint32(),o=n.littleEndian().skipBytes(4).readUint32(),r==e&&(o==l.type||0===o)){u=d(a);break}a+=4}return i+=u?a-t:f-t,u}(c,e));if(u){if(u.id<e)return w("Found a Shapefile record with the same id as a previous record ("+u.id+") -- skipping."),t();u.id>e&&b("Shapefile contains an out-of-sequence record. Possible data corruption -- bailing."),r++}return u||null}();return t||(i>0&&E("Skipped over "+i+" non-data bytes in the .shp file."),s.close(),h()),t}}function Ht(t,e){var n,r=new nt(t,e),i=!1;function o(){return n||(n=new rt(r.readRows()),r=null,t=null),n}this.exportAsDbf=function(t){return!(!r||i||t.field_order||t.encoding)?r.getBuffer():o().exportAsDbf(t)},this.getReadOnlyRecordAt=function(t){return r?r.readRow(t):n.getReadOnlyRecordAt(t)},this.deleteField=function(t){n?n.deleteField(t):(i=!0,r.deleteField(t))},this.getRecords=function(){return o().getRecords()},this.getFields=function(){return r?r.getFields():n.getFields()},this.size=function(){return r?r.size():n.size()}}function Wt(t,e){var n,r,i,o=c.isNonNegNumber(e.buffer)?e.buffer:.001;function a(t,e){for(var a,s=0;s<i.length;s++)(a=T(i[s][0],i[s][1],t[0],t[1]))<n&&a<=o*o&&(n=a,r=e)}this.findNearestPointFeature=function(e){return n=1/0,r=-1,i=e||[],v.forEachPoint(t,a),r}}function $t(){var t,e,n,r=c.expandoBuffer(Int32Array),i=c.expandoBuffer(Int32Array),o=0;function a(t){for(var e=p(t);e>t;)s(t,e),e=p(t=e)}function s(t,n){var r=e[t];l(t,e[n]),l(n,r)}function l(t,r){n[r]=t,e[t]=r}function f(n,r){var i=e[n],o=e[r],a=t[i],s=t[o];return a>s||a===s&&i>o}function p(t){var e=2*t+1,n=e+1,r=o;return e<r&&f(t,e)&&(t=e),n<r&&f(t,n)&&(t=n),t}this.init=function(s){var u;for(t=s,o=s.length,e=r(o),n=i(o),u=0;u<o;u++)l(u,u);for(u=o-2>>1;u>=0;u--)a(u)},this.size=function(){return o},this.updateValue=function(e,r){var i=n[e];t[e]=r,i>=0&&i<o||u("Out-of-range heap index."),a(function(t){var e;for(;t>0&&!f(t,e=t-1>>1);)s(t,e),t=e;return t}(i))},this.popValue=function(){return t[this.pop()]},this.pop=function(){var t;return o<=0&&u("Tried to pop from an empty heap."),t=e[0],l(0,e[--o]),a(0),t}}Jt.prototype.type=function(){return this.header().type},Jt.prototype.getCounts=function(){var t={nullCount:0,partCount:0,shapeCount:0,pointCount:0};return this.forEachShape(function(e){e.isNull&&t.nullCount++,t.pointCount+=e.pointCount,t.partCount+=e.partCount,t.shapeCount++}),t},v.importShp=function(t,e,n){var r=new Jt(t,e),i=r.type(),o=v.translateShapefileType(i),a=new Et(c.defaults({type:o,reserved_points:Math.round(r.header().byteLength/16)},n));return v.isSupportedShapefileType(i)||b("Unsupported Shapefile type:",i),qt.isZType(i)?w("Warning: Shapefile Z data will be lost."):qt.isMType(i)&&w("Warning: Shapefile M data will be lost."),r.forEachShape(function(t){a.startShape(),t.isNull||("point"==o?a.importPoints(t.readPoints()):t.stream(a))}),a.done()},v.exportShapefile=function(t,e){return t.layers.reduce(function(n,r){var i=v.exportPrjFile(r,t);return n=(n=n.concat(v.exportShpAndShxFiles(r,t,e))).concat(v.exportDbfFile(r,t,e)),i&&n.push(i),n},[])},v.exportPrjFile=function(t,e){var n=(e.info||{}).prj;if(!n)try{n=v.crsToPrj(v.getDatasetCRS(e))}catch(t){}return n||w("Unable to generate .prj file for",t.name+".shp"),n?{content:n,filename:t.name+".prj"}:null},v.getShapefileExportType=function(t){var e=t.geometry_type;return"point"==e?v.findMaxPartCount(t.shapes||[])<=1?qt.POINT:qt.MULTIPOINT:"polygon"==e?qt.POLYGON:"polyline"==e?qt.POLYLINE:qt.NULL},v.exportShpAndShxFiles=function(t,e,n){var r,i=t.shapes||c.initializeArray(new Array(v.getFeatureCount(t)),null),o=new h,a=v.getShapefileExportType(t),s=100,u=100+8*i.length,l=new d(u).bigEndian().position(100),f=i.map(function(n,r){var i=v.exportPathData(n,e.arcs,t.geometry_type),u=v.exportShpRecord(i,r+1,a),c=u.buffer.byteLength;return l.writeInt32(s/2),l.writeInt32(c/2-4),s+=c,u.bounds&&o.mergeBounds(u.bounds),u.buffer});return r=new d(s,!1).writeInt32(9994).skipBytes(20).writeInt32(s/2).littleEndian().writeInt32(1e3).writeInt32(a),o.hasBounds()?r.writeFloat64(o.xmin||0).writeFloat64(o.ymin||0).writeFloat64(o.xmax||0).writeFloat64(o.ymax||0):r.skipBytes(32),r.skipBytes(32),f.forEach(function(t){r.writeBuffer(t)}),l.position(0).writeBuffer(r.buffer(),100).position(24).writeInt32(u/2),[{content:r.buffer(),filename:t.name+".shp"},{content:l.buffer(),filename:t.name+".shx"}]},v.exportShpRecord=function(t,e,n){var r=qt.isMultiPartType(n),i=!r&&!qt.isMultiPointType(n),o=t.pointCount>0==!1,a=o?null:t.bounds,s=null;if(o)s=new d(12,!1).writeInt32(e).writeInt32(2).littleEndian().writeInt32(0);else if(i)s=new d(28,!1).writeInt32(e).writeInt32(10).littleEndian().writeInt32(n).writeFloat64(t.pathData[0].points[0][0]).writeFloat64(t.pathData[0].points[0][1]);else{var c=r?52+4*t.pathCount:48,l=c+16*t.pointCount,f=0;s=new d(l,!1).writeInt32(e).writeInt32((l-8)/2).littleEndian().writeInt32(n).writeFloat64(a.xmin).writeFloat64(a.ymin).writeFloat64(a.xmax).writeFloat64(a.ymax),r&&s.writeInt32(t.pathCount),s.writeInt32(t.pointCount),t.pathData.forEach(function(t,e){r&&s.position(52+4*e).writeInt32(f),s.position(c+16*f);for(var n=0,i=t.points.length;n<i;n++)s.writeFloat64(t.points[n][0]),s.writeFloat64(t.points[n][1]);f+=n}),t.pointCount!=f&&u("Shp record point count mismatch; pointCount:",f,"data.pointCount:",t.pointCount)}return{bounds:a,buffer:s.buffer()}},v.importDbfTable=function(t,e){return new Ht(t,(e||{}).encoding)},c.extend(Ht.prototype,it),v.exportDbf=function(t,e){return t.layers.reduce(function(n,r){return r.data&&(n=n.concat(v.exportDbfFile(r,t,e))),n},[])},v.exportDbfFile=function(t,e,n){var r,i=t.data;return(!i||n.cut_table||n.drop_table)&&(i=new rt(t.shapes?t.shapes.length:0)),0===i.getFields().length&&i.addIdField(),r=i.exportAsDbf(n),c.isInteger(n.ldid)&&(new Uint8Array(r)[29]=n.ldid),[{content:r,filename:t.name+".dbf"}]},Ut.symbolRenderers.circle=function(t,e,n){var r=Ut.importPoint([e,n],t,{});return Ut.applyStyleAttributes(r,"Point",t),[r]},Ut.symbolRenderers.label=function(t,e,n){return[Ut.importStyledLabel(t,[e,n])]},Ut.symbolRenderers.image=function(t,e,n){var r=t.width||20,i=t.height||20;return[{tag:"image",properties:{width:r,height:i,x:e-r/2,y:n-i/2,href:t.href||""}}]},Ut.symbolRenderers.square=function(t,e,n){var r=Ut.importPoint([e,n],t,{point_symbol:"square"});return Ut.applyStyleAttributes(r,"Point",t),[r]},Ut.symbolRenderers.line=function(t,e,n){var r,i;return r=[[e,n],[e+(t.dx||0),n+(t.dy||0)]],i=Ut.importLineString(r),Ut.applyStyleAttributes(i,"LineString",t),[i]},Ut.symbolRenderers.polyline=function(t,e,n){var r=t.coordinates||[],i=Ut.importMultiLineString(r);return Ut.applyStyleAttributes(i,"LineString",t),[i]},Ut.symbolRenderers.group=function(t,e,n){return(t.parts||[]).reduce(function(r,i){var o=Ut.renderSymbol(i,e,n);return t.chained&&(e+=i.dx||0,n+=i.dy||0),r.concat(o)},[])},Ut.getEmptySymbol=function(){return{tag:"g",properties:{},children:[]}},Ut.renderSymbol=function(t,e,n){var r=Ut.symbolRenderers[t.type];return r||b(t.type?"Unknown symbol type: "+t.type:"Symbol is missing a type property"),r(t,e||0,n||0)},Ut.importSymbol=function(t,e){return t?(c.isString(t)&&(t=JSON.parse(t)),{tag:"g",properties:{class:"mapshaper-svg-symbol",transform:e?Ut.getTransform(e):null},children:Ut.renderSymbol(t)}):Ut.getEmptySymbol()},Ut.stylePropertyTypes={class:"classname",dx:"measure",dy:"measure",fill:"color","font-family":null,"font-size":null,"font-style":null,"font-weight":null,"label-text":null,"letter-spacing":"measure","line-height":"measure",opacity:"number",r:"number",stroke:"color","stroke-dasharray":"dasharray","stroke-width":"number","text-anchor":null},Ut.symbolPropertyTypes=c.extend({type:null,length:"number",rotation:"number",curve:"number",effect:null},Ut.stylePropertyTypes),Ut.commonProperties="class,opacity,stroke,stroke-width,stroke-dasharray".split(","),Ut.propertiesBySymbolType={polygon:c.arrayToIndex(Ut.commonProperties.concat("fill")),polyline:c.arrayToIndex(Ut.commonProperties),point:c.arrayToIndex(Ut.commonProperties.concat("fill","r")),label:c.arrayToIndex(Ut.commonProperties.concat("fill,r,font-family,font-size,text-anchor,font-weight,font-style,letter-spacing,dominant-baseline".split(",")))},Ut.isSupportedSvgStyleProperty=function(t){return t in Ut.stylePropertyTypes},Ut.isSupportedSvgSymbolProperty=function(t){return t in Ut.symbolPropertyTypes},Ut.findPropertiesBySymbolGeom=function(t,e){var n=Ut.propertiesBySymbolType[e]||{};return t.filter(function(t){return t in n})},v.getSymbolPropertyAccessor=function(t,e){var n={},r={},i=[];return Object.keys(e).forEach(function(o){var a,s,u,c=o.replace("_","-");Ut.isSupportedSvgSymbolProperty(c)&&(u=Ut.symbolPropertyTypes[c],s=e[o].trim(),null===(a=v.parseSvgLiteralValue(s,u,t.data.getFields()))?r[c]=v.compileValueExpression(s,t,null,{context:v.getStateVar("defs")}):n[c]=a,i.push(c))}),function(t){for(var e,o={},a=0;a<i.length;a++)o[e=i[a]]=e in r?r[e](t):n[e];return o}},v.parseSvgLiteralValue=function(t,e,n){return n.indexOf(t)>-1?null:"number"==e?v.isSvgNumber(t)?Number(t):null:"color"==e?v.isSvgColor(t)?t:null:"classname"==e?v.isSvgClassName(t)?t:null:"measure"==e?v.isSvgMeasure(t)?v.parseSvgMeasure(t):null:"dasharray"==e?v.isDashArray(t)?t:null:/[\?\:\[\(\+]/.test(t)?null:t},v.isDashArray=function(t){return/^[0-9]+( [0-9]+)*$/.test(t)},v.isSvgClassName=function(t){return/^( ?[_a-z][-_a-z0-9]*\b)+$/i.test(t)},v.isSvgNumber=function(t){return c.isFiniteNumber(t)||c.isString(t)&&/^-?[.0-9]+$/.test(t)},v.isSvgMeasure=function(t){return c.isFiniteNumber(t)||c.isString(t)&&/^-?[.0-9]+[a-z]*$/.test(t)},v.parseSvgMeasure=function(t){return c.isString(t)&&/[a-z]/.test(t)?t:Number(t)},v.isSvgColor=function(t){return/^[a-z]+$/i.test(t)||/^#[0-9a-f]+$/i.test(t)||/^rgba?\([0-9,. ]+\)$/.test(t)},m.svgStyle=function(t,e,n){var r;t.data||v.initDataTable(t),n.where&&(r=v.compileValueExpression(n.where,t,e.arcs)),Object.keys(n).forEach(function(i){var o,a,s,u,c=i.replace("_","-");Ut.isSupportedSvgStyleProperty(c)&&(u=Ut.stylePropertyTypes[c],o=n[i].trim(),null===(a=v.parseSvgLiteralValue(o,u,t.data.getFields()))&&(s=v.compileValueExpression(o,t,e.arcs,{context:v.getStateVar("defs")})),v.getLayerDataTable(t).getRecords().forEach(function(t,e){r&&!r(e)?c in t==!1&&(t[c]=void 0):t[c]=s?s(e):a}))})},c.sha1=function(t){for(var e,n,r,i,o,a,s,u=0,c=0,l=[],f=[e=1732584193,n=4023233417,~e,~n,3285377520],p=[],h=unescape(encodeURI(t)),d=h.length;c<=d;)p[c>>2]|=(h.charCodeAt(c)||128)<<8*(3-c++%4);for(p[s=d+8>>2|15]=d<<3;u<=s;u+=16){for(e=f,c=0;c<80;e=[0|[(a=((h=e[0])<<5|h>>>27)+e[4]+(l[c]=c<16?~~p[u+c]:a<<1|a>>>31)+1518500249)+((n=e[1])&(r=e[2])|~n&(i=e[3])),o=a+(n^r^i)+341275144,a+(n&r|n&i|r&i)+882459459,o+1535694389][0|c++/20],h,n<<30|n>>>2,r,i])a=l[c-3]^l[c-8]^l[c-14]^l[c-16];for(c=5;c;)f[--c]=f[c]+e[c]|0}for(t="";c<40;)t+=(f[c>>3]>>4*(7-c++%8)&15).toString(16);return t},Ut.embedImages=function(t,e){v.runningInBrowser()||function t(r){"image"==r.tag?/\.svg/.test(r.properties.href||"")&&function(t){var r=function(t){var r=c.find(e,function(e){return e.href==t});r||((r={href:t,id:Ut.urlToId(t)}).svg=(i=function(t){var e,r;return 0===t.indexOf("http")?(e=n(199)("GET",t,{timeout:1e3}),r=e.getBody().toString()):n(12).existsSync(t)?r=n(12).readFileSync(t,"utf8"):b("Invalid SVG location:",t),r}(t),o=r.id,(i=i.replace(/[^]*<svg/,"<svg")).replace(/^<svg[^>]*>/,function(t){return t=(t=t.replace(/ id="[^"]*"/,"")).replace(/<svg/,'<svg id="'+o+'"')})+"\n"),e.push(r));var i,o;return r.id}(t.properties.href);t.tag="use",t.properties.href="#"+r}(r):r.children&&r.children.forEach(t)}(t)},Ut.urlToId=function(t){return c.sha1(t).substr(0,12)},Ut.stringify=function(t){var e,n;return t&&t.tag?(e="<"+t.tag,t.properties&&(e+=Ut.stringifyProperties(t.properties)),t.children||t.value?(e+=">"+(n="text"==t.tag||"tspan"==t.tag?"":"\n"),t.value&&(e+=t.value),t.children&&(e+=t.children.map(Ut.stringify).join(n)),e+=n+"</"+t.tag+">"):e+="/>",e):""},Ut.stringEscape=(zt=/[&<>"']/g,Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},function(t){return String(t).replace(zt,function(t){return Vt[t]})}),Ut.stringifyProperties=function(t){return Object.keys(t).reduce(function(e,n){var r,i=t[n];return i||0===i?(r=c.isString(i)?i:JSON.stringify(i),"href"==n&&(n="xlink:href"),e+" "+n+'="'+Ut.stringEscape(r)+'"'):e},"")},Ut.stringifyVertex=function(t){return t[0]+" "+t[1]},Ut.stringifyCP=function(t){return t[2].toFixed(2)+" "+t[3].toFixed(2)},Ut.stringifyLineStringCoords=function(t){t[0];return 0===t.length?"":2==t.length&&4==t[0].length&&4==t[1].length?Ut.stringifyBezierArc(t):"M "+t.map(Ut.stringifyVertex).join(" ")},Ut.stringifyBezierArc=function(t){var e=t[0],n=t[1];return"M "+Ut.stringifyVertex(e)+" C "+Ut.stringifyCP(e)+" "+Ut.stringifyCP(n)+" "+Ut.stringifyVertex(n)},Ut.findArcCenter=function(t,e,n){var r=[(t[0]+e[0])/2,(t[1]+e[1])/2],i=1/Math.tan(n/180*Math.PI/2);return v.getAffineTransform(90,i,[0,0],r)(e[0],e[1])},Ut.addBezierArcControlPoints=function(t,e,n){var r=Ut.findArcCenter(t,e,n),i=r[0],o=r[1],a=t[0]-i,s=t[1]-o,u=e[0]-i,c=e[1]-o,l=a*a+s*s,f=l+a*u+s*c;k2=4/3*(Math.sqrt(2*l*f)-f)/(a*c-s*u),t.push(i+a-k2*s),t.push(o+s+k2*a),e.push(i+u+k2*c),e.push(o+c-k2*u)},Ut.importGeoJSONFeatures=function(t,e){return e=e||{},t.map(function(t,n){var r="Feature"==t.type?t.geometry:t,i=r&&r.type,o=null;return i&&r.coordinates&&(o=Ut.geojsonImporters[i](r.coordinates,t.properties,e)),o?(t.properties&&Ut.applyStyleAttributes(o,i,t.properties),"id"in t&&(o.properties||(o.properties={}),o.properties.id=(e.id_prefix||"")+t.id),o):{tag:"g"}})},Ut.applyStyleAttributes=function(t,e,n){var r=mt.translateGeoJSONType(e);"point"==r&&"label-text"in n&&(r="label");for(var i=Ut.findPropertiesBySymbolGeom(Object.keys(n),r),o=0,a=i.length;o<a;o++)Ut.setAttribute(t,i[o],n[i[o]])},Ut.setAttribute=function(t,e,n){"r"==e||(t.properties||(t.properties={}),t.properties[e]=n,"stroke-dasharray"==e&&n&&(t.properties["stroke-linecap"]="butt"))},Ut.importMultiPoint=function(t,e,n){for(var r,i=[],o=0;o<t.length;o++)"g"==(r=Ut.importPoint(t[o],e,n)).tag&&r.children?i=i.concat(r.children):i.push(r);return i.length>0?{tag:"g",children:i}:null},Ut.importMultiPath=function(t,e){for(var n,r=0;r<t.length;r++)0===r?n=e(t[r]):n.properties.d+=" "+e(t[r]).properties.d;return n},Ut.importLineString=function(t){return{tag:"path",properties:{d:Ut.stringifyLineStringCoords(t)}}},Ut.importMultiLineString=function(t){return{tag:"path",properties:{d:t.map(Ut.stringifyLineStringCoords).join(" ")}}},Ut.importStyledLabel=function(t,e){var n=Ut.importLabel(t,e);return Ut.applyStyleAttributes(n,"Point",t),n},Ut.importLabel=function(t,e){var n,r,i=t["label-text"]||"",o=/\n|\\n|<br>/i,a=t.dx||0,s={y:t.dy||0,x:a};return e&&(s.transform=Ut.getTransform(e)),o.test(i)&&(n=i.split(o),i=n.shift()),r={tag:"text",value:i,properties:s},n&&(r.children=[],n.forEach(function(e){var n={tag:"tspan",value:e,properties:{x:a,dy:t["line-height"]||"1.1em"}};r.children.push(n)})),r},Ut.importPoint=function(t,e,n){return"svg-symbol"in(e=e||{})?Ut.importSymbol(e["svg-symbol"],t):Ut.importStandardPoint(t,e,n||{})},Ut.importPolygon=function(t){for(var e,n,r=0;r<t.length;r++)e=n?n.properties.d+" ":"",(n=Ut.importLineString(t[r])).properties.d=e+n.properties.d+" Z";return n},Ut.importStandardPoint=function(t,e,n){var r,i="label-text"in e,o=n.point_symbol||"",a=[],s=e.r||0;return(s>0||!i)&&("square"==o?r={tag:"rect",properties:{x:t[0]-s,y:t[1]-s,width:2*s,height:2*s}}:(r={tag:"circle",properties:{cx:t[0],cy:t[1]}},s>0&&(r.properties.r=s)),a.push(r)),i&&a.push(Ut.importLabel(e,t)),a.length>1?{tag:"g",children:a}:a[0]},Ut.geojsonImporters={Point:Ut.importPoint,Polygon:Ut.importPolygon,LineString:Ut.importLineString,MultiPoint:function(t,e,n){return Ut.importMultiPoint(t,e,n)},MultiLineString:function(t){return Ut.importMultiPath(t,Ut.importLineString)},MultiPolygon:function(t){return Ut.importMultiPath(t,Ut.importPolygon)}},v.exportSVG=function(t,e){var n,r,i='xmlns="http://www.w3.org/2000/svg"',o=[];return e.final?t.arcs&&t.arcs.flatten():t=v.copyDataset(t),c.extend(e,{invert_y:!0}),n=v.transformCoordsForSVG(t,e),e.svg_data&&v.validateSvgDataFields(t.layers,e.svg_data),r=t.layers.map(function(n){var r=v.exportLayerForSVG(n,t,e);return Ut.embedImages(r,o),Ut.stringify(r)}).join("\n"),o.length>0&&(i+=' xmlns:xlink="http://www.w3.org/1999/xlink"',r="<defs>\n"+c.pluck(o,"svg").join("")+"</defs>\n"+r),[{content:r=c.format('<?xml version="1.0"?>\n<svg %s version="1.2" baseProfile="tiny" width="%d" height="%d" viewBox="%s %s %s %s" stroke-linecap="round" stroke-linejoin="round">\n%s\n</svg>',i,n[0],n[1],0,0,n[0],n[1],r),filename:e.file||c.getOutputFileBase(t)+".svg"}]},v.transformCoordsForSVG=function(t,e){var n=v.transformDatasetToPixels(t,e),r=e.precision||1e-4;return v.setCoordinatePrecision(t,r),n},v.exportLayerForSVG=function(t,e,n){var r=v.getEmptyLayerForSVG(t,n);return v.layerHasFurniture(t)?r.children=v.exportFurnitureForSVG(t,e,n):r.children=v.exportSymbolsForSVG(t,e,n),r},v.exportFurnitureForSVG=function(t,e,n){var r,i=v.findFrameLayerInDataset(e);return i?((r=v.getFurnitureLayerData(i)).crs=v.getDatasetCRS(e),Ut.importFurniture(v.getFurnitureLayerData(t),r)):[]},v.exportSymbolsForSVG=function(t,e,n){var r=c.defaults({layers:[t]},e),i=v.exportDatasetAsGeoJSON(r,n),o=i.features||i.geometries||(i.type?[i]:[]),a=Ut.importGeoJSONFeatures(o,n);return n.svg_data&&t.data&&v.addDataAttributesToSVG(a,t.data,n.svg_data),a},v.validateSvgDataFields=function(t,e){var n=e.reduce(function(e,n){return function(t,e){return c.some(t,function(t){return t.data&&t.data.fieldExists(e)||!1})}(t,n)||e.push(n),e},[]);n.length&&-1==n.indexOf("*")&&b("Missing data field(s):",n.join(", "))},v.addDataAttributesToSVG=function(t,e,n){var r=e.getFields(),i=n.indexOf("*")>-1?r.concat():n,o=c.difference(i,r);o.length>0&&(i=c.difference(i,o));var a=e.getRecords(),s=v.exportDataAttributesForSVG(a,i);t.length!=s.length&&u("Mismatch between number of SVG symbols and data attributes"),t.forEach(function(t,e){c.extend(t.properties||{},s[e])})},v.exportDataAttributesForSVG=function(t,e){var n=/^[a-z_][a-z0-9_-]*$/i,r=/^xml/,i=e.filter(function(t){return n.test(t)&&!r.test(t)}),o=c.difference(e,i);return o.length>0&&(w("Unable to add data-* attributes for field(s):",o.join(", ")),w("data-* names should match pattern [a-z_][a-z0-9_-]*")),t.map(function(t){for(var e={},n=0;n<i.length;n++)e["data-"+i[n].toLowerCase()]=v.validDataAttributeValue(t[i[n]]);return e})},v.validDataAttributeValue=function(t){return String(t)},v.getEmptyLayerForSVG=function(t,e){var n={tag:"g",properties:{id:(e.id_prefix||"")+t.name},children:[]};return("polyline"==t.geometry_type||v.layerHasSvgSymbols(t))&&(n.properties.fill="none"),"polyline"==t.geometry_type&&(n.properties.stroke="black",n.properties["stroke-width"]=1),(v.layerHasLabels(t)||v.layerHasSvgSymbols(t)||v.layerHasFurniture(t))&&(n.properties["font-family"]="sans-serif",n.properties["font-size"]="12",n.properties["text-anchor"]="middle"),n},v.layerHasSvgSymbols=function(t){return"point"==t.geometry_type&&t.data&&t.data.fieldExists("svg-symbol")},v.layerHasLabels=function(t){return"point"==t.geometry_type&&t.data&&t.data.fieldExists("label-text")},v.exportDelim=function(t,e){var n=v.getExportDelimiter(t.info,e),r=v.getDelimFileExtension(n,e);return t.layers.reduce(function(t,i){return i.data&&t.push({content:v.exportLayerAsDSV(i,n,e),filename:(i.name||"output")+"."+r}),t},[])},v.exportLayerAsDSV=function(t,e,r){var i=r||{},o=i.encoding||"utf8",a=n(66).dsvFormat(e).formatRows,s=t.data.getRecords(),u=v.findFieldNames(s,i.field_order);return v.encodingIsUtf8(o)&&!i.to_buffer&&(s.length<1e4||i.to_string)?v.exportRecordsAsString(u,s,a):v.exportRecordsAsBuffer(u,s,a,o)},v.exportRecordsAsString=function(t,e,n){var r=v.getDelimRowFormatter(t,e);return n([t].concat(e.map(r)))},v.exportRecordsAsBuffer=function(t,e,n,r){for(var i=v.getDelimRowFormatter(t,e),o=n([t]),a=[v.encodeString(o,r)],s=[],u=e.length,c=0;c<u;)s.push(i(e[c])),++c%1e3!=0&&c!=u||(o="\n"+n(s),s=[],a.push(v.encodeString(o,r)));return y.concat(a)},v.getDelimRowFormatter=function(t,e){var n=t.map(function(t){var n=v.getColumnType(t,e);return function(e){return"object"==n?JSON.stringify(e[t]):e[t]}});return function(t){for(var e=[],r=0;r<n.length;r++)e.push(n[r](t));return e}},v.getExportDelimiter=function(t,e){var n=",",r=e.file?c.getFileExtension(e.file):"";return e.delimiter?n=e.delimiter:"tsv"==r?n="\t":"csv"==r?n=",":t.input_delimiter&&(n=t.input_delimiter),n},v.getDelimFileExtension=function(t,e){var n="txt";return e.file?n=c.getFileExtension(e.file):"\t"==t?n="tsv":","==t&&(n="csv"),n},v.importJSONTable=function(t){return v.fixInconsistentFields(t),{layers:[{data:new rt(t)}],info:{}}},v.exportJSON=function(t,e){return t.layers.reduce(function(t,e){return e.data&&t.push({content:v.exportJSONTable(e),filename:(e.name||"output")+".json"}),t},[])},v.exportJSONTable=function(t){return JSON.stringify(t.data.getRecords())},v.getOutputFormat=function(t,e){var n=e.file||null,r=t.info&&t.info.input_formats&&t.info.input_formats[0],i=null;return e.format?e.format:(n?i=v.inferOutputFormat(n,r):r&&(i=r),"json"==i&&v.datasetHasGeometry(t)&&(i="geojson"),i||null)},v.inferOutputFormat=function(t,e){var n=c.getFileExtension(t).toLowerCase(),r=null;return"shp"==n?r="shapefile":"dbf"==n?r="dbf":"svg"==n?r="svg":/json$/.test(n)?(r="geojson","topojson"==n||"topojson"==e&&"geojson"!=n?r="topojson":"json"==n&&"json"==e&&(r="json")):v.couldBeDsvFile(t)?r="dsv":e&&(r=e),r},v.exportTargetLayers=function(t,e){var n=t.map(function(t){return c.defaults({layers:t.layers},t.dataset)});return v.exportDatasets(n,e)},v.exportDatasets=function(t,e){var n,r=v.getOutputFormat(t[0],e);return"svg"==r||"topojson"==r||"geojson"==r&&e.combine_layers?t.length>1&&(t=[v.mergeDatasetsForExport(t)],"topojson"==r&&m.buildTopology(t[0]),e=c.defaults({final:!0},e)):(t=t.map(v.copyDatasetForRenaming),v.assignUniqueLayerNames2(t)),n=t.reduce(function(t,n){return v.runningInBrowser()?c.sortOn(n.layers,"stack_id",!0):c.sortOn(n.layers,"target_id",!0),t.concat(v.exportFileContent(n,e))},[]),v.assignUniqueFileNames(n),n},v.exportFileContent=function(t,e){var n=e.format=v.getOutputFormat(t,e),r=v.exporters[n],i=[];return n?r||u("Unknown output format:",n):u("Missing output format"),t=c.defaults({layers:t.layers.map(function(t){return c.extend({},t)})},t),e.file&&"topojson"!=n&&"svg"!=n&&t.layers.forEach(function(t){t.name=c.getFileBase(e.file)}),v.assignUniqueLayerNames(t.layers),e.precision&&"svg"!=n&&"geojson"!=n&&"topojson"!=n&&(t=v.copyDatasetForExport(t),v.setCoordinatePrecision(t,e.precision)),e.cut_table&&(i=v.exportDataTables(t.layers,e).concat(i)),e.extension&&(e.extension=v.fixFileExtension(e.extension,n)),v.validateLayerData(t.layers),i=r(t,e).concat(i),e.bbox_index&&i.push(v.createIndexFile(t)),v.validateFileNames(i),i},v.exporters={geojson:v.exportGeoJSON,topojson:v.exportTopoJSON,shapefile:v.exportShapefile,dsv:v.exportDelim,dbf:v.exportDbf,json:v.exportJSON,svg:v.exportSVG},v.createIndexFile=function(t){var e=t.layers.map(function(e){return{bbox:v.getLayerBounds(e,t.arcs).toArray(),name:e.name}});return{content:JSON.stringify(e),filename:"bbox-index.json"}},v.validateLayerData=function(t){t.forEach(function(t){t.geometry_type?(c.contains(["polygon","polyline","point"],t.geometry_type)||u("A layer has an invalid geometry type:",t.geometry_type),t.shapes||u("A layer is missing shape data")):t.shapes&&c.some(t.shapes,function(t){return!!t})&&u("A layer contains shape records and a null geometry type")})},v.validateFileNames=function(t){var e={};t.forEach(function(t,n){var r=t.filename;r||u("Missing a filename for file"+n),r in e&&u("Duplicate filename",r),e[r]=!0})},v.assignUniqueLayerNames=function(t){var e=t.map(function(t){return t.name||"layer"}),n=c.uniqifyNames(e);t.forEach(function(t,e){t.name=n[e]})},v.assignUniqueLayerNames2=function(t){var e=t.reduce(function(t,e){return t.concat(e.layers)},[]);v.assignUniqueLayerNames(e)},v.assignUniqueFileNames=function(t){var e=t.map(function(t){return t.filename}),n=c.uniqifyNames(e,v.formatVersionedFileName);t.forEach(function(t,e){t.filename=n[e]})},v.exportDataTables=function(t,e){var n=[];return t.forEach(function(t){t.data&&n.push({content:JSON.stringify(t.data),filename:(t.name?t.name+"-":"")+"table.json"})}),n},v.formatVersionedFileName=function(t,e){var n,r,i=t.split(".");return i.length<2?c.formatVersionedName(t,e):(n=i.pop(),r=i.join("."),c.formatVersionedName(r,e)+"."+n)},v.fixFileExtension=function(t,e){return t.replace(/^\.+/,"")},m.evaluateEachFeature=function(t,e,n,r){var i,o,a=v.getFeatureCount(t);a>0&&!t.data&&(t.data=new rt(a)),r&&r.where&&(o=v.compileValueExpression(r.where,t,e)),i=v.compileFeatureExpression(n,t,e,{context:v.getStateVar("defs")});for(var s=0;s<a;s++)o&&!o(s)||i(s)},v.identifyJSONString=function(t,e){var n=null;return t.length>1e3&&(t=t.substr(0,1e3)),t=t.replace(/\s/g,""),e&&e.json_path?n="json":/^\[[{\]]/.test(t)?n="json":/"arcs":\[|"objects":\{|"transform":\{/.test(t)?n="topojson":/^\{"/.test(t)&&(n="geojson"),n},v.identifyJSONObject=function(t){var e=null;return t&&("Topology"==t.type?e="topojson":t.type?e="geojson":c.isArray(t)&&(e="json")),e},v.importGeoJSONFile=function(t,e){var n=new It(e);return new vt(t).readObjects(n.parseObject),n.done()},v.importJSONFile=function(t,e){var n,r=v.readFirstChars(t,1e3);return n="geojson"==v.identifyJSONString(r,e)?{dataset:v.importGeoJSONFile(t,e),format:"geojson"}:{content:t.toString("utf8")},t.close(),n},v.importJSON=function(t,e){var n,r=t.content,i=t.filename,o={filename:i};if(r?r instanceof ArrayBuffer&&(r.byteLength<1e7?r=v.bufferToString(c.createBuffer(r)):(n=new ot(r),r=null)):n=new at(i),n&&((t=v.importJSONFile(n,e)).dataset?(o.dataset=t.dataset,o.format=t.format):r=t.content),r){if(c.isString(r))try{r=JSON.parse(r)}catch(t){b("Unable to parse JSON")}e.json_path&&(r=v.selectFromObject(r,e.json_path)),o.format=v.identifyJSONObject(r,e),"topojson"==o.format?o.dataset=v.importTopoJSON(r,e):"geojson"==o.format?o.dataset=v.importGeoJSON(r,e):"json"==o.format?o.dataset=v.importJSONTable(r,e):b("Unknown JSON format")}return o},v.selectFromObject=function(t,e){var n=e.split("."),r=t&&t[n[0]];return n>1?v.selectFromObject(r,n.slice(1).join("")):r},v.importContent=function(t,e){var n,r,i;return e=e||{},t.json?(r=(i=v.importJSON(t.json,e)).format,n=i.dataset,v.cleanPathsAfterImport(n,e)):t.text?(r="dsv",i=t.text,n=v.importDelim2(i,e)):t.shp?(r="shapefile",i=t.shp,n=v.importShapefile(t,e),v.cleanPathsAfterImport(n,e)):t.dbf?(r="dbf",i=t.dbf,n=v.importDbf(t,e)):t.prj&&(r="prj",n={layers:[],info:{prj:(i=t.prj).content}}),n||b("Missing an expected input type"),n.arcs&&!e.no_topology&&"topojson"!=r&&m.buildTopology(n),"topojson"!=r&&n.layers.forEach(function(t){v.setLayerName(t,v.filenameToLayerName(i.filename||""))}),i.filename&&(n.info.input_files=[i.filename]),n.info.input_formats=[r],n},v.importFileContent=function(t,e,n){var r={};return r[v.guessInputType(e,t)]={filename:e,content:t},v.importContent(r,n)},v.importShapefile=function(t,e){var n,r=t.shp.content||t.shp.filename,i=t.shx?t.shx.content||t.shx.filename:null,o=v.importShp(r,i,e),a=o.layers[0];return t.dbf&&(n=v.importDbf(t,e),c.extend(o.info,n.info),a.data=n.layers[0].data,a.shapes&&a.data.size()!=a.shapes.length&&w("Mismatched .dbf and .shp record count -- possible data loss.")),t.prj&&(o.info.prj=t.prj.content),o},v.importDbf=function(t,e){return e=c.extend({},e),t.cpg&&!e.encoding&&(e.encoding=t.cpg.content),{info:{},layers:[{data:v.importDbfTable(t.dbf.content,e)}]}},v.filenameToLayerName=function(t){var e="layer1",n=c.parseLocalPath(t);return n.basename&&n.extension&&(e=n.basename),e},v.setLayerName=function(t,e){t.name||(t.name=c.getFileBase(e))},m.importFiles=function(t){var e,n=t.files||[];return t.stdin?m.importFile("/dev/stdin",t):(n.length>0==!1&&b("Missing input file(s)"),E("Importing: "+n.join(" ")),1==n.length?e=m.importFile(n[0],t):t.merge_files?(e=v.importFiles(n,t)).layers=m.mergeLayers(e.layers):t.combine_files?e=v.importFiles(n,t):b("Invalid inputs"),e)},m.importFile=function(t,e){var n,r=v.guessInputFileType(t),i={},o=e&&e.encoding||null,a=e&&e.input||null,s=a&&t in a;return st.checkFileExists(t,a),("shp"!=r||s)&&("json"!=r||s)&&("text"!=r||s)?r&&v.isSupportedBinaryInputType(t)?(n=st.readFile(t,null,a),c.isString(n)&&b("Expected binary content, received a string")):r?n=st.readFile(t,o||"utf-8",a):(n=st.readFile(t,o||"utf-8",a),"text"==(r=v.guessInputContentType(n))&&n.indexOf("")>-1&&(r=null)):n=null,r||b(v.getUnsupportedFileMessage(t)),i[r]={filename:t,content:n},n=null,"shp"!=r&&"dbf"!=r||v.readShapefileAuxFiles(t,i,a),"shp"!=r||i.dbf||w(c.format("[%s] .dbf file is missing - shapes imported without attribute data.",t)),v.importContent(i,e)},v.getUnsupportedFileMessage=function(t){var e="Unable to import "+t;return"zip"==c.getFileExtension(t).toLowerCase()?e+=" (ZIP files must be unpacked before running mapshaper)":e+=" (unknown file type)",e},v.readShapefileAuxFiles=function(t,e,n){var r=c.replaceFileExtension(t,"dbf"),i=c.replaceFileExtension(t,"shx"),o=c.replaceFileExtension(t,"cpg"),a=c.replaceFileExtension(t,"prj");st.isFile(a,n)&&(e.prj={filename:a,content:st.readFile(a,"utf-8",n)}),st.isFile(i,n)&&(e.shx={filename:i,content:st.readFile(i,null,n)}),!e.dbf&&st.isFile(r,n)&&(e.dbf={filename:r,content:st.readFile(r,null,n)}),e.dbf&&st.isFile(o,n)&&(e.cpg={filename:o,content:st.readFile(o,"utf-8",n).trim()})},v.writeFiles=function(t,e,n){if(t.length>0==!1)w("No files to save");else if(e.dry_run);else{if(e.stdout)return st.writeFile("/dev/stdout",t[0].content,n);var r=v.getOutputPaths(c.pluck(t,"filename"),e),i=v.getStateVar("input_files");t.forEach(function(t,n){var o=r[n];t.content instanceof ArrayBuffer&&(t.content=st.convertArrayBuffer(t.content)),e.output?e.output.push({filename:o,content:t.content}):(!e.force&&i.indexOf(o)>-1&&b('Need to use the "-o force" option to overwrite input files.'),st.writeFile(o,t.content),w("Wrote "+o))})}n&&n(null)},v.getOutputPaths=function(t,e){var r=e.directory;return r&&(t=t.map(function(t){return n(47).join(r,t)})),t},m.filterGeom=function(t,e,n){v.layerHasGeometry(t)||b("Layer is missing geometry"),n.bbox&&v.filterByBoundsIntersection(t,e,n),m.filterFeatures(t,e,{remove_empty:!0,verbose:!1})},v.filterByBoundsIntersection=function(t,e,n){var r=new h(n.bbox),i="point"==t.geometry_type?v.getPointInBoundsTest(r):v.getPathBoundsIntersectionTest(r,e);v.editShapes(t.shapes,i)},v.getPointInBoundsTest=function(t){return function(e){return t.containsPoint(e[0],e[1])?e:null}},v.getPathBoundsIntersectionTest=function(t,e){return function(n){return t.intersects(e.getSimpleShapeBounds(n))?n:null}},m.filterFields=function(t,e){var n=t.data;e=e||[],v.requireDataFields(n,e),c.difference(n.getFields(),e).forEach(n.deleteField,n)},m.renameFields=function(t,e){var n=v.mapFieldNames(e);v.requireDataFields(t.data,Object.keys(n)),c.defaults(n,v.mapFieldNames(t.data.getFields())),t.data.update(v.getRecordMapper(n))},v.mapFieldNames=function(t){return(t||[]).reduce(function(t,e){var n=e.split("="),r=c.trimQuotes(n[0]),i=n.length>1?c.trimQuotes(n[1]):r;return i&&r||b("Invalid field description:",e),t[i]=r,t},{})},v.getRecordMapper=function(t){var e=Object.keys(t);return function(n){for(var r,i={},o=0,a=e.length;o<a;o++)r=e[o],i[t[r]]=n[r];return i}},m.rectangles=function(t,e,n){v.layerHasGeometry(t)||b("Layer is missing geometric shapes");var r=v.getDatasetCRS(e),i=t.data?t.data.getRecords():null,o={type:"FeatureCollection",features:t.shapes.map(function(i){var o="point"==t.geometryType?v.getPointFeatureBounds(i):e.arcs.getMultiShapeBounds(i);return(o=v.applyRectangleOptions(o,r,n))?v.convertBboxToGeoJSON(o.toArray(),n):null}).map(function(t,e){var r=i&&i[e]||null;return r&&n.no_replace&&(r=c.extend({},r)),{type:"Feature",properties:r,geometry:t}})},a=v.importGeoJSON(o,{}),s=v.mergeDatasetsIntoDataset(e,[a]);return n.no_replace||(s[0].name=t.name||s[0].name),s},m.rectangle2=function(t,e){var n=t.layers.map(function(n){var r=m.rectangle({layer:n,dataset:t.dataset},e);return e.no_replace||(r.layers[0].name=n.name||r.layers[0].name),r});return v.mergeDatasetsIntoDataset(t.dataset,n)},m.rectangle=function(t,e){var n,r,i;t?(n=v.getLayerBounds(t.layer,t.dataset.arcs),i=t.dataset.info,r=v.getDatasetCRS(t.dataset)):e.bbox&&(n=new h(e.bbox),r=v.getCRS("wgs84")),(n=n&&v.applyRectangleOptions(n,r,e))&&n.hasBounds()||b("Missing rectangle extent");var o=v.convertBboxToGeoJSON(n.toArray(),e),a=v.importGeoJSON(o,{});return a.layers[0].name=e.name||"rectangle",i&&v.setDatasetCRS(a,i),a},v.applyRectangleOptions=function(t,e,n){var r=v.probablyDecimalDegreeBounds(t);return n.offset&&(t=v.applyBoundsOffset(n.offset,t,e)),t.area()>0==!1?null:(n.aspect_ratio&&(t=v.applyAspectRatio(n.aspect_ratio,t)),r&&(t=v.clampToWorldBounds(t)),t)},v.applyAspectRatio=function(t,e){var n,r,i=String(t).split(",").map(parseFloat),o=e.width()/e.height();return 1==i.length?i.push(i[0]):i[0]>i[1]&&i.reverse(),n=i[0],r=i[1],n||r?(n||(n=-1/0),r||(r=1/0),o<n?e.fillOut(n):o>r&&e.fillOut(r),e):e},v.applyBoundsOffset=function(t,e,n){var r=v.convertFourSides(t,n,e);return e.padBounds(r[0],r[1],r[2],r[3]),e},v.convertBboxToGeoJSON=function(t,e){return{type:"Polygon",coordinates:[[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]],[t[0],t[1]]]]}},m.frame=function(t,e,n){var r,i,o,a;+n.width>0==!1&&+n.pixels>0==!1&&b("Missing a width or area"),n.width&&n.height&&((n=c.extend({},n)).aspect_ratio=v.getAspectRatioArg(n.width,n.height)),o=m.rectangle(e,n),i=v.getDatasetBounds(o),v.probablyDecimalDegreeBounds(i)?b("Frames require projected, not geographical coordinates"):v.getDatasetCRS(o)||w("Warning: missing projection data. Assuming coordinates are meters and k (scale factor) is 1"),(r=v.getFrameSize(i,n))[0]>0==!1&&b("Missing a valid frame width"),r[1]>0==!1&&b("Missing a valid frame height"),a={info:{},layers:[{name:n.name||"frame",data:new rt([{width:r[0],height:r[1],bbox:i.toArray(),type:"frame"}])}]},t.addDataset(a)},v.getAspectRatioArg=function(t,e){return e.split(",").map(function(e){var n=Number(e),r=Number(t);return e?r/n:""}).reverse().join(",")},v.getFrameSize=function(t,e){var n,r,i=t.width()/t.height();return n=(r=e.pixels?Math.sqrt(+e.pixels*i):+e.width)/i,[Math.round(r),Math.round(n)]},v.getDatasetDisplayBounds=function(t){var e=findFrameLayerInDataset(t);return e?v.getFrameLayerBounds(e):v.getDatasetBounds(t)},v.isFrameLayer=function(t){return"frame"==v.getFurnitureLayerType(t)},v.findFrameLayerInDataset=function(t){return c.find(t.layers,function(t){return v.isFrameLayer(t)})},v.findFrameDataset=function(t){var e=c.find(t.getLayers(),function(t){return v.isFrameLayer(t.layer)});return e?e.dataset:null},v.findFrameLayer=function(t){var e=c.find(t.getLayers(),function(t){return v.isFrameLayer(t.layer)});return e&&e.layer||null},v.getFrameLayerBounds=function(t){return new h(v.getFurnitureLayerData(t).bbox)},v.getMapFrameMetersPerPixel=function(t){var e,n,r=new h(t.bbox);return t.crs?(e=v.getScaleFactorAtXY(r.centerX(),r.centerY(),t.crs),n=t.crs.to_meter):(e=1,n=1),r.width()/e*n/t.width},Ut.furnitureRenderers.frame=function(t){var e=Ut.importPolygon([[[.5,.5],[.5,t.height-.5],[t.width-.5,t.height-.5],[t.width-.5,.5],[.5,.5]]]);return c.extend(e.properties,{fill:"none",stroke:t.stroke||"black","stroke-width":t["stroke-width"]||1}),[e]},m.fuzzyJoin=function(t,e,n,r){var i=n?n.layer:null;i&&v.layerHasPoints(i)||b("Missing a point layer to join from"),i.data&&i.data.fieldExists(r.field)||b("Missing",r.field?"["+r.field+"] field":"a field parameter"),v.requirePolygonLayer(t),r.dedup_points&&m.uniq(i,null,{expression:'this.x + "~" + this.y + "~" + d["'+r.field+'"]'}),v.fuzzyJoin(t,e,i,r)},v.fuzzyJoin=function(t,e,n,r){var i=r.field,o=v.getPolygonToPointsFunction(t,e,n,r),a=v.getFieldValuesFunction(n,i),s=v.getNeighborLookupFunction(t,e),u=[],c=[],l=[],f=[],p=[],h=[];t.shapes.forEach(function(t,e){var n=o(e)||[],r=a(n),i=v.getModeData(r,!0),s=v.getHighConfidenceDataValue(i),d=null!==s,g=!d&&i.count>1,y=!d&&~g;f.push(null),c.push(s),u.push(d?null:i),l.push((d?"high":g&&"low")||"none"),g?p.push(e):y&&h.push(e)}),p.forEach(function(t){s(t).forEach(function(e){!function(t,e){var n,r=c[e],i=u[t],o=i.counts,a=i.values;if(null===r)return;-1==(n=a.indexOf(r))?(a.push(r),o.push(2)):o[n]+=2}(t,e)});var e=u[t],n=v.getCountDataSummary(e);n.margin>0?c[t]=n.modes[0]:h.push(t),u[t]=null}),v.insertFieldValues(t,i,c),v.insertFieldValues(t,"confidence",l),h.length>0&&m.dataFill(t,e,{field:i})},v.getNeighborLookupFunction=function(t,e){var n=v.getArcClassifier(t.shapes,e)(function(t,e){return t>-1?[t,e]:null}),r={};function i(t,e){var n;-1!=t&&-1!=e&&t!=e&&(t in r==!1&&(r[t]=[]),-1==(n=r[t]).indexOf(e)&&n.push(e))}return v.forEachArcId(t.shapes,function(t){var e=n(t);e&&(i(e[0],e[1]),i(e[1],e[0]))}),function(t){return r[t]||[]}},v.getFieldValuesFunction=function(t,e){var n=t.data.getRecords();return function(t){for(var r,i=[],o=0;o<t.length;o++)r=n[t[o]],i.push(r[e]);return i}},v.getHighConfidenceDataValue=function(t){return t.margin>2?t.modes[0]:null},v.getNeighborsFunction=function(t,e,n){var r=v.buildAssignmentIndex(t,field,e),i=n&&n.min_border_pct||0;return function(t){for(var e,n,o,a=r[t],s=0,u=0,c=null,l=0;l<a.length;l++)if(n=(e=a[l]).value,o=e.length,v.isEmptyValue(n))s+=o;else{if(null!==c&&c!=n)return null;c=n,u+=o}return u/(u+s)<i?null:u>0?c:null}},m.graticule=function(t,e){var n,r,i=v.createGraticule(e);return t&&(n=v.getDatasetCRS(t),r=v.getCRS("wgs84"),n||b("Coordinate system is unknown, unable to create a graticule"),v.projectDataset(i,r,n,{})),i},v.createGraticule=function(t){var e=Math.round(36)+1,n=Math.round(18)+1,r=c.range(e,-180,10),i=c.range(n,-90,10),o=r.map(function(t){var e=-90,n=90;return t%90!=0&&(e+=10,n-=10),v.createMeridian(t,e,n,1)}),a=i.map(function(t){return v.createParallel(t,-180,180,1)}),s={type:"FeatureCollection",features:o.concat(a)},u=v.importGeoJSON(s,{});return u.layers[0].name="graticule",u},v.graticuleFeature=function(t,e){return{type:"Feature",properties:e,geometry:{type:"LineString",coordinates:t}}},v.createMeridian=function(t,e,n,r){for(var i=[],o=e;o<n;o+=r)i.push([t,o]);return i.push([t,n]),v.graticuleFeature(i,{type:"meridian",value:t})},v.createParallel=function(t,e,n,r){for(var i=[],o=e;o<n;o+=r)i.push([o,t]);return i.push([n,t]),v.graticuleFeature(i,{type:"parallel",value:t})},v.include=function(t){var e,r,i;if(t.file||b("Missing name of a JS file to load"),st.checkFileExists(t.file,t.input),"string"==typeof(e=st.readFile(t.file,"utf8",t.input))){/^\s*\{[\s\S]*\}\s*$/.test(e)||b("Expected a JavaScript object containing key:value pairs");try{(i=v.getBaseContext()).require=n(115),r=Function("ctx","with(ctx) {return ("+e+");}").call({},i)}catch(t){b(t.name,"in JS source:",t.message)}}else"object"==typeof e&&(r=e);c.extend(v.getStateVar("defs"),r)},v.printInfo=function(t,e){var n="";t.forEach(function(t,r){var i=Array.isArray(e)&&e.indexOf(t.layer)>-1?" *":"";n+="\n",n+=c.lpad("",25,"=")+"\n",n+="Layer "+(r+1)+i+"\n",n+=c.lpad("",25,"-")+"\n",n+=v.getLayerInfo(t.layer,t.dataset)}),w(n)},v.getLayerData=function(t,e){var n=v.getFeatureCount(t),r={geometry_type:t.geometry_type,feature_count:n,null_shape_count:0,null_data_count:t.data?v.countNullRecords(t.data.getRecords()):n};return t.shapes&&(r.null_shape_count=v.countNullShapes(t.shapes),r.bbox=v.getLayerBounds(t,e.arcs).toArray(),r.proj4=v.getProjInfo(e)),r},v.countNullShapes=function(t){for(var e=0,n=0;n<t.length;n++)t[n]&&0!==t[n].length||e++;return e},v.countNullRecords=function(t){for(var e=0,n=0;n<t.length;n++)t[n]||e++;return e},v.countRings=function(t,e){var n=0,r=0;return v.editShapes(t,function(t){var i=H.getPlanarPathArea(t,e);i>0&&r++,i<0&&n++}),{rings:r,holes:n}},v.getLayerInfo=function(t,e){var n=v.getLayerData(t,e),r="Name:     "+(t.name||"[unnamed]")+"\n";return r+="Type:     "+(n.geometry_type||"tabular data")+"\n",r+=c.format("Records:  %,d\n",n.feature_count),n.null_shape_count>0&&(r+=c.format("Nulls:     %'d",n.null_shape_count)+"\n"),n.geometry_type&&n.feature_count>n.null_shape_count&&(r+="Bounds:   "+n.bbox.join(",")+"\n",r+="CRS:      "+n.proj4+"\n"),r+=v.getAttributeTableInfo(t)},v.getAttributeTableInfo=function(t,e){return t.data&&0!==t.data.size()&&0!==t.data.getFields().length?"\nAttribute data\n"+v.formatAttributeTable(t.data,e):"Attribute data: [none]\n"},v.formatAttributeTable=function(t,e){var n=v.applyFieldOrder(t.getFields(),"ascending"),r=n.map(function(n){return t.getReadOnlyRecordAt(e||0)[n]}),i=r.reduce(function(t,e){return c.isNumber(e)&&(t=Math.max(t,v.countIntegralChars(e))),t},0),o=["Field"].concat(n),a=r.reduce(function(t,e){return t.push(v.formatTableValue(e,i)),t},[e>=0?"Value":"First value"]),s=v.maxChars(o),u=v.maxChars(a),l=c.rpad("",s+2,"-")+"+"+c.rpad("",u+2,"-")+"\n",f=l;return o.forEach(function(t,e){f+=" "+c.rpad(t,s," ")+" | "+a[e]+"\n",0===e&&(f+=l)}),f+l},v.getTableBorder=function(t,e){return c.rpad("",t+2,"-")+"+"+c.rpad("",e+2,"-")},v.formatNumber=function(t){return t+""},v.maxChars=function(t){return t.reduce(function(t,e){return e.length>t?e.length:t},0)},v.formatString=function(t){var e={"\n":"\\n","\r":"\\r","\t":"\\t"};return"'"+(t=t.replace(/[\r\t\n]/g,function(t){return t in e?e[t]:""}))+"'"},v.countIntegralChars=function(t){return c.isNumber(t)?(v.formatNumber(t)+".").indexOf("."):0},v.formatTableValue=function(t,e){return c.isNumber(t)?c.lpad("",e-v.countIntegralChars(t)," ")+v.formatNumber(t):c.isString(t)?v.formatString(t):c.isObject(t)?JSON.stringify(t):String(t)},v.getSimplificationInfo=function(t){new gt(t).size(),v.countInteriorVertices(t)},v.countInteriorVertices=function(t){var e=0;return t.forEach2(function(t,n){n>2&&(e+=n-2)}),e},m.lines=function(t,e,n){return n=n||{},"point"==t.geometry_type?v.pointsToLines(t,e,n):"polygon"==t.geometry_type?v.polygonsToLines(t,e.arcs,n):void v.requirePolygonLayer(t,"Command requires a polygon or point layer")},v.pointsToLines=function(t,e,n){var r=n.groupby?v.groupedPointsToLineGeoJSON(t,n.groupby,n):v.pointShapesToLineGeometry(t.shapes),i=v.importGeoJSON(r),o=v.mergeDatasetsIntoDataset(e,[i]);return n.no_replace||(o[0].name=t.name||o[0].name),o},v.groupedPointsToLineGeoJSON=function(t,e,n){var r=[],i=v.getCategoryClassifier([e],t.data),o=c.defaults({fields:[e]},n),a=v.aggregateDataRecords(t.data.getRecords(),i,o);return t.shapes.forEach(function(t,e){var n=i(e);n in r==!1&&(r[n]=[]),r[n].push(t)}),{type:"FeatureCollection",features:r.map(function(t,e){return{type:"Feature",properties:a[e],geometry:t.length>1?v.pointShapesToLineGeometry(t):null}})}},v.pointShapesToLineGeometry=function(t){var e=[];return v.forEachPoint(t,function(t){e.push(t.concat())}),{type:"LineString",coordinates:e}},v.polygonsToLines=function(t,e,n){var r,i=(n=n||{}).where?v.compileFeaturePairFilterExpression(n.where,t,e):null,o=n.each?v.getLineRecordDecorator(n.each,t,e):null,a=v.getArcClassifier(t.shapes,e,i),s=c.isArray(n.fields)?n.fields:[],u=0,l=[],f=[];return s.length>0&&!t.data&&b("Missing a data table"),p(v.extractOuterLines(t.shapes,a),"outer"),s.forEach(function(e){var n=t.data.getRecords();t.data.fieldExists(e)||b("Unknown data field:",e),p(v.extractLines(t.shapes,a(function(t,r){var i=n[t],o=n[r];return i&&o&&i[e]!==o[e]?t+"-"+r:null})),e)}),p(v.extractInnerLines(t.shapes,a),"inner"),(r=v.createLineLayer(l,f)).name=n.no_replace?null:t.name,r;function p(t,e){var n=t.map(function(t,n){var r={RANK:u,TYPE:e};return o&&o(r,t),r});l=c.merge(t,l),f=c.merge(n,f),u++}},v.getLineRecordDecorator=function(t,e,n){var r,i=v.getArcClassifier(e.shapes,n)(function(t,e){o(t,e,r)}),o=v.compileFeaturePairExpression(t,e,n);return function(t,e){return r=t,i(e[0][0]),t}},v.createLineLayer=function(t,e){return{geometry_type:"polyline",shapes:t,data:e?new rt(e):null}},v.extractOuterLines=function(t,e){return v.extractLines(t,e(function(t,e){return-1==e?String(t):null}))},v.extractInnerLines=function(t,e){return v.extractLines(t,e(function(t,e){return e>-1?t+"-"+e:null}))},v.extractLines=function(t,e){var n,r=[],i={},o=null,a=null;return v.traversePaths(t,function(t){var s,u,c=t.arcId,l=e(c);l&&(u=l in i?i[l]:null,s=l==a&&t.shapeId==o.shapeId&&t.partId==o.partId,u?s?u[u.length-1].push(c):u.push([c]):(u=[[c]],i[l]=u,r.push(u)),t.i==n.arcs.length-1&&u.length>1&&u[0][0]==n.arcs[0]&&(u[0]=u.pop().concat(u[0])));o=t,a=l},function(t){n=t}),r},m.innerlines=function(t,e,n){n=n||{},v.requirePolygonLayer(t);var r=n.where?v.compileFeaturePairFilterExpression(n.where,t,e):null,i=v.getArcClassifier(t.shapes,e,r),o=v.extractInnerLines(t.shapes,i),a=v.createLineLayer(o,null);return 0===o.length&&w("No shared boundaries were found"),a.name=n.no_replace?null:t.name,a},m.inspect=function(t,e,n){var r=v.selectFeatures(t,e,n);w(1==r.length?v.getFeatureInfo(r[0],t,e):c.format("Expression matched %d feature%s. Select one feature for details",r.length,c.pluralSuffix(r.length)))},v.getFeatureInfo=function(t,e,n){var r="Feature "+t+"\n";return r+=v.getShapeInfo(t,e,n),r+=v.getAttributeTableInfo(e,t)},v.getShapeInfo=function(t,e,n){var r,i,o=e.shapes?e.shapes[t]:null,a=e.geometry_type;return o&&a?(i="Geometry\n  Type: "+a+"\n","point"==a?i+="  Points: "+o.length+"\n":"polyline"==a?i+="  Parts: "+o.length+"\n":"polygon"==a&&(r=v.getPolygonInfo(o,n),i+=c.format("  Rings: %d cw, %d ccw\n",r.cw,r.ccw),i+="  Planar area: "+r.area+"\n",r.sph_area&&(i+="  Spherical area: "+r.sph_area+" sq. meters\n")),i):"Geometry: [null]\n"},v.getPolygonInfo=function(t,e){for(var n,r={rings:t.length,cw:0,ccw:0,area:0},i=0;i<t.length;i++)(n=H.getPlanarPathArea(t[i],e))>0?r.cw++:n<0&&r.ccw++,r.area+=n;return e.isPlanar()||(r.sph_area=H.getSphericalShapeArea(t,e)),r},v.selectFeatures=function(t,e,n){var r,i=v.getFeatureCount(t),o=[];return n.expression||b("Missing a JS expression for selecting a feature"),r=v.compileValueExpression(n.expression,t,e),c.repeat(i,function(t){var e=r(t);!0===e?o.push(t):!1!==e&&b("Expression must return true or false")}),o},m.joinPointsToPolygons=function(t,e,n,r){var i=v.getPolygonToPointsFunction(t,e,n,r);return v.prepJoinLayers(t,n),v.joinTables(t.data,n.data,i,r)},m.joinPolygonsToPoints=function(t,e,n,r){var i=v.getPointToPolygonsFunction(t,e,n,r);return v.prepJoinLayers(t,e),v.joinTables(t.data,e.data,i,r)},m.joinPointsToPoints=function(t,e,n){var r=v.getPointToPointFunction(t,e,n);return v.prepJoinLayers(t,e),v.joinTables(t.data,e.data,r,n)},v.prepJoinLayers=function(t,e){t.data||(t.data=new rt(t.shapes.length)),e.data||b("Can't join a layer that is missing attribute data")},v.getPointToPointFunction=function(t,e,n){var r=t.shapes,i=new Wt(e.shapes,{});return function(t){var e=i.findNearestPointFeature(r[t]);return e>-1?[e]:null}},v.getPolygonToPointsFunction=function(t,e,n,r){var i=v.getPointToPolygonsFunction(n,t,e,r),o=[];return n.shapes.forEach(function(t,e){for(var n,r=i(e),a=r?r.length:0,s=0;s<a;s++)(n=r[s])in o?o[n].push(e):o[n]=[e]}),function(t){return o[t]||null}},v.getPointToPolygonsFunction=function(t,e,n,r){var i=new Pt(e.shapes,n),o=t.shapes;return function(t){var e=o[t],n=e?i.findEnclosingShapes(e[0]):[];return n.length>0?n:null}},v.getPointToPolygonFunction=function(t,e,n,r){var i=new Pt(e.shapes,n),o=t.shapes;return function(t){var e=o[t],n=-1;return e&&(n=i.findEnclosingShape(e[0])),-1==n?null:[n]}},v.getJoinFilter=function(t,e){var n=v.getJoinFilterTestFunction(e,t),r=null;return v.expressionHasCalcFunction(e)&&(r=v.getJoinFilterCalcFunction(e,t)),function(t,e){var i,o,a=r?r(t):null,s=[];for(o=0;o<t.length;o++)!0===(i=n(t[o],e,a))?s.push(t[o]):!1!==i&&b('"where" expression must return true or false');return s}},v.expressionHasCalcFunction=function(t){return c.some(["isMax","isMin","isMode"],function(e){return t.indexOf(e)>-1})},v.getJoinFilterCalcFunction=function(t,e){var n,r,i,o,a;return o={isMax:function(t){t>r&&(r=t)},isMin:function(t){t<i&&(i=t)},isMode:function(t){n||(n=[]),n.push(t)}},a=v.compileFeatureExpression(t,{data:e},null,{context:o}),function(t){var e;r=-1/0,i=1/0,n=null;for(var o=0;o<t.length;o++)a(t[o]);return e=n?v.getModeData(n):null,{max:r,min:i,modes:e?e.modes:null,margin:e?e.margin:null}}},v.getJoinFilterTestFunction=function(t,e){var n,r,i,o={isMax:function(t){return t===r.max},isMin:function(t){return t===r.min},isMode:function(t){return r.modes.indexOf(t)>-1}};return Object.defineProperty(o,"target",{get:function(){return i},enumerable:!0}),n=v.compileFeatureExpression(t,{data:e},null,{context:o,returns:!0}),function(t,e,o){return r=o,i=e,n(t)}},m.join=function(t,e,n,r){var i,o,a;n&&n.layer.data&&n.dataset||b("Missing a joinable data source"),r.keys?(2!=r.keys.length&&b("Expected two key fields: a target field and a source field"),a=m.joinAttributesToFeatures(t,n.layer.data,r)):(i=n.layer.geometry_type,o=t.geometry_type,"point"==i&&"polygon"==o?a=m.joinPointsToPolygons(t,e.arcs,n.layer,r):"polygon"==i&&"point"==o?a=m.joinPolygonsToPoints(t,n.layer,n.dataset.arcs,r):"point"==i&&"point"==o?a=m.joinPointsToPoints(t,n.layer,r):b(c.format("Unable to join %s geometry to %s geometry",i||"null",o||"null"))),a.unmatched&&e.layers.push(a.unmatched),a.unjoined&&e.layers.push(a.unjoined)},v.validateFieldNames=function(t){t.forEach(function(t){/:(str|num)/.test(t)&&b("Unsupported use of type hints. Use string-fields= or field-types= options instead")})},m.joinAttributesToFeatures=function(t,e,n){var r=n.keys,i=r[0],o=r[1],a=t.data,s=v.getJoinByKey(a,i,e,o);return v.validateFieldNames(r),v.joinTables(a,e,s,n)},v.joinTables=function(t,e,n,r){var i,o,a,s,u,l,f,p,h,d,g,y=e.getRecords(),m=t.getRecords(),_=[],b=v.getFieldsToJoin(t.getFields(),e.getFields(),r),x=r.sum_fields||[],S=c.difference(b,x),w=new Uint32Array(y.length),E=0,I=0,C=[],P=0,N={};for(r.where&&(l=v.getJoinFilter(e,r.where)),r.calc&&(f=v.getJoinCalc(e,r.calc)),p=0,d=m.length;p<d;p++){for(a=m[p],(s=n(p))&&l&&(P+=s.length,P-=(s=l(s,a)).length),h=0,u=0,g=s?s.length:0;h<g;h++)i=y[o=s[h]],0===u?S.length>0&&v.joinByCopy(a,i,S):1==u&&(S.length>0&&v.findCollisionFields(a,i,S,C),I++),x.length>0&&v.joinBySum(a,i,x),w[o]++,u++;f&&f(s,a),u>0?E++:a&&(r.unmatched&&_.push(c.extend({},a)),v.updateUnmatchedRecord(a,S,x))}return v.printJoinMessage(E,m.length,v.countJoins(w),y.length,P,I,C),r.unjoined&&(N.unjoined={name:"unjoined",data:new rt(y.filter(function(t,e){return 0===w[e]}))}),r.unmatched&&(N.unmatched={name:"unmatched",data:new rt(_)}),N},v.countJoins=function(t){for(var e=0,n=0,r=t.length;n<r;n++)t[n]>0&&e++;return e},v.updateUnmatchedRecord=function(t,e,n){v.joinByCopy(t,{},e),v.joinBySum(t,{},n)},v.joinByCopy=function(t,e,n){for(var r,i=0,o=n.length;i<o;i++)r=n[i],Object.prototype.hasOwnProperty.call(e,r)?t[r]=e[r]:Object.prototype.hasOwnProperty.call(t,r)||(t[r]=null)},v.findCollisionFields=function(t,e,n,r){for(var i,o=0,a=n.length;o<a;o++)t[i=n[o]]!==e[i]&&-1===r.indexOf(i)&&r.push(i)},v.joinBySum=function(t,e,n){for(var r,i=0;i<n.length;i++)t[r=n[i]]=(t[r]||0)+(e[r]||0)},v.printJoinMessage=function(t,e,n,r,i,o,a){t>0!=!1?(w(c.format("Joined data from %'d source record%s to %'d target record%s",n,c.pluralSuffix(n),t,c.pluralSuffix(t))),t<e&&w(c.format("%d/%d target records received no data",e-t,e)),n<r&&w(c.format("%d/%d source records could not be joined",r-n,r)),i>0&&w(c.format("%d/%d source records were skipped",i,r)),o>0&&(w(c.format("%d/%d target records were matched by multiple source records",o,e)),a.length>0&&w(c.format("Found inconsistent values in field%s [%s] during many-to-one join",c.pluralSuffix(a.length),a.join(", "))))):w("No records could be joined")},v.getFieldsToJoin=function(t,e,n){var r;return n.fields?n.fields.indexOf("*")>-1?r=e:(r=n.fields,v.validateFieldNames(r)):(r=e,n.keys&&(r=c.difference(r,[n.keys[1]]))),n.force||(r=c.difference(r,t)),r},v.validateJoinFieldType=function(t,e){e&&"object"!=e||b("["+t+"] field has an unsupported data type. Expected string or number.")},v.getJoinByKey=function(t,e,n,r){var i,o,a=t.getRecords(),s=v.createTableIndex(n.getRecords(),r);return!1===n.fieldExists(r)&&b("External table is missing a field named:",r),t&&t.fieldExists(e)||b("Target layer is missing key field:",e),i=v.getColumnType(r,n.getRecords()),o=v.getColumnType(e,a),v.validateJoinFieldType(r,i),v.validateJoinFieldType(e,o),i!=o&&b("Join keys have mismatched data types:",o,"and",i),function(t){var n=a[t],r=n?n[e]:null,i=null;return n&&r in s&&(i=s[r],Array.isArray(i)||(i=[i])),i}},v.createTableIndex=function(t,e){for(var n,r={},i=0,o=t.length;i<o;i++)(n=t[i][e])in r==!1?r[n]=i:Array.isArray(r[n])?r[n].push(i):r[n]=[r[n],i];return r},m.keepEveryPolygon=v.keepEveryPolygon=function(t,e){e.forEach(function(e){"polygon"==e.geometry_type&&v.protectLayerShapes(t,e.shapes)})},v.protectLayerShapes=function(t,e){e.forEach(function(e){v.protectShape(t,e)})},v.protectShape=function(t,e){for(var n,r,i=0,o=e?e.length:0,a=0;a<o;a++)(r=t.getSimpleShapeBounds(e[a]).area())>i&&(n=e[a],i=r);n&&0!==n.length?v.protectPolygonRing(t,n):E("[protectShape()] Invalid shape:",e)},v.protectPolygonRing=function(t,e){var n,r=t.getRetainedInterval();for(t.setRetainedInterval(1/0),n=H.getPlanarPathArea(e,t);n<=1e-10;){if(0===v.lockMaxThreshold(t,e)){E("[protectMultiRing()] Failed on ring:",e);break}n=H.getPlanarPathArea(e,t)}t.setRetainedInterval(r)},v.lockMaxThreshold=function(t,e){for(var n,r,i,o,a,s,u=0,c=t.getVertexData(),l=0;l<e.length;l++)(r=e[l])<0&&(r=~r),s=(a=c.ii[r])+c.nn[r]-1,-1!=(i=v.findNextRemovableVertex(c.zz,1/0,a,s))&&(o=c.zz[i])>u&&(u=o,n=r);return u>0?(s=(a=c.ii[n])+c.nn[n]-1,v.replaceInArray(c.zz,u,1/0,a,s)):0},v.replaceInArray=function(t,e,n,r,i){for(var o=0,a=r;a<=i;a++)t[a]===e&&(t[a]=n,o++);return o},v.importFiles=function(t,e){var n=!1,r=t.map(function(t){var r=c.defaults({no_topology:!0,snap:!1,snap_interval:null,files:[t]},e),i=m.importFile(t,r);return i.arcs&&i.arcs.size()>0&&"topojson"!=i.info.input_formats[0]&&(n=!0),i}),i=v.mergeDatasets(r);return n&&!e.no_topology&&(v.cleanPathsAfterImport(i,e),m.buildTopology(i)),i},m.overlay=function(t,e,n,r){var i,o,a;e&&e.layer&&e.dataset||u("Unexpected source layer argument"),i=e.layer,o=e.dataset,n.arcs!=o.arcs?(a=v.mergeDatasets([n,clipDataset]),m.buildTopology(a)):a=n,v.overlayLayer(t,i,a,r)},v.overlayLayer=function(t,e,n,r){v.addIntersectionCuts(n,r);var i=v.getArcPresenceTest(t.shapes.concat(e.shapes),n.arcs),o=new Ft(t,new gt(n.arcs,i));v.getRingIntersector(o.nodes,"dissolve");o.removeGaps(v.getGapFillTest(n,r))},v.findInnerPoints=function(t,e){var n,r;return t?(n=1==t.length?[t]:v.findPotentialRingGroups(t,e),r=v.findInnerPoints2(n,e)):r=null,r},v.findInnerPoints2=function(t,e){return t.map(function(t){return v.findInnerPoint(t,e)})},v.findPotentialRingGroups=function(t,e){var n=v.getPathMetadata(t,e,"polygon"),r=[];return n.sort(function(t,e){return e.bounds.area()-t.bounds.area()}),n.forEach(function(t,e){t.area>0!=!1&&r.push(c.pluck(n.slice(e),"ids"))}),r},v.findInnerPoint=function(t,e){},v.polylineToPoint=function(t,e,n){var r=!e.isPlanar(),i=t?1==t.length?t[0]:v.findLongestPolylinePart(t,e,r):null;if(!i)return null;var o=e.getSimpleShapeBounds(i);return v.findNearestPolylineVertex(o.centerX(),o.centerY(),i,e,r)},v.findNearestPolylineVertex=function(t,e,n,r,i){for(var o,a,s,u=1/0,c=r.getShapeIter(n),l=i?B:O;c.hasNext();)(s=l(t,e,c.x,c.y))<u&&(u=s,o=c.x,a=c.y);return u<1/0?{x:o,y:a}:null},v.findLongestPolylinePart=function(t,e,n){var r=0,i=null;return t.forEach(function(t){var o=H.calcPathLen(t,e,n);o>r&&(r=o,i=t)}),i},v.parseDMS=function(t){var e=/^([nsew+-]?)([0-9.]+)[d]? ?([0-9.]*)[']? ?([0-9.]*)["]? ?([nsew]?)$/i.exec(t.trim()),n=NaN;return e&&(n=+(e[2]||"0")+ +(e[3]||"0")/60+ +(e[4]||"0")/3600,(/[sw-]/i.test(e[1])||/[sw]/i.test(e[5]))&&(n=-n)),n},m.createPointLayer=function(t,e,n){var r=v.getOutputLayer(t,n),i=e.arcs;n.intersections?(v.testIntersections(i),r=t):n.interpolated?r.shapes=v.interpolatedPointsFromVertices(t,e,n):n.vertices?r.shapes=v.pointsFromVertices(t,i,n):n.vertices2?r.shapes=v.pointsFromVertices2(t,i,n):n.endpoints?r.shapes=v.pointsFromEndpoints(t,i,n):n.x||n.y?r.shapes=v.pointsFromDataTable(t.data,n):"polygon"==t.geometry_type?r.shapes=v.pointsFromPolygons(t,i,n):"polyline"==t.geometry_type?r.shapes=v.pointsFromPolylines(t,i,n):t.geometry_type?b("Expected a polygon or polyline layer"):r.shapes=v.pointsFromDataTableAuto(t.data),r.geometry_type="point";var o=r.shapes.reduce(function(t,e){return e||t++,t},0);return o>0&&w(c.format("%,d of %,d points are null",o,r.shapes.length)),t.data&&(r.data=n.no_replace?t.data.clone():t.data),r},v.testIntersections=function(t){var e=t.getFilteredPointCount(),n=t.size(),r=e-n,i=v.calcSegmentIntersectionStripeCount2(t),o=Math.ceil(i/10),a=10*i,s=v.calcSegmentIntersectionStripeCount(t);console.log("points:",e,"arcs:",n,"segs:",r),[o,i,a,s].forEach(function(e){console.time(e+" stripes"),v.findSegmentIntersections(t,{stripes:e}),console.timeEnd(e+" stripes")})},v.interpolatePoint2D=function(t,e,n,r,i){var o=1-i;return[t*o+n*i,e*o+r*i]},v.interpolatePointsAlongArc=function(t,e,n){var r,i,o,a,s,u=e.getShapeIter(t),c=e.isPlanar()?O:B,l=[],f=0;for(u.hasNext()&&(l.push([u.x,u.y]),r=u.x,i=u.y);u.hasNext();){for(o=c(r,i,u.x,u.y);f+o>=n;)a=(n-f)/o,s=v.interpolatePoint2D(r,i,u.x,u.y,a),f=0,l.push(s),o=c(r=s[0],i=s[1],u.x,u.y);f+=o,r=u.x,i=u.y}return f>0&&l.push([r,i]),l},v.interpolatedPointsFromVertices=function(t,e,n){var r,i=v.convertIntervalParam(n.interval,v.getDatasetCRS(e));return i>0==!1&&b("Invalid interpolation interval:",n.interval),"polyline"!=t.geometry_type&&b("Expected a polyline layer"),t.shapes.map(function(t,e){return r=[],t&&t.forEach(o),r.length>0?r:null});function o(t){var n=v.interpolatePointsAlongArc(t,e.arcs,i);r=r.concat(n)}},v.pointsFromVertices=function(t,e,n){var r,i;return"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type&&b("Expected a polygon or polyline layer"),t.shapes.map(function(t,e){return r=[],i={},(t||[]).forEach(o),r.length>0?r:null});function o(t){for(var n,o,a=e.getShapeIter(t);a.hasNext();)o=void 0,(o=(n=a).x+"~"+n.y)in i==0&&(i[o]=!0,r.push([n.x,n.y]))}},v.pointsFromVertices2=function(t,e,n){var r;return"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type&&b("Expected a polygon or polyline layer"),t.shapes.map(function(t,e){return r=[],(t||[]).forEach(i),r.length>0?r:null});function i(t){for(var n=e.getShapeIter(t);n.hasNext();)r.push([n.x,n.y])}},v.pointsFromEndpoints=function(t,e){var n,r;return"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type&&b("Expected a polygon or polyline layer"),t.shapes.map(function(t,e){return n=[],r={},(t||[]).forEach(o),n.length>0?n:null});function i(t){var e=t.x+"~"+t.y;e in r==!1&&(r[e]=!0,n.push([t.x,t.y]))}function o(t){for(var n=0;n<t.length;n++)i(e.getVertex(t[n],0)),i(e.getVertex(t[n],-1))}},v.pointsFromPolylines=function(t,e,n){return t.shapes.map(function(t){var r=v.polylineToPoint(t,e,n);return r?[[r.x,r.y]]:null})},v.pointsFromPolygons=function(t,e,n){var r=n.inner?v.findAnchorPoint:H.getShapeCentroid;return t.shapes.map(function(t){var n=r(t,e);return n?[[n.x,n.y]]:null})},v.coordinateFromValue=function(t){var e;if(c.isFiniteNumber(t))return t;if(c.isString(t)&&""!==t){if(e=+t,c.isFiniteNumber(e))return e;if(e=v.parseDMS(t),c.isFiniteNumber(e))return e}return NaN},v.findXField=function(t){var e=/^(lng|long?|longitude|x)$/i;return c.find(t,function(t){return e.test(t)})},v.findYField=function(t){var e=/^(lat|latitude|y)$/i;return c.find(t,function(t){return e.test(t)})},v.pointsFromDataTableAuto=function(t){var e=t?t.getFields():[],n={x:v.findXField(e),y:v.findYField(e)};return v.pointsFromDataTable(t,n)},v.pointsFromDataTable=function(t,e){return t||b("Layer is missing a data table"),e.x&&e.y&&t.fieldExists(e.x)&&t.fieldExists(e.y)||b("Missing x,y data fields"),t.getRecords().map(function(t){var n=v.coordinateFromValue(t[e.x]),r=v.coordinateFromValue(t[e.y]);return isNaN(n)||isNaN(r)?null:[[n,r]]})},m.pointGrid=function(t,e){var n=v.getPointGridParams(t,e);return v.createPointGridLayer(v.createPointGrid(n),e)},m.polygonGrid=function(t,e){var n=v.getPointGridParams(t,e);return v.createPolygonGridDataset(v.createPointGrid(n),e)},v.getPointGridParams=function(t,e){var n={},r=t?v.getDatasetCRS(t):null;return e.interval?n.interval=v.convertIntervalParam(e.interval,r):e.rows>0&&e.cols>0&&(n.rows=e.rows,n.cols=e.cols),e.bbox?n.bbox=e.bbox:n.bbox=t?v.getDatasetBounds(t).toArray():[-180,-90,180,90],n},v.createPointGridLayer=function(t,e){var n,r=[];return t.forEach(function(t,e){for(var n=0;n<t.length;n++)r.push([t[n]])}),n={geometry_type:"point",shapes:r},e.name&&(n.name=e.name),n},v.createPolygonGridDataset=function(t,e){var n,r,i,o,a=[];for(i=0;i<t.length-1;i++)for(n=t[i],r=0;r<n.length-1;r++)bl=t[i][r],tr=t[i+1][r+1],o=[[bl[0],bl[1]],[bl[0],tr[1]],[tr[0],tr[1]],[tr[0],bl[1]],[bl[0],bl[1]]],a.push(o);var s={type:"GeometryCollection",geometries:a.map(function(t){return{type:"Polygon",coordinates:[t]}})},u=v.importGeoJSON(s,{});return e.name&&(u.layers[0].name=e.name),u},v.createPointGrid=function(t){var e,n,r,i,o,a,s,u,c,l=t.bbox,f=l[2]-l[0],p=l[3]-l[1],h=[];for(t.interval>0?(i=t.interval,o=t.interval,n=Math.round(f/i)-1,r=Math.round(p/o)-1,a=l[0]+(f-n*i)/2,s=l[1]+(p-r*o)/2):t.rows>0&&t.cols>0&&(i=f/(n=t.cols),o=p/(r=t.rows),a=l[0]+i/2,s=l[1]+o/2),i>0!=!1&&o>0!=!1||b("Invalid grid parameters"),c=s;c<=l[3];){for(u=a,h.push(e=[]);u<=l[2];)e.push([u,c]),u+=i;c+=o}return h},v.editArcs=function(t,e){var n,r=[],i=[],o=[],a=0;return t.forEach(function(t,u){!function(t,e){var u,c,l,f,p=!0,h=0;n=0;for(;t.hasNext();){if(u=t.x,c=t.y,!1===e(s,u,c,l,f,h++)){p=!1;break}l=u,f=c}p&&1==n&&(w("An invalid arc was created"),p=!1);if(p)r.push(n);else{for(;n-- >0;)i.pop(),o.pop();r.push(0),a++}}(t,e)}),t.updateVertexData(r,i,o),a;function s(t){t&&(i.push(t[0]),o.push(t[1]),n++)}},m.proj=function(t,e,n){var r,i,o=!!m.gui,a=[],s={};if((i=e.crs)||b("Missing projection data"),!v.datasetHasGeometry(t))return t.info.crs=i,void(t.info.prj=e.prj);if((r=v.getDatasetCRS(t))||b("Unable to project -- source coordinate system is unknown"),v.crsAreEqual(r,i))w("Source and destination CRS are the same");else{t.arcs&&(t.arcs.flatten(),s.arcs=o?t.arcs.getCopy():t.arcs),s.layers=t.layers.filter(v.layerHasPoints).map(function(t){return o&&(a.push(t),(t=c.extend({},t)).shapes=v.cloneShapes(t.shapes)),t});try{v.projectDataset(s,r,i,n||{})}catch(t){console.error(t),b(c.format("Projection failure%s (%s)",t.point?" at "+t.point.join(" "):"",t.message))}t.info.crs=i,t.info.prj=e.prj,t.arcs=s.arcs,a.forEach(function(t,e){c.extend(t,s.layers[e])})}},v.getCrsInfo=function(t,e){var n,r,i={};return/\.prj$/i.test(t)?(n=m.importFile(t,{}))&&(i.prj=n.info.prj,i.crs=v.parsePrj(i.prj)):(r=e.findCommandTargets(t)).length>0?(n=r[0].dataset,i.crs=v.getDatasetCRS(n),i.prj=n.info.prj):i.crs=v.getCRS(t),i},v.projectDataset=function(t,e,n,r){var i=v.getProjTransform2(e,n);t.layers.forEach(function(t){v.layerHasPoints(t)&&v.projectPointLayer(t,i)}),t.arcs&&(r.densify?v.projectAndDensifyArcs(t.arcs,i):v.projectArcs2(t.arcs,i))},v.projectPointLayer=function(t,e){v.editShapes(t.shapes,function(t){return e(t[0],t[1])})},v.projectArcs=function(t,e){for(var n,r=t.getVertexData(),i=r.xx,o=r.yy,a=r.zz,s=0,u=i.length;s<u;s++)n=e(i[s],o[s]),i[s]=n[0],o[s]=n[1];t.updateVertexData(r.nn,i,o,a)},v.projectArcs2=function(t,e){return v.editArcs(t,function(t,n,r,i,o,a){var s=e(n,r);if(!s)return!1;t(s)})},v.projectAndDensifyArcs=function(t,e){var n=v.getDefaultDensifyInterval(t,e),r=[0,0];return v.editArcs(t,function(t,i,o,a,s,u){var c=r[0],l=r[1];if(!(r=e(i,o)))return!1;u>0&&T(r[0],r[1],c,l)>n*n*25&&v.densifySegment(a,s,c,l,i,o,r[0],r[1],e,n).forEach(t);t(r)})},v.getDefaultDensifyInterval=function(t,e){var n=v.getAvgSegment2(t),r=t.getBounds(),i=e(r.centerX(),r.centerY()),o=e(r.centerX()+n[0],r.centerY()+n[1]);return O(i[0],i[1],o[0],o[1])},v.densifySegment=function(t,e,n,r,i,o,a,s,u,c,l){var f=(t+i)/2,p=(e+o)/2,h=u(f,p);if(h)return l=l||[],H.pointSegDistSq(h[0],h[1],n,r,a,s)>c*c*.25&&O(t,e,i,o)>.01&&(v.densifySegment(t,e,n,r,f,p,h[0],h[1],u,c,l),l.push(h),v.densifySegment(f,p,h[0],h[1],i,o,a,s,u,c,l)),l},v.closeUndershoots=function(t,e,n){var r=n.gap_tolerance?v.convertIntervalParam(n.gap_tolerance,v.getDatasetCRS(e)):0,i=e.arcs,o=v.getArcPresenceTest(t.shapes,i),a=new gt(e.arcs,o),s=v.findPotentialUndershoots(a,r);if(0===s.length)return a;var u=new Pt(v.arcsToShapes(i,o),i),c=s.reduce(function(t,e){var n=u.findPointEnclosureCandidates(e.point,r),o=v.findUndershootTarget(e,n,i,r);return o&&t.push(v.getArcExtension(o,e.arc,i)),t},[]);return e.arcs=v.insertArcExtensions(i,c),v.addIntersectionCuts(e,{})},v.findUndershootTarget=function(t,e,n,r){var i=C(t.arc),o=null;return e.forEach(function(e){var a;e!=i&&(a=H.getPointToPathInfo(t.point[0],t.point[1],[e],n))&&a.distance<=r&&(!o||a.distance<o.distance)&&(o=a)}),o},v.arcsToShapes=function(t,e){for(var n=[],r=0,i=t.size();r<i;r++)n.push(e(r)?[[r]]:null);return n},v.findPotentialUndershoots=function(t,e){return t.findDanglingEndpoints().filter(function(n){return H.calcPathLen([n.arc],t.arcs)>e})},v.insertArcExtensions=function(t,e){var n=t.getVertexData();return e.forEach(function(e){var r=t.indexOfVertex(e.arc,-1);n.xx[r]=e.point[0],n.yy[r]=e.point[1]}),t.updateVertexData(n.nn,n.xx,n.yy,n.zz),t},v.chooseCloserPoint=function(t,e,n){return O(t[0],t[1],e[0],e[1])<O(t[0],t[1],n[0],n[1])?e:n},v.pointIsEndpoint=function(t,e,n){return t[0]==e[0]&&t[1]==e[1]||t[0]==n[0]&&t[1]==n[1]},v.addTinyOvershoot=function(t,e){var n=O(t[0],t[1],e[0],e[1]),r=(n+1e-6)/n;return[t[0]+r*(e[0]-t[0]),t[1]+r*(e[1]-t[1])]},v.getArcExtension=function(t,e,n){var r=n.getVertex(e,-1),i=[r.x,r.y],o=n.getVertex(e,-2),a=[o.x,o.y],s=t.segment[0],u=t.segment[1],c=H.findClosestPointOnSeg(i[0],i[1],s[0],s[1],u[0],u[1]);return v.pointIsEndpoint(c,s,u)||(c=v.addTinyOvershoot(a,c),H.segmentIntersection(a[0],a[1],c[0],c[1],s[0],s[1],u[0],u[1])||(c=v.chooseCloserPoint(a,s,u))),{arc:e,point:c}},m.polygons=function(t,e,n){return t.forEach(v.requirePolylineLayer),v.addIntersectionCuts(e,n),t.map(function(t){return"polyline"!=t.geometry_type&&b("Expected a polyline layer"),v.createPolygonLayer(t,e,n)})},v.createPolygonLayer=function(t,e,n){var r=v.closeUndershoots(t,e,n),i=v.buildPolygonMosaic(r);return{geometry_type:"polygon",name:t.name,shapes:i.mosaic}},m.renameLayers=function(t,e){var n=e&&e.length||0,r="layer",i="";t.forEach(function(o,a){a<n&&(r=e[a]),n<t.length&&a>=n-1&&(i=(i||0)+1),o.name=r+i})},m.run=function(t,e,n,r){var i,o;n.include&&v.include({file:n.include}),n.commands||b("Missing commands parameter"),(i=v.runGlobalExpression(n.commands,t))?(o=v.parseCommands(i),v.runParsedCommands(o,e,r)):r(null)},v.runGlobalExpression=function(t,e){var n,r,i=v.getBaseContext();1==e.length&&(r=v.getRunCommandData(e[0]),Object.defineProperty(i,"target",{value:r})),c.extend(i,v.getStateVar("defs"));try{n=Function("ctx","with(ctx) {return ("+t+");}").call({},i)}catch(t){b(t.name,"in JS source:",t.message)}return n},v.getRunCommandData=function(t){var e=t.layers[0],n=v.getLayerData(e,t.dataset);return n.layer=e,n.dataset=t.dataset,n},m.require=function(t,e){var i,o,a,s=v.getStateVar("defs");e.module||b("Missing module name or path to module"),st.isFile(e.module)?i=e.module:st.isFile(e.module+".js")?i=e.module+".js":o=e.module,i&&(i=n(47).join(r.cwd(),i));try{a=n(115)(i||o)}catch(t){b(t)}o||e.alias?s[e.alias||o]=a:c.extend(s,a),e.init&&v.runGlobalExpression(e.init,t)},m.scalebar=function(t,e){var n,r,i=v.findFrameDataset(t);i||b("Missing a map frame"),n=c.defaults({type:"scalebar"},e),r={name:e.name||"scalebar",data:new rt([n])},i.layers.push(r)},v.getScalebarPosition=function(t){var e={valign:"top",halign:"left",voffs:10,hoffs:10};return+t.left>0&&(e.hoffs=+t.left),+t.top>0&&(e.voffs=+t.top),+t.right>0&&(e.hoffs=+t.right,e.halign="right"),+t.bottom>0&&(e.voffs=+t.bottom,e.valign="bottom"),e},Ut.furnitureRenderers.scalebar=function(t,e){var n=v.getScalebarPosition(t),r=v.getMapFrameMetersPerPixel(e),i=t.label_text||v.getAutoScalebarLabel(e.width,r),o=v.parseScalebarLabelToKm(i),a=+t.font_size||13,s=Math.round(o/r*1e3),u=Math.round(7+.8*a),c="top"==t.label_position?"top":"bottom",l="left"==n.halign?0:s,f=7,p="right"==n.halign?e.width-s-n.hoffs:n.hoffs,h="bottom"==n.valign?e.height-u-n.voffs:n.voffs;"top"==c&&(f=-4,h+=Math.round(4+.8*a)),s>0==!1&&b("Null scalebar length");var d={tag:"rect",properties:{fill:"black",x:0,y:0,width:s,height:3}},g={"label-text":i,"font-size":a,"text-anchor":"left"==n.halign?"start":"end","dominant-baseline":"top"==c?"auto":"hanging"};return[{tag:"g",children:[d,Ut.symbolRenderers.label(g,l,f)[0]],properties:{transform:"translate("+p+" "+h+")"}}]},v.getAutoScalebarLabel=function(t,e){var n=100*e/1e3;return"1/8 1/5 1/4 1/2 1 1.5 2 3 4 5 8 10 12 15 20 25 30 40 50 75 100 150 200 250 300 350 400 500 750 1,000 1,200 1,500 2,000 2,500 3,000 4,000 5,000".split(" ").reduce(function(t,e){if(t)return t;var r=v.formatDistanceLabelAsMiles(e);return v.parseScalebarLabelToKm(r)>n?r:void 0},null)||""},v.formatDistanceLabelAsMiles=function(t){return t+(v.parseScalebarNumber(t)>1?" MILES":" MILE")},v.parseScalebarLabelToKm=function(t){var e=v.parseScalebarUnits(t),n=v.parseScalebarNumber(t);return e&&n?"mile"==e?1.60934*n:n:NaN},v.parseScalebarUnits=function(t){var e=/miles?$/.test(t.toLowerCase()),n=/(km|kilometers?|kilometres?)$/.test(t.toLowerCase());return(e?"mile":n&&"km")||""},v.parseScalebarNumber=function(t){var e,n,r=/^([0-9]+) ?\/ ?([0-9]+)/;return t=t.replace(/[\s]/g,"").replace(/,/g,""),(n=r.test(t)?+(e=r.exec(t))[1]/+e[2]:parseFloat(t))>0&&n<1/0?n:NaN},m.shape=function(t){var e,n,r,i,o,a,s=t.coordinates,u=t.offsets||[],c=[];for(s&&s.length>=2!=!1||b("Missing list of coordinates"),i=0;i<s.length;i+=2)o=s[i],a=s[i+1],c.push([o,a]);for(i=0;i<u.length;i+=2)o+=u[i],a+=u[i+1],c.push([o,a]);return mt.pathIsRing(c)?r="Polygon":t.closed&&c.length>=3?(r="Polygon",c.push(c[0])):r="LineString",e={type:r,coordinates:"Polygon"==r?[c]:c},(n=v.importGeoJSON(e,{})).layers[0].name=t.name||"shape",n};var Kt={getArcCalculator:function(t,e){var n=new $t,r=c.expandoBuffer(Int32Array),i=c.expandoBuffer(Int32Array),o=e?function(e,n,r,i,o,a){return t(i[e],o[e],a[e],i[n],o[n],a[n],i[r],o[r],a[r])}:function(e,n,r,i,o){return t(i[e],o[e],i[n],o[n],i[r],o[r])};return function(t,a,s,c){var l,f,p,h,d=t.length,g=r(d),y=i(d),m=-1/0;for(c&&!e?u("[visvalingam] Received z-axis data for 2D simplification"):!c&&e?u("[visvalingam] Missing z-axis data for 3D simplification"):t.length>a.length&&u("[visvalingam] Incompatible data arrays:",t.length,a.length),p=0;p<d;p++)h=p+1,l=(f=p-1)<0||h>=d?1/0:o(f,p,h,a,s,c),t[p]=l,y[p]=h,g[p]=f;for(n.init(t);n.size()>0&&(l=t[p=n.pop()])!==1/0;)l<m?t[p]=m:m=l,f=g[p],h=y[p],f>0&&(l=o(g[f],f,h,a,s,c),n.updateValue(f,l)),h<d-1&&(l=o(f,h,y[h],a,s,c),n.updateValue(h,l)),y[f]=h,g[h]=f}}};Kt.standardMetric=j,Kt.standardMetric3D=z,Kt.getWeightedMetric=function(t){var e=Kt.getWeightFunction(t);return function(t,n,r,i,o,a){var s=j(t,n,r,i,o,a),u=U(t,n,r,i,o,a);return e(u)*s}},Kt.getWeightedMetric3D=function(t){var e=Kt.getWeightFunction(t);return function(t,n,r,i,o,a,s,u,c){var l=z(t,n,r,i,o,a,s,u,c),f=q(t,n,r,i,o,a,s,u,c);return e(f)*l}},Kt.getWeightCoefficient=function(t){return t&&c.isNumber(t&&t.weighting)?t.weighting:.7},Kt.getWeightFunction=function(t){var e=Kt.getWeightCoefficient(t);return function(t){return-t*e+1}},Kt.weight=function(t){return.7*-t+1},Kt.getEffectiveAreaSimplifier=function(t){var e=t?Kt.standardMetric3D:Kt.standardMetric;return Kt.getPathSimplifier(e,t)},Kt.getWeightedSimplifier=function(t,e){var n=e?Kt.getWeightedMetric3D(t):Kt.getWeightedMetric(t);return Kt.getPathSimplifier(n,e)},Kt.getPathSimplifier=function(t,e){return Kt.scaledSimplify(Kt.getArcCalculator(t,e))},Kt.scaledSimplify=function(t){return function(e,n,r,i){t(e,n,r,i);for(var o=1,a=e.length-1;o<a;o++)e[o]=.65*Math.sqrt(e[o])}};var Zt={};function Qt(t,e){var n=c.toArray(arguments).slice(2);return e.reduce(function(e,r){var i=t.apply(null,[r].concat(n));return c.isArray(i)?e=e.concat(i):i&&e.push(i),e},[])}function te(){var t,e=/^--?([a-z][\w-]*)$/i,n=/^([a-z0-9_+-]+)=(?!\=)(.*)$/i,r="",i=[],o=[],a=null;if(this instanceof te==!1)return new te;function s(){return o.map(function(t){return t.done()})}function l(t,e){return c.find(e,function(e){return e.name===t||e.alias===t||e.old_alias===t})}function f(t,e){return c.find(e.options,function(e){return e.name===t||e.alias===t})}this.usage=function(t){return r=t,this},this.note=function(e){return t=e,this},this.default=function(t){a=t},this.example=function(t){i.push(t)},this.command=function(t){var e=new ee(t);return o.push(e),e},this.section=function(t){return this.command("").title(t)},this.parseArgv=function(t){var r,i,o,p=s(),h=[],d=v.cleanArgv(t);for(1==d.length&&l(d[0],s())?d.unshift("-help"):d.length>0&&!g(d[0])&&a&&d.unshift("-"+a);d.length>0;){for((i=x(d))||b("Invalid command:",d[0]),(o=l(i,p))||b("Unknown command:",i),r={name:o.name,options:{},_:[]};d.length>0&&!g(d[0]);)y(r,d,o);try{r._.length>0&&o.no_arg&&u("Received one or more unexpected parameters:",r._.join(" ")),r._.length>1&&!o.multi_arg&&u("Command expects a single value. Received:",r._.join(" ")),o.default&&1==r._.length&&_(r,o),o.validate&&o.validate(r)}catch(t){b("["+i+"] "+t.message)}h.push(r)}return h;function g(t){return e.test(t)}function y(t,e,r){var i,o,a,s=e.shift();n.test(s)?(o=f((a=function(t){var e=n.exec(t),r=e[1],i=c.trimQuotes(e[2]);return[r,i]}(s))[0],r))&&("flag"==o.type||o.assign_to?b("-"+r.name+" "+a[0]+" option doesn't take a value"):e.unshift(a[1])):o=f(s,r),o?(o.alias_to&&(o=f(o.alias_to,r)),i=(i=o.name).replace(/-/g,"_"),o.assign_to?t.options[o.assign_to]=o.name:"flag"==o.type?t.options[i]=!0:t.options[i]=m(e,o)):t._.push(s)}function m(t,e){return(0===t.length||g(t[0]))&&b("Missing value for "+e.name+" option"),function(t,e){var n,r,i=e.type;n="number"==i?Number(t):"integer"==i?Math.round(Number(t)):"colors"==i?v.parseColorList(t):"strings"==i?v.parseStringList(t):"bbox"==i||"numbers"==i?t.split(",").map(parseFloat):t;n!=n&&(r="Invalid numeric value");r&&b(r+" for "+e.name+" option");return n}(t.shift(),e)}function _(t,e){var n=f(e.default,e);t.options[e.default]=m(t._,n)}function x(t){var n=e.exec(t[0]);return n?(t.shift(),n[1]):null}},this.getHelpMessage=function(e){var n,o;return e?((n=l(e,s()))||b(e,"is not a known command"),o=function(t){var e=[];e.push("Command",a(t)),t.options.length>0&&(e.push("","Options"),t.options.forEach(function(n){e=e.concat(function(t,e){var n,r=[],i=t.describe;i&&(t.label?r.push([t.label,i]):t.name==e.default?(n="<"+t.name+">",r.push([n,i]),r.push([t.name+"=","equivalent to "+n])):(n=t.name,t.alias&&(n+=", "+t.alias),"flag"==t.type||t.assign_to||(n+="="),r.push([n,i])));return r}(n,t))}));t.examples&&(e.push("","Example"+(t.examples.length>1?"s":"")),t.examples.forEach(function(t,n){n>0&&e.push(""),t.split("\n").forEach(function(t,n){e.push("  "+t)})}));return e}(n)):o=function(e){var n=[];r&&n.push(r);e.forEach(function(t){t.title?n.push("",t.title):n.push(a(t))}),i.length>0&&(n.push("","Examples"),i.forEach(function(t){n.push("",t)}));t&&n.push("",t);return n}(s().filter(function(t){return t.name&&t.describe||t.title})),function(t){var e=function(t){var e=0;return t.forEach(function(t){Array.isArray(t)&&(e=Math.max(e,t[0].length))}),e}(t);return t.map(function(t){return Array.isArray(t)&&(t="  "+c.rpad(t[0],e," ")+" "+t[1]),t}).join("\n")}(o);function a(t){var e=t.name?"-"+t.name:"";return t.alias&&(e+=", -"+t.alias),[e,t.describe||"(undocumented command)"]}},this.printHelp=function(t){w(this.getHelpMessage(t))}}function ee(t){var e={name:t,options:[]};this.validate=function(t){return e.validate=t,this},this.describe=function(t){return e.describe=t,this},this.example=function(t){return e.examples||(e.examples=[]),e.examples.push(t),this},this.alias=function(t){return e.alias=t,this},this.oldAlias=function(t){return e.old_alias=t,this},this.title=function(t){return e.title=t,this},this.flag=function(t){return e[t]=!0,this},this.option=function(t,n){return n=n||{},c.isString(t)&&t||u("Missing option name"),c.isObject(n)||u("Invalid option definition:",n),n.DEFAULT&&(e.default=t),n.name=t,e.options.push(n),this},this.done=function(){return e}}function ne(t){var e=t.options,n=t._;n.length>0&&!e.files&&(e.files=n),e.files&&(e.files=st.expandInputFiles(e.files),"-"!=e.files[0]&&"/dev/stdin"!=e.files[0]||(delete e.files,e.stdin=!0)),"precision"in e&&e.precision>0==!1&&u("precision= option should be a positive number"),e.encoding&&(e.encoding=v.validateEncoding(e.encoding))}function re(t){var e=t.options,n=t._[0];n&&(/^[0-9.]+%?$/.test(n)?e.percentage=c.parsePercent(n):u("Unparsable option:",n)),e.interval||e.percentage||e.resolution||u("Command requires an interval, percentage or resolution parameter")}function ie(t){var e=t._;e.length>0&&!t.options.crs&&(t.options.crs=e.join(" "),e=[]),e.length>0&&u("Received one or more unexpected parameters: "+e.join(", ")),t.options.crs||t.options.match||t.options.from||b("Missing projection data")}function oe(t){var e=t.options;if(1==t._.length){var n=t._[0].split(",");e.cols=parseInt(n[0],10),e.rows=parseInt(n[1],10)||e.cols}}function ae(t){t.options.expression||u("Command requires a JavaScript expression")}function se(t){var e=t._,n=t.options,r=e[0]||"",i=c.parseLocalPath(r);e.length>1&&u("Command takes one file or directory argument"),"-"==r||"/dev/stdout"==r?n.stdout=!0:r&&!i.extension?(st.isDirectory(r)||u("Unknown output option:",r),n.directory=r):r&&(i.directory&&(n.directory=i.directory,st.validateOutputDir(n.directory)),n.file=i.filename,v.filenameIsUnsupportedOutputType(n.file)&&u("Output file looks like an unsupported file type:",n.file)),n.format&&(n.format=n.format.toLowerCase(),"csv"==n.format?(n.format="dsv",n.delimiter=n.delimiter||","):"tsv"==n.format&&(n.format="dsv",n.delimiter=n.delimiter||"\t"),v.isSupportedOutputFormat(n.format)||u("Unsupported output format:",n.format)),n.delimiter&&(n.delimiter=n.delimiter.replace(/^["']?\\t["']?$/,"\t"),v.isSupportedDelimiter(n.delimiter)||u("Unsupported delimiter:",n.delimiter)),n.encoding&&(n.encoding=v.validateEncoding(n.encoding)),n.field_order&&"ascending"!=n.field_order&&u("Unsupported field order:",n.field_order),"quantization"in n&&n.quantization>0==!1&&u("quantization= option should be a nonnegative integer"),"topojson_precision"in n&&n.topojson_precision>0==!1&&u("topojson-precision= option should be a positive number")}function ue(){var t=[],e=[];function n(t,e){return{layer:t,dataset:e}}function r(t,e){var n=-1;return e.forEach(function(e,r){e.layer==t&&(n=r)}),n}this.forEachLayer=function(e){var n=0;t.forEach(function(t){t.layers.forEach(function(r){e(r,t,n++)})})},this.deleteLayer=function(t,n){this.getActiveLayer().layer==t&&(e=[]),n.layers.splice(n.layers.indexOf(t),1),0===n.layers.length&&this.removeDataset(n),e=e.filter(function(e){var n=e.layers.indexOf(t);return-1==n||(e.layers.splice(n,1),e.layers.length>0)})},this.findLayer=function(t){var e="function"==typeof t?t:null,r=null;return this.forEachLayer(function(i,o){(e?e(i,o):i==t)&&(r=n(i,o))}),r},this.findCommandTargets=function(t,e){return t?v.findCommandTargets(this,t,e):this.getDefaultTargets()||[]},this.removeDataset=function(n){e=e.filter(function(t){return t.dataset!=n}),t=t.filter(function(t){return t!=n})},this.getDatasets=function(){return t},this.getLayers=function(){var t=[];return this.forEachLayer(function(e,r){t.push(n(e,r))}),t},this.addDataset=function(t){return this.setDefaultTarget(t.layers,t),this},this.findNextLayer=function(t){var e=this.getLayers(),n=r(t,e);return n>-1?e[(n+1)%e.length]:null},this.findPrevLayer=function(t){var e=this.getLayers(),n=r(t,e);return n>-1?e[(n-1+e.length)%e.length]:null},this.isEmpty=function(){return 0===t.length},this.getDefaultTargets=function(){return 0!==e.length||this.isEmpty()||(e=[{dataset:t[0],layers:t[0].layers.slice(0,1)}]),e},this.setDefaultTarget=function(n,r){-1==t.indexOf(r)&&t.push(r),e=[{layers:n.concat(),dataset:r}]},this.setDefaultTargets=function(t){e=t},this.getActiveLayer=function(){var t=(this.getDefaultTargets()||[])[0];return t?{layer:t.layers[0],dataset:t.dataset}:null}}function ce(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function le(t,e,n){var r=n[0],i=n[2];return t>i[0]?(e>i[1]?4:e>=r[1]&&5)||6:t>=r[0]?(e>i[1]?3:e>=r[1]&&8)||7:(e>i[1]?2:e>=r[1]&&1)||0}function fe(t){return 0==t||2==t||4==t||6==t}function pe(t,e){return e<8&&e>=0?(e+8-2*t)%8:e}function he(t,e,n){t.push(function(t,e){if(fe(t))return e[t/2].concat();u("Invalid corner sector:",t)}(e,n))}function de(t,e,n,r){var i,o,a=e?le(e[0],e[1],r):-1,s=le(n[0],n[1],r);8==a&&8==s?t.push(n):a==s||(-1==a?8==s?t.push(n):fe(s)&&he(t,s,r):8==a?(ye(t,e,n,r),fe(s)&&he(t,s,r)):8==s?(ye(t,e,n,r),t.push(n)):(r=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];return 0===t?e=[n,r,i,o]:1==t?e=[r,i,o,n]:2==t?e=[i,o,n,r]:3==t?e=[o,n,r,i]:u("Invalid rotation number"),e}(i=(o=a)>1&&o<8?Math.floor(o/2):0,r),a=pe(i,a),s=pe(i,s),0==a?0===s||1===s||7===s||(2==s||6==s?he(t,s,r):3==s?ye(t,e,n,r)||he(t,2,r):4==s?(ye(t,e,n,r)||(H.orient2D(e[0],e[1],n[0],n[1],r[0][0],r[0][1])>1?he(t,6,r):he(t,2,r)),he(t,s,r)):5==s&&(ye(t,e,n,r)||he(t,6,r))):1==a?2==s||0===s?he(t,s,r):3==s?ye(t,e,n,r)||he(t,2,r):4==s?(ye(t,e,n,r)||he(t,2,r),he(t,4,r)):5==s?ye(t,e,n,r):6==s?(ye(t,e,n,r)||he(t,0,r),he(t,6,r)):7==s&&(ye(t,e,n,r)||he(t,0,r)):u("Sector error")))}function ge(t,e,n,r,i){var o=H.segmentIntersection(e[0],e[1],n[0],n[1],r[0],r[1],i[0],i[1]);o&&t.push(o)}function ye(t,e,n,r){var i=[];return ge(i,e,n,r[0],r[1]),ge(i,e,n,r[0],r[3]),ge(i,e,n,r[1],r[2]),ge(i,e,n,r[2],r[3]),i.length>0&&(t.push.apply(t,i),!0)}Zt.metricSq3D=H.pointSegDistSq3D,Zt.metricSq=H.pointSegDistSq,Zt.calcArcData=function(t,e,n,r){var i=t.length,o=!!r;t[0]=t[i-1]=1/0,i>2&&function i(a,s,u,c){var l,f,p=e[a],h=n[a],d=e[s],g=n[s];o&&(l=r[a],f=r[s]);var y,m=0,v=0,_=0,b=0;for(var x=a+1;x<s;x++)(y=o?Zt.metricSq3D(e[x],n[x],r[x],p,h,l,d,g,f):Zt.metricSq(e[x],n[x],p,h,d,g))>=m&&(m=y,v=x);c<m&&(m=c);v-a>1&&(_=i(a,v,u+1,m));s-v>1&&(b=i(v,s,u+1,m));1==u&&p==d&&h==g&&(m=Math.max(_,b));t[v]=Math.sqrt(m);return m}(0,i-1,1,Number.MAX_VALUE)},v.postSimplifyRepair=function(t){var e,n=v.findSegmentIntersections(t),r=v.repairIntersections(t,n),i=n.length,o=r.length,a=i>o?i-o:0;i>0&&(e=c.format("Repaired %'i intersection%s",a,c.pluralSuffix(a)),o>0&&(e+=c.format("; %'i intersection%s could not be repaired",o,c.pluralSuffix(o))),w(e))},v.repairIntersections=function(t,e){for(;v.unwindIntersections(t,e)>0;)e=v.findSegmentIntersections(t);return e},v.unwindIntersections=function(t,e){var n,r,i,o,a=t.getVertexData(),s=t.getRetainedInterval(),u=0,l=0;for(r=v.getUnwindTargets(e,s,a.zz),c.sortOn(r,"z",!0);r.length>0;)for(i=r.pop(),1==(n=v.redetectIntersectionTarget(i,s,a.xx,a.yy,a.zz)).length&&(n=v.unwindIntersection(n[0],s,a.zz),u++),o=0;o<n.length;o++)v.insertUnwindTarget(r,n[o]);return++l>5e5?(E("Caught an infinite loop at intersection:",i),0):u},v.getUnwindTargets=function(t,e,n){return t.reduce(function(t,r){var i=v.getUnwindTarget(r,e,n);return null!==i&&t.push(i),t},[])},v.getUnwindTarget=function(t,e,n){var r=v.findNextRemovableVertex(n,e,t.a[0],t.a[1]),i=v.findNextRemovableVertex(n,e,t.b[0],t.b[1]);return-1==r&&-1==i?null:-1==i||-1!=r&&n[r]>n[i]?{a:t.a,b:t.b,z:n[r]}:{a:t.b,b:t.a,z:n[i]}},v.insertUnwindTarget=function(t,e){for(var n=t.length;n>0&&!(t[n-1].z<=e.z);)t[n]=t[n-1],n--;t[n]=e},v.unwindIntersection=function(t,e,n){for(var r=[],i=t.a[0],o=t.a[1],a=t.z,s=i+1;s<=o;s++)n[s]!=a&&s!=o||(r.push({a:[i,s],b:t.b,z:a}),s!=o&&(n[s]=e),i=s);return r.length<2&&u("Error in unwindIntersection()"),r},v.redetectIntersectionTarget=function(t,e,n,r,i){var o=v.getIntersectionCandidates(t,e,n,r,i),a=v.intersectSegments(o,n,r);return v.getUnwindTargets(a,e,i)},v.getIntersectionCandidates=function(t,e,n,r,i){var o=v.getSegmentVertices(t.a,e,n,r,i);return o=o.concat(v.getSegmentVertices(t.b,e,n,r,i))},v.getSegmentVertices=function(t,e,n,r,i){var o,a,s,u=[];t[0]<=t[1]?(o=t[0],a=t[1]):(o=t[1],a=t[0]),s=o;for(var c=o+1;c<=a;c++)i[c]>=e&&(n[s]<n[c]?u.push(s,c):u.push(c,s),s=c);return u},v.calcSimplifyStats=function(t,e){var n,r=e?function(t,e,n,r,i,o){var a=[],s=[],u=[];return H.convLngLatToSph([t,n,i],[e,r,o],a,s,u),H.pointSegDistSq3D(a[0],s[0],u[0],a[1],s[1],u[1],a[2],s[2],u[2])}:H.pointSegDistSq,i=e?H.signedAngleSph:H.signedAngle,o=0,a=0,s=0,u=0,l=0,f=-1,p=-1,h=[],d=[],g=t.getVertexData().zz;return t.forEachSegment(function(t,e,n,c){var y,m,v,_,b,x,S,w,E;if(y=n[t],m=c[t],v=n[e],_=c[e],t==p&&((w=i(n[f],c[f],y,m,v,_))>Math.PI&&(w=2*Math.PI-w),isNaN(w)||d.push(180*w/Math.PI)),f=t,p=e,g[t]<1/0&&a++,!((S=e-t-1)<1))if(o+=S,y==v&&m==_)s++;else{for(b=0;++t<e;)E=r(n[t],c[t],y,m,v,_),b=Math.max(b,E);b,x=Math.sqrt(b),l+=x,h.push(x),u=Math.max(u,x)}}),n={angleMean:0,displacementMean:0,displacementMax:u,collapsedRings:s,removed:o,retained:a,uniqueCount:v.countUniqueVertices(t),removableCount:o+a},d.length>0&&(n.angleMean=c.sum(d)/d.length,n.angleQuartiles=[c.findValueByPct(d,.75),c.findValueByPct(d,.5),c.findValueByPct(d,.25)]),h.length>0&&(n.displacementMean=l/h.length,n.displacementQuartiles=[c.findValueByPct(h,.75),c.findValueByPct(h,.5),c.findValueByPct(h,.25)]),n},v.countUniqueVertices=function(t){var e=2*t.size(),n=new gt(t).size();return t.getPointCount()-e+n},v.getSimplifyMethodLabel=function(t){return{dp:"Ramer-Douglas-Peucker",visvalingam:"Visvalingam",weighted_visvalingam:"Weighted Visvalingam"}[t]||"Unknown"},v.printSimplifyInfo=function(t,e){var n=v.getSimplifyMethod(e),r=v.getSimplifyMethodLabel(n),i=v.useSphericalSimplify(t,e),o=v.calcSimplifyStats(t,i),a=(o.removed+o.collapsedRings)/o.uniqueCount||0,s=o.removed/o.removableCount||0,u=o.angleQuartiles,l=o.displacementQuartiles,f=["Simplification statistics"];f.push(c.format("Method: %s (%s) %s",r,i?"spherical":"planar","weighted_visvalingam"==n?"(weighting="+Kt.getWeightCoefficient(e)+")":"")),f.push(c.format("Removed vertices: %,d",o.removed+o.collapsedRings)),f.push(c.format("   %.1f% of %,d unique coordinate locations",100*a,o.uniqueCount)),f.push(c.format("   %.1f% of %,d filterable coordinate locations",100*s,o.removableCount)),f.push(c.format("Simplification threshold: %.4f %s",t.getRetainedInterval(),i?"meters":"")),f.push(c.format("Collapsed rings: %,d",o.collapsedRings)),f.push("Displacement statistics"),f.push(c.format("   Mean displacement: %.4f",o.displacementMean)),f.push(c.format("   Max displacement: %.4f",o.displacementMax)),l&&f.push(c.format("   Quartiles: %.2f, %.2f, %.2f",l[0],l[1],l[2])),f.push("Vertex angle statistics"),f.push(c.format("   Mean angle: %.2f degrees",o.angleMean)),u&&f.push(c.format("   Quartiles: %.2f, %.2f, %.2f",u[0],u[1],u[2])),w(f.join("\n   "))},m.simplify=function(t,e){var n=t.arcs;n&&0!==n.size()&&(e=v.getStandardSimplifyOpts(t,e),v.simplifyPaths(n,e),e.percentage||0===e.percentage?n.setRetainedPct(c.parsePercent(e.percentage)):e.interval||0===e.interval?n.setRetainedInterval(v.convertSimplifyInterval(e.interval,t,e)):e.resolution?n.setRetainedInterval(v.convertSimplifyResolution(e.resolution,n,e)):b("Missing a simplification amount"),v.finalizeSimplification(t,e))},v.finalizeSimplification=function(t,e){var n=t.arcs;e.keep_shapes&&m.keepEveryPolygon(n,t.layers),!e.no_repair&&n.getRetainedInterval()>0&&v.postSimplifyRepair(n),e.stats&&v.printSimplifyInfo(n,e),t.info=c.defaults({simplify:e},t.info)},v.getStandardSimplifyOpts=function(t,e){return e=e||{},c.defaults({method:v.getSimplifyMethod(e),spherical:v.useSphericalSimplify(t.arcs,e)},e)},v.useSphericalSimplify=function(t,e){return!e.planar&&!t.isPlanar()},v.simplifyPaths=function(t,e){var n=v.getSimplifyFunction(e);t.setThresholds(new Float64Array(t.getPointCount())),e.spherical?(v.simplifyPaths3D(t,n),v.protectWorldEdges(t)):v.simplifyPaths2D(t,n),e.lock_box&&v.protectContentEdges(t)},v.simplifyPaths2D=function(t,e){t.forEach3(function(t,n,r,i){e(r,t,n)})},v.simplifyPaths3D=function(t,e){var n=c.expandoBuffer(Float64Array),r=c.expandoBuffer(Float64Array),i=c.expandoBuffer(Float64Array);t.forEach3(function(t,o,a,s){var u=t.length,c=n(u),l=r(u),f=i(u);H.convLngLatToSph(t,o,c,l,f),e(a,c,l,f)})},v.getSimplifyMethod=function(t){var e=t.method;return(!e||"weighted"==e||"visvalingam"==e&&t.weighting)&&(e="weighted_visvalingam"),e},v.getSimplifyFunction=function(t){var e;return"dp"==t.method?e=Zt.calcArcData:"visvalingam"==t.method?e=Kt.getEffectiveAreaSimplifier(t.spherical):"weighted_visvalingam"==t.method?e=Kt.getWeightedSimplifier(t,t.spherical):b("Unsupported simplify method:",method),e},v.protectContentEdges=function(t){var e=1e-14,n=t.getBounds();n.padBounds(-e,-e,-e,-e),v.limitSimplificationExtent(t,n.toArray(),!0)},v.limitSimplificationExtent=function(t,e,n){var r=t.getBounds().toArray();!0!==Y(e,r)&&t.forEach3(function(t,r,i){for(var o,a,s=n?1/0:0,u=0,c=i.length;u<c;u++)o=t[u],a=r[u],(o>=e[2]||o<=e[0]||a<=e[1]||a>=e[3])&&(0===s&&(s=v.findMaxThreshold(i)),i[u]!==1/0&&(i[u]=s))})},v.protectWorldEdges=function(t){v.limitSimplificationExtent(t,v.getWorldBounds(1e-12),!1)},v.findMaxThreshold=function(t){for(var e,n=0,r=0,i=t.length;r<i;r++)(e=t[r])>n&&e<1/0&&(n=e);return n},v.parseSimplifyResolution=function(t){var e,n,r;return c.isNumber(t)?(n=t,r=t):c.isString(t)&&(e=t.split(/[x ,]/),n=Number(e[0])||0,r=2==e.length?Number(e[1])||0:n),n>=0&&r>=0&&n+r>0||b("Invalid simplify resolution:",t),[n,r]},v.calcPlanarInterval=function(t,e,n,r){return 0!==t&&n/r>t/e||0===e?n/t:r/e},v.calcSphericalInterval=function(t,e,n){var r=H.degreesToMeters(n.width())*Math.cos(n.centerY()*H.D2R),i=H.degreesToMeters(n.height());return v.calcPlanarInterval(t,e,r,i)},v.convertSimplifyInterval=function(t,e,n){var r=v.getDatasetCRS(e);return v.useSphericalSimplify(e.arcs,n)?v.convertDistanceParam(t,r):v.convertIntervalParam(t,r)},v.convertSimplifyResolution=function(t,e,n){var r,i=v.parseSimplifyResolution(t),o=e.getBounds();return r=v.useSphericalSimplify(e,n)?v.calcSphericalInterval(i[0],i[1],o):v.calcPlanarInterval(i[0],i[1],o.width(),o.height()),r*=.5},v.getThresholdFunction=function(t){var e=t.getPointCount(),n=Math.ceil(e/5e5),r=t.getRemovableThresholds(n);return c.quicksort(r,!0),function(t){var e=r.length,n=v.retainedPctToRank(t,r.length);return n<1?0:n>e?1/0:r[n-1]}},v.retainedPctToRank=function(t,e){return 0===e||t>=1?0:t<=0?e+1:Math.floor((1-t)*(e+2))},v.getThresholdByPct=function(t,e,n){var r=e.getRemovableThresholds(n),i=v.retainedPctToRank(t,r.length);return i<1?0:i>r.length?1/0:c.findValueByRank(r,i)},m.variableSimplify=function(t,e,n){var r,i,o=t[0],a=e.arcs;1!=t.length&&b("Variable simplification requires a single target layer"),v.layerHasPaths(o)||b("Target layer is missing path data"),n=v.getStandardSimplifyOpts(e,n),v.simplifyPaths(a,n),n.interval?r=v.getVariableIntervalFunction(n.interval,o,e,n):n.percentage?r=v.getVariablePercentageFunction(n.percentage,o,e,n):n.resolution?r=v.getVariableResolutionFunction(n.resolution,o,e,n):b("Missing a simplification expression"),i=v.calculateVariableThresholds(o,a,r),v.applyArcThresholds(a,i),a.setRetainedInterval(1e20),v.finalizeSimplification(e,n),a.flatten()},v.getVariableIntervalFunction=function(t,e,n,r){var i=v.compileSimplifyExpression(t,e,n.arcs);return function(t){var e=i(t);return v.convertSimplifyInterval(e,n,r)}},v.getVariableResolutionFunction=function(t,e,n,r){var i=v.compileSimplifyExpression(t,e,n.arcs);return function(t){var e=i(t);return v.convertSimplifyResolution(e,n.arcs,r)}},v.getVariablePercentageFunction=function(t,e,n,r){var i=v.compileSimplifyExpression(t,e,n.arcs),o=v.getThresholdFunction(n.arcs);return function(t){var e=i(t),n=c.parsePercent(e);return o(n)}},v.compileSimplifyExpression=function(t,e,n){return v.compileValueExpression(t,e,n)},v.applyArcThresholds=function(t,e){t.getVertexData().zz;t.forEach2(function(t,n,r,i,o,a){for(var s=e[a],u=1;u<n-1;u++)o[t+u]>=s&&(o[t+u]=1/0)})},v.calculateVariableThresholds=function(t,e,n){var r,i=new Float64Array(e.size()),o=-1;c.initializeArray(i,o),t.shapes.forEach(function(t,e){r=n(e),v.forEachArcId(t||[],u)});for(var a=0,s=i.length;a<s;a++)i[a]==o&&(i[a]=0);return i;function u(t){var e=t<0?~t:t,n=i[e];(n>r||n==o)&&(i[e]=r)}},m.splitLayerOnGrid=function(t,e,n){var r,i=t.shapes,o=t.geometry_type,a=!!n.id_field,s=n.id_field||"__split__",u=function(t,e,n){var r=t.xmin,i=t.ymin,o=t.width(),a=t.height();n>0!=!1&&e>0!=!1||b("Invalid grid parameters");o>0!=!1&&a>0!=!1||(e=1,n=1);return function(t){var s=Math.floor((t.centerX()-r)/o*e),u=Math.floor((t.centerY()-i)/a*n);return s=c.clamp(s,0,e-1)||0,"r"+(u=c.clamp(u,0,n-1)||0)+"c"+s}}(v.getLayerBounds(t,e),n.cols,n.rows);return o||b("Layer has no geometry"),t.data||(t.data=new rt(i.length)),r=t.data.getRecords(),t.shapes.forEach(function(t,n){var i="point"==o?v.getPointBounds([t]):e.getMultiShapeBounds(t),a=i.hasBounds()?u(i):"";(r[n]=r[n]||{})[s]=a}),a?t:m.splitLayer(t,s).filter(function(t){var e=t.data.getRecordAt(0)[s];return t.name=e,t.data.deleteField(s),!!e})},m.subdivideLayer=function(t,e,n){return v.subdivide(t,e,n)},v.subdivide=function(t,e,n){var r,i,o,a,s=v.evalCalcExpression(t,e,n),u=[];return c.isBoolean(s)||b("Expression must evaluate to true or false"),s?(i=v.getLayerBounds(t,e),(o=(r=v.divideLayer(t,e,i))[0]).shapes.length>1&&o.shapes.length<t.shapes.length?c.merge(u,v.subdivide(o,e,n)):u.push(o),(a=r[1]).shapes.length>1&&a.shapes.length<t.shapes.length?c.merge(u,v.subdivide(a,e,n)):u.push(a)):u.push(t),u.forEach(function(e,n){e.name=v.getSplitLayerName(t.name||"split",n+1),c.defaults(e,t)}),u},v.divideLayer=function(t,e,n){var r,i,o=t.data?t.data.getRecords():null,a=t.shapes;r={geometry_type:t.geometry_type,shapes:[],data:o?[]:null},i={geometry_type:t.geometry_type,shapes:[],data:o?[]:null};var s=n&&n.width()>n.height(),u=a.map(function(t){var n=e.getMultiShapeBounds(t);return s?n.centerX():n.centerY()}),l=c.range(u.length);return l.sort(function(t,e){return u[t]-u[e]}),l.forEach(function(t,e){var n=e<a.length/2?r:i;n.shapes.push(a[t]),o&&n.data.push(o[t])}),o&&(r.data=new rt(r.data),i.data=new rt(i.data)),[r,i]},m.sortFeatures=function(t,e,n){var r=v.getFeatureCount(t),i=!n.descending,o=v.compileValueExpression(n.expression,t,e),a=[];c.repeat(r,function(t){a.push(o(t))});var s=c.getSortedIds(a,i);t.shapes&&c.reorderArray(t.shapes,s),t.data&&c.reorderArray(t.data.getRecords(),s)},Ut.rotateSymbolCoords=function(t,e){var n;e&&(n=v.getAffineTransform(-e,1,[0,0],[0,0]),v.forEachPoint(t,function(t){var e=n(t[0],t[1]);t[0]=e[0],t[1]=e[1]}))},Ut.symbolBuilders.arrow=function(t){var e="length"in t?t.length:10,n=t.stroke||"magenta",r="stroke-width"in t?t["stroke-width"]:1,i=Ut.getStrokeArrowCoords(e),o=t.curve||0,a={type:"polyline",coordinates:i,stroke:n,"stroke-width":r};return t.rotation&&Ut.rotateSymbolCoords(i,t.rotation),o&&2==i[0].length&&(o=Ut.adjustArrowCurve(i[0],o),Ut.addBezierArcControlPoints(i[0][0],i[0][1],o)),t.effect,a},Ut.adjustArrowCurve=function(t,e){return t[1][0]-t[0][0]<0?-e:e},Ut.getStrokeArrowCoords=function(t){return[[[0,0],[0,-t]]]},Ut.getFilledArrowCoords=function(t){},m.symbols=function(t,e){var n,r;v.requirePointLayer(t),n=v.getSymbolPropertyAccessor(t,e),e.where&&(r=v.compileValueExpression(e.where,t,null)),v.getLayerDataTable(t).getRecords().forEach(function(t,e){r&&r(e)?"svg-symbol"in t==!1&&(t["svg-symbol"]=void 0):t["svg-symbol"]=v.buildSymbol(n(e))})},v.buildSymbol=function(t){var e=t.type,n=Ut.symbolBuilders[e];return e?n||b("Unknown symbol type:",e):b('Missing required "type" parameter'),n(t)},v.target=function(t,e){var n=(e.type||"").toLowerCase().replace("linestring","polyline"),r=e.target||"*",i=t.findCommandTargets(r,n);n&&-1=="polygon,polyline,point".split(",").indexOf(n)&&b("Invalid layer type:",e.type),0===i.length&&b("No layers were matched (pattern: "+r+(n?" type: "+n:"")+")"),e.name&&(i[0].layers[0].name=e.name),t.setDefaultTargets(i)},m.uniq=function(t,e,n){var r=v.getFeatureCount(t),i=v.compileValueExpression(n.expression,t,e),o=n.max_count||1,a={},s=[],u=!!n.verbose,l=!!n.invert,f=t.data?t.data.getRecords():null,p=function(t,e){return s[e]};c.repeat(r,function(t){var e=i(t),n=e in a?a[e]+1:1,r=n<=o;l&&(r=!r),s[t]=r,a[e]=n,u&&!r&&w(c.format("Removing feature %i key: [%s]",t,e))}),t.shapes&&(t.shapes=t.shapes.filter(p)),f&&(t.data=new rt(f.filter(p))),!1!==n.verbose&&w(c.format("Retained %,d of %,d features",v.getFeatureCount(t),r))},v.convertSourceName=function(t,e){return v.nameIsInterpolated(t)?((e.length>1||1!=e[0].layers.length)&&b("Interpolated names are not compatible with multiple targets."),v.convertInterpolatedName(t,e[0].layers[0])):t},v.convertInterpolatedName=function(t,e){var n={target:e.name||""},r="with($$ctx) { return `"+t+"`; }";try{t=new Function("$$ctx",r)(n)}catch(e){b("Unable to interpolate ["+t+"]")}return t},v.nameIsInterpolated=function(t){return/[$][{]/.test(t)},v.findCommandSource=function(t,e,n){var r,i,o=e.findCommandTargets(t);return o.length>1||1==o.length&&o[0].layers.length>1?b(c.format("Source [%s] matched multiple layers",t)):1==o.length?i={dataset:o[0].dataset,layer:o[0].layers[0]}:((r=m.importFile(t,c.defaults({no_topology:!0},n)))?r.layers.length>1&&b("Multiple-layer sources are not supported"):b(c.format("Unable to find source [%s]",t)),i={dataset:r,layer:r.layers[0],disposable:!0}),i},m.runCommand=function(t,e,n){var r,i,o,a,s,l,f,p=t.name,h=t.options;try{if(_.start(),e||(e=new ue),"rename-layers"==p?l=(a=e.findCommandTargets(h.target||"*")).reduce(function(t,e){return t.concat(e.layers)},[]):"o"==p?a=e.findCommandTargets(h.target||h.combine_layers&&"*"):"proj"==p||"drop"==p||"target"==p?a=e.findCommandTargets(h.target):((a=e.findCommandTargets(h.target)).length>1&&"merge-layers"==p&&(a=v.mergeCommandTargets(a,e)),1==a.length?(f=(s=a[0].dataset).arcs,l=a[0].layers,e.setDefaultTarget(l,s)):a.length>1&&b("This command does not support targetting layers from different datasets")),0===a.length&&(h.target&&b(c.format("Missing target: %s\nAvailable layers: %s",h.target,v.getFormattedLayerList(e))),"help"!=p&&"graticule"!=p&&"i"!=p&&"point-grid"!=p&&"shape"!=p&&"rectangle"!=p&&"polygon-grid"!=p&&"include"!=p))throw new x("No data is available");if(h.source&&(r=v.findCommandSource(v.convertSourceName(h.source,a),e,h)),"affine"==p)m.affine(l,s,h);else if("buffer"==p)i=m.buffer(l,s,h);else if("data-fill"==p)Qt(m.dataFill,l,f,h);else if("cluster"==p)Qt(m.cluster,l,f,h);else if("calc"==p)Qt(m.calc,l,f,h);else if("clean"==p)m.cleanLayers(l,s,h);else if("clip"==p)i=m.clipLayers(l,r,s,h);else if("colorizer"==p)i=m.colorizer(h);else if("dissolve"==p)i=Qt(m.dissolve,l,f,h);else if("dissolve2"==p)i=m.dissolve2(l,s,h);else if("dissolve2_v1"==p)i=m.dissolve2_v1(l,s,h);else if("drop"==p)m.drop2(e,a,h);else if("each"==p)Qt(m.evaluateEachFeature,l,f,h.expression,h);else if("erase"==p)i=m.eraseLayers(l,r,s,h);else if("explode"==p)i=Qt(m.explodeFeatures,l,f,h);else if("filter"==p)i=Qt(m.filterFeatures,l,f,h);else if("filter-fields"==p)Qt(m.filterFields,l,h.fields);else if("filter-geom"==p)Qt(m.filterGeom,l,f,h);else if("filter-islands"==p)Qt(m.filterIslands,l,s,h);else if("filter-slivers"==p)Qt(m.filterSlivers,l,s,h);else if("frame"==p)m.frame(e,r,h);else if("fuzzy-join"==p)Qt(m.fuzzyJoin,l,f,r,h);else if("graticule"==p)e.addDataset(m.graticule(s,h));else if("help"==p)v.getOptionParser().printHelp(h.command);else if("i"==p)h.replace&&(e=new ue),(s=m.importFiles(t.options))&&(e.addDataset(s),i=s.layers);else if("include"==p)v.include(h);else if("info"==p)v.printInfo(e.getLayers(),l);else if("inspect"==p)Qt(m.inspect,l,f,h);else if("innerlines"==p)i=Qt(m.innerlines,l,f,h);else if("join"==p)Qt(m.join,l,s,r,h);else if("lines"==p)i=Qt(m.lines,l,s,h);else if("merge-layers"==p)i=m.mergeLayers(l,h);else if("mosaic"==p)h.no_replace=!0,i=v.mosaic(s,h);else{if("o"==p)return o=v.exportTargetLayers(a,h),h.final&&(e=null),v.writeFiles(o,h,d);if("overlay"==p)o=v.overlay(l,r,s,h);else if("point-grid"==p)i=[m.pointGrid(s,h)],s||e.addDataset({layers:i});else if("polygon-grid"==p)e.addDataset(m.polygonGrid(s,h));else if("points"==p)i=Qt(m.createPointLayer,l,s,h);else if("polygons"==p)i=m.polygons(l,s,h);else{if("proj"==p)return void v.initProjLibrary(h,function(){var t=null;try{a.forEach(function(t){var n,r,i=h.match||h.crs||h.projection;h.from&&((n=v.getCrsInfo(h.from,e)).crs||b("Unknown projection source:",h.from),v.setDatasetCRS(t.dataset,n)),i&&(r=v.getCrsInfo(i,e),m.proj(t.dataset,r,h))})}catch(e){t=e}d(t)});if("rectangle"==p)r||h.bbox||0===a.length?e.addDataset(m.rectangle(r,h)):i=m.rectangle2(a[0],h);else if("rectangles"==p)i=Qt(m.rectangles,l,s,h);else if("rename-fields"==p)Qt(m.renameFields,l,h.fields);else if("rename-layers"==p)m.renameLayers(l,h.names);else if("require"==p)m.require(a,h);else{if("run"==p)return void m.run(a,e,h,d);"scalebar"==p?m.scalebar(e,h):"shape"==p?e.addDataset(m.shape(h)):"simplify"==p?h.variable?m.variableSimplify(l,s,h):m.simplify(s,h):"slice"==p?i=m.sliceLayers(l,r,s,h):"sort"==p?Qt(m.sortFeatures,l,f,h):"split"==p?i=Qt(m.splitLayer,l,h.field,h):"split-on-grid"==p?i=Qt(m.splitLayerOnGrid,l,f,h):"stitch"==p?m.stitch(s):"style"==p?Qt(m.svgStyle,l,s,h):"symbols"==p?Qt(m.symbols,l,h):"subdivide"==p?i=Qt(m.subdivideLayer,l,f,h.expression):"target"==p?v.target(e,h):"uniq"==p?Qt(m.uniq,l,f,h):u("Unhandled command: ["+p+"]")}}}"name"in h&&i&&i.forEach(function(t){t.name=h.name}),i&&s&&i!=s.layers&&(h.no_replace?(v.outputLayersAreDifferent(i,l||[])||u("Command returned invalid output"),s.layers=s.layers.concat(i)):(v.replaceLayers(s,l,i),("clip"==p||"erase"==p||"rectangle"==p||"rectangles"==p||"filter"==p&&h.cleanup)&&!h.no_cleanup&&v.dissolveArcs(s)),e.setDefaultTarget(i,s)),s&&v.cleanupArcs(s)}catch(t){return d(t)}function d(t){_.stop("-"),n(t,t?null:e)}d(null)},v.outputLayersAreDifferent=function(t,e){return!c.some(e,function(e){return t.indexOf(e)>-1})},v.splitShellTokens=function(t){return v.splitTokens(t,"\\s")},v.splitTokens=function(t,e){var n=new RegExp("("+("([^"+e+"'\"])+")+"|\"((\\\\\"|[^\"])*?)\"|'((\\\\'|[^'])*?)')*","g");return(t.match(n)||[]).filter(function(t){return!!t&&"\\"!=t}).map(c.trimQuotes)},c.trimQuotes=function(t){var e,n,r=t.length;return r>=2&&(e=t.charAt(0),n=t.charAt(r-1),'"'==e&&'"'==n||"'"==e&&"'"==n)?t.substr(1,r-2):t},v.parseStringList=function(t){var e=v.splitTokens(t,",");return 1==e.length&&(e=v.splitTokens(e[0],",")),e},v.parseColorList=function(t){var e=t.replace(/, *(?=[^(]*\))/g,"~~~"),n=v.splitTokens(e,", ");return 1==n.length&&(n=v.splitTokens(n[0],", ")),n=n.map(function(t){return t.replace(/~~~/g,",")})},v.cleanArgv=function(t){return t=(t=(t=t.map(function(t){return t.trim()})).filter(function(t){return""!==t})).map(c.trimQuotes)},v.getOptionParser=function(){var t={describe:"layer(s) to target (comma-sep. list)"},e={describe:"rename the edited layer(s)"},n={alias:"+",type:"flag",describe:"retain the original layer(s) instead of replacing"},r={type:"flag"},i={describe:"text encoding (applies to .dbf and delimited text files)"},o={describe:"snapping distance in source units (default is tiny)",type:"distance"},a={describe:"smaller gaps than this are filled (default is small)",type:"area"},s={describe:"fields to sum when dissolving  (comma-sep. list)",type:"strings"},c={describe:"fields to copy when dissolving (comma-sep. list)",type:"strings"},l={DEFAULT:!0,type:"strings",describe:"(optional) field or fields to dissolve on (comma-sep. list)"},f={describe:"type hints for csv source files, e.g. FIPS:str,STATE_FIPS:str",type:"strings"},p={describe:"csv field(s) to import as strings, e.g. FIPS,ZIPCODE",type:"strings"},h={type:"bbox",describe:"comma-sep. bounding box: xmin,ymin,xmax,ymax"},d={describe:"use a JS expression to select a subset of features"},g={describe:"filter polygon boundaries using a JS expression (with A and B)"},y={describe:"aspect ratio as a number or range (e.g. 2 0.8,1.6 ,2)"},m={describe:"padding as distance or pct of h/w (single value or list)",type:"distance"},v=new te;return v.usage("Usage:  mapshaper -<command> [options] ..."),v.note("Enter mapshaper -help <command> to view options for a single command"),v.section("I/O commands"),v.default("i"),v.command("i").describe("input one or more files").validate(ne).flag("multi_arg").option("files",{DEFAULT:!0,type:"strings",describe:"one or more files to import, or - to use stdin"}).option("combine-files",{describe:"import files to separate layers with shared topology",type:"flag"}).option("merge-files",{type:"flag"}).option("no-topology",{describe:"treat each shape as topologically independent",type:"flag"}).option("precision",{describe:"coordinate precision in source units, e.g. 0.001",type:"number"}).option("snap",{type:"flag",describe:"snap nearly identical points to fix minor topology errors"}).option("auto-snap",{alias_to:"snap"}).option("snap-interval",o).option("encoding",i).option("id-field",{describe:"import Topo/GeoJSON id property to this field"}).option("string-fields",p).option("field-types",f).option("name",{describe:"Rename the imported layer(s)"}).option("geometry-type",{}).option("json-path",{}).option("csv-filter",{describe:"[CSV] JS expression for filtering records"}).option("csv-fields",{type:"strings",describe:"[CSV] comma-sep. list of fields to import"}),v.command("o").describe("output edited content").validate(se).option("_",{label:"<file|directory>",describe:"(optional) name of output file or directory, - for stdout"}).option("format",{describe:"options: shapefile,geojson,topojson,json,dbf,csv,tsv,svg"}).option("target",t).option("force",{describe:"allow overwriting input files",type:"flag"}).option("dry-run",{type:"flag"}).option("ldid",{type:"number"}).option("precision",{describe:"coordinate precision in source units, e.g. 0.001",type:"number"}).option("bbox-index",{describe:"export a .json file with bbox of each layer",type:"flag"}).option("cut-table",{describe:"detach data attributes from shapes and save as a JSON file",type:"flag"}).option("drop-table",{describe:"remove data attributes from output",type:"flag"}).option("encoding",{describe:"(Shapefile/CSV) text encoding (default is utf8)"}).option("field-order",{describe:"(Shapefile/CSV) field-order=ascending sorts columns A-Z"}).option("id-field",{describe:"(Topo/GeoJSON/SVG) field to use for id property",type:"strings"}).option("bbox",{type:"flag",describe:"(Topo/GeoJSON) add bbox property"}).option("extension",{describe:'(Topo/GeoJSON) set file extension (default is ".json")'}).option("prettify",{type:"flag",describe:"(Topo/GeoJSON) format output for readability"}).option("singles",{describe:"(TopoJSON) save each target layer as a separate file",type:"flag"}).option("quantization",{describe:"(TopoJSON) specify quantization (auto-set by default)",type:"integer"}).option("no-quantization",{describe:"(TopoJSON) export coordinates without quantization",type:"flag"}).option("no-point-quantization",{type:"flag"}).option("presimplify",{describe:"(TopoJSON) add per-vertex data for dynamic simplification",type:"flag"}).option("topojson-precision",{type:"number"}).option("rfc7946",{describe:"(GeoJSON) follow RFC 7946 (CCW outer ring order, etc.)",type:"flag"}).option("combine-layers",{describe:"(GeoJSON) output layers as a single file",type:"flag"}).option("geojson-type",{describe:"(GeoJSON) FeatureCollection, GeometryCollection or Feature"}).option("width",{describe:"(SVG/TopoJSON) pixel width of output (SVG default is 800)",type:"number"}).option("height",{describe:"(SVG/TopoJSON) pixel height of output (optional)",type:"number"}).option("max-height",{describe:"(SVG/TopoJSON) max pixel height of output (optional)",type:"number"}).option("margin",{describe:"(SVG/TopoJSON) space betw. data and viewport (default is 1)"}).option("pixels",{describe:"(SVG/TopoJSON) output area in pixels (alternative to width=)",type:"number"}).option("svg-scale",{describe:"(SVG) source units per pixel (alternative to width= option)",type:"number"}).option("point-symbol",{describe:"(SVG) circle or square (default is circle)"}).option("svg-data",{type:"strings",describe:"(SVG) fields to export as data-* attributes"}).option("id-prefix",{describe:"(SVG) prefix for namespacing layer and feature ids"}).option("delimiter",{describe:"(CSV) field delimiter"}).option("final",{type:"flag"}).option("metadata",{type:"flag"}),v.section("Editing commands"),v.command("buffer").option("radius",{describe:"radius of buffer, as an expression or a constant",DEFAULT:!0}).option("tolerance",{}).option("backtrack",{type:"integer"}).option("type",{}).option("planar",{type:"flag"}).option("v2",{type:"flag"}).option("debug-division",{type:"flag"}).option("debug-mosaic",{type:"flag"}).option("no-cleanup",{type:"flag"}).option("units",{describe:"distance units (meters|miles|km|feet) (default is meters)"}).option("name",e).option("no-replace",n).option("target",t),v.command("clean").describe("repairs overlaps and small gaps in polygon layers").option("min-gap-area",a).option("snap-interval",o).option("no-snap",r).option("allow-empty",{describe:"allow null geometries (removed by default)",type:"flag"}).option("arcs",{describe:"remove unused arcs",type:"flag"}).option("no-arc-dissolve",{type:"flag"}).option("target",t),v.command("clip").describe("use a polygon layer to clip another layer").example("$ mapshaper states.shp -clip land_area.shp -o clipped.shp").option("source",{DEFAULT:!0,describe:"file or layer containing clip polygons"}).option("remove-slivers",{describe:"remove sliver polygons created by clipping",type:"flag"}).option("bbox",h).option("bbox2",{type:"bbox",describe:"experimental fast bbox clipping"}).option("name",e).option("no-replace",n).option("no-snap",r).option("target",t),v.command("dissolve").describe("merge features within a layer").example("Dissolve all polygons in a feature layer into a single polygon\n$ mapshaper states.shp -dissolve -o country.shp").example("Generate state-level polygons by dissolving a layer of counties\n(STATE_FIPS, POPULATION and STATE_NAME are attribute field names)\n$ mapshaper counties.shp -dissolve STATE_FIPS copy-fields=STATE_NAME sum-fields=POPULATION -o states.shp").option("field",{}).option("fields",l).option("calc",{describe:"use a JS expression to aggregate data values"}).option("sum-fields",s).option("copy-fields",c).option("weight",{describe:"[points] field or expression to use for weighting centroid"}).option("planar",{type:"flag",describe:"[points] use 2D math to find centroids of latlong points"}).option("name",e).option("no-replace",n).option("target",t),v.command("dissolve2_v1").option("field",{}).option("fields",l).option("arcs",{type:"flag"}).option("calc",{describe:"use a JS expression to aggregate data values"}).option("sum-fields",s).option("copy-fields",c).option("min-gap-area",a).option("name",e).option("no-replace",n).option("no-snap",r).option("target",t),v.command("dissolve2").describe("merge adjacent polygons (repairs overlaps and gaps)").option("field",{}).option("fields",l).option("mosaic",{type:"flag"}).option("arcs",{type:"flag"}).option("tiles",{type:"flag"}).option("calc",{describe:"use a JS expression to aggregate data values"}).option("sum-fields",s).option("copy-fields",c).option("min-gap-area",a).option("name",e).option("no-replace",n).option("no-snap",r).option("target",t),v.command("drop").describe("delete layer(s) or elements within the target layer(s)").flag("no_arg").option("geometry",{describe:"delete all geometry from the target layer(s)",type:"flag"}).option("holes",{describe:"delete holes from polygons",type:"flag"}).option("fields",{type:"strings",describe:"delete a list of attribute data fields, e.g. 'id,name' '*'"}).option("target",t),v.command("each").describe("create/update/delete data fields using a JS expression").example("Add two calculated data fields to a layer of U.S. counties\n$ mapshaper counties.shp -each 'STATE_FIPS=CNTY_FIPS.substr(0, 2), AREA=$.area'").option("expression",{DEFAULT:!0,describe:"JS expression to apply to each target feature"}).option("where",d).option("target",t),v.command("erase").describe("use a polygon layer to erase another layer").example("$ mapshaper land_areas.shp -erase water_bodies.shp -o erased.shp").option("source",{DEFAULT:!0,describe:"file or layer containing erase polygons"}).option("remove-slivers",{describe:"remove sliver polygons created by erasing",type:"flag"}).option("bbox",h).option("name",e).option("no-replace",n).option("no-snap",r).option("target",t),v.command("explode").describe("divide multi-part features into single-part features").option("naive",{type:"flag"}).option("target",t),v.command("filter").describe("delete features using a JS expression").option("expression",{DEFAULT:!0,describe:"delete features that evaluate to false"}).option("remove-empty",{type:"flag",describe:"delete features with null geometry"}).option("keep-shapes",{type:"flag"}).option("cleanup",{type:"flag"}).option("name",e).option("no-replace",n).option("target",t),v.command("filter-fields").describe("retain a subset of data fields").option("fields",{DEFAULT:!0,type:"strings",describe:"fields to retain (comma-sep.), e.g. 'fips,name'"}).option("target",t),v.command("filter-geom").describe("").option("bbox",{type:"bbox",describe:"remove non-intersecting geometry (xmin,ymin,xmax,ymax)"}).option("target",t),v.command("filter-islands").describe("remove small detached polygon rings (islands)").option("min-area",{type:"area",describe:"remove small-area islands (sq meters or projected units)"}).option("min-vertices",{type:"integer",describe:"remove low-vertex-count islands"}).option("remove-empty",{type:"flag",describe:"delete features with null geometry"}).option("target",t),v.command("filter-slivers").describe("remove small polygon rings").option("min-area",{type:"area",describe:"remove small-area rings (sq meters or projected units)"}).option("weighted",{type:"flag",describe:"multiply min-area by Polsby-Popper compactness (0-1)"}).option("target",t),v.command("graticule").describe("create a graticule layer"),v.command("innerlines").describe("convert polygons to polylines along shared edges").flag("no_arg").option("where",g).option("name",e).option("no-replace",n).option("target",t),v.command("join").describe("join data records from a file or layer to a layer").example("Join a csv table to a Shapefile (don't auto-convert FIPS column to numbers)\n$ mapshaper states.shp -join data.csv keys=STATE_FIPS,FIPS string-fields=FIPS -o joined.shp").validate(function(t){t.options.source||u("Command requires the name of a layer or file to join")}).option("source",{DEFAULT:!0,describe:"file or layer containing data records"}).option("keys",{describe:"join by matching target,source key fields; e.g. keys=FIPS,ID",type:"strings"}).option("calc",{describe:"use a JS expression to assign values in many-to-one joins"}).option("where",{describe:"use a JS expression to filter source records"}).option("fields",{describe:"fields to copy (comma-sep.) (default is all but key field)",type:"strings"}).option("string-fields",p).option("field-types",f).option("sum-fields",{describe:"fields to sum in a many-to-one join (or use calc= for this)",type:"strings"}).option("force",{describe:"replace values from same-named fields",type:"flag"}).option("unjoined",{describe:'copy unjoined records from source table to "unjoined" layer',type:"flag"}).option("unmatched",{describe:'copy unmatched records in target table to "unmatched" layer',type:"flag"}).option("encoding",i).option("target",t),v.command("lines").describe("convert a polygon or point layer to a polyline layer").option("fields",{DEFAULT:!0,describe:"field(s) to create a hierarchy of boundary lines",type:"strings"}).option("where",g).option("each",{describe:"apply a JS expression to each polygon boundary (with A and B)"}).option("groupby",{describe:"field for grouping point input into multiple lines"}).option("name",e).option("no-replace",n).option("target",t),v.command("merge-layers").describe("merge multiple layers into as few layers as possible").flag("no_arg").option("force",{type:"flag",describe:"merge layers with inconsistent data fields"}).option("name",e).option("target",t),v.command("mosaic").option("debug",{type:"flag"}).option("target",t),v.command("overlay").option("source",{DEFAULT:!0,describe:"file or layer containing overlay polygons"}).option("no-replace",n).option("target",t),v.command("point-grid").describe("create a rectangular grid of points").validate(oe).option("-",{label:"<cols,rows>",describe:"size of the grid, e.g. -point-grid 100,100"}).option("interval",{describe:"distance between adjacent points, in source units",type:"distance"}).option("cols",{type:"integer"}).option("rows",{type:"integer"}).option("bbox",{type:"bbox",describe:"xmin,ymin,xmax,ymax (default is bbox of data)"}).option("name",e),v.command("points").describe("create a point layer from a different layer type").flag("no_arg").option("x",{describe:"field containing x coordinate"}).option("y",{describe:"field containing y coordinate"}).option("inner",{describe:"create an interior point for each polygon's largest ring",type:"flag"}).option("centroid",{describe:"create a centroid point for each polygon's largest ring",type:"flag"}).option("vertices",{describe:"capture unique vertices of polygons and polylines",type:"flag"}).option("vertices2",{describe:"like vertices, but without removal of duplicate coordinates",type:"flag"}).option("endpoints",{describe:"capture unique endpoints of polygons and polylines",type:"flag"}).option("intersections",{type:"flag"}).option("interpolated",{describe:"interpolate points along polylines; requires interval=",type:"flag"}).option("interval",{describe:"distance between interpolated points (meters or projected units)",type:"distance"}).option("name",e).option("no-replace",n).option("target",t),v.command("polygon-grid").validate(oe).option("-",{label:"<cols,rows>",describe:"size of the grid, e.g. -point-grid 100,100"}).option("interval",{describe:"distance between adjacent points, in source units",type:"number"}).option("cols",{type:"integer"}).option("rows",{type:"integer"}).option("bbox",{type:"bbox",describe:"xmin,ymin,xmax,ymax (default is bbox of data)"}).option("name",e),v.command("proj").describe("project your data (using Proj.4)").flag("multi_arg").option("crs",{DEFAULT:!0,describe:"set destination CRS using a Proj.4 definition or alias"}).option("projection",{alias_to:"crs"}).option("match",{describe:"set destination CRS using a .prj file or layer id"}).option("source",{alias_to:"match"}).option("from",{describe:"set source CRS (if unset) using a string, .prj or layer id"}).option("densify",{type:"flag",describe:"add points along straight segments to approximate curves"}).option("target",t).validate(ie),v.command("rename-fields").describe("rename data fields").option("fields",{DEFAULT:!0,type:"strings",describe:"fields to rename (comma-sep.), e.g. 'fips=STATE_FIPS,st=state'"}).option("target",t),v.command("rename-layers").describe("assign new names to layers").option("names",{DEFAULT:!0,type:"strings",describe:"new layer name(s) (comma-sep. list)"}).option("target",t),v.command("simplify").validate(re).example("Retain 10% of removable vertices\n$ mapshaper input.shp -simplify 10%").describe("simplify the geometry of polygon and polyline features").option("percentage",{DEFAULT:!0,alias:"p",type:"percent",describe:"percentage of removable points to retain, e.g. 10%"}).option("dp",{alias:"rdp",describe:"use Ramer-Douglas-Peucker simplification",assign_to:"method"}).option("visvalingam",{describe:'use Visvalingam simplification with "effective area" metric',assign_to:"method"}).option("weighted",{describe:"use weighted Visvalingam simplification (default)",assign_to:"method"}).option("method",{}).option("weighting",{type:"number",describe:"weighted Visvalingam coefficient (default is 0.7)"}).option("resolution",{describe:"output resolution as a grid (e.g. 1000x500)"}).option("interval",{describe:"output resolution as a distance (e.g. 100)",type:"distance"}).option("variable",{describe:"expect an expression with interval=, percentage= or resolution=",type:"flag"}).option("planar",{describe:"simplify decimal degree coords in 2D space (default is 3D)",type:"flag"}).option("cartesian",{alias_to:"planar"}).option("keep-shapes",{describe:"prevent small polygon features from disappearing",type:"flag"}).option("lock-box",{type:"flag"}).option("no-repair",{describe:"don't remove intersections introduced by simplification",type:"flag"}).option("stats",{describe:"display simplification statistics",type:"flag"}).option("target",t),v.command("slice").option("source",{DEFAULT:!0,describe:"file or layer containing clip polygons"}).option("id-field",{describe:"slice id field (from source layer)"}).option("name",e).option("no-replace",n).option("no-snap",r).option("target",t),v.command("sort").describe("sort features using a JS expression").option("expression",{DEFAULT:!0,describe:"JS expression to generate a sort key for each feature"}).option("ascending",{describe:"sort in ascending order (default)",type:"flag"}).option("descending",{describe:"sort in descending order",type:"flag"}).option("target",t),v.command("split").describe("split features into separate layers using a data field").option("field",{DEFAULT:!0,describe:"name of an attribute field (omit to split all features)"}).option("no-replace",n).option("target",t),v.command("split-on-grid").describe("split features into separate layers using a grid").validate(oe).option("-",{label:"<cols,rows>",describe:"size of the grid, e.g. -split-on-grid 12,10"}).option("cols",{type:"integer"}).option("rows",{type:"integer"}).option("id-field",{describe:"assign each feature a cell id instead of splitting layer"}).option("target",t),v.command("style").oldAlias("svg-style").describe("set SVG style properties using JS or literal values").option("where",d).option("class",{describe:"name of CSS class or classes (space-separated)"}).option("fill",{describe:"fill color; examples: #eee pink rgba(0, 0, 0, 0.2)"}).option("stroke",{describe:"stroke color"}).option("stroke-width",{describe:"stroke width"}).option("stroke-dasharray",{describe:'stroke dashes. Examples: "4" "2 4"'}).option("opacity",{describe:"opacity; example: 0.5"}).option("r",{describe:"symbol radius (set this to export points as circles)"}).option("label-text",{describe:"label text (set this to export points as labels)"}).option("text-anchor",{describe:"label alignment; one of: start, end, middle (default)"}).option("dx",{describe:"x offset of labels (default is 0)"}).option("dy",{describe:"y offset of labels (default is 0/baseline-aligned)"}).option("font-size",{describe:"size of label text (default is 12)"}).option("font-family",{describe:"CSS font family of labels (default is sans-serif)"}).option("font-weight",{describe:"CSS font weight property of labels (e.g. bold, 700)"}).option("font-style",{describe:"CSS font style property of labels (e.g. italic)"}).option("letter-spacing",{describe:"CSS letter-spacing property of labels"}).option("line-height",{describe:"line spacing of multi-line labels (default is 1.1em)"}).option("target",t),v.command("symbols").option("type",{describe:"symbol type"}).option("stroke",{}).option("stroke-width",{}).option("fill",{}).option("length",{}).option("rotation",{}).option("curve",{}).option("effect",{}).option("where",d).option("target",t),v.command("target").describe("set active layer (or layers)").option("target",{DEFAULT:!0,describe:"name or index of layer to target"}).option("type",{describe:"type of layer to target (polygon|polyline|point)"}).option("name",{describe:"rename the target layer"}),v.command("uniq").describe("delete features with the same id as a previous feature").option("expression",{DEFAULT:!0,describe:"JS expression to obtain the id of a feature"}).option("max-count",{type:"number",describe:"max features with the same id (default is 1)"}).option("invert",{type:"flag",describe:"retain only features that would have been deleted"}).option("verbose",{describe:"print each removed feature",type:"flag"}).option("target",t),v.section("Experimental commands (may give unexpected results)"),v.command("affine").describe("transform coordinates by shifting, scaling and rotating").flag("no_args").option("shift",{type:"strings",describe:"x,y offsets in source units (e.g. 5000,-5000)"}).option("scale",{type:"number",describe:"scale (default is 1)"}).option("rotate",{type:"number",describe:"angle of rotation in degrees (default is 0)"}).option("anchor",{type:"numbers",describe:"center of rotation/scaling (default is center of selected shapes)"}).option("where",d).option("target",t),v.command("cluster").describe("group polygons into compact clusters").option("id-field",{describe:'field name of cluster id (default is "cluster")'}).option("pct",{alias:"p",type:"percent",describe:"percentage of shapes to retain, e.g. 50%"}).option("max-width",{describe:"max width of cluster bounding box",type:"number"}).option("max-height",{describe:"max height of cluster bounding box",type:"number"}).option("max-area",{describe:"max area of a cluster",type:"number"}).option("group-by",{describe:"field name; only same-value shapes will be grouped"}).option("target",t),v.command("colorizer").describe("define a function to convert data values to color classes").flag("no_arg").option("colors",{describe:"comma-separated list of CSS colors",type:"colors"}).option("breaks",{describe:"ascending-order list of breaks for sequential color scheme",type:"numbers"}).option("categories",{describe:"comma-sep. list of keys for categorical color scheme",type:"strings"}).option("other",{describe:"default color for categorical scheme (defaults to no-data color)"}).option("nodata",{describe:"color to use for invalid or missing data (default is white)"}).option("name",{describe:"function name to use in -each and -svg-style commands"}).option("precision",{describe:"rounding precision to apply before classification (e.g. 0.1)",type:"number"}).example("Define a sequential color scheme and use it to create a new field\n$ mapshaper data.json -colorizer name=getColor nodata=#eee breaks=20,40 \\\n  colors=#e0f3db,#a8ddb5,#43a2ca -each 'fill = getColor(RATING)' -o output.json"),v.command("data-fill").option("field",{describe:"name of field to fill out"}).option("postprocess",{describe:"remove data islands",type:"flag"}),v.command("frame").option("bbox",{describe:"frame coordinates (xmin,ymin,xmax,ymax)",type:"bbox"}).option("offset",m).option("width",{describe:"pixel width of output (default is 800)"}).option("height",{describe:"pixel height of output (may be a range)"}).option("pixels",{describe:"area of output in pixels (alternative to width and height)",type:"number"}).option("source",{describe:"name of layer to enclose"}).option("name",e),v.command("include").describe("import JS data and functions for use in JS expressions").option("file",{DEFAULT:!0,describe:"file containing a JS object with key:value pairs to import"}),v.command("fuzzy-join").describe("join points to polygons, with data fill and fuzzy match").option("source",{DEFAULT:!0,describe:"file or layer containing data records"}).option("field",{describe:"field to join"}).option("dedup-points",{describe:"uniqify points with the same location and field value",type:"flag"}).option("target",t),v.command("polygons").describe("convert polylines to polygons").option("gap-tolerance",{describe:"specify gap tolerance in source units",type:"distance"}).option("target",t),v.command("rectangle").describe("create a rectangle from a bbox or target layer extent").option("bbox",{describe:"rectangle coordinates (xmin,ymin,xmax,ymax)",type:"bbox"}).option("offset",m).option("aspect-ratio",y).option("source",{describe:"name of layer to enclose"}).option("name",e).option("no-replace",n).option("target",t),v.command("rectangles").describe("create a rectangle around each feature in the target layer").option("offset",m).option("aspect-ratio",y).option("name",e).option("no-replace",n).option("target",t),v.command("require").describe("require a Node module for use in -each expressions").option("module",{DEFAULT:!0,describe:"name of Node module or path to module file"}).option("alias",{describe:"Set the module name to an alias"}).option("init",{describe:"JS expression to run after the module loads"}),v.command("run").describe("create commands on-the-fly and run them").option("include",{}).option("commands",{DEFAULT:!0,describe:"command string or JS expresson to generate command(s)"}).option("target",t),v.command("scalebar").option("top",{}).option("right",{}).option("bottom",{}).option("left",{}).option("font-size",{}).option("label-position",{}).option("label-text",{}),v.command("shape").describe("create a polyline or polygon from coordinates").option("coordinates",{describe:"list of vertices as x,y,x,y...",type:"numbers"}).option("offsets",{describe:"list of vertices as offsets from coordinates list",type:"numbers"}).option("closed",{describe:"close an open path to create a polygon",type:"flag"}).option("name",e),v.command("subdivide").describe("recursively split a layer using a JS expression").validate(ae).option("expression",{DEFAULT:!0,describe:"boolean JS expression"}).option("target",t),v.section("Informational commands"),v.command("calc").describe("calculate statistics about the features in a layer").example("Calculate the total area of a polygon layer\n$ mapshaper polygons.shp -calc 'sum($.area)'").example("Count census blocks in NY with zero population\n$ mapshaper ny-census-blocks.shp -calc 'count()' where='POPULATION == 0'").validate(ae).option("expression",{DEFAULT:!0,describe:"functions: sum() average() median() max() min() count()"}).option("where",d).option("target",t),v.command("encodings").describe("print list of supported text encodings (for .dbf import)"),v.command("help").alias("h").describe("print help; takes optional command name").option("command",{DEFAULT:!0,describe:"view detailed information about a command"}),v.command("info").describe("print information about data layers"),v.command("inspect").describe("print information about a feature").option("expression",{DEFAULT:!0,describe:"boolean JS expression for selecting a feature"}).option("target",t).validate(ae),v.command("projections").describe("print list of supported projections"),v.command("quiet").describe("inhibit console messages"),v.command("verbose").describe("print verbose processing messages"),v.command("version").alias("v").describe("print mapshaper version"),v.command("debug"),v},v.parseCommands=function(t){return Array.isArray(t)&&c.isObject(t[0])?t.map(function(t){return{name:t.name,options:c.extend({},t.options)}}):(c.isString(t)&&(t=v.splitShellTokens(t)),v.getOptionParser().parseArgv(t))},v.parseConsoleCommands=function(t){var e,n=["i","include","require"],r=t.replace(/^mapshaper\b/,"").trim();return/^[a-z]/.test(r)&&(r="-"+r),(e=v.parseCommands(r)).forEach(function(t){var e=n.indexOf(t.name);e>-1&&b("The -"+n[e]+" command cannot be run in the browser")}),e},v.findCommandTargets=function(t,e,n){var r=[],i=c.pluck(t.getLayers(),"layer"),o=v.findMatchingLayers(i,e);return n&&(o=o.filter(function(t){return t.geometry_type==n})),t.getDatasets().forEach(function(t){var e=t.layers.filter(function(t){return o.indexOf(t)>-1});e.length>0&&r.push({layers:e,dataset:t})}),r},v.findMatchingLayers=function(t,e){var n=[],r={};return e.split(",").forEach(function(e,i){var o=v.getLayerMatch(e);t.forEach(function(t,e){e in r||(o(t,e+1)?(t.target_id=n.length,n.push(t),r[e]=!0):t.target_id=-1)})}),n},v.getLayerMatch=function(t){var e=c.isInteger(Number(t)),n=e?null:c.wildcardToRegExp(t);return function(r,i){return e?String(i)==t:n.test(r.name||"")}},v.getFormattedLayerList=function(t){var e=[];return t.forEachLayer(function(t,n,r){e.push("  ["+(r+1)+"]  "+(t.name||"[unnamed]"))}),e.length>0?e.join("\n"):"[none]"},m.runCommands=function(t){var e=v.importRunArgs(arguments);if(v.runCommands(t,e,function(t){e.callback(t)}),e.promise)return e.promise},m.applyCommands=function(t){var e=v.importRunArgs(arguments),n=e.callback,r=e.output=[];if(v.runCommands(t,e,function(t){return t?n(t):e.legacy?n(null,v.toLegacyOutputFormat(r)):n(null,v.toOutputFormat(r))}),e.promise)return e.promise},v.importRunArgs=function(t){var e={};return c.isFunction(t[1])?e.callback=t[1]:c.isFunction(t[2])?(e.callback=t[2],e.input=t[1],e.legacy=e.input&&null!=v.guessInputContentType(e.input)):(e.input=t[1]||null,e.promise=new Promise(function(t,n){e.callback=function(e,r){e?n(e):t(r)}})),e},v.toOutputFormat=function(t){return t.reduce(function(t,e){return t[e.filename]=e.content,t},{})},v.runCommands=function(t,e,n){var r,i=e.output||null,o=e.input;try{r=v.parseCommands(t)}catch(t){return n(t)}e.legacy&&(w("Warning: deprecated input format"),r=v.convertLegacyCommands(r,o),o=null),r.forEach(function(t){v.commandTakesFileInput(t.name)&&o&&(t.options.input=o),"o"==t.name&&i&&(t.options.output=i)}),v.runParsedCommands(r,null,n)},v.commandTakesFileInput=function(t){return"i"==t||"join"==t||"erase"==t||"clip"==t||"include"==t},v.toLegacyOutputFormat=function(t){return t.length>1?c.pluck(t,"content"):1==t.length?t[0].content:null},v.convertLegacyCommands=function(t,e){var n=c.find(t,function(t){return"i"==t.name}),r=c.find(t,function(t){return"o"==t.name});return n||(n={name:"i",options:{}},t.unshift(n)),n.options.files=["__input__"],n.options.input={__input__:e},r||t.push({name:"o",options:{}}),t},v.testCommands=function(t,e){v.runCommands(t,{},function(t,n){var r,i=n?n.getDefaultTargets():[];!t&&i.length>0&&(r=i[0].dataset),e(t,r)})},v.runParsedCommands=function(t,e,n){if(e?e instanceof ue==!1&&u("Changed in v0.4: runParsedCommands() takes a Catalog object"):(n=function(t){return v.context={DEBUG:!1,QUIET:!1,VERBOSE:!1,defs:{},input_files:[]},function(){t.apply(null,c.toArray(arguments)),v.context={DEBUG:!1,QUIET:!1,VERBOSE:!1,defs:{},input_files:[]}}}(n),e=new ue),c.isFunction(r)||u("Missing a callback function"),c.isArray(t)||u("Expected an array of parsed commands"),0===t.length)return r(new x("No commands to run"));if(0===(t=v.runAndRemoveInfoCommands(t)).length)return r(null);function r(t,e){n(t,e),v.setStateVar("current_command",null)}m.gui||"o"!=t[t.length-1].name||(t[t.length-1].options.final=!0),t=v.divideImportCommand(t),c.reduceAsync(t,e,function(t,e,n){v.setStateVar("current_command",e.name),m.runCommand(e,t,n)},r)},v.divideImportCommand=function(t){var e=t[0],n=e.options;return"i"!=e.name||n.stdin||n.merge_files||n.combine_files||!n.files||n.files.length<2?t:n.files.reduce(function(e,r){var i={name:"i",options:c.defaults({files:[r],replace:!0},n)};return e.push(i),e.push.apply(e,t.slice(1)),e},[])},c.reduceAsync=function(t,e,n,r){var o=void 0===i?setTimeout:i,a=0;!function e(i,s){if(i)return r(i,null);o(function(){a<t.length==!1?r(null,s):n(s,t[a++],e)},0)}(null,e)},v.runAndRemoveInfoCommands=function(t){return t.filter(function(t){if("version"==t.name)w(v.VERSION);else if("encodings"==t.name)v.printEncodings();else if("projections"==t.name)v.printProjections();else if("verbose"==t.name)v.setStateVar("VERBOSE",!0);else if("quiet"==t.name)v.setStateVar("QUIET",!0);else{if("debug"!=t.name)return!0;v.setStateVar("DEBUG",!0)}return!1})},v.clipIterByBounds=function(t,e){for(var n,r,i,o,a=[],s=function(t){return[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin]]}(e);t.hasNext();)de(a,r,n=[t.x,t.y],s),r=n,i||(i=n);return(o=ce(i,n))&&a.length>0&&!ce(a[0],a[a.length-1])&&a.push(a[0].concat()),(o&&a.length<4||a.length<2)&&(a=[]),a},m.cli=st,m.internal=v,m.utils=c,m.geom=H,mapshaper=m,c.extend(m.internal,{Catalog:ue,DataTable:rt,BinArray:d,DouglasPeucker:Zt,Visvalingam:Kt,Heap:$t,ShpReader:Jt,ShpType:qt,Dbf:et,DbfReader:nt,ShapefileTable:Ht,ArcCollection:Z,PointIter:function(t){var e=t.length,n=0,r={x:0,y:0,hasNext:function(){return!(n>=e)&&(r.x=t[n][0],r.y=t[n][1],n++,!0)}};return r},ArcIter:W,ShapeIter:K,Bounds:h,Transform:p,NodeCollection:gt,PolygonIndex:Ct,PathIndex:Pt,topojson:Gt,geojson:mt,svg:Ut,UserError:x}),void 0===(a="function"==typeof(o=m)?o.call(e,n,e,t):o)||(t.exports=a)}()}).call(this,n(22),n(174).setImmediate)},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(4),i=n(8),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(4),i=n(14);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){t.exports=n(4)},function(t,e,n){var r=n(71),i=n(56).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(7),i=n(128),o=n(56),a=n(39),s=n(76),u=n(51),c=n(38)("IE_PROTO"),l=function(){},f=function(){var t,e=u("iframe"),n=o.length;for(e.style.display="none",s.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),f=t.F;n--;)delete f.prototype[o[n]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=r(t),n=new l,l.prototype=null,n[c]=t):n=f(),void 0===e?n:i(n,e)},a[c]=!0},function(t,e,n){var r=n(60),i=n(28),o=n(17),a=n(19),s=n(61),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,f=6==t,p=5==t||f;return function(h,d,g,y){for(var m,v,_=o(h),b=i(_),x=r(d,g,3),S=a(b.length),w=0,E=y||s,I=e?E(h,S):n?E(h,0):void 0;S>w;w++)if((p||w in b)&&(v=x(m=b[w],w,_),t))if(e)I[w]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return w;case 2:u.call(I,m)}else if(l)return!1;return f?-1:c||l?l:I}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(t,e,n){var r=n(24);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(8),i=n(41),o=n(3)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){"use strict";var r=n(20),i=n(131),o=n(32),a=n(31),s=n(83),u=a.set,c=a.getterFor("Array Iterator");t.exports=s(Array,"Array",function(t,e){u(this,{type:"Array Iterator",target:r(t),index:0,kind:e})},function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";(function(e){var r=n(26).Buffer,i=n(179),o=t.exports;o.encodings=null,o.defaultCharUnicode="",o.defaultCharSingleByte="?",o.encode=function(t,e,n){t=""+(t||"");var i=o.getEncoder(e,n),a=i.write(t),s=i.end();return s&&s.length>0?r.concat([a,s]):a},o.decode=function(t,e,n){"string"==typeof t&&(o.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),o.skipDecodeWarning=!0),t=r.from(""+(t||""),"binary"));var i=o.getDecoder(e,n),a=i.write(t),s=i.end();return s?a+s:a},o.encodingExists=function(t){try{return o.getCodec(t),!0}catch(t){return!1}},o.toEncoding=o.encode,o.fromEncoding=o.decode,o._codecDataCache={},o.getCodec=function(t){o.encodings||(o.encodings=n(180));for(var e=o._canonicalizeEncoding(t),r={};;){var i=o._codecDataCache[e];if(i)return i;var a=o.encodings[e];switch(typeof a){case"string":e=a;break;case"object":for(var s in a)r[s]=a[s];r.encodingName||(r.encodingName=e),e=a.type;break;case"function":return r.encodingName||(r.encodingName=e),i=new a(r,o),o._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+t+"' (searched as: '"+e+"')")}}},o._canonicalizeEncoding=function(t){return(""+t).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},o.getEncoder=function(t,e){var n=o.getCodec(t),r=new n.encoder(e,n);return n.bomAware&&e&&e.addBOM&&(r=new i.PrependBOM(r,e)),r},o.getDecoder=function(t,e){var n=o.getCodec(t),r=new n.decoder(e,n);return!n.bomAware||e&&!1===e.stripBOM||(r=new i.StripBOM(r,e)),r};var a=void 0!==e&&e.versions&&e.versions.node;if(a){var s=a.split(".").map(Number);(s[0]>0||s[1]>=10)&&n(196)(o),n(197)(o)}}).call(this,n(22))},function(t){t.exports=JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]')},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Array.isArray,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n};t.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var o=e[r],a=o.obj[o.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],l=a[c];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(e.push({obj:a,prop:c}),n.push(l))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(i(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(t){return r}},encode:function(t,e,n){if(0===t.length)return t;var r=t;if("symbol"==typeof t?r=Symbol.prototype.toString.call(t):"string"!=typeof t&&(r=String(t)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"});for(var i="",a=0;a<r.length;++a){var s=r.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=r.charAt(a):s<128?i+=o[s]:s<2048?i+=o[192|s>>6]+o[128|63&s]:s<55296||s>=57344?i+=o[224|s>>12]+o[128|s>>6&63]+o[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&r.charCodeAt(a)),i+=o[240|s>>18]+o[128|s>>12&63]+o[128|s>>6&63]+o[128|63&s])}return i},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,o){if(!n)return e;if("object"!=typeof n){if(i(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(o&&(o.plainObjects||o.allowPrototypes)||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var s=e;return i(e)&&!i(n)&&(s=a(e,o)),i(e)&&i(n)?(n.forEach(function(n,i){if(r.call(e,i)){var a=e[i];a&&"object"==typeof a&&n&&"object"==typeof n?e[i]=t(a,n,o):e.push(n)}else e[i]=n}),e):Object.keys(n).reduce(function(e,i){var a=n[i];return r.call(e,i)?e[i]=t(e[i],a,o):e[i]=a,e},s)}}},function(t,e,n){"use strict";n.r(e);var r={},i={},o=34,a=10,s=13;function u(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}var c=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function c(t,e){var u,c=[],l=t.length,f=0,p=0,h=l<=0,d=!1;function g(){if(h)return i;if(d)return d=!1,r;var e,u,c=f;if(t.charCodeAt(c)===o){for(;f++<l&&t.charCodeAt(f)!==o||t.charCodeAt(++f)===o;);return(e=f)>=l?h=!0:(u=t.charCodeAt(f++))===a?d=!0:u===s&&(d=!0,t.charCodeAt(f)===a&&++f),t.slice(c+1,e-1).replace(/""/g,'"')}for(;f<l;){if((u=t.charCodeAt(e=f++))===a)d=!0;else if(u===s)d=!0,t.charCodeAt(f)===a&&++f;else if(u!==n)continue;return t.slice(c,e)}return h=!0,t.slice(c,l)}for(t.charCodeAt(l-1)===a&&--l,t.charCodeAt(l-1)===s&&--l;(u=g())!==i;){for(var y=[];u!==r&&u!==i;)y.push(u),u=g();e&&null==(y=e(y,p++))||c.push(y)}return c}function l(e){return e.map(f).join(t)}function f(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,i=c(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=u(t);return function(r,i){return e(n(r),i,t)}}(t,e):u(t)});return i.columns=r||[],i},parseRows:c,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(f).join(t)].concat(e.map(function(e){return n.map(function(t){return f(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(l).join("\n")}}},l=c(","),f=l.parse,p=l.parseRows,h=l.format,d=l.formatRows,g=c("\t"),y=g.parse,m=g.parseRows,v=g.format,_=g.formatRows;n.d(e,"dsvFormat",function(){return c}),n.d(e,"csvParse",function(){return f}),n.d(e,"csvParseRows",function(){return p}),n.d(e,"csvFormat",function(){return h}),n.d(e,"csvFormatRows",function(){return d}),n.d(e,"tsvParse",function(){return y}),n.d(e,"tsvParseRows",function(){return m}),n.d(e,"tsvFormat",function(){return v}),n.d(e,"tsvFormatRows",function(){return _})},function(t,e,n){"use strict";var r=n(2),i=n(4),o=n(30),a=n(13),s=n(75),u=n(5),c=n(10),l=n(41),f=n(8),p=n(7),h=n(17),d=n(20),g=n(37),y=n(27),m=n(58),v=n(42),_=n(55),b=n(129),x=n(57),S=n(36),w=n(15),E=n(50),I=n(14),C=n(21),P=n(29),N=n(38),A=n(39),T=n(53),O=n(3),M=n(77),L=n(78),R=n(43),D=n(31),F=n(59).forEach,k=N("hidden"),B=O("toPrimitive"),j=D.set,G=D.getterFor("Symbol"),U=Object.prototype,q=i.Symbol,z=i.JSON,V=z&&z.stringify,Y=S.f,X=w.f,J=b.f,H=E.f,W=P("symbols"),$=P("op-symbols"),K=P("string-to-symbol-registry"),Z=P("symbol-to-string-registry"),Q=P("wks"),tt=i.QObject,et=!tt||!tt.prototype||!tt.prototype.findChild,nt=a&&u(function(){return 7!=m(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Y(U,e);r&&delete U[e],X(t,e,n),r&&t!==U&&X(U,e,r)}:X,rt=function(t,e){var n=W[t]=m(q.prototype);return j(n,{type:"Symbol",tag:t,description:e}),a||(n.description=e),n},it=s&&"symbol"==typeof q.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof q},ot=function(t,e,n){t===U&&ot($,e,n),p(t);var r=g(e,!0);return p(n),c(W,r)?(n.enumerable?(c(t,k)&&t[k][r]&&(t[k][r]=!1),n=m(n,{enumerable:y(0,!1)})):(c(t,k)||X(t,k,y(1,{})),t[k][r]=!0),nt(t,r,n)):X(t,r,n)},at=function(t,e){p(t);var n=d(e),r=v(n).concat(lt(n));return F(r,function(e){a&&!st.call(n,e)||ot(t,e,n[e])}),t},st=function(t){var e=g(t,!0),n=H.call(this,e);return!(this===U&&c(W,e)&&!c($,e))&&(!(n||!c(this,e)||!c(W,e)||c(this,k)&&this[k][e])||n)},ut=function(t,e){var n=d(t),r=g(e,!0);if(n!==U||!c(W,r)||c($,r)){var i=Y(n,r);return!i||!c(W,r)||c(n,k)&&n[k][r]||(i.enumerable=!0),i}},ct=function(t){var e=J(d(t)),n=[];return F(e,function(t){c(W,t)||c(A,t)||n.push(t)}),n},lt=function(t){var e=t===U,n=J(e?$:d(t)),r=[];return F(n,function(t){!c(W,t)||e&&!c(U,t)||r.push(W[t])}),r};s||(C((q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=T(t),n=function(t){this===U&&n.call($,t),c(this,k)&&c(this[k],e)&&(this[k][e]=!1),nt(this,e,y(1,t))};return a&&et&&nt(U,e,{configurable:!0,set:n}),rt(e,t)}).prototype,"toString",function(){return G(this).tag}),E.f=st,w.f=ot,S.f=ut,_.f=b.f=ct,x.f=lt,a&&(X(q.prototype,"description",{configurable:!0,get:function(){return G(this).description}}),o||C(U,"propertyIsEnumerable",st,{unsafe:!0})),M.f=function(t){return rt(O(t),t)}),r({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:q}),F(v(Q),function(t){L(t)}),r({target:"Symbol",stat:!0,forced:!s},{for:function(t){var e=String(t);if(c(K,e))return K[e];var n=q(e);return K[e]=n,Z[n]=e,n},keyFor:function(t){if(!it(t))throw TypeError(t+" is not a symbol");if(c(Z,t))return Z[t]},useSetter:function(){et=!0},useSimple:function(){et=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!a},{create:function(t,e){return void 0===e?m(t):at(m(t),e)},defineProperty:ot,defineProperties:at,getOwnPropertyDescriptor:ut}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ct,getOwnPropertySymbols:lt}),r({target:"Object",stat:!0,forced:u(function(){x.f(1)})},{getOwnPropertySymbols:function(t){return x.f(h(t))}}),z&&r({target:"JSON",stat:!0,forced:!s||u(function(){var t=q();return"[null]"!=V([t])||"{}"!=V({a:t})||"{}"!=V(Object(t))})},{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(f(e)||void 0!==t)&&!it(t))return l(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!it(e))return e}),r[1]=e,V.apply(z,r)}}),q.prototype[B]||I(q.prototype,B,q.prototype.valueOf),R(q,"Symbol"),A[k]=!0},function(t,e,n){var r=n(13),i=n(5),o=n(51);t.exports=!r&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(29);t.exports=r("native-function-to-string",Function.toString)},function(t,e,n){var r=n(10),i=n(127),o=n(36),a=n(15);t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},function(t,e,n){var r=n(10),i=n(20),o=n(72).indexOf,a=n(39);t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(20),i=n(19),o=n(73),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(23),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r=n(5),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(5);t.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},function(t,e,n){var r=n(40);t.exports=r("document","documentElement")},function(t,e,n){e.f=n(3)},function(t,e,n){var r=n(54),i=n(10),o=n(77),a=n(15).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){"use strict";var r=n(2),i=n(13),o=n(4),a=n(10),s=n(8),u=n(15).f,c=n(70),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(f[e]=!0),e};c(p,l);var h=p.prototype=l.prototype;h.constructor=p;var d=h.toString,g="Symbol(test)"==String(l("test")),y=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=d.call(t);if(a(f,t))return"";var n=g?e.slice(7,-1):e.replace(y,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},function(t,e,n){n(78)("iterator")},function(t,e,n){"use strict";var r=n(2),i=n(5),o=n(41),a=n(8),s=n(17),u=n(19),c=n(82),l=n(61),f=n(44),p=n(3)("isConcatSpreadable"),h=!i(function(){var t=[];return t[p]=!1,t.concat()[0]!==t}),d=f("concat"),g=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!h||!d},{concat:function(t){var e,n,r,i,o,a=s(this),f=l(a,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],g(o)){if(p+(i=u(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,p++)n in o&&c(f,p,o[n])}else{if(p>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(f,p++,o)}return f.length=p,f}})},function(t,e,n){"use strict";var r=n(37),i=n(15),o=n(27);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){"use strict";var r=n(2),i=n(132),o=n(85),a=n(134),s=n(43),u=n(14),c=n(21),l=n(3),f=n(30),p=n(32),h=n(84),d=h.IteratorPrototype,g=h.BUGGY_SAFARI_ITERATORS,y=l("iterator"),m=function(){return this};t.exports=function(t,e,n,l,h,v,_){i(n,e,l);var b,x,S,w=function(t){if(t===h&&N)return N;if(!g&&t in C)return C[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},E=e+" Iterator",I=!1,C=t.prototype,P=C[y]||C["@@iterator"]||h&&C[h],N=!g&&P||w(h),A="Array"==e&&C.entries||P;if(A&&(b=o(A.call(new t)),d!==Object.prototype&&b.next&&(f||o(b)===d||(a?a(b,d):"function"!=typeof b[y]&&u(b,y,m)),s(b,E,!0,!0),f&&(p[E]=m))),"values"==h&&P&&"values"!==P.name&&(I=!0,N=function(){return P.call(this)}),f&&!_||C[y]===N||u(C,y,N),p[e]=N,h)if(x={values:w("values"),keys:v?N:w("keys"),entries:w("entries")},_)for(S in x)!g&&!I&&S in C||c(C,S,x[S]);else r({target:e,proto:!0,forced:g||I},x);return x}},function(t,e,n){"use strict";var r,i,o,a=n(85),s=n(14),u=n(10),c=n(3),l=n(30),f=c("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):p=!0),null==r&&(r={}),l||u(r,f)||s(r,f,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(t,e,n){var r=n(10),i=n(17),o=n(38),a=n(133),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){"use strict";var r=n(2),i=n(59).map;r({target:"Array",proto:!0,forced:!n(44)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(2),i=n(137).left;r({target:"Array",proto:!0,forced:n(45)("reduce")},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(2),i=n(24),o=n(17),a=n(5),s=n(45),u=[].sort,c=[1,2,3],l=a(function(){c.sort(void 0)}),f=a(function(){c.sort(null)}),p=s("sort");r({target:"Array",proto:!0,forced:l||!f||p},{sort:function(t){return void 0===t?u.call(o(this)):u.call(o(this),i(t))}})},function(t,e,n){var r=n(2),i=n(13);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(15).f})},function(t,e,n){var r=n(21),i=n(141),o=Object.prototype;i!==o.toString&&r(o,"toString",i,{unsafe:!0})},function(t,e,n){var r=n(16),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,n){var r=n(7),i=n(24),o=n(3)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(4),s=n(5),u=n(16),c=n(60),l=n(76),f=n(51),p=a.location,h=a.setImmediate,d=a.clearImmediate,g=a.process,y=a.MessageChannel,m=a.Dispatch,v=0,_={},b=function(t){if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},x=function(t){return function(){b(t)}},S=function(t){b(t.data)},w=function(t){a.postMessage(t+"",p.protocol+"//"+p.host)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++v]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(v),v},d=function(t){delete _[t]},"process"==u(g)?r=function(t){g.nextTick(x(t))}:m&&m.now?r=function(t){m.now(x(t))}:y?(o=(i=new y).port2,i.port1.onmessage=S,r=c(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(w)?r="onreadystatechange"in f("script")?function(t){l.appendChild(f("script")).onreadystatechange=function(){l.removeChild(this),b(t)}}:function(t){setTimeout(x(t),0)}:(r=w,a.addEventListener("message",S,!1))),t.exports={set:h,clear:d}},function(t,e,n){var r=n(40);t.exports=r("navigator","userAgent")||""},function(t,e,n){"use strict";var r=n(24),i=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var r=n(98).charAt,i=n(31),o=n(83),a=i.set,s=i.getterFor("String Iterator");o(String,"String",function(t){a(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=s(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(23),i=n(18),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){"use strict";var r=n(14),i=n(21),o=n(5),a=n(3),s=n(46),u=a("species"),c=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),l=!o(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]});t.exports=function(t,e,n,f){var p=a(t),h=!o(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),d=h&&!o(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[p](""),!e});if(!h||!d||"replace"===t&&!c||"split"===t&&!l){var g=/./[p],y=n(p,""[t],function(t,e,n,r,i){return e.exec===s?h&&!i?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),m=y[0],v=y[1];i(String.prototype,t,m),i(RegExp.prototype,p,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)}),f&&r(RegExp.prototype[p],"sham",!0)}}},function(t,e,n){"use strict";var r=n(98).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(16),i=n(46);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){var r=n(4),i=n(164),o=n(62),a=n(14),s=n(3),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var f in i){var p=r[f],h=p&&p.prototype;if(h){if(h[u]!==l)try{a(h,u,l)}catch(t){h[u]=l}if(h[c]||a(h,c,f),i[f])for(var d in o)if(h[d]!==o[d])try{a(h,d,o[d])}catch(t){h[d]=o[d]}}}},function(t,e,n){"use strict";var r=n(104),i=n(168),o=n(169),a=n(171),s=5;function u(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function c(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",c(t.slice(0,e)),",",c(t.slice(e)),")"].join("")}function l(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",c(l(u(t,n))),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));return e;var r}function f(t){for(var e=[],n=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),f=[],p=0;p<t;++p)0==(1&p)?e.push.apply(e,l(u(s,p))):n.push.apply(n,l(u(s,p))),f.push("m"+p);var h=c(e),d=c(n),g="orientation"+t+"Exact",y=["function ",g,"(",f.join(),"){var p=",h,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",g].join("");return new Function("sum","prod","scale","sub",y)(i,r,o,a)}var p=f(3),h=f(4),d=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=i-o;if(i>0){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(o>=0)return a;r=-(i+o)}var s=33306690738754716e-32*r;return a>=s||a<=-s?a:p(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],s=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],f=e[2]-r[2],p=n[2]-r[2],d=o*c,g=a*u,y=a*s,m=i*c,v=i*u,_=o*s,b=l*(d-g)+f*(y-m)+p*(v-_),x=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(l)+(Math.abs(y)+Math.abs(m))*Math.abs(f)+(Math.abs(v)+Math.abs(_))*Math.abs(p));return b>x||-b>x?b:h(t,e,n,r)}];function g(t){var e=d[t.length];return e||(e=d[t.length]=f(t.length)),e.apply(void 0,t)}!function(){for(;d.length<=s;)d.push(f(d.length));for(var e=[],n=["slow"],r=0;r<=s;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=s;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var o=Function.apply(void 0,n);for(t.exports=o.apply(void 0,[g].concat(d)),r=0;r<=s;++r)t.exports[r]=d[r]}()},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=t*e,o=r*t,a=o-(o-t),s=t-a,u=r*e,c=u-(u-e),l=e-c,f=s*l-(i-a*c-s*c-a*l);if(n)return n[0]=f,n[1]=i,n;return[f,i]};var r=+(Math.pow(2,27)+1)},function(t){t.exports=JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]')},function(t){t.exports=JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]')},function(t,e,n){e.dash=n(198),e.readFile=n(108),e.readFileSync=n(110),e.writeFile=n(111),e.writeFileSync=n(113)},function(t,e,n){(function(e){var r=n(12),i=n(109);function o(t,e,n){var r=i(e);t.on("error",n),t.on("data",function(t){r.push(t)}),t.on("end",function(){n(null,r.value())})}t.exports=function(t,n,i){switch(arguments.length<3&&(i=n,n=null),t){case"/dev/stdin":return o(e.stdin,n,i)}r.stat(t,function(e,a){return e?i(e):a.isFile()?r.readFile(t,n,i):void o(r.createReadStream(t,n?{flags:n.flag||"r"}:{}),n,i)})}}).call(this,n(22))},function(t,e,n){(function(e){function n(t){var n=[];return{push:function(t){n.push(t)},value:function(){return e.concat(n).toString(t)}}}t.exports=function(t){if(t){if("string"==typeof t)return n(t);if(null!==t.encoding)return n(t.encoding)}return r=[],{push:function(t){r.push(t)},value:function(){return e.concat(r)}};var r}}).call(this,n(25).Buffer)},function(t,e,n){(function(e){var r=n(12),i=n(109);t.exports=function(t,n){if(r.statSync(t).isFile())return r.readFileSync(t,n);for(var a=r.openSync(t,n&&n.flag||"r"),s=i(n);;){try{var u=new e(o),c=r.readSync(a,u,0,o)}catch(t){if("EOF"===t.code)break;throw r.closeSync(a),t}if(0===c)break;s.push(u.slice(0,c))}return r.closeSync(a),s.value()};var o=65536}).call(this,n(25).Buffer)},function(t,e,n){(function(e){var r=n(12),i=n(112);function o(t,e,n,r,o){t.on("error",function(t){o("EPIPE"===t.code?null:t)}),t[e](i(n,r),function(t){o(t&&"EPIPE"===t.code?null:t)})}t.exports=function(t,n,i,a){switch(arguments.length<4&&(a=i,i=null),t){case"/dev/stdout":return o(e.stdout,"write",n,i,a);case"/dev/stderr":return o(e.stderr,"write",n,i,a)}r.stat(t,function(e,s){return e&&"ENOENT"!==e.code?a(e):s&&s.isFile()?r.writeFile(t,n,i,a):void o(r.createWriteStream(t,i?{flags:i.flag||"w"}:{}),"end",n,i,a)})}}).call(this,n(22))},function(t,e,n){(function(e){t.exports=function(t,n){return"string"==typeof t?new e(t,"string"==typeof n?n:n&&null!==n.encoding?n.encoding:"utf8"):t}}).call(this,n(25).Buffer)},function(t,e,n){var r=n(12),i=n(112);t.exports=function(t,e,n){var o;try{o=r.statSync(t)}catch(t){if("ENOENT"!==t.code)throw t}if(!o||o.isFile())r.writeFileSync(t,e,n);else{for(var a=r.openSync(t,n&&n.flag||"w"),s=0,u=(e=i(e,n)).length;s<u;)try{s+=r.writeSync(a,e,s,u-s,null)}catch(t){if("EPIPE"===t.code)break;throw r.closeSync(a),t}r.closeSync(a)}}},function(t,e,n){"use strict";var r=String.prototype.replace,i=/%20/g,o=n(65),a={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports=o.assign({default:a.RFC3986,formatters:{RFC1738:function(t){return r.call(t,i,"+")},RFC3986:function(t){return String(t)}}},a)},function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=115},function(t,e,n){"use strict";var r=n(9);e.a=function(){for(var t=new r.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=r.UnionOp.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new r.GeoJSONWriter).write(e),properties:arguments[0].properties}}},function(t,e,n){"use strict";var r=n(165),i=n(167),o=n(172),a=n(173),s=n(103)[3];function u(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var o,s=function(t){for(var e=t[0],n=t[0],r=t[0],o=t[0],s=0;s<t.length;s++){var u=t[s];u[0]<e[0]&&(e=u),u[0]>r[0]&&(r=u),u[1]<n[1]&&(n=u),u[1]>o[1]&&(o=u)}var c=[e,n,r,o],l=c.slice();for(s=0;s<t.length;s++)a(t[s],c)||l.push(t[s]);var f=i(l),p=[];for(s=0;s<f.length;s++)p.push(l[f[s]]);return p}(t),u=r(16,["[0]","[1]","[0]","[1]"]).load(t),l=[],f=0;f<s.length;f++){var p=s[f];u.remove(p),o=g(p,o),l.push(o)}var h=r(16);for(f=0;f<l.length;f++)h.insert(d(l[f]));for(var m=e*e,v=n*n;l.length;){var _=l.shift(),b=_.p,x=_.next.p,S=y(b,x);if(!(S<v)){var w=S/m;(p=c(u,_.prev.p,b,x,_.next.next.p,w,h))&&Math.min(y(p,b),y(p,x))<=w&&(l.push(_),l.push(g(p,_)),u.remove(p),h.remove(_),h.insert(d(_)),h.insert(d(_.next)))}}_=o;var E=[];do{E.push(_.p),_=_.next}while(_!==o);return E.push(_.p),E}function c(t,e,n,r,i,a,s){for(var u=new o(null,l),c=t.data;c;){for(var p=0;p<c.children.length;p++){var d=c.children[p],g=c.leaf?m(d,n,r):f(n,r,d);g>a||u.push({node:d,dist:g})}for(;u.length&&!u.peek().node.children;){var y=u.pop(),v=y.node,_=m(v,e,n),b=m(v,r,i);if(y.dist<_&&y.dist<b&&h(n,v,s)&&h(r,v,s))return v}(c=u.pop())&&(c=c.node)}return null}function l(t,e){return t.dist-e.dist}function f(t,e,n){if(p(t,n)||p(e,n))return 0;var r=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=v(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=v(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function p(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function h(t,e,n){for(var r,i,o,a,u=Math.min(t[0],e[0]),c=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),f=Math.max(t[1],e[1]),p=n.search({minX:u,minY:c,maxX:l,maxY:f}),h=0;h<p.length;h++)if(r=p[h].p,i=p[h].next.p,o=t,r!==(a=e)&&i!==o&&s(r,i,o)>0!=s(r,i,a)>0&&s(o,a,r)>0!=s(o,a,i)>0)return!1;return!0}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function y(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function m(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function v(t,e,n,r,i,o,a,s){var u,c,l,f,p=n-t,h=r-e,d=a-i,g=s-o,y=t-i,m=e-o,v=p*p+h*h,_=p*d+h*g,b=d*d+g*g,x=p*y+h*m,S=d*y+g*m,w=v*b-_*_,E=w,I=w;0===w?(c=0,E=1,f=S,I=b):(f=v*S-_*x,(c=_*S-b*x)<0?(c=0,f=S,I=b):c>E&&(c=E,f=S+_,I=b)),f<0?(f=0,-x<0?c=0:-x>v?c=E:(c=-x,E=v)):f>I&&(f=I,-x+_<0?c=0:-x+_>v?c=E:(c=-x+_,E=v));var C=(1-(l=0===f?0:f/I))*i+l*a-((1-(u=0===c?0:c/E))*t+u*n),P=(1-l)*o+l*s-((1-u)*e+u*r);return C*C+P*P}t.exports=u,t.exports.default=u},function(t,e,n){"use strict";var r=n(6),i=n(0);e.a=function(t,e){var n=0,o=0,a=0;return Object(r.a)(t,function(t){n+=t[0],o+=t[1],a++},!0),Object(i.f)([n/a,o/a],e)}},function(t,e,n){"use strict";function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function i(t,e){return t<e?-1:t>e?1:0}var o=function(t,e,n,o,a){!function t(e,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=n-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1),p=Math.max(i,Math.floor(n-u*l/s+f)),h=Math.min(o,Math.floor(n+(s-u)*l/s+f));t(e,n,p,h,a)}var d=e[n],g=i,y=o;for(r(e,i,n),a(e[o],d)>0&&r(e,i,o);g<y;){for(r(e,g,y),g++,y--;a(e[g],d)<0;)g++;for(;a(e[y],d)>0;)y--}0===a(e[i],d)?r(e,i,y):r(e,++y,o),y<=n&&(i=y+1),n<=y&&(o=y-1)}}(t,e,n||0,o||t.length-1,a||i)};function a(t,e){if(!(this instanceof a))return new a(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function s(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function u(t,e){c(t,0,t.children.length,e,t)}function c(t,e,n,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],l(i,t.leaf?r(o):o);return i}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function f(t,e){return t.minX-e.minX}function p(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function g(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,r,i){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(a=e+Math.ceil((n-e)/r/2)*r,o(t,a,e,n,i),s.push(e,a,a,n))}a.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!y(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],y(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):g(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!y(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],y(t,a=e.leaf?n(o):o)){if(e.leaf||g(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,u=this.toBBox(t),c=[],l=[];a||c.length;){if(a||(a=c.pop(),r=c[c.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(i=s(t,a.children,e)))return a.children.splice(i,1),c.push(a),this._condense(c),this;o||a.leaf||!g(a,u)?r?(n++,a=r.children[n],o=!1):a=null:(c.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:f,compareMinY:p,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return u(i=m(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=m([])).leaf=!1,i.height=r;var s,c,l,f,p=Math.ceil(o/a),h=p*Math.ceil(Math.sqrt(a));for(v(t,e,n,h,this.compareMinX),s=e;s<=n;s+=h)for(v(t,s,l=Math.min(s+h-1,n),p,this.compareMinY),c=s;c<=l;c+=p)f=Math.min(c+p-1,l),i.children.push(this._build(t,c,f,r-1));return u(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,f,p,d;r.push(e),!e.leaf&&r.length-1!==n;){for(l=f=1/0,i=0,o=e.children.length;i<o;i++)u=h(a=e.children[i]),p=t,d=a,(c=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u)<f?(f=c,l=u<l?u:l,s=a):c===f&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),l(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=m(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,u(n,this.toBBox),u(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,l,f,p,d,g,y,m,v;for(u=l=1/0,r=e;r<=n-e;r++)i=c(t,0,r,this.toBBox),o=c(t,r,n,this.toBBox),p=i,d=o,g=void 0,y=void 0,m=void 0,v=void 0,g=Math.max(p.minX,d.minX),y=Math.max(p.minY,d.minY),m=Math.min(p.maxX,d.maxX),v=Math.min(p.maxY,d.maxY),a=Math.max(0,m-g)*Math.max(0,v-y),s=h(i)+h(o),a<u?(u=a,f=r,l=s<l?s:l):a===u&&s<l&&(l=s,f=r);return f},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:f,i=t.leaf?this.compareMinY:p;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=c(t,0,e,a),u=c(t,n-e,n,a),f=d(s)+d(u);for(i=e;i<n-e;i++)o=t.children[i],l(s,t.leaf?a(o):o),f+=d(s);for(i=n-e-1;i>=e;i--)o=t.children[i],l(u,t.leaf?a(o):o),f+=d(u);return f},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)l(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():u(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var _=a,b=n(6);function x(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function S(t){var e=[1/0,1/0,-1/0,-1/0];return Object(b.a)(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}var w=function(t){var e=_(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=x(e)).bbox=e}else t.bbox=t.bbox?t.bbox:S(t);return _.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=x(t);n.bbox=t,e.push(n)}):Object(b.b)(t,function(t){t.bbox=t.bbox?t.bbox:S(t),e.push(t)}),_.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=x(e)).bbox=e}return _.prototype.remove.call(this,t)},e.clear=function(){return _.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:_.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return _.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:_.prototype.all.call(this)}},e.toJSON=function(){return _.prototype.toJSON.call(this)},e.fromJSON=function(t){return _.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:S(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e},E=n(0),I=n(1);var C=function(t){if(!t)throw new Error("geojson is required");var e=[];return Object(b.c)(t,function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=Object(I.b)(r);break;case"LineString":n=[Object(I.b)(r)]}n.forEach(function(n){(function(t,e){var n=[];return t.reduce(function(t,r){var i,o,a,s,u,c,l=Object(E.e)([t,r],e);return l.bbox=(o=r,a=(i=t)[0],s=i[1],u=o[0],c=o[1],[a<u?a:u,s<c?s:c,a>u?a:u,s>c?s:c]),n.push(l),r}),n})(n,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),Object(E.b)(e)};function P(t,e){var n=Object(I.b)(t),r=Object(I.b)(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],u=r[0][0],c=r[0][1],l=r[1][0],f=r[1][1],p=(f-c)*(a-i)-(l-u)*(s-o),h=(l-u)*(o-c)-(f-c)*(i-u),d=(a-i)*(o-c)-(s-o)*(i-u);if(0===p)return null;var g=h/p,y=d/p;if(g>=0&&g<=1&&y>=0&&y<=1){var m=i+g*(a-i),v=o+g*(s-o);return Object(E.f)([m,v])}return null}e.a=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=Object(E.a)(t)),"LineString"===e.type&&(e=Object(E.a)(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=P(t,e);return i&&r.push(i),Object(E.b)(r)}var o=w();return o.load(C(e)),Object(b.b)(C(t),function(t){Object(b.b)(o.search(t),function(e){var i=P(t,e);if(i){var o=Object(I.b)(i).join(",");n[o]||(n[o]=!0,r.push(i))}})}),Object(E.b)(r)}},function(t,e,n){"use strict";var r=n(9),i=n(6),o=n(0);var a=function(t,e){if(e=e||{},!Object(o.d)(e))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,a=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==a&&void 0!==a||(t=JSON.parse(JSON.stringify(t)));var s=Math.pow(10,n);return Object(i.a)(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,s,r)}),t},s=n(1);function u(t){var e,n,r,i,o,a=Object(s.b)(t);if(2===a.length&&(e=a[0],n=a[1],e[0]!==n[0]||e[1]!==n[1]))return a;var u=[],l=a.length-1;u.push(a[0]);for(var f=1;f<l;f++)r=a[f-1],i=a[f],c(r,o=a[f+1],i)||u.push(i);return u.push(o),u}function c(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],c=s-o,l=u-a;return 0===(r-o)*l-(i-a)*c&&(Math.abs(c)>=Math.abs(l)?c>0?o<=r&&r<=s:s<=r&&r<=o:l>0?a<=i&&i<=u:u<=i&&i<=a)}var l=function(t,e){var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=Object(s.d)(t),i=[];switch(r){case"LineString":i=u(t);break;case"MultiLineString":case"Polygon":Object(s.b)(t).forEach(function(t){i.push(u(t))});break;case"MultiPolygon":Object(s.b)(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(u(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var a={};Object(s.b)(t).forEach(function(t){var e=t.join("-");a.hasOwnProperty(e)||(i.push(t),a[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):Object(o.a)({type:r,coordinates:i},t.properties,t.bbox,t.id)};e.a=function(t,e){var n=Object(s.c)(t),i=Object(s.c)(e);if(l(a(i,{precision:4})).coordinates[0].length<4)return null;if(l(a(n,{precision:4})).coordinates[0].length<4)return null;var u=new r.GeoJSONReader,c=u.read(a(n)),f=u.read(a(i)),p=r.OverlayOp.intersection(c,f);if(p.isEmpty())return null;var h=(new r.GeoJSONWriter).write(p);return Object(o.a)(h)}},function(t,e,n){"use strict";var r=n(9),i=n(6);var o=6378137;function a(t){var e=0;if(t&&t.length>0){e+=Math.abs(s(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(s(t[n]))}return e}function s(t){var e,n,r,i,a,s,c=0,l=t.length;if(l>2){for(s=0;s<l;s++)s===l-2?(r=l-2,i=l-1,a=0):s===l-1?(r=l-1,i=0,a=1):(r=s,i=s+1,a=s+2),e=t[r],n=t[i],c+=(u(t[a][0])-u(e[0]))*Math.sin(u(n[1]));c=c*o*o/2}return c}function u(t){return t*Math.PI/180}var c=function(t){return Object(i.d)(t,function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return a(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=a(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)},0)},l=n(0),f=n(1);function p(t){switch(t.type){case"Polygon":return c(t)>1?t:null;case"MultiPolygon":var e=[];if(Object(i.c)(t,function(t){c(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}e.a=function(t,e){var n=Object(f.c)(t),i=Object(f.c)(e),o=t.properties||{};if(n=p(n),i=p(i),!n)return null;if(!i)return Object(l.a)(n,o);var a=new r.GeoJSONReader,s=a.read(n),u=a.read(i),c=r.OverlayOp.difference(s,u);if(c.isEmpty())return null;var h=(new r.GeoJSONWriter).write(c);return Object(l.a)(h,o)}},function(t,e,n){t.exports=n(123)},function(t,e,n){var r=n(124);window.Tin=r.default},function(t,e,n){"use strict";n.r(e),function(t){n(67),n(79),n(80),n(81),n(130),n(62),n(136),n(86),n(87),n(88),n(138),n(89),n(140),n(90),n(142),n(145),n(159),n(97),n(161),n(162),n(102);var r=n(0),i=n(116),o=n(48),a=n(121),s=n(33),u=n(118),c=n(119),l=n(120),f=n(49),p=n(34);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).bounds?this.setBounds(e.bounds):(this.setWh(e.wh),this.vertexMode=e.vertexMode||t.VERTEX_PLAIN),this.strictMode=e.strictMode||t.MODE_AUTO,this.yaxisMode=e.yaxisMode||t.YAXIS_INVERT,this.importance=e.importance||0,this.priority=e.priority||0,e.points&&this.setPoints(e.points),e.edges&&this.setEdges(e.edges)}var e,n,l;return e=t,(n=[{key:"setPoints",value:function(e){this.yaxisMode==t.YAXIS_FOLLOW&&(e=e.map(function(t){t[0],t[1][0],t[1][1]})),this.points=e,this.tins=void 0}},{key:"setEdges",value:function(t){t||(t=[]),this.edges=t,this.edgeNodes=void 0,this.tins=void 0}},{key:"setBounds",value:function(e){var n,i,o,a,s;this.bounds=e;for(var u=0;u<e.length;u++){var c=e[u];0==u?(n=o=c[0],i=a=c[1],s=[c]):(c[0]<n&&(n=c[0]),c[0]>o&&(o=c[0]),c[1]<i&&(i=c[1]),c[1]>a&&(a=c[1]),s.push(c))}s.push(e[0]),this.boundsPolygon=Object(r.g)([s]),this.xy=[n,i],this.wh=[o-n,a-i],this.vertexMode=t.VERTEX_PLAIN,this.tins=void 0}},{key:"setCompiled",value:function(e){var n=this;if(!e.tins&&e.points&&e.tins_points){this.points=e.points,this.pointsWeightBuffer=e.weight_buffer,e.strict_status?this.strict_status=e.strict_status:e.kinks_points?this.strict_status=t.STATUS_ERROR:2==e.tins_points.length?this.strict_status=t.STATUS_LOOSE:this.strict_status=t.STATUS_STRICT,this.vertices_params={forw:[e.vertices_params[0]],bakw:[e.vertices_params[1]]},this.vertices_params.forw[1]=[0,1,2,3].map(function(t){var n=(t+1)%4,i=I(["cent","bbox".concat(t),"bbox".concat(n)],e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!1);return Object(r.b)([i])}),this.vertices_params.bakw[1]=[0,1,2,3].map(function(t){var n=(t+1)%4,i=I(["cent","bbox".concat(t),"bbox".concat(n)],e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!0);return Object(r.b)([i])}),this.centroid={forw:Object(r.f)(e.centroid_point[0],{target:{geom:e.centroid_point[1],index:"cent"}}),bakw:Object(r.f)(e.centroid_point[1],{target:{geom:e.centroid_point[0],index:"cent"}})},this.edges=e.edges||[],this.edgeNodes=e.edgeNodes||[];var i=1==e.tins_points.length?0:1;this.tins={forw:Object(r.b)(e.tins_points[0].map(function(t){return I(t,e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!1)})),bakw:Object(r.b)(e.tins_points[i].map(function(t){return I(t,e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!0)}))},e.kinks_points&&(this.kinks={bakw:Object(r.b)(e.kinks_points.map(function(t){return Object(r.f)(t)}))}),e.yaxisMode?this.yaxisMode=e.yaxisMode:this.yaxisMode=t.YAXIS_INVERT,e.bounds?(this.bounds=e.bounds,this.boundsPolygon=e.boundsPolygon,this.xy=e.xy,this.wh=e.wh):(this.xy=[0,0],e.xy&&(this.wh=e.wh),this.bounds=void 0,this.boundsPolygon=void 0)}else!function(){n.tins=e.tins,n.strict_status=e.strict_status,n.pointsWeightBuffer=e.weight_buffer,n.vertices_params=e.vertices_params,n.centroid=e.centroid,n.kinks=e.kinks;for(var t=[],r=function(e){var r=n.tins.forw.features[e];["a","b","c"].map(function(e,n){var i=r.geometry.coordinates[0][n],o=r.properties[e].geom,a=r.properties[e].index;t[a]=[i,o]})},i=0;i<n.tins.forw.features.length;i++)r(i);n.points=t}();return{tins:this.tins,strict_status:this.strict_status,weight_buffer:this.pointsWeightBuffer,vertices_params:this.vertices_params,centroid:this.centroid,kinks:this.kinks}}},{key:"getCompiled",value:function(){var e={};e.points=this.points,e.weight_buffer=this.pointsWeightBuffer,e.centroid_point=[this.centroid.forw.geometry.coordinates,this.centroid.forw.properties.target.geom],e.vertices_params=[this.vertices_params.forw[0],this.vertices_params.bakw[0]],e.vertices_points=[];var n=this.vertices_params.forw[1];return[0,1,2,3].map(function(t){var r=n[t].features[0],i=r.geometry.coordinates[0][1],o=r.properties.b.geom;e.vertices_points[t]=[i,o]}),e.strict_status=this.strict_status,e.tins_points=[[]],this.tins.forw.features.map(function(t){e.tins_points[0].push(["a","b","c"].map(function(e){return t.properties[e].index}))}),this.strict_status==t.STATUS_LOOSE?(e.tins_points[1]=[],this.tins.bakw.features.map(function(t){e.tins_points[1].push(["a","b","c"].map(function(e){return t.properties[e].index}))})):this.strict_status==t.STATUS_ERROR&&(e.kinks_points=this.kinks.bakw.features.map(function(t){return t.geometry.coordinates})),this.yaxisMode==t.YAXIS_FOLLOW&&(e.yaxisMode=t.YAXIS_FOLLOW),this.bounds?(e.bounds=this.bounds,e.boundsPolygon=this.boundsPolygon,e.xy=this.xy,e.wh=this.wh):e.wh=this.wh,e.edges=this.edges,e.edgeNodes=this.edgeNodes,e}},{key:"setWh",value:function(t){this.wh=t,this.xy=[0,0],this.bounds=void 0,this.boundsPolygon=void 0,this.tins=void 0}},{key:"setVertexMode",value:function(t){this.vertexMode=t,this.tins=void 0}},{key:"setStrictMode",value:function(t){this.strictMode=t,this.tins=void 0}},{key:"calcurateStrictTinAsync",value:function(){var e=this,n=e.pointsSet.edges;return Promise.all(e.tins.forw.features.map(function(t){return Promise.resolve(E(t))})).then(function(t){e.tins.bakw=Object(r.b)(t)}).then(function(){var t={};return Promise.all(e.tins.forw.features.map(function(n,r){var i=e.tins.bakw.features[r];return Promise.resolve(P(t,{forw:n,bakw:i}))})).then(function(){return t}).catch(function(t){throw t})}).then(function(t){return[C(t),t]}).then(function(s){var u=s[0],c=s[1];return u.bakw&&Object.keys(u.bakw).map(function(t){if("Not include case"!=u.bakw[t]){var s=c[t],l=Object(i.a)(s[0].forw,s[1].forw),f=Object(o.a)(Object(r.b)([s[0].forw,s[1].forw]));if(!Object(a.a)(f,l)){var p=t.split("-");if(p[0].match(/^[0-9]+$/)&&p[1].match(/^[0-9]+$/))for(var h=p.map(function(t){return parseInt(t)}).sort(function(t,e){return t<e?-1:1}),d=0;d<n.length-1;d++)if(h[0]==n[d][0]&&h[1]==n[d][1])return;var g=p.map(function(t){return["a","b","c"].map(function(t,e){var n=s[0].bakw.properties[t];return{geom:s[0].bakw.geometry.coordinates[0][e],prop:n}}).filter(function(e){return e.prop.index==t})[0]}),y=s.map(function(t){return["a","b","c"].map(function(e,n){var r=t.bakw.properties[e];return{geom:t.bakw.geometry.coordinates[0][n],prop:r}}).filter(function(t){return t.prop.index!=g[0].prop.index&&t.prop.index!=g[1].prop.index})[0]});N(c,s[0],e.tins),N(c,s[1],e.tins),g.map(function(t){var n=[t.geom,y[0].geom,y[1].geom,t.geom],i={a:t.prop,b:y[0].prop,c:y[1].prop},o=Object(r.g)([n],i),a=E(o);P(c,{forw:a,bakw:o},e.tins)})}}}),Promise.all(["forw","bakw"].map(function(t){return new Promise(function(n){var i=function(t){var e=new f.internal.ArcCollection(t);return f.internal.findSegmentIntersections(e)}(e.tins[t].features.map(function(t){return t.geometry.coordinates[0]}));n(f.internal.dedupIntersections(i).reduce(function(t,e,n,i){return t||(t={}),t["".concat(e.x,":").concat(e.y)]=e,n!=i.length-1?t:Object.keys(t).map(function(e){return Object(r.f)([t[e].x,t[e].y])})},[]))}).catch(function(t){throw t})})).then(function(n){0==n[0].length&&0==n[1].length?(e.strict_status=t.STATUS_STRICT,delete e.kinks):(e.strict_status=t.STATUS_ERROR,e.kinks={},n[0].length>0&&(e.kinks.forw=Object(r.b)(n[0])),n[1].length>0&&(e.kinks.bakw=Object(r.b)(n[1])))}).catch(function(t){throw t})}).catch(function(t){throw t})}},{key:"generatePointsSet",value:function(){for(var t=this,e={forw:[],bakw:[]},n=0;n<t.points.length;n++){var i=_(t.points[n][0],t.points[n][1],n);e.forw.push(i),e.bakw.push(b(i))}var o=[],a=0;t.edgeNodes=[],t.edges||(t.edges=[]);for(var s=function(n){var r=t.edges[n].startEnd,i=Object.assign([],t.edges[n].illstNodes),s=Object.assign([],t.edges[n].mercNodes);if(0===i.length&&0===s.length)return o.push(r),"continue";i.unshift(t.points[r[0]][0]),i.push(t.points[r[1]][0]),s.unshift(t.points[r[0]][1]),s.push(t.points[r[1]][1]);var u=[i,s].map(function(t){var e=t.map(function(t,e,n){if(0===e)return 0;var r=n[e-1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}),n=e.reduce(function(t,e,n){return 0===n?[0]:(t.push(t[n-1]+e),t)},[]);return n.map(function(r,i,o){var a=r/o[o.length-1];return[t[i],e[i],n[i],a]})});u.map(function(t,e){var n=u[e?0:1];return t.filter(function(e,n){return 0!==n&&n!==t.length-1&&"handled"!==e[4]}).map(function(t){var r=t[0],i=t[3],o=n.reduce(function(t,e,n,r){if(t)return t;var o=r[n+1];return e[3]===i?(e[4]="handled",[e]):e[3]<i&&o[3]>i?[e,o]:void 0},void 0);if(1===o.length)return 0===e?[r,o[0][0],i]:[o[0][0],r,i];var a=o[0],s=o[1],u=(i-a[3])/(s[3]-a[3]),c=[(s[0][0]-a[0][0])*u+a[0][0],(s[0][1]-a[0][1])*u+a[0][1]];return 0===e?[r,c,i]:[c,r,i]})}).reduce(function(t,e){return t.concat(e)},[]).sort(function(t,e){return t[2]<e[2]?-1:1}).map(function(n,i,s){t.edgeNodes[a]=[n[0],n[1]];var u=_(n[0],n[1],"edgeNode".concat(a));a++,e.forw.push(u),e.bakw.push(b(u)),0===i?o.push([r[0],e.forw.length-1]):o.push([e.forw.length-2,e.forw.length-1]),i===s.length-1&&o.push([e.forw.length-1,r[1]])})},u=0;u<t.edges.length;u++)s(u);return{forw:Object(r.b)(e.forw),bakw:Object(r.b)(e.bakw),edges:o}}},{key:"updateTinAsync",value:function(){var e=this,n=this.strictMode,i=e.xy[0]-.05*e.wh[0],a=e.xy[0]+1.05*e.wh[0],l=e.xy[1]-.05*e.wh[1],f=e.xy[1]+1.05*e.wh[1],h=this.bounds?function(t){return Object(s.a)(t,e.boundsPolygon)}:function(t){return t[0]>=e.xy[0]&&t[0]<=e.xy[0]+e.wh[0]&&t[1]>=e.xy[1]&&t[1]<=e.xy[1]+e.wh[1]};return this.points.reduce(function(t,e){return t&&h(e[0])},!0)?new Promise(function(r){n!=t.MODE_STRICT&&n!=t.MODE_LOOSE&&(n=t.MODE_AUTO);var o=[];e.wh&&(o=[[i,l],[a,l],[i,f],[a,f]]),r([e.generatePointsSet(),o])}).then(function(t){var e=t[0];return Promise.all([new Promise(function(t){t(Object(p.a)(e.forw,e.edges,"target"))}),new Promise(function(t){t(Object(p.a)(e.bakw,e.edges,"target"))}),new Promise(function(t){t(Object(u.a)(e.forw))}),Promise.resolve(t)]).catch(function(t){throw t})}).then(function(t){var n=t[0],i=t[1],a=t[2],s=t[3],u=s[0];if(0==n.features.length||0==i.features.length)throw"TOO LINEAR1";var c={forw:a.geometry.coordinates};c.bakw=w(a,n),e.centroid={forw:_(c.forw,c.bakw,"cent")},e.centroid.bakw=b(e.centroid.forw);var l={};return Promise.all([new Promise(function(t){var e,i=Object(o.a)(u.forw).geometry.coordinates[0];try{e=i.map(function(t){return{forw:t,bakw:w(Object(r.f)(t),n)}})}catch(t){throw"TOO LINEAR2"}e.map(function(t){l["".concat(t.forw[0],":").concat(t.forw[1])]=t}),t()}),new Promise(function(t){var e,n=Object(o.a)(u.bakw).geometry.coordinates[0];try{e=n.map(function(t){return{bakw:t,forw:w(Object(r.f)(t),i)}})}catch(t){throw"TOO LINEAR2"}e.map(function(t){l["".concat(t.forw[0],":").concat(t.forw[1])]=t}),t()})]).then(function(){return[c,l,s]}).catch(function(t){throw t})}).then(function(n){var r=n[0],o=n[1],s=n[2],u=Object.keys(o).reduce(function(t,e,n,s){var u=o[e].forw,c=o[e].bakw,p={forw:[u[0]-r.forw[0],u[1]-r.forw[1]]};p.bakw=[c[0]-r.bakw[0],c[1]-r.bakw[1]];var h=0==p.forw[0]?1/0:((p.forw[0]<0?i:a)-r.forw[0])/p.forw[0],d=0==p.forw[1]?1/0:((p.forw[1]<0?l:f)-r.forw[1])/p.forw[1];if(Math.abs(h)/Math.abs(d)<1.1){var g={forw:[p.forw[0]*h+r.forw[0],p.forw[1]*h+r.forw[1]],bakw:[p.bakw[0]*h+r.bakw[0],p.bakw[1]*h+r.bakw[1]]};p.forw[0]<0?t[3].push(g):t[1].push(g)}if(Math.abs(d)/Math.abs(h)<1.1){var y={forw:[p.forw[0]*d+r.forw[0],p.forw[1]*d+r.forw[1]],bakw:[p.bakw[0]*d+r.bakw[0],p.bakw[1]*d+r.bakw[1]]};p.forw[1]<0?t[0].push(y):t[2].push(y)}return t},[[],[],[],[]]),c=Object.keys(o).reduce(function(n,i,a,s){var u=o[i].forw,c=o[i].bakw,l={forw:[u[0]-r.forw[0],u[1]-r.forw[1]]};if(l.bakw=[c[0]-r.bakw[0],r.bakw[1]-c[1]],0==l.forw[0]||0==l.forw[1])return n;var f=0;return l.forw[0]>0&&(f+=1),l.forw[1]>0&&(f+=2),n[f].push([l.forw,l.bakw]),a==s.length-1?n.length==n.filter(function(t){return t.length>0}).length&&e.vertexMode==t.VERTEX_BIRDEYE?n:n.reduce(function(t,e){return[t[0].concat(e)]},[[]]):n},[[],[],[],[]]).map(function(t){return t.reduce(function(t,e,n,r){t||(t=[1/0,0,0]);var i=Math.sqrt(Math.pow(e[0][0],2)+Math.pow(e[0][1],2))/Math.sqrt(Math.pow(e[1][0],2)+Math.pow(e[1][1],2));i=i<t[0]?i:t[0];var o=Math.atan2(e[0][0],e[0][1])-Math.atan2(e[1][0],e[1][1]),a=t[1]+Math.cos(o),s=t[2]+Math.sin(o);return n==r.length-1?[i,Math.atan2(s,a)]:[i,a,s]},null)});return 1==c.length&&(c=[c[0],c[0],c[0],c[0]]),[c,r,u,s]}).then(function(t){var e=t[0],n=t[1],i=t[2],o=t[3][0],a=t[3][1],s=e.map(function(t,e){var r=a[e],i=[r[0]-n.forw[0],r[1]-n.forw[1]],o=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2))/t[0],s=Math.atan2(i[0],i[1])-t[1];return{forw:r,bakw:[n.bakw[0]+o*Math.sin(s),n.bakw[1]-o*Math.cos(s)]}}),u=s[2];s[2]=s[3],s[3]=u;for(var l=[1,1,1,1],f=function(t){var e=(t+1)%4,o=Object(r.e)([s[t].bakw,s[e].bakw]);i[t].map(function(i){var a=Object(r.e)([n.bakw,i.bakw]),s=Object(c.a)(o,a);if(s.features.length>0&&s.features[0].geometry){var u=s.features[0],f=Math.sqrt(Math.pow(i.bakw[0]-n.bakw[0],2)+Math.pow(i.bakw[1]-n.bakw[1],2))/Math.sqrt(Math.pow(u.geometry.coordinates[0]-n.bakw[0],2)+Math.pow(u.geometry.coordinates[1]-n.bakw[1],2));f>l[t]&&(l[t]=f),f>l[e]&&(l[e]=f)}})},p=0;p<4;p++)f(p);return[s=s.map(function(t,e){var r=l[e],i=[(t.bakw[0]-n.bakw[0])*r+n.bakw[0],(t.bakw[1]-n.bakw[1])*r+n.bakw[1]];return{forw:t.forw,bakw:i}}),o]}).then(function(r){for(var i=r[0],o=r[1],a={forw:[],bakw:[]},s=0;s<i.length;s++){var u=_(i[s].forw,i[s].bakw,"bbox".concat(s)),c=b(u);o.forw.features.push(u),o.bakw.features.push(c),a.forw.push(u),a.bakw.push(c)}return e.pointsSet=o,e.tins={forw:y(Object(p.a)(o.forw,o.edges,"target"))},(n==t.MODE_STRICT||n==t.MODE_AUTO?e.calcurateStrictTinAsync():Promise.resolve()).then(function(){return(n==t.MODE_LOOSE||n==t.MODE_AUTO&&e.strict_status==t.STATUS_ERROR)&&(e.tins.bakw=y(Object(p.a)(o.bakw,o.edges,"target")),delete e.kinks,e.strict_status=t.STATUS_LOOSE),e.vertices_params={forw:m(a.forw,e.centroid.forw),bakw:m(a.bakw,e.centroid.bakw)},e.calculatePointsWeightAsync()}).catch(function(t){throw t})}).catch(function(t){throw t}):new Promise(function(t,e){e("SOME POINTS OUTSIDE")})}},{key:"transform",value:function(e,n,i){if(n&&this.strict_status==t.STATUS_ERROR)throw'Backward transform is not allowed if strict_status == "strict_error"';this.yaxisMode==t.YAXIS_FOLLOW&&n&&(e=[e[0],-1*e[1]]);var o=Object(r.f)(e);if(this.bounds&&!n&&!i&&!Object(s.a)(o,this.boundsPolygon))return!1;var a=w(o,n?this.tins.bakw:this.tins.forw,n?this.vertices_params.bakw:this.vertices_params.forw,n?this.centroid.bakw:this.centroid.forw,n?this.pointsWeightBuffer.bakw:this.pointsWeightBuffer.forw);if(this.bounds&&n&&!i){var u=Object(r.f)(a);if(!Object(s.a)(u,this.boundsPolygon))return!1}else this.yaxisMode!=t.YAXIS_FOLLOW||n||(a=[a[0],-1*a[1]]);return a}},{key:"calculatePointsWeightAsync",value:function(){var e=this,n=["forw"];e.strict_status==t.STATUS_LOOSE&&n.push("bakw");var r={};return Promise.all(n.map(function(t){r[t]={};var n={},i=e.tins[t];return Promise.all(i.features.map(function(e){var i=["a","b","c"];return new Promise(function(o){for(var a=0;a<3;a++){var s=(a+1)%3,u=i[a],c=i[s],l=e.properties[u].index,f=e.properties[c].index,p=[l,f].sort().join("-");if(!n[p]){var h=e.geometry.coordinates[0][a],d=e.geometry.coordinates[0][s],g=e.properties[u].geom,y=e.properties[c].geom;n[p]=1;var m=Math.sqrt(Math.pow(g[0]-y[0],2)+Math.pow(g[1]-y[1],2))/Math.sqrt(Math.pow(h[0]-d[0],2)+Math.pow(h[1]-d[1],2));r[t][l]||(r[t][l]={}),r[t][f]||(r[t][f]={}),r[t][l][p]=m,r[t][f][p]=m}}o()})})).catch(function(t){throw t})})).then(function(){var i={};n.map(function(n){i[n]={},e.strict_status==t.STATUS_STRICT&&(i.bakw={}),Object.keys(r[n]).map(function(o){i[n][o]=Object.keys(r[n][o]).reduce(function(t,e,i,a){return t+=r[n][o][e],i==a.length-1?t/a.length:t},0),e.strict_status==t.STATUS_STRICT&&(i.bakw[o]=1/i[n][o])}),i[n].cent=[0,1,2,3].reduce(function(t,e){var r="bbox".concat(e);return t+=i[n][r],3==e?t/4:t},0),e.strict_status==t.STATUS_STRICT&&(i.bakw.cent=1/i[n].cent)}),e.pointsWeightBuffer=i}).catch(function(t){throw t})}}])&&d(e.prototype,n),l&&d(e,l),t}();function y(t){for(var e=t.features,n=0;n<e.length;n++){var r=e[n];"bbox"=="".concat(r.properties.a.index).substring(0,4)&&"bbox"=="".concat(r.properties.b.index).substring(0,4)?e[n]={geometry:{type:"Polygon",coordinates:[[r.geometry.coordinates[0][2],r.geometry.coordinates[0][0],r.geometry.coordinates[0][1],r.geometry.coordinates[0][2]]]},properties:{a:{geom:r.properties.c.geom,index:r.properties.c.index},b:{geom:r.properties.a.geom,index:r.properties.a.index},c:{geom:r.properties.b.geom,index:r.properties.b.index}},type:"Feature"}:"bbox"=="".concat(r.properties.c.index).substring(0,4)&&"bbox"=="".concat(r.properties.a.index).substring(0,4)&&(e[n]={geometry:{type:"Polygon",coordinates:[[r.geometry.coordinates[0][1],r.geometry.coordinates[0][2],r.geometry.coordinates[0][0],r.geometry.coordinates[0][1]]]},properties:{a:{geom:r.properties.b.geom,index:r.properties.b.index},b:{geom:r.properties.c.geom,index:r.properties.c.index},c:{geom:r.properties.a.geom,index:r.properties.a.index}},type:"Feature"})}return t}function m(t,e){var n=e.geometry.coordinates;return[0,1,2,3].map(function(i){var o=(i+1)%4,a=t[i],s=t[o],u=a.geometry.coordinates,c=Math.atan2(u[0]-n[0],u[1]-n[1]),l=[e,a,s,e].map(function(t){return t.geometry.coordinates}),f={a:{geom:e.properties.target.geom,index:e.properties.target.index},b:{geom:a.properties.target.geom,index:a.properties.target.index},c:{geom:s.properties.target.geom,index:s.properties.target.index}};return[c,Object(r.b)([Object(r.g)([l],f)])]}).reduce(function(t,e){return t[0].push(e[0]),t[1].push(e[1]),t},[[],[]])}function v(t,e){for(var n=e?function(t){return!(t>=0&&t<2*Math.PI)}:function(t){return!(t>-1*Math.PI&&t<=Math.PI)};n(t);)t+=2*Math.PI*(t>0?-1:1);return t}function _(t,e,n){return Object(r.f)(t,{target:{geom:e,index:n}})}function b(t){return Object(r.f)(t.properties.target.geom,{target:{geom:t.geometry.coordinates,index:t.properties.target.index}})}function x(t,e,n){var r=e.geometry.coordinates[0][0],i=e.geometry.coordinates[0][1],o=e.geometry.coordinates[0][2],a=t.geometry.coordinates,s=e.properties.a.geom,u=e.properties.b.geom,c=e.properties.c.geom,l=[i[0]-r[0],i[1]-r[1]],f=[o[0]-r[0],o[1]-r[1]],p=[a[0]-r[0],a[1]-r[1]],h=[u[0]-s[0],u[1]-s[1]],d=[c[0]-s[0],c[1]-s[1]],g=(f[1]*p[0]-f[0]*p[1])/(l[0]*f[1]-l[1]*f[0]),y=(l[0]*p[1]-l[1]*p[0])/(l[0]*f[1]-l[1]*f[0]);if(n){var m,v=n[e.properties.a.index],_=n[e.properties.b.index],b=n[e.properties.c.index];if(g<0||y<0||1-g-y<0){var x=g/(g+y),S=y/(g+y);m=g/_/(x/_+S/b),y=y/b/(x/_+S/b)}else m=g/_/(g/_+y/b+(1-g-y)/v),y=y/b/(g/_+y/b+(1-g-y)/v);g=m}return[g*h[0]+y*d[0]+s[0],g*h[1]+y*d[1]+s[1]]}function S(t,e,n,r){var i=t.geometry.coordinates,o=n.geometry.coordinates,a=function(t,e){for(var n,r=v(t-e[0]),i=2*Math.PI,o=0;o<e.length;o++){var a=v(t-e[(o+1)%e.length]),s=Math.min(Math.abs(r),Math.abs(a));r*a<=0&&s<i&&(i=s,n=o),r=a}return n}(Math.atan2(i[0]-o[0],i[1]-o[1]),e[0]);return x(t,e[1][a].features[0],r)}function w(t,e,n,r,i){var o=function(t,e){for(var n=0;n<e.features.length;n++){if(Object(s.a)(t,e.features[n]))return e.features[n]}}(t,e);return o?x(t,o,i):S(t,n,r,i)}function E(t){var e=["a","b","c","a"].map(function(e){return t.properties[e].geom}),n=t.geometry.coordinates[0],i=t.properties,o={a:{geom:n[0],index:i.a.index},b:{geom:n[1],index:i.b.index},c:{geom:n[2],index:i.c.index}};return Object(r.g)([e],o)}function I(t,e,n,i,o,a){return function(t){var e=[0,1,2,0].map(function(e){return t[e][0][0]}),n={a:{geom:t[0][0][1],index:t[0][1]},b:{geom:t[1][0][1],index:t[1][1]},c:{geom:t[2][0][1],index:t[2][1]}};return Object(r.g)([e],n)}(t.map(function(t){var r=isFinite(t)?e[t]:"cent"==t?i:"bbox0"==t?o[0]:"bbox1"==t?o[1]:"bbox2"==t?o[2]:"bbox3"==t?o[3]:function(){var e=t.match(/edgeNode(\d+)/);if(e){var r=parseInt(e[1]);return n[r]}}();return a?[[r[1],r[0]],t]:[[r[0],r[1]],t]}))}function C(t){var e={forw:{},bakw:{}};return Promise.all(Object.keys(t).map(function(e){return new Promise(function(n){var r=t[e];if(r.length<2)return n();["forw","bakw"].map(function(t){var e=Object(l.a)(r[0][t],r[1][t]);if(!e||"Point"==e.geometry.type||"LineString"==e.geometry.type)return n();n()})})})).then(function(){return 0==Object.keys(e.forw).length&&delete e.forw,0==Object.keys(e.bakw).length&&delete e.bakw,e}).catch(function(t){throw t})}function P(t,e,n){var r=A(e.forw),i=A(e.bakw);if(JSON.stringify(r)!=JSON.stringify(i))throw"".concat(JSON.stringify(e,null,2),"\n").concat(JSON.stringify(r),"\n").concat(JSON.stringify(i));for(var o=0;o<r.length;o++){var a=r[o];t[a]||(t[a]=[]),t[a].push(e)}n&&(n.forw.features.push(e.forw),n.bakw.features.push(e.bakw))}function N(t,e,n){var r=A(e.forw),i=A(e.bakw);if(JSON.stringify(r)!=JSON.stringify(i))throw"".concat(JSON.stringify(e,null,2),"\n").concat(JSON.stringify(r),"\n").concat(JSON.stringify(i));for(var o=0;o<r.length;o++){var a=r[o],s=t[a].filter(function(t){return t.forw!=e.forw});0==s.length?delete t[a]:t[a]=s}if(n){var u=n.forw.features.filter(function(t){return t!=e.forw});n.forw.features=u,u=n.bakw.features.filter(function(t){return t!=e.bakw}),n.bakw.features=u}}function A(t){var e=["a","b","c"].map(function(e){return t.properties[e].index});return[[0,1],[0,2],[1,2],[0,1,2]].map(function(t){return t.map(function(t){return e[t]}).sort().join("-")}).sort()}g.VERTEX_PLAIN="plain",g.VERTEX_BIRDEYE="birdeye",g.MODE_STRICT="strict",g.MODE_AUTO="auto",g.MODE_LOOSE="loose",g.STATUS_STRICT="strict",g.STATUS_ERROR="strict_error",g.STATUS_LOOSE="loose",g.YAXIS_FOLLOW="follow",g.YAXIS_INVERT="invert",e.default=g,"object"===h(t)&&t.exports&&(t.exports=g)}.call(this,n(125)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){var r=n(4),i=n(69),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i.call(o))},function(t,e,n){var r=n(40),i=n(55),o=n(57),a=n(7);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(13),i=n(15),o=n(7),a=n(42);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},function(t,e,n){var r=n(20),i=n(55).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(2),i=n(59).filter;r({target:"Array",proto:!0,forced:!n(44)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(3),i=n(58),o=n(14),a=r("unscopables"),s=Array.prototype;null==s[a]&&o(s,a,i(null)),t.exports=function(t){s[a][t]=!0}},function(t,e,n){"use strict";var r=n(84).IteratorPrototype,i=n(58),o=n(27),a=n(43),s=n(32),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},function(t,e,n){var r=n(5);t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},function(t,e,n){var r=n(7),i=n(135);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){var r=n(8);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){"use strict";var r=n(2),i=n(28),o=n(20),a=n(45),s=[].join,u=i!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:u||c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},function(t,e,n){var r=n(24),i=n(17),o=n(28),a=n(19),s=function(t){return function(e,n,s,u){r(n);var c=i(e),l=o(c),f=a(c.length),p=t?f-1:0,h=t?-1:1;if(s<2)for(;;){if(p in l){u=l[p],p+=h;break}if(p+=h,t?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:f>p;p+=h)p in l&&(u=n(u,l[p],p,c));return u}};t.exports={left:s(!1),right:s(!0)}},function(t,e,n){var r=n(2),i=n(139);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,e,n){"use strict";var r=n(13),i=n(5),o=n(42),a=n(57),s=n(50),u=n(17),c=n(28),l=Object.assign;t.exports=!l||i(function(){var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||"abcdefghijklmnopqrst"!=o(l({},e)).join("")})?function(t,e){for(var n=u(t),i=arguments.length,l=1,f=a.f,p=s.f;i>l;)for(var h,d=c(arguments[l++]),g=f?o(d).concat(f(d)):o(d),y=g.length,m=0;y>m;)h=g[m++],r&&!p.call(d,h)||(n[h]=d[h]);return n}:l},function(t,e,n){var r=n(2),i=n(17),o=n(42);r({target:"Object",stat:!0,forced:n(5)(function(){o(1)})},{keys:function(t){return o(i(t))}})},function(t,e,n){"use strict";var r=n(91),i={};i[n(3)("toStringTag")]="z",t.exports="[object z]"!==String(i)?function(){return"[object "+r(this)+"]"}:i.toString},function(t,e,n){var r=n(2),i=n(143);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(t,e,n){var r=n(4),i=n(144).trim,o=n(92),a=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==a(o+"08")||22!==a(o+"0x16");t.exports=u?function(t,e){var n=i(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},function(t,e,n){var r=n(18),i="["+n(92)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},function(t,e,n){"use strict";var r,i,o,a,s=n(2),u=n(30),c=n(4),l=n(54),f=n(146),p=n(21),h=n(147),d=n(43),g=n(148),y=n(8),m=n(24),v=n(149),_=n(16),b=n(150),x=n(154),S=n(93),w=n(94).set,E=n(155),I=n(156),C=n(157),P=n(96),N=n(158),A=n(95),T=n(31),O=n(74),M=n(3)("species"),L="Promise",R=T.get,D=T.set,F=T.getterFor(L),k=f,B=c.TypeError,j=c.document,G=c.process,U=c.fetch,q=G&&G.versions,z=q&&q.v8||"",V=P.f,Y=V,X="process"==_(G),J=!!(j&&j.createEvent&&c.dispatchEvent),H=O(L,function(){var t=k.resolve(1),e=function(){},n=(t.constructor={})[M]=function(t){t(e,e)};return!((X||"function"==typeof PromiseRejectionEvent)&&(!u||t.finally)&&t.then(e)instanceof n&&0!==z.indexOf("6.6")&&-1===A.indexOf("Chrome/66"))}),W=H||!x(function(t){k.all(t).catch(function(){})}),$=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},K=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;E(function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var s,u,c,l=r[a++],f=o?l.ok:l.fail,p=l.resolve,h=l.reject,d=l.domain;try{f?(o||(2===e.rejection&&et(t,e),e.rejection=1),!0===f?s=i:(d&&d.enter(),s=f(i),d&&(d.exit(),c=!0)),s===l.promise?h(B("Promise-chain cycle")):(u=$(s))?u.call(s,p,h):p(s)):h(i)}catch(t){d&&!c&&d.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Q(t,e)})}},Z=function(t,e,n){var r,i;J?((r=j.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},(i=c["on"+t])?i(r):"unhandledrejection"===t&&C("Unhandled promise rejection",n)},Q=function(t,e){w.call(c,function(){var n,r=e.value;if(tt(e)&&(n=N(function(){X?G.emit("unhandledRejection",r,t):Z("unhandledrejection",t,r)}),e.rejection=X||tt(e)?2:1,n.error))throw n.value})},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t,e){w.call(c,function(){X?G.emit("rejectionHandled",t):Z("rejectionhandled",t,e.value)})},nt=function(t,e,n,r){return function(i){t(e,n,i,r)}},rt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,K(t,e,!0))},it=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw B("Promise can't be resolved itself");var i=$(n);i?E(function(){var r={done:!1};try{i.call(n,nt(it,t,r,e),nt(rt,t,r,e))}catch(n){rt(t,r,n,e)}}):(e.value=n,e.state=1,K(t,e,!1))}catch(n){rt(t,{done:!1},n,e)}}};H&&(k=function(t){v(this,k,L),m(t),r.call(this);var e=R(this);try{t(nt(it,this,e),nt(rt,this,e))}catch(t){rt(this,e,t)}},(r=function(t){D(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(k.prototype,{then:function(t,e){var n=F(this),r=V(S(this,k));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=X?G.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&K(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=R(t);this.promise=t,this.resolve=nt(it,t,e),this.reject=nt(rt,t,e)},P.f=V=function(t){return t===k||t===o?new i(t):Y(t)},u||"function"!=typeof f||(a=f.prototype.then,p(f.prototype,"then",function(t,e){var n=this;return new k(function(t,e){a.call(n,t,e)}).then(t,e)}),"function"==typeof U&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return I(k,U.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:H},{Promise:k}),d(k,L,!1,!0),g(L),o=l.Promise,s({target:L,stat:!0,forced:H},{reject:function(t){var e=V(this);return e.reject.call(void 0,t),e.promise}}),s({target:L,stat:!0,forced:u||H},{resolve:function(t){return I(u&&this===o?k:this,t)}}),s({target:L,stat:!0,forced:W},{all:function(t){var e=this,n=V(e),r=n.resolve,i=n.reject,o=N(function(){var n=m(e.resolve),o=[],a=0,s=1;b(t,function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then(function(t){c||(c=!0,o[u]=t,--s||r(o))},i)}),--s||r(o)});return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=V(e),r=n.reject,i=N(function(){var i=m(e.resolve);b(t,function(t){i.call(e,t).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}})},function(t,e,n){var r=n(4);t.exports=r.Promise},function(t,e,n){var r=n(21);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){"use strict";var r=n(40),i=n(15),o=n(3),a=n(13),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){var r=n(7),i=n(151),o=n(19),a=n(60),s=n(152),u=n(153),c=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,n,l,f){var p,h,d,g,y,m,v=a(e,n,l?2:1);if(f)p=t;else{if("function"!=typeof(h=s(t)))throw TypeError("Target is not iterable");if(i(h)){for(d=0,g=o(t.length);g>d;d++)if((y=l?v(r(m=t[d])[0],m[1]):v(t[d]))&&y instanceof c)return y;return new c(!1)}p=h.call(t)}for(;!(m=p.next()).done;)if((y=u(p,v,m.value,l))&&y instanceof c)return y;return new c(!1)}).stop=function(t){return new c(!0,t)}},function(t,e,n){var r=n(3),i=n(32),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,n){var r=n(91),i=n(32),o=n(3)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(7);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(3)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){var r,i,o,a,s,u,c,l,f=n(4),p=n(36).f,h=n(16),d=n(94).set,g=n(95),y=f.MutationObserver||f.WebKitMutationObserver,m=f.process,v=f.Promise,_="process"==h(m),b=p(f,"queueMicrotask"),x=b&&b.value;x||(r=function(){var t,e;for(_&&(t=m.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},_?a=function(){m.nextTick(r)}:y&&!/(iphone|ipod|ipad).*applewebkit/i.test(g)?(s=!0,u=document.createTextNode(""),new y(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):v&&v.resolve?(c=v.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=function(){d.call(f,r)}),t.exports=x||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},function(t,e,n){var r=n(7),i=n(8),o=n(96);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(4);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){"use strict";var r=n(2),i=n(46);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(t,e,n){"use strict";var r=n(7);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(99),i=n(7),o=n(19),a=n(18),s=n(100),u=n(101);r("match",1,function(t,e,n){return[function(e){var n=a(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var a=i(t),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;for(var f,p=[],h=0;null!==(f=u(a,c));){var d=String(f[0]);p[h]=d,""===d&&(a.lastIndex=s(c,o(a.lastIndex),l)),h++}return 0===h?null:p}]})},function(t,e,n){"use strict";var r=n(99),i=n(163),o=n(7),a=n(18),s=n(93),u=n(100),c=n(19),l=n(101),f=n(46),p=n(5),h=[].push,d=Math.min,g=!p(function(){return!RegExp(4294967295,"y")});r("split",2,function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);for(var s,u,c,l=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,g=new RegExp(t.source,p+"g");(s=f.call(g,r))&&!((u=g.lastIndex)>d&&(l.push(r.slice(d,s.index)),s.length>1&&s.index<r.length&&h.apply(l,s.slice(1)),c=s[0].length,d=u,l.length>=o));)g.lastIndex===s.index&&g.lastIndex++;return d===r.length?!c&&g.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var f=o(t),p=String(this),h=s(f,RegExp),y=f.unicode,m=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(g?"y":"g"),v=new h(g?f:"^(?:"+f.source+")",m),_=void 0===i?4294967295:i>>>0;if(0===_)return[];if(0===p.length)return null===l(v,p)?[p]:[];for(var b=0,x=0,S=[];x<p.length;){v.lastIndex=g?x:0;var w,E=l(v,g?p:p.slice(x));if(null===E||(w=d(c(v.lastIndex+(g?0:x)),p.length))===b)x=u(p,x,y);else{if(S.push(p.slice(b,x)),S.length===_)return S;for(var I=1;I<=E.length-1;I++)if(S.push(E[I]),S.length===_)return S;x=b=w}}return S.push(p.slice(b)),S}]},!g)},function(t,e,n){var r=n(8),i=n(16),o=n(3)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(166);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],u(i,t.leaf?r(o):o);return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!d(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],d(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):h(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],d(t,a=e.leaf?n(o):o)){if(e.leaf||h(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,s=this.data,u=this.toBBox(t),c=[],l=[];s||c.length;){if(s||(s=c.pop(),r=c[c.length-1],n=l.pop(),a=!0),s.leaf&&-1!==(i=o(t,s.children,e)))return s.children.splice(i,1),c.push(s),this._condense(c),this;a||s.leaf||!h(s,u)?r?(n++,s=r.children[n],a=!1):s=null:(c.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=g([])).leaf=!1,i.height=r;var u,c,l,f,p=Math.ceil(o/s),h=p*Math.ceil(Math.sqrt(s));for(y(t,e,n,h,this.compareMinX),u=e;u<=n;u+=h)for(y(t,u,l=Math.min(u+h-1,n),p,this.compareMinY),c=u;c<=l;c+=p)f=Math.min(c+p-1,l),i.children.push(this._build(t,c,f,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,p,h,d;r.push(e),!e.leaf&&r.length-1!==n;){for(l=p=1/0,i=0,o=e.children.length;i<o;i++)u=f(a=e.children[i]),h=t,d=a,(c=(Math.max(d.maxX,h.maxX)-Math.min(d.minX,h.minX))*(Math.max(d.maxY,h.maxY)-Math.min(d.minY,h.minY))-u)<p?(p=c,l=u<l?u:l,s=a):c===p&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),u(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=g(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,u,c,l,p,h,d,g,y,m,v;for(c=l=1/0,r=e;r<=n-e;r++)i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox),h=i,d=o,g=void 0,y=void 0,m=void 0,v=void 0,g=Math.max(h.minX,d.minX),y=Math.max(h.minY,d.minY),m=Math.min(h.maxX,d.maxX),v=Math.min(h.maxY,d.maxY),a=Math.max(0,m-g)*Math.max(0,v-y),u=f(i)+f(o),a<c?(c=a,p=r,l=u<l?u:l):a===c&&u<l&&(l=u,p=r);return p},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,c=s(t,0,e,a),l=s(t,n-e,n,a),f=p(c)+p(l);for(i=e;i<n-e;i++)o=t.children[i],u(c,t.leaf?a(o):o),f+=p(c);for(i=n-e-1;i>=e;i--)o=t.children[i],u(l,t.leaf?a(o):o),f+=p(l);return f},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,n){t.exports=function(){"use strict";function t(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function e(t,e){return t<e?-1:t>e?1:0}return function(n,r,i,o,a){!function e(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1),p=Math.max(i,Math.floor(r-u*l/s+f)),h=Math.min(o,Math.floor(r+(s-u)*l/s+f));e(n,r,p,h,a)}var d=n[r],g=i,y=o;for(t(n,i,r),a(n[o],d)>0&&t(n,i,o);g<y;){for(t(n,g,y),g++,y--;a(n[g],d)<0;)g++;for(;a(n[y],d)>0;)y--}0===a(n[i],d)?t(n,i,y):t(n,++y,o),y<=r&&(i=y+1),r<=y&&(o=y-1)}}(n,r,i||0,o||n.length-1,a||e)}}()},function(t,e,n){"use strict";t.exports=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var o=new Array(e);for(i=0;i<e;++i)o[i]=i;o.sort(function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]});var a=[o[0],o[1]],s=[o[0],o[1]];for(i=2;i<e;++i){for(var u=o[i],c=t[u],l=a.length;l>1&&r(t[a[l-2]],t[a[l-1]],c)<=0;)l-=1,a.pop();for(a.push(u),l=s.length;l>1&&r(t[s[l-2]],t[s[l-1]],c)>=0;)l-=1,s.pop();s.push(u)}n=new Array(s.length+a.length-2);for(var f=0,p=(i=0,a.length);i<p;++i)n[f++]=a[i];for(var h=s.length-2;h>0;--h)n[f++]=s[h];return n};var r=n(103)[3]},function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);if(i)return[i,n];return[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,f=t[u],p=l(f),h=e[c],d=l(h);p<d?(o=f,(u+=1)<n&&(f=t[u],p=l(f))):(o=h,(c+=1)<r&&(h=e[c],d=l(h)));u<n&&p<d||c>=r?(i=f,(u+=1)<n&&(f=t[u],p=l(f))):(i=h,(c+=1)<r&&(h=e[c],d=l(h)));var g,y,m=i+o,v=m-i,_=o-v,b=_,x=m;for(;u<n&&c<r;)p<d?(i=f,(u+=1)<n&&(f=t[u],p=l(f))):(i=h,(c+=1)<r&&(h=e[c],d=l(h))),(_=(o=b)-(v=(m=i+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;u<n;)(_=(o=b)-(v=(m=(i=f)+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<n&&(f=t[u]);for(;c<r;)(_=(o=b)-(v=(m=(i=h)+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(c+=1)<r&&(h=e[c]);b&&(a[s++]=b);x&&(a[s++]=x);s||(a[s++]=0);return a.length=s,a}},function(t,e,n){"use strict";var r=n(104),i=n(170);t.exports=function(t,e){var n=t.length;if(1===n){var o=r(t[0],e);return o[0]?o:[o[1]]}var a=new Array(2*n),s=[.1,.1],u=[.1,.1],c=0;r(t[0],e,s),s[0]&&(a[c++]=s[0]);for(var l=1;l<n;++l){r(t[l],e,u);var f=s[1];i(f,u[0],s),s[0]&&(a[c++]=s[0]);var p=u[1],h=s[1],d=p+h,g=h-(d-p);s[1]=d,g&&(a[c++]=g)}s[1]&&(a[c++]=s[1]);0===c&&(a[c++]=0);return a.length=c,a}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);if(n)return n[0]=a+o,n[1]=r,n;return[a+o,r]}},function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);if(i)return[i,n];return[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,f=t[u],p=l(f),h=-e[c],d=l(h);p<d?(o=f,(u+=1)<n&&(f=t[u],p=l(f))):(o=h,(c+=1)<r&&(h=-e[c],d=l(h)));u<n&&p<d||c>=r?(i=f,(u+=1)<n&&(f=t[u],p=l(f))):(i=h,(c+=1)<r&&(h=-e[c],d=l(h)));var g,y,m=i+o,v=m-i,_=o-v,b=_,x=m;for(;u<n&&c<r;)p<d?(i=f,(u+=1)<n&&(f=t[u],p=l(f))):(i=h,(c+=1)<r&&(h=-e[c],d=l(h))),(_=(o=b)-(v=(m=i+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;u<n;)(_=(o=b)-(v=(m=(i=f)+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<n&&(f=t[u]);for(;c<r;)(_=(o=b)-(v=(m=(i=h)+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(c+=1)<r&&(h=-e[c]);b&&(a[s++]=b);x&&(a[s++]=x);s||(a[s++]=0);return a.length=s,a}},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||i,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function i(t,e){return t<e?-1:t>e?1:0}t.exports=r,t.exports.default=r,r.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}}},function(t,e){t.exports=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],c=e[a][0],l=e[a][1];u>r!=l>r&&n<(c-s)*(r-u)/(l-u)+s&&(i=!i)}return i}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(175),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(35))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},p.clearImmediate=h}function h(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{h(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(35),n(22))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,p=n?-1:1,h=t[e+f];for(f+=p,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+h]=255&a,h+=d,a/=256,c-=8);t[n+h-d]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";function r(t,e){this.encoder=t,this.addBOM=!0}function i(t,e){this.decoder=t,this.pass=!1,this.options=e||{}}e.PrependBOM=r,r.prototype.write=function(t){return this.addBOM&&(t="\ufeff"+t,this.addBOM=!1),this.encoder.write(t)},r.prototype.end=function(){return this.encoder.end()},e.StripBOM=i,i.prototype.write=function(t){var e=this.decoder.write(t);return this.pass||!e?e:("\ufeff"===e[0]&&(e=e.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0,e)},i.prototype.end=function(){return this.decoder.end()}},function(t,e,n){"use strict";for(var r=[n(181),n(184),n(185),n(186),n(187),n(188),n(189),n(190)],i=0;i<r.length;i++){t=r[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}},function(t,e,n){"use strict";var r=n(26).Buffer;function i(t,e){this.enc=t.encodingName,this.bomAware=t.bomAware,"base64"===this.enc?this.encoder=u:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=c,""!==r.from("eda0bdedb2a9","hex").toString()&&(this.decoder=l,this.defaultCharUnicode=e.defaultCharUnicode))}t.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:i},i.prototype.encoder=s,i.prototype.decoder=a;var o=n(182).StringDecoder;function a(t,e){o.call(this,e.enc)}function s(t,e){this.enc=e.enc}function u(t,e){this.prevStr=""}function c(t,e){}function l(t,e){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=e.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),a.prototype=o.prototype,s.prototype.write=function(t){return r.from(t,this.enc)},s.prototype.end=function(){},u.prototype.write=function(t){var e=(t=this.prevStr+t).length-t.length%4;return this.prevStr=t.slice(e),t=t.slice(0,e),r.from(t,"base64")},u.prototype.end=function(){return r.from(this.prevStr,"base64")},c.prototype.write=function(t){for(var e=r.alloc(3*t.length),n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=192+(o>>>6),e[n++]=128+(63&o)):(e[n++]=224+(o>>>12),e[n++]=128+(o>>>6&63),e[n++]=128+(63&o))}return e.slice(0,n)},c.prototype.end=function(){},l.prototype.write=function(t){for(var e=this.acc,n=this.contBytes,r=this.accBytes,i="",o=0;o<t.length;o++){var a=t[o];128!=(192&a)?(n>0&&(i+=this.defaultCharUnicode,n=0),a<128?i+=String.fromCharCode(a):a<224?(e=31&a,n=1,r=1):a<240?(e=15&a,n=2,r=1):i+=this.defaultCharUnicode):n>0?(e=e<<6|63&a,r++,0===--n&&(i+=2===r&&e<128&&e>0?this.defaultCharUnicode:3===r&&e<2048?this.defaultCharUnicode:String.fromCharCode(e))):i+=this.defaultCharUnicode}return this.acc=e,this.contBytes=n,this.accBytes=r,i},l.prototype.end=function(){var t=0;return this.contBytes>0&&(t+=this.defaultCharUnicode),t}},function(t,e,n){"use strict";var r=n(183).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=f,e=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){var r=n(25),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";var r=n(26).Buffer;function i(){}function o(){}function a(){this.overflowByte=-1}function s(t,e){this.iconv=e}function u(t,e){void 0===(t=t||{}).addBOM&&(t.addBOM=!0),this.encoder=e.iconv.getEncoder("utf-16le",t)}function c(t,e){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=t||{},this.iconv=e.iconv}function l(t,e){var n=e||"utf-16le";if(t.length>=2)if(254==t[0]&&255==t[1])n="utf-16be";else if(255==t[0]&&254==t[1])n="utf-16le";else{for(var r=0,i=0,o=Math.min(t.length-t.length%2,64),a=0;a<o;a+=2)0===t[a]&&0!==t[a+1]&&i++,0!==t[a]&&0===t[a+1]&&r++;i>r?n="utf-16be":i<r&&(n="utf-16le")}return n}e.utf16be=i,i.prototype.encoder=o,i.prototype.decoder=a,i.prototype.bomAware=!0,o.prototype.write=function(t){for(var e=r.from(t,"ucs2"),n=0;n<e.length;n+=2){var i=e[n];e[n]=e[n+1],e[n+1]=i}return e},o.prototype.end=function(){},a.prototype.write=function(t){if(0==t.length)return"";var e=r.alloc(t.length+1),n=0,i=0;for(-1!==this.overflowByte&&(e[0]=t[0],e[1]=this.overflowByte,n=1,i=2);n<t.length-1;n+=2,i+=2)e[i]=t[n+1],e[i+1]=t[n];return this.overflowByte=n==t.length-1?t[t.length-1]:-1,e.slice(0,i).toString("ucs2")},a.prototype.end=function(){},e.utf16=s,s.prototype.encoder=u,s.prototype.decoder=c,u.prototype.write=function(t){return this.encoder.write(t)},u.prototype.end=function(){return this.encoder.end()},c.prototype.write=function(t){if(!this.decoder){if(this.initialBytes.push(t),this.initialBytesLen+=t.length,this.initialBytesLen<16)return"";var e=l(t=r.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(t)},c.prototype.end=function(){if(!this.decoder){var t=r.concat(this.initialBytes),e=l(t,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options);var n=this.decoder.write(t),i=this.decoder.end();return i?n+i:n}return this.decoder.end()}},function(t,e,n){"use strict";var r=n(26).Buffer;function i(t,e){this.iconv=e}e.utf7=i,e.unicode11utf7="utf7",i.prototype.encoder=a,i.prototype.decoder=s,i.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function a(t,e){this.iconv=e.iconv}function s(t,e){this.iconv=e.iconv,this.inBase64=!1,this.base64Accum=""}a.prototype.write=function(t){return r.from(t.replace(o,function(t){return"+"+("+"===t?"":this.iconv.encode(t,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},a.prototype.end=function(){};for(var u=/[A-Za-z0-9\/+]/,c=[],l=0;l<256;l++)c[l]=u.test(String.fromCharCode(l));var f="+".charCodeAt(0),p="-".charCodeAt(0),h="&".charCodeAt(0);function d(t,e){this.iconv=e}function g(t,e){this.iconv=e.iconv,this.inBase64=!1,this.base64Accum=r.alloc(6),this.base64AccumIdx=0}function y(t,e){this.iconv=e.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(t){for(var e="",n=0,i=this.inBase64,o=this.base64Accum,a=0;a<t.length;a++)if(i){if(!c[t[a]]){if(a==n&&t[a]==p)e+="+";else{var s=o+t.slice(n,a).toString();e+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}t[a]!=p&&a--,n=a+1,i=!1,o=""}}else t[a]==f&&(e+=this.iconv.decode(t.slice(n,a),"ascii"),n=a+1,i=!0);if(i){var u=(s=o+t.slice(n).toString()).length-s.length%8;o=s.slice(u),s=s.slice(0,u),e+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}else e+=this.iconv.decode(t.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,e},s.prototype.end=function(){var t="";return this.inBase64&&this.base64Accum.length>0&&(t=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",t},e.utf7imap=d,d.prototype.encoder=g,d.prototype.decoder=y,d.prototype.bomAware=!0,g.prototype.write=function(t){for(var e=this.inBase64,n=this.base64Accum,i=this.base64AccumIdx,o=r.alloc(5*t.length+10),a=0,s=0;s<t.length;s++){var u=t.charCodeAt(s);32<=u&&u<=126?(e&&(i>0&&(a+=o.write(n.slice(0,i).toString("base64").replace(/\//g,",").replace(/=+$/,""),a),i=0),o[a++]=p,e=!1),e||(o[a++]=u,u===h&&(o[a++]=p))):(e||(o[a++]=h,e=!0),e&&(n[i++]=u>>8,n[i++]=255&u,i==n.length&&(a+=o.write(n.toString("base64").replace(/\//g,","),a),i=0)))}return this.inBase64=e,this.base64AccumIdx=i,o.slice(0,a)},g.prototype.end=function(){var t=r.alloc(10),e=0;return this.inBase64&&(this.base64AccumIdx>0&&(e+=t.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),e),this.base64AccumIdx=0),t[e++]=p,this.inBase64=!1),t.slice(0,e)};var m=c.slice();m[",".charCodeAt(0)]=!0,y.prototype.write=function(t){for(var e="",n=0,i=this.inBase64,o=this.base64Accum,a=0;a<t.length;a++)if(i){if(!m[t[a]]){if(a==n&&t[a]==p)e+="&";else{var s=o+t.slice(n,a).toString().replace(/,/g,"/");e+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}t[a]!=p&&a--,n=a+1,i=!1,o=""}}else t[a]==h&&(e+=this.iconv.decode(t.slice(n,a),"ascii"),n=a+1,i=!0);if(i){var u=(s=o+t.slice(n).toString().replace(/,/g,"/")).length-s.length%8;o=s.slice(u),s=s.slice(0,u),e+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}else e+=this.iconv.decode(t.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,e},y.prototype.end=function(){var t="";return this.inBase64&&this.base64Accum.length>0&&(t=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",t}},function(t,e,n){"use strict";var r=n(26).Buffer;function i(t,e){if(!t)throw new Error("SBCS codec is called without the data.");if(!t.chars||128!==t.chars.length&&256!==t.chars.length)throw new Error("Encoding '"+t.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===t.chars.length){for(var n="",i=0;i<128;i++)n+=String.fromCharCode(i);t.chars=n+t.chars}this.decodeBuf=r.from(t.chars,"ucs2");var o=r.alloc(65536,e.defaultCharSingleByte.charCodeAt(0));for(i=0;i<t.chars.length;i++)o[t.chars.charCodeAt(i)]=i;this.encodeBuf=o}function o(t,e){this.encodeBuf=e.encodeBuf}function a(t,e){this.decodeBuf=e.decodeBuf}e._sbcs=i,i.prototype.encoder=o,i.prototype.decoder=a,o.prototype.write=function(t){for(var e=r.alloc(t.length),n=0;n<t.length;n++)e[n]=this.encodeBuf[t.charCodeAt(n)];return e},o.prototype.end=function(){},a.prototype.write=function(t){for(var e=this.decodeBuf,n=r.alloc(2*t.length),i=0,o=0,a=0;a<t.length;a++)i=2*t[a],n[o=2*a]=e[i],n[o+1]=e[i+1];return n.toString("ucs2")},a.prototype.end=function(){}},function(t,e,n){"use strict";t.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(t,e,n){"use strict";t.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(t,e,n){"use strict";var r=n(26).Buffer;e._dbcs=c;for(var i=-1,o=-2,a=-1e3,s=new Array(256),u=0;u<256;u++)s[u]=i;function c(t,e){if(this.encodingName=t.encodingName,!t)throw new Error("DBCS codec is called without the data.");if(!t.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=t.table();this.decodeTables=[],this.decodeTables[0]=s.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);this.defaultCharUnicode=e.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var u={};if(t.encodeSkipVals)for(r=0;r<t.encodeSkipVals.length;r++){var c=t.encodeSkipVals[r];if("number"==typeof c)u[c]=!0;else for(var l=c.from;l<=c.to;l++)u[l]=!0}if(this._fillEncodeTable(0,0,u),t.encodeAdd)for(var f in t.encodeAdd)Object.prototype.hasOwnProperty.call(t.encodeAdd,f)&&this._setEncodeChar(f.charCodeAt(0),t.encodeAdd[f]);if(this.defCharSB=this.encodeTable[0][e.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===i&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===i&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof t.gb18030){this.gb18030=t.gb18030();var p=this.decodeTables.length,h=this.decodeTables[p]=s.slice(0),d=this.decodeTables.length,g=this.decodeTables[d]=s.slice(0);for(r=129;r<=254;r++){var y=a-this.decodeTables[0][r],m=this.decodeTables[y];for(l=48;l<=57;l++)m[l]=a-p}for(r=129;r<=254;r++)h[r]=a-d;for(r=48;r<=57;r++)g[r]=o}}function l(t,e){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=e.encodeTable,this.encodeTableSeq=e.encodeTableSeq,this.defaultCharSingleByte=e.defCharSB,this.gb18030=e.gb18030}function f(t,e){this.nodeIdx=0,this.prevBuf=r.alloc(0),this.decodeTables=e.decodeTables,this.decodeTableSeq=e.decodeTableSeq,this.defaultCharUnicode=e.defaultCharUnicode,this.gb18030=e.gb18030}function p(t,e){if(t[0]>e)return-1;for(var n=0,r=t.length;n<r-1;){var i=n+Math.floor((r-n+1)/2);t[i]<=e?n=i:r=i}return n}c.prototype.encoder=l,c.prototype.decoder=f,c.prototype._getDecodeTrieNode=function(t){for(var e=[];t>0;t>>=8)e.push(255&t);0==e.length&&e.push(0);for(var n=this.decodeTables[0],r=e.length-1;r>0;r--){var o=n[e[r]];if(o==i)n[e[r]]=a-this.decodeTables.length,this.decodeTables.push(n=s.slice(0));else{if(!(o<=a))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+t.toString(16));n=this.decodeTables[a-o]}}return n},c.prototype._addDecodeChunk=function(t){var e=parseInt(t[0],16),n=this._getDecodeTrieNode(e);e&=255;for(var r=1;r<t.length;r++){var i=t[r];if("string"==typeof i)for(var o=0;o<i.length;){var a=i.charCodeAt(o++);if(55296<=a&&a<56320){var s=i.charCodeAt(o++);if(!(56320<=s&&s<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+t[0]);n[e++]=65536+1024*(a-55296)+(s-56320)}else if(4080<a&&a<=4095){for(var u=4095-a+2,c=[],l=0;l<u;l++)c.push(i.charCodeAt(o++));n[e++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(c)}else n[e++]=a}else{if("number"!=typeof i)throw new Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+t[0]);var f=n[e-1]+1;for(o=0;o<i;o++)n[e++]=f++}}if(e>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+t[0]+": too long"+e)},c.prototype._getEncodeBucket=function(t){var e=t>>8;return void 0===this.encodeTable[e]&&(this.encodeTable[e]=s.slice(0)),this.encodeTable[e]},c.prototype._setEncodeChar=function(t,e){var n=this._getEncodeBucket(t),r=255&t;n[r]<=-10?this.encodeTableSeq[-10-n[r]][-1]=e:n[r]==i&&(n[r]=e)},c.prototype._setEncodeSequence=function(t,e){var n,r=t[0],o=this._getEncodeBucket(r),a=255&r;o[a]<=-10?n=this.encodeTableSeq[-10-o[a]]:(n={},o[a]!==i&&(n[-1]=o[a]),o[a]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var s=1;s<t.length-1;s++){var u=n[r];"object"==typeof u?n=u:(n=n[r]={},void 0!==u&&(n[-1]=u))}n[r=t[t.length-1]]=e},c.prototype._fillEncodeTable=function(t,e,n){for(var r=this.decodeTables[t],i=0;i<256;i++){var o=r[i],s=e+i;n[s]||(o>=0?this._setEncodeChar(o,s):o<=a?this._fillEncodeTable(a-o,s<<8,n):o<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-o],s))}},l.prototype.write=function(t){for(var e=r.alloc(t.length*(this.gb18030?4:3)),n=this.leadSurrogate,o=this.seqObj,a=-1,s=0,u=0;;){if(-1===a){if(s==t.length)break;var c=t.charCodeAt(s++)}else{c=a;a=-1}if(55296<=c&&c<57344)if(c<56320){if(-1===n){n=c;continue}n=c,c=i}else-1!==n?(c=65536+1024*(n-55296)+(c-56320),n=-1):c=i;else-1!==n&&(a=c,c=i,n=-1);var l=i;if(void 0!==o&&c!=i){var f=o[c];if("object"==typeof f){o=f;continue}"number"==typeof f?l=f:null==f&&void 0!==(f=o[-1])&&(l=f,a=c),o=void 0}else if(c>=0){var h=this.encodeTable[c>>8];if(void 0!==h&&(l=h[255&c]),l<=-10){o=this.encodeTableSeq[-10-l];continue}if(l==i&&this.gb18030){var d=p(this.gb18030.uChars,c);if(-1!=d){l=this.gb18030.gbChars[d]+(c-this.gb18030.uChars[d]);e[u++]=129+Math.floor(l/12600),l%=12600,e[u++]=48+Math.floor(l/1260),l%=1260,e[u++]=129+Math.floor(l/10),l%=10,e[u++]=48+l;continue}}}l===i&&(l=this.defaultCharSingleByte),l<256?e[u++]=l:l<65536?(e[u++]=l>>8,e[u++]=255&l):(e[u++]=l>>16,e[u++]=l>>8&255,e[u++]=255&l)}return this.seqObj=o,this.leadSurrogate=n,e.slice(0,u)},l.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var t=r.alloc(10),e=0;if(this.seqObj){var n=this.seqObj[-1];void 0!==n&&(n<256?t[e++]=n:(t[e++]=n>>8,t[e++]=255&n)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(t[e++]=this.defaultCharSingleByte,this.leadSurrogate=-1),t.slice(0,e)}},l.prototype.findIdx=p,f.prototype.write=function(t){var e=r.alloc(2*t.length),n=this.nodeIdx,s=this.prevBuf,u=this.prevBuf.length,c=-this.prevBuf.length;u>0&&(s=r.concat([s,t.slice(0,10)]));for(var l=0,f=0;l<t.length;l++){var h,d=l>=0?t[l]:s[l+u];if((h=this.decodeTables[n][d])>=0);else if(h===i)l=c,h=this.defaultCharUnicode.charCodeAt(0);else if(h===o){var g=c>=0?t.slice(c,l+1):s.slice(c+u,l+1+u),y=12600*(g[0]-129)+1260*(g[1]-48)+10*(g[2]-129)+(g[3]-48),m=p(this.gb18030.gbChars,y);h=this.gb18030.uChars[m]+y-this.gb18030.gbChars[m]}else{if(h<=a){n=a-h;continue}if(!(h<=-10))throw new Error("iconv-lite internal error: invalid decoding table value "+h+" at "+n+"/"+d);for(var v=this.decodeTableSeq[-10-h],_=0;_<v.length-1;_++)h=v[_],e[f++]=255&h,e[f++]=h>>8;h=v[v.length-1]}if(h>65535){h-=65536;var b=55296+Math.floor(h/1024);e[f++]=255&b,e[f++]=b>>8,h=56320+h%1024}e[f++]=255&h,e[f++]=h>>8,n=0,c=l+1}return this.nodeIdx=n,this.prevBuf=c>=0?t.slice(c):s.slice(c+u),e.slice(0,f).toString("ucs2")},f.prototype.end=function(){for(var t="";this.prevBuf.length>0;){t+=this.defaultCharUnicode;var e=this.prevBuf.slice(1);this.prevBuf=r.alloc(0),this.nodeIdx=0,e.length>0&&(t+=this.write(e))}return this.nodeIdx=0,t}},function(t,e,n){"use strict";t.exports={shiftjis:{type:"_dbcs",table:function(){return n(191)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(192)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(64)}},gbk:{type:"_dbcs",table:function(){return n(64).concat(n(105))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(64).concat(n(105))},gb18030:function(){return n(193)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(194)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(106)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(106).concat(n(195))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(t){t.exports=JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]')},function(t){t.exports=JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]')},function(t){t.exports=JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}')},function(t){t.exports=JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]')},function(t){t.exports=JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]')},function(t,e){},function(t,e){},function(t,e,n){var r=Array.prototype.slice;function i(t,e){return function(n){var i=arguments;return"-"==n&&(i=r.call(i)).splice(0,1,e),t.apply(null,i)}}e.readFile=i(n(108),"/dev/stdin"),e.readFileSync=i(n(110),"/dev/stdin"),e.writeFile=i(n(111),"/dev/stdout"),e.writeFileSync=i(n(113),"/dev/stdout")},function(t,e,n){"use strict";e.__esModule=!0;var r=n(200),i=n(204),o=FormData;function a(t,e,n){var o,a=new XMLHttpRequest;if("string"!=typeof t)throw new TypeError("The method must be a string.");if(e&&"object"==typeof e&&(e=e.href),"string"!=typeof e)throw new TypeError("The URL/path must be a string.");if(null==n&&(n={}),"object"!=typeof n)throw new TypeError("Options must be an object (or null).");t=t.toUpperCase(),n.headers=n.headers||{};var s=!(!(o=/^([\w-]+:)?\/\/([^\/]+)/.exec(e))||o[2]==location.host);for(var u in s||(n.headers["X-Requested-With"]="XMLHttpRequest"),n.qs&&(e=r.default(e,n.qs)),n.json&&(n.body=JSON.stringify(n.json),n.headers["content-type"]="application/json"),n.form&&(n.body=n.form),a.open(t,e,!1),n.headers)a.setRequestHeader(u.toLowerCase(),""+n.headers[u]);a.send(n.body?n.body:null);var c={};return a.getAllResponseHeaders().split("\r\n").forEach(function(t){var e=t.split(":");e.length>1&&(c[e[0].toLowerCase()]=e.slice(1).join(":").trim())}),new i(a.status,c,a.responseText,e)}e.FormData=o,e.default=a,t.exports=a,t.exports.default=a,t.exports.FormData=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(201);e.default=function(t,e){var n=t.split("?"),i=n[0],o=n[1],a=(o||"").split("#")[0],s=o&&o.split("#").length>1?"#"+o.split("#")[1]:"",u=r.parse(a);for(var c in e)u[c]=e[c];return""!==(a=r.stringify(u))&&(a="?"+a),i+a+s}},function(t,e,n){"use strict";var r=n(202),i=n(203),o=n(114);t.exports={formats:o,parse:i,stringify:r}},function(t,e,n){"use strict";var r=n(65),i=n(114),o=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Array.isArray,u=Array.prototype.push,c=function(t,e){u.apply(t,s(e)?e:[e])},l=Date.prototype.toISOString,f=i.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,format:f,formatter:i.formatters[f],indices:!1,serializeDate:function(t){return l.call(t)},skipNulls:!1,strictNullHandling:!1},h=function t(e,n,i,o,a,u,l,f,h,d,g,y,m){var v,_=e;if("function"==typeof l?_=l(n,_):_ instanceof Date?_=d(_):"comma"===i&&s(_)&&(_=_.join(",")),null===_){if(o)return u&&!y?u(n,p.encoder,m):n;_=""}if("string"==typeof(v=_)||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v||r.isBuffer(_))return u?[g(y?n:u(n,p.encoder,m))+"="+g(u(_,p.encoder,m))]:[g(n)+"="+g(String(_))];var b,x=[];if(void 0===_)return x;if(s(l))b=l;else{var S=Object.keys(_);b=f?S.sort(f):S}for(var w=0;w<b.length;++w){var E=b[w];a&&null===_[E]||(s(_)?c(x,t(_[E],"function"==typeof i?i(n,E):n,i,o,a,u,l,f,h,d,g,y,m)):c(x,t(_[E],n+(h?"."+E:"["+E+"]"),i,o,a,u,l,f,h,d,g,y,m)))}return x};t.exports=function(t,e){var n,r=t,u=function(t){if(!t)return p;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||p.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(void 0!==t.format){if(!o.call(i.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r=i.formatters[n],a=p.filter;return("function"==typeof t.filter||s(t.filter))&&(a=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===t.allowDots?p.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:p.charsetSentinel,delimiter:void 0===t.delimiter?p.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:p.encode,encoder:"function"==typeof t.encoder?t.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:p.encodeValuesOnly,filter:a,formatter:r,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:p.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:p.strictNullHandling}}(e);"function"==typeof u.filter?r=(0,u.filter)("",r):s(u.filter)&&(n=u.filter);var l,f=[];if("object"!=typeof r||null===r)return"";l=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var d=a[l];n||(n=Object.keys(r)),u.sort&&n.sort(u.sort);for(var g=0;g<n.length;++g){var y=n[g];u.skipNulls&&null===r[y]||c(f,h(r[y],y,d,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var m=f.join(u.delimiter),v=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),m.length>0?v+m:""}},function(t,e,n){"use strict";var r=n(65),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},s=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(r),s=a?r.slice(0,a.index):r,u=[];if(s){if(!n.plainObjects&&i.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var c=0;n.depth>0&&null!==(a=o.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,i=t.length-1;i>=0;--i){var o,a=t[i];if("[]"===a&&n.parseArrays)o=[].concat(r);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);n.parseArrays||""!==s?!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[])[u]=r:o[s]=r:o={0:r}}r=o}return r}(u,e,n)}};t.exports=function(t,e){var n=function(t){if(!t)return o;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?o.charset:t.charset;return{allowDots:void 0===t.allowDots?o.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:o.comma,decoder:"function"==typeof t.decoder?t.decoder:o.decoder,delimiter:"string"==typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:o.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:o.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling}}(e);if(""===t||null==t)return n.plainObjects?Object.create(null):{};for(var u="string"==typeof t?function(t,e){var n,s={},u=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,c=e.parameterLimit===1/0?void 0:e.parameterLimit,l=u.split(e.delimiter,c),f=-1,p=e.charset;if(e.charsetSentinel)for(n=0;n<l.length;++n)0===l[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===l[n]?p="utf-8":"utf8=%26%2310003%3B"===l[n]&&(p="iso-8859-1"),f=n,n=l.length);for(n=0;n<l.length;++n)if(n!==f){var h,d,g=l[n],y=g.indexOf("]="),m=-1===y?g.indexOf("="):y+1;-1===m?(h=e.decoder(g,o.decoder,p),d=e.strictNullHandling?null:""):(h=e.decoder(g.slice(0,m),o.decoder,p),d=e.decoder(g.slice(m+1),o.decoder,p)),d&&e.interpretNumericEntities&&"iso-8859-1"===p&&(d=a(d)),d&&e.comma&&d.indexOf(",")>-1&&(d=d.split(",")),i.call(s,h)?s[h]=r.combine(s[h],d):s[h]=d}return s}(t,n):t,c=n.plainObjects?Object.create(null):{},l=Object.keys(u),f=0;f<l.length;++f){var p=l[f],h=s(p,u[p],n);c=r.merge(c,h,n)}return r.compact(c)}},function(t,e,n){"use strict";var r=function(){function t(t,e,n,r){if("number"!=typeof t)throw new TypeError("statusCode must be a number but was "+typeof t);if(null===e)throw new TypeError("headers cannot be null");if("object"!=typeof e)throw new TypeError("headers must be an object but was "+typeof e);this.statusCode=t;var i={};for(var o in e)i[o.toLowerCase()]=e[o];this.headers=i,this.body=n,this.url=r}return t.prototype.isError=function(){return 0===this.statusCode||this.statusCode>=400},t.prototype.getBody=function(t){var e;if(0===this.statusCode)throw(e=new Error("This request to "+this.url+" resulted in a status code of 0. This usually indicates some kind of network error in a browser (e.g. CORS not being set up or the DNS failing to resolve):\n"+this.body.toString())).statusCode=this.statusCode,e.headers=this.headers,e.body=this.body,e.url=this.url,e;if(this.statusCode>=300)throw(e=new Error("Server responded to "+this.url+" with status code "+this.statusCode+":\n"+this.body.toString())).statusCode=this.statusCode,e.headers=this.headers,e.body=this.body,e.url=this.url,e;return t&&"string"!=typeof this.body?this.body.toString(t):this.body},t}();t.exports=r},function(t,e,n){"use strict";var r=n(2),i=n(72).indexOf,o=n(45),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,u=o("indexOf");r({target:"Array",proto:!0,forced:s||u},{indexOf:function(t){return s?a.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){n(2)({target:"Array",stat:!0},{isArray:n(41)})},function(t,e,n){"use strict";var r=n(2),i=n(73),o=n(23),a=n(19),s=n(17),u=n(61),c=n(82),l=n(44),f=Math.max,p=Math.min;r({target:"Array",proto:!0,forced:!l("splice")},{splice:function(t,e){var n,r,l,h,d,g,y=s(this),m=a(y.length),v=i(t,m),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=m-v):(n=_-2,r=p(f(o(e),0),m-v)),m+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=u(y,r),h=0;h<r;h++)(d=v+h)in y&&c(l,h,y[d]);if(l.length=r,n<r){for(h=v;h<m-r;h++)g=h+n,(d=h+r)in y?y[g]=y[d]:delete y[g];for(h=m;h>m-r+n;h--)delete y[h-1]}else if(n>r)for(h=m-r;h>v;h--)g=h+n-1,(d=h+r-1)in y?y[g]=y[d]:delete y[g];for(h=0;h<n;h++)y[h+v]=arguments[h+2];return y.length=m-r+n,l}})},function(t,e,n){"use strict";var r=n(2),i=n(23),o=n(209),a=n(210),s=n(5),u=1..toFixed,c=Math.floor,l=function(t,e,n){return 0===e?n:e%2==1?l(t,e-1,n*t):l(t*t,e/2,n)};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s(function(){u.call({})})},{toFixed:function(t){var e,n,r,s,u=o(this),f=i(t),p=[0,0,0,0,0,0],h="",d="0",g=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*p[n],p[n]=r%1e7,r=c(r/1e7)},y=function(t){for(var e=6,n=0;--e>=0;)n+=p[e],p[e]=c(n/t),n=n%t*1e7},m=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==p[t]){var n=String(p[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(h="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*l(2,69,1))-69)<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,(e=52-e)>0){for(g(0,n),r=f;r>=7;)g(1e7,0),r-=7;for(g(l(10,r,1),0),r=e-1;r>=23;)y(1<<23),r-=23;y(1<<r),g(1,1),y(2),d=m()}else g(0,n),g(1<<-e,0),d=m()+a.call("0",f);return d=f>0?h+((s=d.length)<=f?"0."+a.call("0",f-s)+d:d.slice(0,s-f)+"."+d.slice(s-f)):h+d}})},function(t,e,n){var r=n(16);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},function(t,e,n){"use strict";var r=n(23),i=n(18);t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";var r=n(2),i=n(212);r({target:"String",proto:!0,forced:n(213)("sub")},{sub:function(){return i(this,"sub","","")}})},function(t,e,n){var r=n(18),i=/"/g;t.exports=function(t,e,n,o){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},function(t,e,n){var r=n(5);t.exports=function(t){return r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})}},function(t,e,n){"use strict";n.r(e);class r{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=this.ids.length=this.values.length=0}push(t,e){this.ids.push(t),this.values.push(e);let n=this.length++;for(;n>0;){const t=n-1>>1,r=this.values[t];if(e>=r)break;this.ids[n]=this.ids[t],this.values[n]=r,n=t}this.ids[n]=t,this.values[n]=e}pop(){if(0===this.length)return;const t=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],e=this.values[0]=this.values[this.length],n=this.length>>1;let r=0;for(;r<n;){let t=1+(r<<1);const n=t+1;let i=this.ids[t],o=this.values[t];const a=this.values[n];if(n<this.length&&a<o&&(t=n,i=this.ids[n],o=a),o>=e)break;this.ids[r]=i,this.values[r]=o,r=t}this.ids[r]=t,this.values[r]=e}return this.ids.pop(),this.values.pop(),t}peek(){return this.ids[0]}peekValue(){return this.values[0]}}n.d(e,"default",function(){return a});const i=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],o=3;class a{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(251!==e)throw new Error("Data does not appear to be in a Flatbush format.");if(n>>4!==o)throw new Error(`Got v${n>>4} data when expected v${o}.`);const[r]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new a(s,r,i[15&n],t)}constructor(t,e=16,n=Float64Array,a){if(void 0===t)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535);let s=t,u=s;this._levelBounds=[4*s];do{u+=s=Math.ceil(s/this.nodeSize),this._levelBounds.push(4*u)}while(1!==s);this.ArrayType=n||Float64Array,this.IndexArrayType=u<16384?Uint16Array:Uint32Array;const c=i.indexOf(this.ArrayType),l=4*u*this.ArrayType.BYTES_PER_ELEMENT;if(c<0)throw new Error(`Unexpected typed array class: ${n}.`);a&&a instanceof ArrayBuffer?(this.data=a,this._boxes=new this.ArrayType(this.data,8,4*u),this._indices=new this.IndexArrayType(this.data,8+l,u),this._pos=4*u,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new ArrayBuffer(8+l+u*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,4*u),this._indices=new this.IndexArrayType(this.data,8+l,u),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(o<<4)+c]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t),this._queue=new r}add(t,e,n,r){const i=this._pos>>2;this._indices[i]=i,this._boxes[this._pos++]=t,this._boxes[this._pos++]=e,this._boxes[this._pos++]=n,this._boxes[this._pos++]=r,t<this.minX&&(this.minX=t),e<this.minY&&(this.minY=e),n>this.maxX&&(this.maxX=n),r>this.maxY&&(this.maxY=r)}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this.maxX-this.minX,e=this.maxY-this.minY,n=new Uint32Array(this.numItems);for(let r=0;r<this.numItems;r++){let i=4*r;const o=this._boxes[i++],a=this._boxes[i++],s=this._boxes[i++],u=this._boxes[i++],c=Math.floor(65535*((o+s)/2-this.minX)/t),f=Math.floor(65535*((a+u)/2-this.minY)/e);n[r]=l(c,f)}!function t(e,n,r,i,o){if(i>=o)return;const a=e[i+o>>1];let s=i-1;let u=o+1;for(;;){do{s++}while(e[s]<a);do{u--}while(e[u]>a);if(s>=u)break;c(e,n,r,s,u)}t(e,n,r,i,u);t(e,n,r,u+1,o)}(n,this._boxes,this._indices,0,this.numItems-1);for(let t=0,e=0;t<this._levelBounds.length-1;t++){const n=this._levelBounds[t];for(;e<n;){let t=1/0,r=1/0,i=-1/0,o=-1/0;const a=e;for(let a=0;a<this.nodeSize&&e<n;a++){const n=this._boxes[e++],a=this._boxes[e++],s=this._boxes[e++],u=this._boxes[e++];n<t&&(t=n),a<r&&(r=a),s>i&&(i=s),u>o&&(o=u)}this._indices[this._pos>>2]=a,this._boxes[this._pos++]=t,this._boxes[this._pos++]=r,this._boxes[this._pos++]=i,this._boxes[this._pos++]=o}}}search(t,e,n,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4,a=this._levelBounds.length-1;const s=[],u=[];for(;void 0!==o;){const c=Math.min(o+4*this.nodeSize,this._levelBounds[a]);for(let l=o;l<c;l+=4){const c=0|this._indices[l>>2];n<this._boxes[l]||(r<this._boxes[l+1]||t>this._boxes[l+2]||e>this._boxes[l+3]||(o<4*this.numItems?(void 0===i||i(c))&&u.push(c):(s.push(c),s.push(a-1))))}a=s.pop(),o=s.pop()}return u}neighbors(t,e,n=1/0,r=1/0,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const a=this._queue,c=[],l=r*r;for(;void 0!==o;){const r=Math.min(o+4*this.nodeSize,u(o,this._levelBounds));for(let n=o;n<r;n+=4){const r=0|this._indices[n>>2],u=s(t,this._boxes[n],this._boxes[n+2]),c=s(e,this._boxes[n+1],this._boxes[n+3]),l=u*u+c*c;o<4*this.numItems?(void 0===i||i(r))&&a.push(-r-1,l):a.push(r,l)}for(;a.length&&a.peek()<0;){if(a.peekValue()>l)return a.clear(),c;if(c.push(-a.pop()-1),c.length===n)return a.clear(),c}o=a.pop()}return a.clear(),c}}function s(t,e,n){return t<e?e-t:t<=n?0:t-n}function u(t,e){let n=0,r=e.length-1;for(;n<r;){const i=n+r>>1;e[i]>t?r=i:n=i+1}return e[n]}function c(t,e,n,r,i){const o=t[r];t[r]=t[i],t[i]=o;const a=4*r,s=4*i,u=e[a],c=e[a+1],l=e[a+2],f=e[a+3];e[a]=e[s],e[a+1]=e[s+1],e[a+2]=e[s+2],e[a+3]=e[s+3],e[s]=u,e[s+1]=c,e[s+2]=l,e[s+3]=f;const p=n[r];n[r]=n[i],n[i]=p}function l(t,e){let n=t^e,r=65535^n,i=65535^(t|e),o=t&(65535^e),a=n|r>>1,s=n>>1^n,u=i>>1^r&o>>1^i,c=n&i>>1^o>>1^o;s=(n=a)&(r=s)>>2^r&(n^r)>>2,u^=n&(i=u)>>2^r&(o=c)>>2,c^=r&i>>2^(n^r)&o>>2,s=(n=a=n&n>>2^r&r>>2)&(r=s)>>4^r&(n^r)>>4,u^=n&(i=u)>>4^r&(o=c)>>4,c^=r&i>>4^(n^r)&o>>4,u^=(n=a=n&n>>4^r&r>>4)&(i=u)>>8^(r=s)&(o=c)>>8;let l=t^e,f=(r=(c^=r&i>>8^(n^r)&o>>8)^c>>1)|65535^(l|(n=u^u>>1));return((f=1431655765&((f=858993459&((f=252645135&((f=16711935&(f|f<<8))|f<<4))|f<<2))|f<<1))<<1|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&(l|l<<8))|l<<4))|l<<2))|l<<1)))>>>0}}]);
//# sourceMappingURL=maplat_tin.js.map